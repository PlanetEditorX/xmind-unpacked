(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[8825],{62154:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n(23645),o=n.n(i),a=n(61667),l=n.n(a),r=n(16884),d=o()((function(e){return e[1]})),c=l()(r.Z);d.push([e.id,".selection-area {\n  background: var(--uk-outliner-selection-area-background, rgba(0, 0, 255, 0.1));\n  border-radius: 0.1em;\n  border: 0.05em solid var(--uk-outliner-selection-area-border, rgba(0, 0, 255, 0.2));\n}\n.grabbing {\n  cursor: move !important;\n  /* fallback: no `url()` support or images disabled */\n  cursor: -webkit-grabbing !important;\n  /* Chrome 1-21, Safari 4+ */\n  cursor: -moz-grabbing !important;\n  /* Firefox 1.5-26 */\n  cursor: grabbing !important;\n  /* W3C standards syntax, should come least */\n}\nhtml[color-scheme='light'] {\n  --uk--outliner-topic-title-color: #000000e6;\n  --uk-outliner-editing-background: #fafafb;\n  --uk-outliner-selected-background: #e1ebff;\n  --uk-outliner-default-background: #fff;\n  --uk-outliner-icon-color: #000;\n  --uk-outliner-topic-dragging-opacity: 0.5;\n  --uk-outliner-topic-dot-hover: #f6f6f7;\n  --uk-outliner-topic-label-background: rgba(255, 255, 255, 0.7);\n  --uk-outliner-topic-label-border-color: rgba(0, 0, 0, 0.1);\n  --uk-outliner-topic-label-border-color-hover: rgba(0, 0, 0, 0.5);\n  --uk-outliner-topic-label-text-color: black;\n  --uk-outliner-topic-link-background: rgba(0, 0, 0, 0.04);\n  --uk-outliner-topic-link-background-hover: rgba(0, 0, 0, 0.08);\n  --uk-outliner-topic-link-color: rgba(0, 0, 0, 0.7);\n  --uk-outliner-topic-link-color-hover: #0515ff;\n  --uk-outliner-topic-note-toolbar-background: #fff;\n  --uk-outliner-topic-note-toolbar-button-color-hover: rgba(0, 0, 0, 0.05);\n  --uk-outliner-topic-note-container-color: rgba(0, 0, 0, 0.5);\n  --uk-outliner-topic-folded-color: #000000b3;\n  --uk-outliner-topic-folded-background: rgba(0, 0, 0, 0.05);\n  --uk-outliner-selection-area-background: rgba(0, 0, 255, 0.1);\n  --uk-outliner-selection-area-border: rgba(0, 0, 255, 0.2);\n}\n@media only screen {\n  html[color-scheme='dark'] {\n    --uk--outliner-topic-title-color: rgba(255, 255, 255, 0.9);\n    --uk-outliner-editing-background: #27292a;\n    --uk-outliner-selected-background: rgba(54, 54, 54, 0.9);\n    --uk-outliner-default-background: #1e2021;\n    --uk-outliner-icon-color: #ffffff;\n    --uk-outliner-topic-dragging-opacity: 1/9;\n    --uk-outliner-topic-dot-hover: #323537;\n    --uk-outliner-topic-label-background: rgba(255, 255, 255, 0.05);\n    --uk-outliner-topic-label-border-color: rgba(255, 255, 255, 0.15);\n    --uk-outliner-topic-label-border-color-hover: rgba(255, 255, 255, 0.5);\n    --uk-outliner-topic-label-text-color: rgba(255, 255, 255, 0.7);\n    --uk-outliner-topic-link-background: rgba(255, 255, 255, 0.04);\n    --uk-outliner-topic-link-background-hover: rgba(255, 255, 255, 0.04);\n    --uk-outliner-topic-link-color: rgba(255, 255, 255, 0.6);\n    --uk-outliner-topic-link-color-hover: #69cbfb;\n    --uk-outliner-topic-note-toolbar-background: #343434;\n    --uk-outliner-topic-note-toolbar-button-color-hover: #444444;\n    --uk-outliner-topic-note-container-color: rgba(255, 255, 255, 0.5);\n    --uk-outliner-topic-folded-color: rgba(255, 255, 255, 0.7);\n    --uk-outliner-topic-folded-background: rgba(255, 255, 255, 0.16);\n    --uk-outliner-selection-area-background: rgba(148, 200, 249, 0.2);\n    --uk-outliner-selection-area-border: rgba(196, 225, 252, 0.2);\n  }\n  html[color-scheme='dark'] .outliner-topic {\n    background-image: url("+c+");\n  }\n  html[color-scheme='dark'] .outliner-topic-note .ql-editor {\n    color: rgba(255, 255, 255, 0.4);\n    caret-color: #ffffff !important;\n  }\n  html[color-scheme='dark'] .outliner-topic-note .ql-editor.ql-blank::before {\n    color: rgba(255, 255, 255, 0.2);\n  }\n  html[color-scheme='dark'] .outliner-topic-note-container > trix-editor::before {\n    color: rgba(255, 255, 255, 0.3);\n  }\n  html[color-scheme='dark'] .outliner-topic-equation.is-image-valid,\n  html[color-scheme='dark'] .outliner-topic-equation-editor-preview-container.is-image-valid {\n    filter: invert(1);\n  }\n}\n/*!\n * Quill Editor v1.3.6\n * https://quilljs.com/\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */\n.ql-container {\n  box-sizing: border-box;\n  font-family: Helvetica, Arial, sans-serif;\n  font-size: 13px;\n  height: 100%;\n  margin: 0px;\n  position: relative;\n}\n.ql-container.ql-disabled .ql-tooltip {\n  visibility: hidden;\n}\n.ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {\n  pointer-events: none;\n}\n.ql-clipboard {\n  left: -100000px;\n  height: 1px;\n  overflow-y: hidden;\n  position: absolute;\n  top: 50%;\n}\n.ql-clipboard p {\n  margin: 0;\n  padding: 0;\n}\n.ql-editor {\n  box-sizing: border-box;\n  line-height: 1.42;\n  height: 100%;\n  outline: none;\n  overflow-y: auto;\n  padding: 12px 15px;\n  tab-size: 4;\n  -moz-tab-size: 4;\n  text-align: left;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.ql-editor > * {\n  cursor: text;\n}\n.ql-editor p,\n.ql-editor ol,\n.ql-editor ul,\n.ql-editor pre,\n.ql-editor blockquote,\n.ql-editor h1,\n.ql-editor h2,\n.ql-editor h3,\n.ql-editor h4,\n.ql-editor h5,\n.ql-editor h6 {\n  margin: 0;\n  padding: 0;\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol,\n.ql-editor ul {\n  padding-left: 1.5em;\n}\n.ql-editor ol > li,\n.ql-editor ul > li {\n  list-style-type: none;\n}\n.ql-editor ul > li::before {\n  content: '\\2022';\n}\n.ql-editor ul[data-checked='true'],\n.ql-editor ul[data-checked='false'] {\n  pointer-events: none;\n}\n.ql-editor ul[data-checked='true'] > li *,\n.ql-editor ul[data-checked='false'] > li * {\n  pointer-events: all;\n}\n.ql-editor ul[data-checked='true'] > li::before,\n.ql-editor ul[data-checked='false'] > li::before {\n  color: #777;\n  cursor: pointer;\n  pointer-events: all;\n}\n.ql-editor ul[data-checked='true'] > li::before {\n  content: '\\2611';\n}\n.ql-editor ul[data-checked='false'] > li::before {\n  content: '\\2610';\n}\n.ql-editor li::before {\n  display: inline-block;\n  white-space: nowrap;\n  width: 1.2em;\n}\n.ql-editor li:not(.ql-direction-rtl)::before {\n  margin-left: -1.5em;\n  margin-right: 0.3em;\n  text-align: right;\n}\n.ql-editor li.ql-direction-rtl::before {\n  margin-left: 0.3em;\n  margin-right: -1.5em;\n}\n.ql-editor ol li:not(.ql-direction-rtl),\n.ql-editor ul li:not(.ql-direction-rtl) {\n  padding-left: 1.5em;\n}\n.ql-editor ol li.ql-direction-rtl,\n.ql-editor ul li.ql-direction-rtl {\n  padding-right: 1.5em;\n}\n.ql-editor ol li {\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  counter-increment: list-0;\n}\n.ql-editor ol li:before {\n  content: counter(list-0, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-increment: list-1;\n}\n.ql-editor ol li.ql-indent-1:before {\n  content: counter(list-1, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-increment: list-2;\n}\n.ql-editor ol li.ql-indent-2:before {\n  content: counter(list-2, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-increment: list-3;\n}\n.ql-editor ol li.ql-indent-3:before {\n  content: counter(list-3, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-increment: list-4;\n}\n.ql-editor ol li.ql-indent-4:before {\n  content: counter(list-4, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-reset: list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-increment: list-5;\n}\n.ql-editor ol li.ql-indent-5:before {\n  content: counter(list-5, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-reset: list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-increment: list-6;\n}\n.ql-editor ol li.ql-indent-6:before {\n  content: counter(list-6, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-reset: list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-increment: list-7;\n}\n.ql-editor ol li.ql-indent-7:before {\n  content: counter(list-7, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-reset: list-8 list-9;\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-increment: list-8;\n}\n.ql-editor ol li.ql-indent-8:before {\n  content: counter(list-8, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-reset: list-9;\n}\n.ql-editor ol li.ql-indent-9 {\n  counter-increment: list-9;\n}\n.ql-editor ol li.ql-indent-9:before {\n  content: counter(list-9, decimal) '. ';\n}\n.ql-editor .ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 3em;\n}\n.ql-editor li.ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 4.5em;\n}\n.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 3em;\n}\n.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 4.5em;\n}\n.ql-editor .ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 6em;\n}\n.ql-editor li.ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 7.5em;\n}\n.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 6em;\n}\n.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 7.5em;\n}\n.ql-editor .ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 9em;\n}\n.ql-editor li.ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 10.5em;\n}\n.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 9em;\n}\n.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 10.5em;\n}\n.ql-editor .ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 12em;\n}\n.ql-editor li.ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 13.5em;\n}\n.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 12em;\n}\n.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 13.5em;\n}\n.ql-editor .ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 15em;\n}\n.ql-editor li.ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 16.5em;\n}\n.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 15em;\n}\n.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 16.5em;\n}\n.ql-editor .ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 18em;\n}\n.ql-editor li.ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 19.5em;\n}\n.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 18em;\n}\n.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 19.5em;\n}\n.ql-editor .ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 21em;\n}\n.ql-editor li.ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 22.5em;\n}\n.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 21em;\n}\n.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 22.5em;\n}\n.ql-editor .ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 24em;\n}\n.ql-editor li.ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 25.5em;\n}\n.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 24em;\n}\n.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 25.5em;\n}\n.ql-editor .ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 27em;\n}\n.ql-editor li.ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 28.5em;\n}\n.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 27em;\n}\n.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 28.5em;\n}\n.ql-editor .ql-video {\n  display: block;\n  max-width: 100%;\n}\n.ql-editor .ql-video.ql-align-center {\n  margin: 0 auto;\n}\n.ql-editor .ql-video.ql-align-right {\n  margin: 0 0 0 auto;\n}\n.ql-editor .ql-bg-black {\n  background-color: #000;\n}\n.ql-editor .ql-bg-red {\n  background-color: #e60000;\n}\n.ql-editor .ql-bg-orange {\n  background-color: #f90;\n}\n.ql-editor .ql-bg-yellow {\n  background-color: #ff0;\n}\n.ql-editor .ql-bg-green {\n  background-color: #008a00;\n}\n.ql-editor .ql-bg-blue {\n  background-color: #06c;\n}\n.ql-editor .ql-bg-purple {\n  background-color: #93f;\n}\n.ql-editor .ql-color-white {\n  color: #fff;\n}\n.ql-editor .ql-color-red {\n  color: #e60000;\n}\n.ql-editor .ql-color-orange {\n  color: #f90;\n}\n.ql-editor .ql-color-yellow {\n  color: #ff0;\n}\n.ql-editor .ql-color-green {\n  color: #008a00;\n}\n.ql-editor .ql-color-blue {\n  color: #06c;\n}\n.ql-editor .ql-color-purple {\n  color: #93f;\n}\n.ql-editor .ql-font-serif {\n  font-family: Georgia, Times New Roman, serif;\n}\n.ql-editor .ql-font-monospace {\n  font-family: Monaco, Courier New, monospace;\n}\n.ql-editor .ql-size-small {\n  font-size: 0.75em;\n}\n.ql-editor .ql-size-large {\n  font-size: 1.5em;\n}\n.ql-editor .ql-size-huge {\n  font-size: 2.5em;\n}\n.ql-editor .ql-direction-rtl {\n  direction: rtl;\n  text-align: inherit;\n}\n.ql-editor .ql-align-center {\n  text-align: center;\n}\n.ql-editor .ql-align-justify {\n  text-align: justify;\n}\n.ql-editor .ql-align-right {\n  text-align: right;\n}\n.ql-editor.ql-blank::before {\n  color: rgba(0, 0, 0, 0.6);\n  content: attr(data-placeholder);\n  font-style: italic;\n  left: 15px;\n  pointer-events: none;\n  position: absolute;\n  right: 15px;\n}\n",""]);const s=d},55601:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-central-topic[data-v-9c6aca94] {\n  margin: 100px auto 24px auto;\n  max-width: 650px;\n  padding-left: 22px;\n}\n.outliner-central-topic .outliner-topic-title[data-v-9c6aca94] {\n  display: inline-block;\n  min-height: 30px;\n  line-height: 48px;\n  font-size: 40px;\n  font-weight: bold;\n  outline: none;\n  white-space: pre-wrap;\n  cursor: text;\n  color: var(--uk--outliner-topic-title-color, #000000e6);\n}\n@media only screen {\n.outliner-central-topic[data-v-9c6aca94]::before {\n    content: '';\n    position: absolute;\n    height: 100%;\n    width: 0;\n    left: 0;\n    top: 0;\n    z-index: -1;\n    background-color: var(--uk-outliner-editing-background, #fafafb);\n}\n.outliner-central-topic:focus-within .outliner-topic-title[data-v-9c6aca94],\n  .outliner-central-topic:focus-within .outliner-topic-inserts[data-v-9c6aca94],\n  .outliner-central-topic:focus-within .outliner-topic-note[data-v-9c6aca94],\n  .outliner-central-topic:focus-within .outliner-topic-marker-container[data-v-9c6aca94],\n  .outliner-topic-task-container .outliner-central-topic[data-v-9c6aca94]:focus-within {\n    background-color: var(--uk-outliner-editing-background, #fafafb);\n}\n.outliner-central-topic[data-v-9c6aca94]:focus-within::before {\n    width: 100%;\n    box-shadow: -1740px 0px 0px var(--uk-outliner-editing-background, #fafafb), -1280px 0px 0px var(--uk-outliner-editing-background, #fafafb), -640px 0px 0px var(--uk-outliner-editing-background, #fafafb), 640px 0px 0px var(--uk-outliner-editing-background, #fafafb), 1280px 0px 0px var(--uk-outliner-editing-background, #fafafb), 1740px 0px 0px var(--uk-outliner-editing-background, #fafafb);\n}\n}\n@media print {\n.outliner-central-topic[data-v-9c6aca94] {\n    margin-top: 0;\n}\n}\n",""]);const a=o},47889:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-container[data-v-ebbfae50] {\n  margin: 0 auto;\n  padding-bottom: 100px;\n  min-height: calc(100vh - 20px);\n  width: 650px;\n  list-style: none;\n  outline: none;\n  transform-origin: calc(50% - 390px) top;\n}\n.outliner-detached-topics-separator[data-v-ebbfae50] {\n  margin-top: 10px;\n  opacity: 0.3;\n  border-color: #000;\n}\n.outliner-topic-placeholder[data-v-ebbfae50] {\n  max-width: 650px;\n  margin: 0 auto;\n}\n@media print {\n.outliner-container[data-v-ebbfae50] {\n    width: 650px;\n    padding-bottom: 0;\n    transform: scale(1) !important;\n}\n}\n",""]);const a=o},31841:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-spinner[data-v-23cd6977] {\n  border-radius: 50%;\n  transform: translateZ(0);\n  width: 24px;\n  height: 24px;\n  box-shadow: inset 0 0 0 2px #949699;\n}\n.outliner-spinner[data-v-23cd6977]:before,\n.outliner-spinner[data-v-23cd6977]:after {\n  position: absolute;\n  content: '';\n  width: 13px;\n  height: 26px;\n  background: #fff;\n}\n.outliner-spinner[data-v-23cd6977]:before {\n  top: -1px;\n  left: -1px;\n  border-radius: 26px 0 0 26px;\n  transform-origin: 13px 13px;\n  animation: spinner-23cd6977 1s infinite ease 0.25s;\n}\n.outliner-spinner[data-v-23cd6977]:after {\n  border-radius: 50%;\n  border-radius: 0 26px 26px 0;\n  top: -1px;\n  left: 13px;\n  transform-origin: 0px 13px;\n  animation: spinner-23cd6977 1s infinite ease;\n}\nhtml[color-scheme='dark'] .outliner-spinner[data-v-23cd6977] {\n  box-shadow: inset 0 0 0 2px #a2a4a6;\n}\nhtml[color-scheme='dark'] .outliner-spinner[data-v-23cd6977]:before,\nhtml[color-scheme='dark'] .outliner-spinner[data-v-23cd6977]:after {\n  background: #1d1f20;\n}\n@keyframes spinner-23cd6977 {\n0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n}\n100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n}\n}\n",""]);const a=o},24425:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-tooltip[data-v-cfd364ee] {\n  background: var(--uk-popover-background, rgba(255, 255, 255, 0.7));\n  color: var(--uk-global-color, #27292a);\n  border-radius: 5px;\n  backdrop-filter: blur(30px);\n  filter: drop-shadow(0px 5px 20px rgba(0, 0, 0, 0.35));\n  padding: 8px 16px;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n  font-weight: normal;\n  width: max-content;\n}\n.outliner-tooltip[data-v-cfd364ee]::before {\n  content: ' ';\n  display: block;\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-color: var(--uk-popover-arrow-mask-border, rgba(232, 232, 232, 0));\n  border-width: 5px;\n  top: 100%;\n  left: calc(50%);\n  margin-left: -5px;\n  border-top-color: var(--uk-popover-background, rgba(255, 255, 255, 0.7));\n}\n",""]);const a=o},38618:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n(23645),o=n.n(i),a=n(61667),l=n.n(a),r=n(25581),d=o()((function(e){return e[1]})),c=l()(r.Z);d.push([e.id,".outliner-topic-audio-note[data-v-1fa1ed7a] {\n  display: inline-flex;\n  padding: 0 12px;\n  margin-bottom: 4px;\n  height: 24px;\n  line-height: 24px;\n  font-size: 14px;\n  border-radius: 12px;\n  color: var(--uk-outliner-topic-link-color, rgba(0, 0, 0, 0.7));\n  background: var(--uk-outliner-topic-link-background, rgba(0, 0, 0, 0.04));\n  cursor: pointer;\n}\n.outliner-topic-audio-note[data-v-1fa1ed7a]:hover {\n  color: var(--uk-outliner-topic-link-color-hover, #0515ff);\n  background: var(--uk-outliner-topic-link-background-hover, rgba(0, 0, 0, 0.08));\n}\n.outliner-topic-audio-note[data-v-1fa1ed7a]:hover::before {\n  background-color: var(--uk-outliner-topic-link-color-hover, #0515ff);\n}\n.outliner-topic-audio-note[data-v-1fa1ed7a]::before {\n  content: ' ';\n  width: 16px;\n  height: 24px;\n  margin-right: 4px;\n  box-sizing: border-box;\n  background-color: var(--uk-outliner-topic-link-color, rgba(0, 0, 0, 0.7));\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  mask-position: center;\n  -webkit-mask-image: url("+c+");\n  mask-image: url("+c+");\n}\n",""]);const s=d},99452:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-topic-equation-editor-title[data-v-36038317] {\n  opacity: 0.2;\n  font-size: 14px;\n  line-height: 14px;\n}\n.uk-textarea[data-v-36038317] {\n  height: 134px;\n  background-color: transparent;\n  font-family: SF Mono, Monaco, Consolas, Menlo, monospace;\n}\n.uk-textarea[data-v-36038317]:focus {\n  background-color: transparent;\n}\n.outliner-topic-equation-editor-preview-container[data-v-36038317] {\n  box-sizing: border-box;\n  margin-top: 10px;\n  height: 76px;\n  padding: 6px;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.02);\n}\n.equation-help[data-v-36038317] {\n  opacity: 0.3;\n}\n.equation-help[data-v-36038317]:hover {\n  opacity: 0.6;\n}\n",""]);const a=o},60757:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n(23645),o=n.n(i),a=n(61667),l=n.n(a),r=n(23052),d=o()((function(e){return e[1]})),c=l()(r.Z);d.push([e.id,".outliner-topic-equation-container[data-v-8295fd3a] {\n  clear: both;\n  position: relative;\n  box-sizing: content-box;\n  margin-bottom: 5px;\n  border-width: 1.5px;\n  border-style: solid;\n  border-color: transparent;\n  max-width: 650px;\n  padding: 3.5px;\n  line-height: 0;\n}\n.outliner-topic-equation-container.is-dragging[data-v-8295fd3a] {\n  opacity: 0.6;\n}\n.outliner-topic-equation-container.is-selected[data-v-8295fd3a] {\n  border-color: #057bff;\n}\n.outliner-topic-equation-container.is-selected .is-image-valid + .outliner-topic-equation-handler[data-v-8295fd3a] {\n  display: block;\n}\n.outliner-topic-equation-container .outliner-topic-equation-handler[data-v-8295fd3a] {\n  display: none;\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  z-index: 10;\n  right: -9px;\n  bottom: -9px;\n  cursor: pointer;\n  background-image: url("+c+");\n  background-size: 20px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n@media print {\n.outliner-topic-equation[data-v-8295fd3a] {\n    filter: invert(0);\n}\n}\n",""]);const s=d},75542:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n(23645),o=n.n(i),a=n(61667),l=n.n(a),r=n(23052),d=o()((function(e){return e[1]})),c=l()(r.Z);d.push([e.id,".outliner-topic-image[data-v-70581c3c] {\n  clear: both;\n  position: relative;\n  box-sizing: content-box;\n  margin-bottom: 4px;\n  border-width: 1.5px;\n  border-style: solid;\n  border-color: transparent;\n  max-width: 650px;\n  min-width: 64px;\n  padding: 3.5px;\n}\n.outliner-topic-image.is-dragging[data-v-70581c3c] {\n  opacity: 0.6;\n}\n.outliner-topic-image.is-selected[data-v-70581c3c] {\n  border-color: #057bff;\n}\n.outliner-topic-image.is-selected.is-image-valid .outliner-topic-image-handler[data-v-70581c3c] {\n  display: block;\n}\n.outliner-topic-image .outliner-topic-image-handler[data-v-70581c3c] {\n  display: none;\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  z-index: 10;\n  right: -9px;\n  bottom: -9px;\n  cursor: pointer;\n  background-image: url("+c+");\n  background-size: 20px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n",""]);const s=d},73107:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-topic-label-editor-content[data-v-721f091c] {\n  position: relative;\n  width: 100%;\n  height: 148px;\n  padding: 15px;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  box-sizing: border-box;\n}\n.outliner-topic-label-editor-title[data-v-721f091c] {\n  margin: 0;\n  margin-bottom: 12px;\n}\n.outliner-topic-label-editor-textarea[data-v-721f091c] {\n  width: 100%;\n  min-height: 90px;\n  font-size: 13px;\n  font-family: inherit;\n  background: inherit;\n  color: inherit;\n  outline: none;\n  border: none;\n  resize: none;\n}\n.uk-lang-it-IT .auto-sort-label[data-v-721f091c] {\n  font-size: 11px;\n}\n",""]);const a=o},25113:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-topic-label-container[data-v-7ddad63c] {\n  margin-bottom: 4px;\n  margin-right: 2px;\n}\n.outliner-topic-label[data-v-7ddad63c] {\n  display: inline-block;\n  min-width: 26px;\n  max-width: 124px;\n  padding: 2px 8px;\n  margin-right: 8px;\n  font-size: 12px;\n  line-height: 16px;\n  border: solid 1px var(--uk-outliner-topic-label-border-color, rgba(0, 0, 0, 0.1));\n  background-color: var(--uk-outliner-topic-label-background, rgba(255, 255, 255, 0.7));\n  color: var(--uk-outliner-topic-label-text-color, black);\n  border-radius: 11px;\n  text-align: center;\n}\n.outliner-topic-label[data-v-7ddad63c]:hover {\n  border-color: var(--uk-outliner-topic-label-border-color-hover, rgba(0, 0, 0, 0.5));\n}\n",""]);const a=o},8264:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var i=n(23645),o=n.n(i),a=n(61667),l=n.n(a),r=n(39904),d=n(8056),c=n(99845),s=n(57298),u=o()((function(e){return e[1]})),p=l()(r.Z),g=l()(d.Z),h=l()(c.Z),v=l()(s.Z);u.push([e.id,".outliner-topic-link-container[data-v-d413e324] {\n  margin-bottom: 4px;\n}\n.outliner-topic-link[data-v-d413e324] {\n  display: inline-flex;\n  padding: 0 12px;\n  height: 24px;\n  line-height: 24px;\n  font-size: 14px;\n  border-radius: 12px;\n  color: var(--uk-outliner-topic-link-color, rgba(0, 0, 0, 0.7));\n  background: var(--uk-outliner-topic-link-background, rgba(0, 0, 0, 0.04));\n  cursor: pointer;\n}\n.outliner-topic-link[data-v-d413e324]:hover {\n  color: var(--uk-outliner-topic-link-color-hover, #0515ff);\n  background: var(--uk-outliner-topic-link-background-hover, rgba(0, 0, 0, 0.08));\n  text-decoration: underline;\n}\n.outliner-topic-link[data-v-d413e324]:hover::before {\n  background-color: var(--uk-outliner-topic-link-color-hover, #0515ff);\n}\n.outliner-topic-link[data-v-d413e324]::before {\n  content: ' ';\n  width: 16px;\n  height: 24px;\n  margin-right: 4px;\n  box-sizing: border-box;\n  background-color: var(--uk-outliner-topic-link-color, rgba(0, 0, 0, 0.7));\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  mask-position: center;\n}\n.outliner-topic-link.is-webpage[data-v-d413e324] {\n  text-decoration: underline;\n}\n.outliner-topic-link.is-webpage[data-v-d413e324]::before {\n  -webkit-mask-image: url("+p+");\n  mask-image: url("+p+");\n}\n.outliner-topic-link.is-topic[data-v-d413e324]::before {\n  -webkit-mask-image: url("+g+");\n  mask-image: url("+g+");\n}\n.outliner-topic-link.is-local-file[data-v-d413e324]::before {\n  -webkit-mask-image: url("+h+");\n  mask-image: url("+h+");\n}\n.outliner-topic-link.is-local-folder[data-v-d413e324]::before {\n  -webkit-mask-image: url("+v+");\n  mask-image: url("+v+");\n}\n.outliner-topic-link-text[data-v-d413e324] {\n  max-width: 250px;\n}\n",""]);const m=u},80203:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-topic-marker-container[data-v-51d6aece] {\n  background: var(--uk-outliner-default-background, #fff);\n}\n.outliner-topic-marker[data-v-51d6aece] {\n  margin-right: 2px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n}\n.outliner-topic-marker[data-v-51d6aece]:hover {\n  border-color: #2ebdff;\n}\n.outliner-topic-marker-item[data-v-51d6aece] {\n  display: inline-block;\n  vertical-align: top;\n}\n",""]);const a=o},8725:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var i=n(23645),o=n.n(i),a=n(61667),l=n.n(a),r=n(64821),d=n(29547),c=n(63846),s=n(71287),u=n(43427),p=n(18234),g=o()((function(e){return e[1]})),h=l()(r.Z),v=l()(d.Z),m=l()(c.Z),f=l()(s.Z),b=l()(u.Z),I=l()(p.Z);g.push([e.id,".outliner-topic-note[data-v-516a1b72] {\n  margin-left: 24px;\n  padding-bottom: 4px;\n  clear: both;\n  background: var(--uk-outliner-default-background, #fff);\n}\n.outliner-topic-note-container[data-v-516a1b72] {\n  line-height: 1.4;\n  font-size: 16px;\n  color: var(--uk-outliner-topic-note-container-color, rgba(0, 0, 0, 0.5));\n  cursor: text;\n  outline: none;\n}\n.outliner-topic-note-container trix-editor em[data-v-516a1b72],\n.outliner-topic-note-container trix-editor strong[data-v-516a1b72],\n.outliner-topic-note-container trix-editor u[data-v-516a1b72] {\n  color: var(--uk-outliner-topic-note-container-color, rgba(0, 0, 0, 0.5));\n}\n.outliner-topic-note-toolbar[data-v-516a1b72] {\n  display: flex;\n  position: absolute;\n  z-index: 999;\n  padding: 0px 13px;\n  background-color: var(--uk-outliner-topic-note-toolbar-background, #fff);\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n  border-radius: 4px;\n  top: -27px;\n}\n.outliner-topic-note-toolbar button[data-v-516a1b72] {\n  background-color: inherit;\n  color: inherit;\n  border: none;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n  position: relative;\n  width: 16px;\n  height: 16px;\n  box-sizing: content-box;\n  margin-right: 2px;\n  padding: 4px;\n  border-radius: 2px;\n}\n.outliner-topic-note-toolbar button[data-v-516a1b72]::before {\n  content: ' ';\n  width: 16px;\n  height: 16px;\n  margin: 4px;\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  mask-position: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: var(--uk-outliner-icon-color, #000);\n}\n.outliner-topic-note-toolbar button[data-v-516a1b72]:last-of-type {\n  margin-right: 0;\n}\n.outliner-topic-note-toolbar button[data-v-516a1b72]:hover {\n  background-color: var(--uk-outliner-topic-note-toolbar-button-color-hover, rgba(0, 0, 0, 0.05));\n}\n.outliner-topic-note-link-input-container[data-v-516a1b72] {\n  display: flex;\n  align-items: center;\n  position: absolute;\n  top: -27px;\n  z-index: 999;\n  background-color: var(--uk-outliner-topic-note-toolbar-background, #fff);\n  box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.08), 0px 1px 4px rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n}\n.outliner-topic-note-link-input-container .outliner-topic-note-link-input[data-v-516a1b72] {\n  box-shadow: none;\n}\n.outliner-topic-note-link-input-container .outliner-topic-note-link-input[data-v-516a1b72]:hover {\n  box-shadow: none !important;\n}\n.outliner-topic-note-link-input-container .outliner-topic-note-link-confirm-btn[data-v-516a1b72] {\n  border-radius: 0 4px 4px 0;\n}\n.outliner-topic-note-link-input-container .outliner-topic-note-link-confirm-btn[data-v-516a1b72]::before {\n  content: '';\n  display: block;\n  position: absolute;\n  top: 25%;\n  right: 22px;\n  border-left: 1px solid var(--uk-divider-vertical-color, rgba(0, 0, 0, 0.15));\n  height: 50%;\n}\n.outliner-topic-note-link-input-container .outliner-topic-note-link-confirm-btn[data-v-516a1b72]:hover::before {\n  display: none;\n}\n.ol-b[data-v-516a1b72]::before {\n  -webkit-mask-image: url("+h+");\n  mask-image: url("+h+");\n}\n.ol-i[data-v-516a1b72]::before {\n  -webkit-mask-image: url("+v+");\n  mask-image: url("+v+");\n}\n.ol-u[data-v-516a1b72]::before {\n  -webkit-mask-image: url("+m+");\n  mask-image: url("+m+");\n}\n.ol-ul[data-v-516a1b72]::before {\n  -webkit-mask-image: url("+f+");\n  mask-image: url("+f+");\n}\n.ol-ol[data-v-516a1b72]::before {\n  -webkit-mask-image: url("+b+");\n  mask-image: url("+b+");\n}\n.ol-link[data-v-516a1b72]::before {\n  -webkit-mask-image: url("+I+");\n  mask-image: url("+I+");\n}\n",""]);const k=g},44162:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-topic-numbering[data-v-7cabaa9c] {\n  margin: 0 2px;\n  font-size: 16px;\n  background: var(--uk-outliner-default-background, #fff);\n}\n",""]);const a=o},88438:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".topic-placeholder[data-v-e6807d80] {\n  display: none;\n  position: absolute;\n  right: 0;\n  height: 2px;\n  margin-left: 10px;\n  padding: 0;\n  width: 100%;\n  background: #ea4e4e;\n}\n.topic-placeholder.topic-dragging[data-v-e6807d80] {\n  display: block;\n}\n.topic-placeholder[data-v-e6807d80]::before {\n  content: ' ';\n  position: absolute;\n  left: -2px;\n  top: -2px;\n  display: block;\n  height: 6px;\n  width: 6px;\n  background: #ea4e4e;\n}\n",""]);const a=o},52354:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-topic-task-container[data-v-c226e720] {\n  background: var(--uk-outliner-default-background, #fff);\n}\n.outliner-topic-task[data-v-c226e720] {\n  margin-right: 2px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n}\n.outliner-topic-task[data-v-c226e720]:hover {\n  border-color: #2ebdff;\n}\n.outliner-topic-task-img[data-v-c226e720] {\n  display: inline-block;\n  position: relative;\n  vertical-align: top;\n}\n",""]);const a=o},62353:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".outliner-topic-title[data-v-64ce769f] {\n  display: inline-block;\n  min-height: 30px;\n  line-height: 1.4;\n  padding: 4px 22px 4px 0;\n  box-sizing: border-box;\n  font-size: 16px;\n  word-break: break-word;\n  white-space: pre-wrap;\n  color: var(--uk--outliner-topic-title-color, #000000e6);\n  background: var(--uk-outliner-default-background, #fff);\n  outline: none;\n  cursor: text;\n}\n.outliner-topic-title.is-empty[data-v-64ce769f]::after {\n  content: attr(placeholder);\n  display: inline-block;\n  color: #949699;\n}\n.has-child.is-folded .outliner-topic-title[data-v-64ce769f]::after {\n  content: attr(data-child-count);\n  display: inline-block;\n  margin-left: 10px;\n  margin-top: 0.5px;\n  padding: 0 4.5px;\n  min-width: 18px;\n  height: 18px;\n  line-height: 18px;\n  font-size: 14px;\n  font-weight: bold;\n  text-align: center;\n  background: var(--uk-outliner-topic-folded-background, rgba(0, 0, 0, 0.05));\n  border-radius: 9px;\n  box-sizing: border-box;\n  color: var(--uk-outliner-topic-folded-color, #000000b3);\n}\n",""]);const a=o},94112:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var i=n(23645),o=n.n(i),a=n(61667),l=n.n(a),r=n(23543),d=n(59384),c=o()((function(e){return e[1]})),s=l()(r.Z),u=l()(d.Z);c.push([e.id,".outliner-topic-container[data-v-49988601] {\n  position: relative;\n  margin-left: -20px;\n  margin-bottom: 4px;\n  padding-left: 20px;\n  page-break-inside: avoid;\n}\n.outliner-topic-container.topic-dragging[data-v-49988601] {\n  opacity: var(--uk-outliner-topic-dragging-opacity, 0.5);\n}\n.outliner-topic-container.topic-dragging .outliner-topic-inner[data-v-49988601] {\n  background: var(--uk-outliner-default-background, #fff);\n}\n.outliner-topic[data-v-49988601] {\n  max-width: 650px;\n  box-sizing: border-box;\n  margin: 0 auto;\n  clear: both;\n  background-image: url("+s+");\n  background-size: 22px;\n}\n.outliner-topic-outter[data-v-49988601] {\n  border-radius: 3px;\n}\n.outliner-topic-dot[data-v-49988601] {\n  width: 18px;\n  height: 18px;\n  box-sizing: content-box;\n  margin: 6px 4px 0 2px;\n  border-radius: 2px;\n  background: var(--uk-outliner-default-background, #fff);\n  cursor: move;\n}\n.outliner-topic-dot[data-v-49988601]:hover {\n  background: var(--uk-outliner-editing-background, #fafafb);\n}\n.outliner-topic-dot[data-v-49988601]::before {\n  content: '';\n  position: absolute;\n  height: 5px;\n  width: 2px;\n  top: -5px;\n  left: 8px;\n  background: var(--uk-outliner-default-background, #fff);\n  box-shadow: 0px 23px var(--uk-outliner-default-background, #fff);\n}\n.outliner-topic-dot[data-v-49988601]::after {\n  content: '';\n  border: 2px solid var(--uk-outliner-icon-color, #000);\n  width: 0;\n  height: 0;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  border-radius: 0;\n  transform: translate(-50%, -50%);\n}\n.has-child .outliner-topic-dot[data-v-49988601] {\n  cursor: pointer;\n}\n.has-child .outliner-topic-dot[data-v-49988601]::after {\n  -webkit-mask-image: url("+u+");\n  mask-image: url("+u+");\n  -webkit-mask-size: 10px;\n  mask-size: 10px;\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: 0 0.5px;\n  mask-position: 0 0.5px;\n  background: var(--uk-outliner-icon-color, #000);\n  width: 10px;\n  height: 10px;\n  border: none;\n}\n.has-child.is-folded .outliner-topic-dot[data-v-49988601]::after {\n  transform: translate(-50%, -50%) rotate(-90deg);\n}\n.main-topic .outliner-topic-title[data-v-49988601],\n.main-topic .outliner-topic-numbering[data-v-49988601] {\n  font-size: 18px;\n  font-weight: bold;\n  line-height: 22px;\n}\n.outliner-reached-limited-container[data-v-49988601] {\n  margin-left: 22px;\n  background: var(--uk-outliner-default-background, #fff);\n}\n.outliner-reached-limited-btn[data-v-49988601] {\n  display: inline-flex;\n  margin: 2px 0px;\n  padding: 5px 12px;\n  line-height: 13px;\n  font-size: 13px;\n  border-radius: 12px;\n  background: #ff2d2d;\n  cursor: pointer;\n}\n.outliner-topic-inserts[data-v-49988601] {\n  margin-left: 22px;\n  background: var(--uk-outliner-default-background, #fff);\n}\n@media only screen {\n.outliner-topic[data-v-49988601]::before {\n    content: '';\n    position: absolute;\n    height: 100%;\n    width: 0;\n    left: 0;\n    top: 0;\n    z-index: -1;\n    background-color: var(--uk-outliner-editing-background, #fafafb);\n}\n.outliner-topic:focus-within .outliner-topic-inner[data-v-49988601],\n  .outliner-topic:focus-within .outliner-topic-dot[data-v-49988601],\n  .outliner-topic:focus-within .outliner-topic-dot[data-v-49988601]::before,\n  .outliner-topic:focus-within .outliner-topic-title[data-v-49988601],\n  .outliner-topic:focus-within .outliner-reached-limited-container[data-v-49988601],\n  .outliner-topic:focus-within .outliner-topic-inserts[data-v-49988601],\n  .outliner-topic:focus-within .outliner-topic-note[data-v-49988601],\n  .outliner-topic:focus-within .outliner-topic-marker-container[data-v-49988601],\n  .outliner-topic:focus-within .outliner-topic-task-container[data-v-49988601],\n  .outliner-topic:focus-within .outliner-topic-numbering[data-v-49988601],\n  .outliner-topic[data-v-49988601]:focus-within {\n    background-color: var(--uk-outliner-editing-background, #fafafb);\n}\n.outliner-topic:focus-within .outliner-topic-dot[data-v-49988601]::before {\n    box-shadow: 0px 23px var(--uk-outliner-editing-background, #fafafb);\n}\n.outliner-topic:focus-within .outliner-topic-dot[data-v-49988601]:hover {\n    background: var(--uk-outliner-topic-dot-hover, #f6f6f7);\n}\n.outliner-topic[data-v-49988601]:focus-within::before {\n    width: 100%;\n    box-shadow: -1740px 0px 0px var(--uk-outliner-editing-background, #fafafb), -1280px 0px 0px var(--uk-outliner-editing-background, #fafafb), -640px 0px 0px var(--uk-outliner-editing-background, #fafafb), 640px 0px 0px var(--uk-outliner-editing-background, #fafafb), 1280px 0px 0px var(--uk-outliner-editing-background, #fafafb), 1740px 0px 0px var(--uk-outliner-editing-background, #fafafb);\n}\n.outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-outter[data-v-49988601] {\n    background: var(--uk-outliner-selected-background, #e1ebff);\n}\n.outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-reached-limited-container[data-v-49988601],\n  .outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-inserts[data-v-49988601],\n  .outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-note[data-v-49988601],\n  .outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-marker-container[data-v-49988601],\n  .outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-task-container[data-v-49988601],\n  .outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-numbering[data-v-49988601] {\n    background: transparent;\n}\n.outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-dot[data-v-49988601] {\n    border-color: var(--uk-outliner-selected-background, #e1ebff);\n}\n.outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-title[data-v-49988601],\n  .outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-dot[data-v-49988601],\n  .outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-dot[data-v-49988601]::before {\n    background-color: transparent;\n    box-shadow: none;\n}\n.outliner-topic-container.topic-selected:not(.topic-dragging) .outliner-topic-dot[data-v-49988601]:hover {\n    background: rgba(0, 0, 0, 0.05);\n}\n}\n",""]);const p=c},3236:(e,t,n)=>{"use strict";n.d(t,{yh:()=>r,dM:()=>g,I6:()=>p,zF:()=>u,Y$:()=>a.Y});var i=n(1403),o=n(78598),a=n(12645);class l{constructor(){this.eventCallbacks=new Map}on(e,t){var n;const i=null!==(n=this.eventCallbacks.get(e))&&void 0!==n?n:[];this.eventCallbacks.set(e,[...i,t])}off(e,t){var n;let i=null!==(n=this.eventCallbacks.get(e))&&void 0!==n?n:[];i=i.filter((e=>e!==t)),this.eventCallbacks.set(e,i)}emit(e){const t=this.eventCallbacks.get(e.eventName);if(t)for(const n of t)n(e)}unload(){this.eventCallbacks=new Map}}class r extends l{constructor(e){var t;super(),this._presenters=[],this._isStarted=!1,this._disableSettingsUpdate=!1,this._traveledTopicSet=new Set,this._needSubscriptionHint=!1,this.slideControl=async e=>{const{action:t,value:n}=e;switch(t){case"goto":return await this.slideshow.present(n);case"next":return await this.slideshow.forward();case"prev":return await this.slideshow.backward();case"fastBackward":return await this.slideshow.fastBackward();case"fastForward":return await this.slideshow.fastForward();case"updateSlide":return await this.slideshow.forceUpdateSlideContent()}},this.changeSlideSetting=e=>{const{action:t,option:n}=e;switch(t){case"theme":return this.changeTheme(n);case"aspect":return this.changeSlideAspect(n);case"animation":return this.switchAnimationOption(n);case"watermark":return this.switchWatermarkOption(n)}},this.unloaded=!1,this.settings=(0,a.Y)(),this._startTopicId=null!==(t=e.startTopicId)&&void 0!==t?t:null,this._suggestedSlideSize=e.suggestedSlideSize,this._disableSettingsUpdate=e.disableSettingsUpdate,this._needSubscriptionHint=!!e.needSubscriptionHint,this.initSlideshow(e)}get presenters(){return this._presenters}get slideshow(){return this._slideshow}get isShowingEnding(){return this._slideshow.isShowingEndingScreen}get currentSlide(){return this.slideshow.currentSlide}initSlideshow(e){var t,n,a,l;const r=e.contentProviderData?(0,o.xm)(e.contentProviderData):(0,o.n2)(),d=null!==(t=e.defaultAspect)&&void 0!==t?t:this.settings.slideAspect.value,c="Auto"===d?null!==(a=null===(n=e.suggestedSlideSize)||void 0===n?void 0:n.value)&&void 0!==a?a:"16:9":d;this._slideshow=new i.ur({contentProvider:r,slideTheme:null!==(l=e.defaultSlideTheme)&&void 0!==l?l:this.settings.slideTheme.value,slideSize:c,disablesWatermark:!this.settings.watermarkEnabled.value,preferredLanguage:this.settings.preferredLanguage.value}),this._slideshow.disablesAnimations=!this.settings.animationEnabled.value,this._slideshow.on("finish",(()=>this.finish())),this._slideshow.on("stateDidChange",(()=>{this.presenters.forEach((e=>e.stateChangedHandler()))})),this._slideshow.on("transitionStart",(({request:e})=>{const t=this._slideshow.computeNextStoppedSlide(e);t&&(this._traveledTopicSet.add(t),this._needSubscriptionHint&&this._traveledTopicSet.size>5&&this.emit({eventName:"needSubscription"})),this.emit({eventName:"slideChangeStart",payload:{request:e,targetSlide:t}})})),this._slideshow.on("transitionEnd",(()=>this.emit({eventName:"slideChangeEnd"}))),this._slideshow.on("modalOpened",(()=>this.emit({eventName:"presenterModal",payload:{show:!0}}))),this._slideshow.on("modalClosed",(()=>this.emit({eventName:"presenterModal",payload:{show:!1}}))),this._slideshow.on("reveal",(({request:e})=>this.emit({eventName:"presenterLinkClick",payload:{title:e.title,href:e.href,topicId:e.topicId}}))),this._slideshow.on("playWebVideo",(({request:e})=>{this.emit({eventName:"playWebVideo",payload:{videoSource:e.videoSource}})}))}addPresenter(e){this._presenters.includes(e)||(this._presenters.push(e),this.slideshow.addPresenter(e.view))}removePresenter(e){this._presenters=this._presenters.filter((t=>t!==e)),this.slideshow.removePresenter(e.view)}switchAnimationOption(e){var t;this.slideshow.disablesAnimations=!e,!this._disableSettingsUpdate&&(null===(t=this.settings)||void 0===t||t.updateAnimationSetting(e))}switchWatermarkOption(e){var t;this.slideshow.disablesWatermark!==!e&&(this.slideshow.changeWatermarkDisabled(!e),!this._disableSettingsUpdate&&(null===(t=this.settings)||void 0===t||t.updateWatermarkSetting(e)))}changeTheme(e){var t;this.slideshow.slideAppearanceId!==e&&(this.slideshow.changeSlideTheme(e),!this._disableSettingsUpdate&&(null===(t=this.settings)||void 0===t||t.updateSlideThemeSetting(e)))}changeSlideAspect(e){var t,n,o;const a="Auto"===e?null!==(n=null===(t=this._suggestedSlideSize)||void 0===t?void 0:t.value)&&void 0!==n?n:"16:9":e;this.slideshow.changeSlideSize(i.IE[a]),!this._disableSettingsUpdate&&(null===(o=this.settings)||void 0===o||o.updateSlideAspectSetting(e))}async start(e){this._isStarted||(e.forEach((e=>this.addPresenter(e))),this.slideshow.present(this._startTopicId),this._isStarted=!0)}finish(){this.emit({eventName:"slidePlayFinished"})}unload(){this.emit({eventName:"beforeUnload"}),super.unload(),this.unloaded=!0}}var d=n(90435),c=n(96829),s=n(54856);function u(){const e=(0,c.hb)(),t=d.ZP.route(s.OV.CONNECT_MAIN(e),(async e=>{switch(e.type){case"retrieveContent":return JSON.stringify(await(0,o.d4)());case"dismiss":return t();case"openHyperlink":return null}}));return e}async function p(e){const t=await d.ZP.fetch(s.OV.CONNECT_MAIN(e),{type:"retrieveContent"});return JSON.parse(t)}function g(e){d.ZP.fetch(s.OV.CONNECT_MAIN(e),{type:"dismiss"})}},12645:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var i=n(2954),o=n(87141),a=n(84374),l=n(31945),r=n(78598);function d(e){var t,n;return null!==(n=null===(t=(0,r.pP)(e))||void 0===t?void 0:t["slide-appearance"])&&void 0!==n?n:"default"}function c(e){var t,n;return null!==(n=null===(t=(0,r.pP)(e))||void 0===t?void 0:t["slide-aspect-ratio"])&&void 0!==n?n:"Auto"}const s=function(){const{activeSheet:e}=(0,a.nZ)(),t=(0,i.Fl)((()=>{var t;return null===(t=e.value)||void 0===t?void 0:t.rootTopic.id})),n=(0,o.OD)((0,l.aJ)(window.editorId)),s=(0,i.Fl)((()=>n().contexts["activation.isValid"])),u=(0,i.Fl)((()=>!(0,o.rs)().disableAnimation)),p=(0,i.Fl)((()=>!s.value||(0,o.rs)().watermarkEnabled)),g=(0,i.iH)(c(t.value)),h=(0,i.iH)(d(t.value)),v=(0,i.Fl)((()=>"zh-CN"===(0,o.S)().language||"zh-CN"===(0,o.S)().defaultLanguage?"zh":"en")),m=e=>{(0,o.rs)().updateSettings({disableAnimation:!e})},f=e=>{(0,o.rs)().updateSettings({watermarkEnabled:e})},b=e=>{e!==d(t.value)&&((0,r.nh)(t.value,{"slide-appearance":e}),h.value=e)},I=e=>{e!==c(t.value)&&((0,r.nh)(t.value,{"slide-aspect-ratio":e}),g.value=e)};return(0,i.YP)((()=>t.value),(e=>{g.value=c(e),h.value=d(e)})),()=>({animationEnabled:u,watermarkEnabled:p,slideTheme:(0,i.Fl)((()=>h.value)),slideAspect:(0,i.Fl)((()=>g.value)),preferredLanguage:v,updateAnimationSetting:m,updateWatermarkSetting:f,updateSlideThemeSetting:b,updateSlideAspectSetting:I})}()},89523:(e,t,n)=>{"use strict";n.d(t,{o:()=>d,v:()=>r});var i=n(1403),o=n(3236),a=n(78598);function l(e,t){var n;const{slideTheme:l,watermarkEnabled:r,preferredLanguage:d}=(0,o.Y$)(),c=new i.ur({contentProvider:(0,a.n2)(e),slideTheme:l.value,slideSize:i.IE["16:9"],disablesWatermark:null!==(n=null==t?void 0:t.disablesWatermark)&&void 0!==n?n:!r.value,preferredLanguage:d.value});return c.disablesAnimations=!0,new i.I2(c)}function r(e,t){return l(e,t).exportPptxSlides()}function d(e,t){return l(e,t).exportHtmlPages()}},1403:(e,t,n)=>{"use strict";n.d(t,{CU:()=>r,YN:()=>d,ur:()=>i.Slideshow,I2:()=>i.SlideshowExporter,rc:()=>h,qV:()=>g,WS:()=>p,bh:()=>s,sz:()=>c,_y:()=>u,_p:()=>i.previewSlidesScopedBy,IE:()=>i.slideSizes,hf:()=>v,tT:()=>l});var i=n(32118),o=n(78598);const a={summarySlideVisibility:"summary-slide-visibility",topicSlideVisibility:"topic-slide-visibility",topicImagePlacement:"topic-slide-image-placement",listSlideVisibility:"list-slide-visibility",listSlideDelivery:"list-slide-delivery",listSlideLayout:"list-slide-layout"};function l(){const e=(e,t,n)=>(0,o.nh)(e,{[a[t]]:n});return{getSlideOption:(e,t)=>{var n;return null===(n=(0,o.pP)(e))||void 0===n?void 0:n[a[t]]},setSlideOption:e,deleteSlideOption:(t,n)=>e(t,n)}}const r="org.xmind.ui.ice-cream-pancake",d=["Auto","16:9","4:3","9:16","3:4"];function c(e){return new i.Slideshow(e)}function s(e={}){const{initialSlide:t,perspectiveMode:n,viewStyle:o,contentStyle:a}=e,l=new i.PresentationView({initialSlide:t});return n?(l.allowsActivatingPresenterPerspectiveMode=!0,l.mode="presenterPerspective"):(l.allowsActivatingPresenterPerspectiveMode=!1,l.mode="presentation"),o&&Object.keys(o).forEach((e=>l.el.style[e]=o[e])),a&&Object.keys(a).forEach((e=>l.contentEl.style[e]=a[e])),l}function u(e,t,n){return{topicSkipped:(0,i.isSlideSkippedScopedBy)(e,t,"topic",{ignoresUserValue:n}),listSkipped:(0,i.isSlideSkippedScopedBy)(e,t,"list",{ignoresUserValue:n}),summarySkipped:(0,i.isSlideSkippedScopedBy)(e,t,"summary",{ignoresUserValue:n})}}function p(e,t){const n=(0,i.computeSlideContent)(t,e.contentProvider,e.defaultListSlideDelivery);return n&&n.topic.image?(0,i.computeTopicSlideImagePlacement)(e.slideSize,n,n.topic.image,{ignoresUserValue:!0}):null}function g(e,t){return(0,i.computeSlideLayout)("list",e.slideSize,e.getSlideContent(t))}function h(e,t){return(0,i.getEligibleSlideLayouts)("list",e.getSlideContent(t))}function v(e,t){const n=e.getSlideContent(t.topicId).computedListSlideDelivery;let i=[];if("list"===t.type&&"all-at-once"===n&&(i=[...i,...t.subtopics||[]]),t.boxes){const e=n=>{for(const o of n){if((o.id.startsWith("topic:title:")||o.id.startsWith("topic:image:"))&&o.opacity){const e=o.id.split(":")[2];t.subtopics.includes(e)&&i.push(o.id.split(":")[2])}"children"in o&&e(o.children)}};e(t.boxes)}const o=t.topicId,a=[...new Set(i)].filter((e=>e!==o));return{topicId:o,subTopicIds:a}}},78598:(e,t,n)=>{"use strict";n.d(t,{xm:()=>g,pP:()=>h,n2:()=>u,d4:()=>p,nh:()=>v});var i=n(2954),o=n(1403),a=n(40623),l=n(84374);const{TopicQuickStyleClassName:r,PrimaryClassName:d,TopicPrimaryClassName:c}=l.viewerKit,s=Object.freeze({default:{[d.Map]:{fillColor:"#101010",multiLineColors:["#F6F6F6"].join(" ")},[d.Relationship]:{lineColor:"#F6F6F6",textColor:"#FFFFFF"},[d.Boundary]:{fillColor:"#F6F6F6",textColor:"#000000"},[d.Summary]:{},[c.CentralTopic]:{fillColor:"#F6F6F6",textColor:"#000000"},[c.MainTopic]:{fillColor:"#E3E3E3",textColor:"#000000"},[c.Subtopic]:{fillColor:"#B9B9B9",textColor:"#000000"},[c.FloatingTopic]:{fillColor:"#BABABA",textColor:"#000000"},[c.CalloutTopic]:{fillColor:"#F6F6F6",textColor:"#000000"},[c.SummaryTopic]:{fillColor:"#F6F6F6",textColor:"#000000"},[r.VeryImportant]:{fillColor:"#A43838"},[r.Important]:{fillColor:"#CFA362",textColor:"#000000"},[r.CrossOut]:{}},light:{[d.Map]:{fillColor:"#F4F4F4",multiLineColors:["#282828"].join(" ")},[d.Relationship]:{lineColor:"#282828",textColor:"#000000"},[d.Boundary]:{fillColor:"#282828",textColor:"#FFFFFF"},[d.Summary]:{},[c.CentralTopic]:{fillColor:"#282828",textColor:"#FFFFFF"},[c.MainTopic]:{fillColor:"#282828",textColor:"#FFFFFF"},[c.Subtopic]:{fillColor:"#4F4F4F",textColor:"#FFFFFF"},[c.FloatingTopic]:{fillColor:"#4F4F4F",textColor:"#FFFFFF"},[c.CalloutTopic]:{fillColor:"#282828",textColor:"#FFFFFF"},[c.SummaryTopic]:{fillColor:"#282828",textColor:"#FFFFFF"},[r.VeryImportant]:{fillColor:"#A43838"},[r.Important]:{fillColor:"#CFA362",textColor:"#000000"},[r.CrossOut]:{}},Innocence:{[d.Map]:{fillColor:"#ECF4E9",multiLineColors:["#FF9A9A","#F9E168","#FFC368","#ACDB87","#749AC7","#FF9A9A"].join(" ")},[d.Relationship]:{lineColor:"#F06767",textColor:"#F7FFF4"},[d.Boundary]:{fillColor:"#F06767",textColor:"#F7FFF4"},[d.Summary]:{},[c.CentralTopic]:{fillColor:"#F06767"},[c.MainTopic]:{textColor:"#000000"},[c.Subtopic]:{textColor:"#000000"},[c.FloatingTopic]:{fillColor:"#797979",textColor:"#F7FFF4"},[c.CalloutTopic]:{fillColor:"#F06767",textColor:"#F7FFF4"},[c.SummaryTopic]:{fillColor:"#F06767",textColor:"#000000"},[r.VeryImportant]:{fillColor:"#1000C6"},[r.Important]:{fillColor:"#22D896",textColor:"#000000"},[r.CrossOut]:{}},"Hubble-Bubble":{[d.Map]:{fillColor:"#1D663A",multiLineColors:"#A2B864"},[d.Relationship]:{lineColor:"#A2B864",textColor:"#FEFFD0"},[d.Boundary]:{fillColor:"#A2B864",textColor:"#FFFFFF"},[d.Summary]:{},[c.CentralTopic]:{fillColor:"#39B169",textColor:"#FEFFD0"},[c.MainTopic]:{fillColor:"#39B169",textColor:"#FEFFD0"},[c.Subtopic]:{fillColor:"#2E9356",textColor:"#FEFFD0"},[c.FloatingTopic]:{fillColor:"#A2B864",textColor:"#1D663A"},[c.CalloutTopic]:{fillColor:"#FEFFD0",textColor:"#000000"},[c.SummaryTopic]:{fillColor:"#A2B864",textColor:"#1D663A"},[r.VeryImportant]:{fillColor:"#FA813D",textColor:"#000000"},[r.Important]:{fillColor:"#ECDE5D",textColor:"#000000"},[r.CrossOut]:{}},"midnight-rose":{[d.Map]:{fillColor:"#010518",multiLineColors:"#9EAEFF"},[d.Relationship]:{lineColor:"#2C47D8",textColor:"#FFFFFF"},[d.Boundary]:{fillColor:"#2C47D8",textColor:"#FFFFFF"},[d.Summary]:{},[c.CentralTopic]:{fillColor:"#2C47D8",textColor:"#FFFFFF"},[c.MainTopic]:{fillColor:"#2C47D8",textColor:"#FFFFFF"},[c.Subtopic]:{fillColor:"#3E4C95",textColor:"#FFFFFF"},[c.FloatingTopic]:{fillColor:"#DEE3FF",textColor:"#404E9C"},[c.CalloutTopic]:{fillColor:"#FEFFD0",textColor:"#404E9C"},[c.SummaryTopic]:{fillColor:"#9EAEFF",textColor:"#404E9C"},[r.VeryImportant]:{fillColor:"#A716CB",textColor:"#000000"},[r.Important]:{fillColor:"#D45757",textColor:"#000000"},[r.CrossOut]:{}},"shape-for-you":{[d.Map]:{fillColor:"#F5D8DD",multiLineColors:["#EDB998","#BEADA6","#E994B1","#ACBCD6","#B1ABD6","#B0CD99","#97D6C3","#BDB783"].join(" ")},[d.Relationship]:{lineColor:"#E59294",textColor:"#000000"},[d.Boundary]:{fillColor:"#E59294",textColor:"#FFFFFF"},[d.Summary]:{},[c.CentralTopic]:{fillColor:"#E59294",textColor:"#000000"},[c.MainTopic]:{fillColor:"#E59294",textColor:"#000000"},[c.Subtopic]:{fillColor:"#E59294",textColor:"#000000"},[c.FloatingTopic]:{fillColor:"#4B4B4B",textColor:"#FFFFFF"},[c.CalloutTopic]:{fillColor:"#E59294",textColor:"#000000"},[c.SummaryTopic]:{fillColor:"#E59294",textColor:"#000000"},[r.VeryImportant]:{fillColor:"#50209E",textColor:"#000000"},[r.Important]:{fillColor:"#D45757",textColor:"#62A8CF"},[r.CrossOut]:{}},"hand-drawn":{[d.Map]:{fillColor:"#DCE2D4",multiLineColors:"#2F4DB5"},[d.Relationship]:{lineColor:"#2F4DB5",textColor:"#2F4DB5"},[d.Boundary]:{fillColor:"#2F4DB5",textColor:"#FFFFFF"},[d.Summary]:{},[c.CentralTopic]:{fillColor:"#2F4DB5",textColor:"#FFFFFF"},[c.MainTopic]:{fillColor:"#2F4DB5",textColor:"#FFFFFF"},[c.Subtopic]:{fillColor:"#5E6AA2",textColor:"#FFFFFF"},[c.FloatingTopic]:{fillColor:"#5A5E74",textColor:"#EDF4E5"},[c.CalloutTopic]:{fillColor:"#2F4DB5",textColor:"#FFFFFF"},[c.SummaryTopic]:{fillColor:"#2F4DB5",textColor:"#FFFFFF"},[r.VeryImportant]:{fillColor:"#9433AC",textColor:"#FFFFFF"},[r.Important]:{fillColor:"#D05252",textColor:"#FFFFFF"},[r.CrossOut]:{}}});function u(e){const{sheets:t,activeSheetId:n,getSheetViewer:o}=(0,l.nZ)(),a=(0,i.Fl)((()=>t.value.find((t=>t.id===(null!=e?e:n.value))))),r=(0,i.Fl)((()=>o(a.value.id)));return{getStartingTopicId:()=>{var e,t,n;return null!==(n=null===(t=null===(e=a.value)||void 0===e?void 0:e.rootTopic)||void 0===t?void 0:t.id)&&void 0!==n?n:null},getTopicAttributes:e=>{var t,n,i,o,l,d,c,s,u,p,g;const v=null===(n=null===(t=a.value)||void 0===t?void 0:t.query({id:e}))||void 0===n?void 0:n.asTopic(),T=null===(o=null===(i=r.value)||void 0===i?void 0:i.getSheetFigure())||void 0===o?void 0:o.topicFigureByTopicId[e],x=h(e);return v&&{id:null==v?void 0:v.id,title:null!==(l=null==v?void 0:v.title)&&void 0!==l?l:"",labels:null!==(d=null==v?void 0:v.labels)&&void 0!==d?d:[],note:(null==v?void 0:v.notes)&&{plainText:null===(c=v.notes)||void 0===c?void 0:c.text,html:null===(s=v.notes)||void 0===s?void 0:s.html},image:f(T),summaries:null===(u=null==v?void 0:v.summaries)||void 0===u?void 0:u.map((e=>({topicId:e.id,startIndex:e.rangeStart,endIndex:e.rangeEnd}))),markers:m(null!==(p=null==v?void 0:v.markers)&&void 0!==p?p:[]),video:b(T),calloutTopicId:null===(g=null==v?void 0:v.callout)||void 0===g?void 0:g.id,hyperlink:I(v),topicSlide:null==x?void 0:x["topic-slide-visibility"],topicSlideImagePlacement:null==x?void 0:x["topic-slide-image-placement"],listSlides:null==x?void 0:x["list-slide-visibility"],listSlideLayout:null==x?void 0:x["list-slide-layout"],listSlideDelivery:null==x?void 0:x["list-slide-delivery"],summarySlide:null==x?void 0:x["summary-slide-visibility"],preferredDefaultListSlideLayout:k(T)}},getSubtopics:e=>{var t,n,i,o;const l=null===(n=null===(t=a.value)||void 0===t?void 0:t.query({id:e}))||void 0===n?void 0:n.asTopic();return null!==(o=null===(i=null==l?void 0:l.children)||void 0===i?void 0:i.map((e=>e.id)))&&void 0!==o?o:[]},getParentTopicId:e=>{var t,n,i,o;const l=null===(n=null===(t=a.value)||void 0===t?void 0:t.query({id:e}))||void 0===n?void 0:n.asTopic();return null!==(o=null===(i=null==l?void 0:l.parentTopic)||void 0===i?void 0:i.id)&&void 0!==o?o:null},getFloatingTopics:()=>{var e,t,n;return null!==(n=null===(t=null===(e=a.value)||void 0===e?void 0:e.rootTopic)||void 0===t?void 0:t.detachedChildren.map((e=>e.id)))&&void 0!==n?n:[]},getEndingScreenContent:async e=>{var t,n,i,o,l,d,c,u;const p=null!==(l=null!==(t=null==e?void 0:e.appearance)&&void 0!==t?t:null===(o=h(null===(i=null===(n=a.value)||void 0===n?void 0:n.rootTopic)||void 0===i?void 0:i.id))||void 0===o?void 0:o["slide-appearance"])&&void 0!==l?l:"default",{svg:g,size:v}=await r.value.exportSVGElementWithSizeUsingSheetAppearance(a.value,null!==(d=s[p])&&void 0!==d?d:s.default,{padding:{left:20,right:20,top:20,bottom:20},disableEmbedFonts:!0});return{svgString:(new XMLSerializer).serializeToString(g),width:null!==(c=v.width)&&void 0!==c?c:parseInt(g.getAttribute("width")),height:null!==(u=v.height)&&void 0!==u?u:parseInt(g.getAttribute("height"))}}}}async function p(){const e=u(),t=e.getStartingTopicId(),n=e.getFloatingTopics(),i=[t,...n],o=t=>{const n=t.map((t=>e.getSubtopics(t))).flat();i.push(...n),n.length<=0||o(n)};o(i);const a={},l={},r={};i.forEach((t=>{a[t]=e.getTopicAttributes(t),l[t]=e.getParentTopicId(t),r[t]=e.getSubtopics(t)}));const d=await e.getEndingScreenContent(void 0);return{startingTopicId:t,floatingTopicIds:n,topicRecords:a,parentRecords:l,subTopicsRecords:r,endingScreenContent:d}}function g(e){const{startingTopicId:t,floatingTopicIds:n,topicRecords:i,subTopicsRecords:o,parentRecords:a,endingScreenContent:l}=e;return{getStartingTopicId:()=>t,getTopicAttributes:e=>{var t;return null!==(t=i[e])&&void 0!==t?t:null},getSubtopics:e=>{var t;return null!==(t=o[e])&&void 0!==t?t:[]},getParentTopicId:e=>{var t;return null!==(t=a[e])&&void 0!==t?t:null},getFloatingTopics:()=>n,getEndingScreenContent:async()=>l}}function h(e){var t,n,i;const{document:a}=(0,l.nZ)(),r=null===(n=null===(t=a.value)||void 0===t?void 0:t.query({id:e}))||void 0===n?void 0:n.asTopic(),d=null==r?void 0:r.extensionBy(o.CU);return null!==(i=null==d?void 0:d.content)&&void 0!==i?i:null}function v(e,t){var n,i,a,r,d;const{document:c,changeDoc:s}=(0,l.nZ)(),u=null===(i=null===(n=c.value)||void 0===n?void 0:n.query({id:e}))||void 0===i?void 0:i.asTopic(),p={content:{...null!==(r=null===(a=null==u?void 0:u.extensionBy(o.CU))||void 0===a?void 0:a.content)&&void 0!==r?r:{},...t}},g=null===(d=null==u?void 0:u.asMutable())||void 0===d?void 0:d.extensionBy(o.CU,p).commit().ownerDocument;g&&s(g)}function m(e){const{markerModule:t}=(0,l.nZ)();return e.map((e=>({markerId:e,imageSource:t.getMarkerInfoById(e).imageSrc}))).filter((e=>!!e.imageSource))}function f(e){var t,n,i,o,a;if(!e)return null;const{imageView:r,measuredImageView:d,imageNaturalSize:c}=e.nodeContent,s=null==e?void 0:e.modelAttributes,u=null===(t=null==s?void 0:s.equation)||void 0===t?void 0:t.text;if(u)return function(e){var t,n;const i=(null!==(t=(0,l.nZ)().makeMathJaxSVG(e))&&void 0!==t?t:"").replace(/currentColor/g,"");if(!i)return null;const o=null===(n=(new DOMParser).parseFromString(i,"image/svg+xml"))||void 0===n?void 0:n.documentElement;return o?{source:i,size:{width:parseInt(o.getAttribute("width")),height:parseInt(o.getAttribute("height"))}}:null}(u);{const e=null!==(i=null!==(n=null==c?void 0:c.width)&&void 0!==n?n:null==d?void 0:d.width)&&void 0!==i?i:null==s?void 0:s.imageWidth,t=null!==(a=null!==(o=null==c?void 0:c.height)&&void 0!==o?o:null==d?void 0:d.height)&&void 0!==a?a:null==s?void 0:s.imageHeight,l=null==r?void 0:r.src;return e&&t&&l?{source:l,size:{width:e,height:t}}:null}}function b(e){var t,n;const i=null===(n=null===(t=null==e?void 0:e.modelAttributes)||void 0===t?void 0:t.webVideo)||void 0===n?void 0:n.embedUrl;return i?{videoSource:i}:null}function I(e){const t=null==e?void 0:e.href;if(!t)return null;const n=t&&function(e){return e.toLowerCase().startsWith("xap:resources")?"attachment":e.toLowerCase().startsWith("file:")?"local":e.toLowerCase().startsWith("xmind:")?null:"webpage"}(t);return t&&n?{href:t,type:n}:null}function k(e){var t,n;const i=null!==(n=null===(t=null==e?void 0:e.modelAttributes)||void 0===t?void 0:t.structureClass)&&void 0!==n?n:null;return[a.vP.FISHBONELEFTHEADED,a.vP.FISHBONERIGHTHEADED].includes(i)?"fishbone":[a.vP.TIMELINEHORIZONTAL,a.vP.TIMELINESIDEDHORIZONTAL,a.vP.TIMELINETHROUGHVERTICAL].includes(i)?"timeline":null}},46952:(e,t,n)=>{"use strict";n.r(t),n.d(t,{exportAllSheetsAsPDF:()=>_,exportBranchAsPDF:()=>q,exportCurrentSheetAsPDF:()=>D,exportPDF:()=>A,exportPdfDialog:()=>P});var i=n(71017),o=n.n(i),a=n(67657),l=n(69361),r=n(16794),d=n(94593),c=n(90435),s=n(72298),u=n(87141),p=n(96829),g=n(54856),h=n(13382),v=n(18621),m=n(60746),f=n(5893),b=n(84374),I=n(89411),k=n(89523);async function T(e,t,n){const{cleanUp:i,addToRemoveEl:o}=(()=>{let e=[];return{cleanUp(){e.forEach((e=>e.remove())),e=[]},addToRemoveEl:t=>(e.push(t),t)}})(),a=document.createElement("div");a.style.position="relative",a.style.left="0",a.style.top="0",a.style.width=`${t}px`,a.style.height=e.length*n+"px",a.classList.add("print-el"),o(a);const l=t/1600;for(let i=0;i<e.length;i++){const o=document.createElement("div");o.classList.add("print-el"),o.style.width=`${t}px`,o.style.height=`${n}px`,o.style.overflow="hidden",o.style.position="absolute",o.style.left="0",o.style.top=i*n+"px",o.style.pageBreakBefore="always";const r=e[i];r.style.transformOrigin="left top",r.style.transform=`scale(${l}, ${l})`,o.append(r),a.append(o)}document.body.append(a);const r=document.createElement("style");return r.id="print_css",r.innerHTML="\n    .print-el {\n      display: none;\n      overflow: hidden;\n      visibility: hidden;\n    }\n    @media print {\n      .print-el {\n        display: block;\n        overflow: hidden!important;\n        visibility: visible;\n        position: relative;\n      }\n      *{\n        webkit-transition: none !important;\n        transition: none !important;\n      }\n      body {\n        overflow: visible!important;\n        background-color:#fff;\n      }\n      #app {\n        display: none!important;\n      }\n      .uk-icon-panel {\n        display: none !important;\n      }\n      #popover-container-for-editor {\n        display: none !important;\n      }\n    }\n  ",document.head.append(r),o(r),i}var x=n(72623),y=n(2954),S=n(48825),w=n(14474);const C=(0,y.Fl)((()=>({isEditable:!1,currEditingTopicId:"",currEditingMarkerId:"",currEditingLabel:"",currEditingNotesTopicId:"",currEditingNotesHref:"",currEditingNotesEditor:null,selectionIds:[],invalidImageIds:[],selectonType:S._p.TEXT,startTopicId:"",topicItems:[],isSelecting:!1,isMouseDown:!1,draggingTopicIds:[],draggingType:S._p.TOPIC,draggingStartPageY:0,draggingPos:{toParentTopicId:"",toTargetIndex:0,rect:{left:0,top:0},toTopicType:"attached",toTopicId:""},popoverEditorState:{visible:"",payload:{}},audioBarMode:"",audioFilePath:"",audioAutoPlay:!1,audioRecording:!1,inputMethodInputting:!1,ghostImgElementId:"",isNoteLinkInputVisible:!1,topicsLoopNum:50,attachedTopicsLoopStartIndex:0,attachedTopicsLoopEndIndex:50,outlinerScale:1,isBranchOnlyMode:!1,scopeTopicId:"",maxTopicsLoopNum:100}))),E=y.ZP.extend({components:{OutlinerMode:w.Z},props:{namespace:String,outlinerSheetModel:Object},provide:()=>({handleOutlinerOperation:()=>{},outlinerState:C,updateOutlinerState:()=>{},outlinerActions:S.xI,openOutlinerCtxMenu:()=>{}})});const M=(0,n(51900).Z)(E,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:[`outliner-${e.namespace}`]},[t("outliner-mode",{attrs:{"outliner-sheet-model":e.outlinerSheetModel,"static-mode":!0}})],1)}),[],!1,null,null,null).exports;var L=n(53775),F=n(46016),N=n(12455),O=n(21196);async function A(e){const t=await P(null,e);if(!t)return;const{exportCategory:n,hasWatermark:i,transparent:r,exportTo:c}=t;(0,l.Ae)("pdf"),"mindmap"===n?0===c?await D(i,r):1===c&&await _(i,r):"pitch"===n?await async function(e,t){var n,i,o;const{activeSheet:r,sheets:d}=(0,b.nZ)(),c=e?[...d.value]:[r.value],s={},u={},p=new l.Y8;for(const e of c){const l=(0,k.o)(e.id,{disablesWatermark:t}),r=1480,d=833,c=await T(l,r,d),g=(0,m.gP)();s[e.id]=await(0,a.getCurrentWebContents)().printToPDF({pageSize:{width:r/g.x,height:d/g.y},margins:{top:0,bottom:0,left:0,right:0},printBackground:!0,landscape:!1});const h=p.makeSafeName((0,f.N6)(null!==(i=null===(n=null==e?void 0:e.rootTopic)||void 0===n?void 0:n.title)&&void 0!==i?i:"")||(0,f.N6)(null!==(o=null==e?void 0:e.title)&&void 0!==o?o:""));u[e.id]=h,c()}await(0,l.Gm)(),1===Object.keys(s).length?await Z(Object.values(s)[0],Object.values(u)[0]):Object.keys(s).length>1&&await B(s,u,(0,I.FU)().title)}(1===c,!i):"outliner"===n&&(0===c?await async function({hasWatermark:e}){var t,n;const i=(0,u.JE)().T,{outlinerSheetModel:o}=(0,S.dI)(),{activeSheet:r,activeSheetId:d}=(0,b.nZ)(),c=()=>{(0,F.$)().isOutlinerMode||(0,S.dI)().unregisterOutliner()},g=document.createElement("div");g.style.display="none";const v=new M({propsData:{outlinerSheetModel:o.value,namespace:d.value}});v.$mount(),g.appendChild(v.$el),document.body.appendChild(g),await(0,l.Gm)();const m=await(0,h.ZZ)({title:i("Save"),suggestPath:{suggestedName:(0,f.N6)(null!==(t=r.value.rootTopic.title)&&void 0!==t?t:"")||(0,f.N6)(null!==(n=r.value.title)&&void 0!==n?n:"")},filters:[{name:"PDF",extensions:["pdf"]}]}),I=await(0,x.J)({...H,hasWatermark:e},d.value);if(await(0,p._v)(500),m){const e={pageSize:{width:H.pageSize.x/25.4,height:H.pageSize.y/25.4},marginsType:0,printBackground:!0,landscape:"landscape"==H.orientation},t=await(0,a.getCurrentWebContents)().printToPDF(e);await(0,l.yS)(m,t),I(),c(),(0,u.Rg)().addRateMasValue(10),s.shell.openPath(m)}else I(),c();g.remove()}({hasWatermark:i}):1===c&&await async function({hasWatermark:e}){const t=(0,u.JE)().T,{outlinerModel:n}=(0,S.dI)(),{sheets:i}=(0,b.nZ)(),r=i.value.map((e=>e.id)),c=document.createElement("div");c.style.display="none",n.value.forEach(((e,t)=>{const n=new M({propsData:{outlinerSheetModel:e,namespace:r[t]}});n.$mount(),c.appendChild(n.$el)})),document.body.appendChild(c),await(0,l.Gm)();const{canceled:g,filePaths:h}=await a.dialog.showOpenDialog((0,a.getCurrentWindow)(),{title:t("Save"),buttonLabel:t("Save"),properties:["openDirectory","createDirectory"],securityScopedBookmarks:!0});if(g||!h||!h.length)return;const v=h[0],m=(0,f.o_)(v,(0,I.FU)().title);await d.Z.ensureDir(m);const k=new l.Y8;for(let t=0;t<r.length;t++){const n=r[t],l=await(0,x.J)({...H,hasWatermark:e},n);await(0,p._v)(500);const c={pageSize:{width:H.pageSize.x/25.4,height:H.pageSize.y/25.4},marginsType:0,printBackground:!0,landscape:"landscape"==H.orientation},s=await(0,a.getCurrentWebContents)().printToPDF(c);l();const u=i.value[t].title,g=k.makeSafeName(u),h=o().resolve(m,g+".pdf");await d.Z.writeFile(h,s)}(0,F.$)().isOutlinerMode||(0,S.dI)().unregisterOutliner();s.shell.openPath(m),c.remove()}({hasWatermark:i})),(0,v.L9)({eventCategory:"export",eventAction:"exportPdf"})}async function P(e,t){let n={contentScope:0,exportTo:0,transparent:!1,exportCategory:"mindmap"};if(!t.targetBranch){const e=await c.ZP.fetch(g.Fx,{name:"dialog-export-to-pdf",parentId:window.id,wait:!0,query:{bound:[0,0],editorId:window.editorId}});if(!e)return;n=e.result}return n}const D=async(e,t)=>{var n,i;const{getSheetViewer:o,activeSheetId:d,activeSheet:c}=(0,b.nZ)(),s=(0,f.N6)(null!==(n=c.value.title)&&void 0!==n?n:""),u=(0,f.N6)(null!==(i=c.value.rootTopic.title)&&void 0!==i?i:""),p=u||s,g=o(d.value),h=await g.exportSVGElement({disableEmbedFonts:!0,padding:{top:50,left:50,right:50,bottom:e?120:50},opaqueBackground:!t,hasWatermark:e}),v=Number(h.getAttribute("width")),I=Number(h.getAttribute("height")),k={[d.value]:{data:h,width:v,height:I}},T=(0,m.gP)(),x=25.4/T.x,y=25.4/T.y,S=Math.min(v,I)*x,w=Math.max(v,I)*y,C={content:"currentMap",orientation:v>I?"landscape":"portrait",pageSetup:{background:!t},margins:{top:0,bottom:0,left:0,right:0},pageSize:{x:Math.max(S,21),y:Math.max(w,21*w/S)},scale:"fitMap",hasWatermark:e},E=await(0,r.k6)(C,k),M=I/T.y,F=v/T.x,N={pageRanges:"1",pageSize:{width:"landscape"===C.orientation?M:F,height:"landscape"===C.orientation?F:M},printBackground:!0,landscape:"landscape"===C.orientation};await(0,L.SX)();const O=(0,a.getCurrentWebContents)(),A=await O.printToPDF(N);E&&E.clean(),await(0,l.Gm)(),await Z(A,p)},_=async(e,t)=>{const{getSheetViewer:n,sheets:i}=(0,b.nZ)(),o={},d={},c=(0,m.gP)(),s=25.4/c.x,u=25.4/c.y,p={},g=new l.Y8;for(const a of i.value){const i=n(a.id).exportSVGElement,l=a.id,r=a.title,c=g.makeSafeName(r);d[l]=c;const h=await i({disableEmbedFonts:!0,padding:{top:50,left:50,right:50,bottom:e?120:50},opaqueBackground:!t,hasWatermark:e}),v=Number(h.getAttribute("width")),m=Number(h.getAttribute("height")),f=Math.min(v,m)*s,b=Math.max(v,m)*u;o[l]={x:Math.max(f,21),y:Math.max(b,21/b*f),orientation:v>m?"landscape":"portrait"},p[a.id]={data:h,width:v,height:m}}const h={content:"workbook",pageSetup:{background:!t},margins:{top:0,bottom:0,left:0,right:0},pageSizes:o,pageSize:{x:210,y:297},scale:"fitMap",hasWatermark:e},v=await(0,r.k6)(h,p),f={},k=v.effectSide.forSheets,T=Object.keys(k),x={};T.forEach((e=>{const t=k[e];x[e]=t.length>0&&t[0]}));for(const e of T){const t=x[e];Object.values(x).filter((e=>e&&e!==t)).forEach((e=>{v.hideSvg(e)})),v.showSvg(t);const n={widthInch:p[e].width/c.x,heightInch:p[e].height/c.y},i=o[e].orientation,l={pageSize:{pageRanges:"1",width:"portrait"===i?n.widthInch:n.heightInch,height:"portrait"===i?n.heightInch:n.widthInch},printBackground:!0,landscape:"landscape"===i};await(0,L.SX)();const r=(0,a.getCurrentWebContents)(),d=await r.printToPDF(l);d&&(f[e]=d)}v&&v.clean();const{title:y}=(0,I.FU)(),S=new O.Document;for(const e of T){const t=new O.ExternalDocument(f[e]);S.addPagesOf(t)}const w=await S.asBuffer();await(0,l.Gm)(),await Z(w,y)},q=async()=>{const{activeSheetId:e,selection:t,document:n,getSheetViewer:i,currentZoomScale:o}=(0,b.nZ)();await(0,l.Ae)("pdf");const d=t.value.modelIds;if(0===d.length)return;const c=(0,l.nv)(d),s=!(0,N.A)().contexts["activation.isValid"],u=(0,m.gP)(),p=25.4/u.x,g=25.4/u.y,h={},v={},f={},k=new l.Y8;await Promise.all(c.map((t=>{const a=i(e.value).exportSVGElement,l=n.value.query({id:t}).asTopic().title,r=k.makeSafeName(l);return f[t]=r,a({scopeTopicId:t,disableEmbedFonts:!0,padding:{top:50,left:50,right:50,bottom:s?120:50},opaqueBackground:!0}).then((e=>{const n=Number(e.getAttribute("width")),i=Number(e.getAttribute("height")),a=Math.min(n,i)*p,l=Math.max(n,i)*g;v[t]={x:Math.max(a,21),y:Math.max(l,21/l*a),orientation:n>i?"landscape":"portrait"},h[t]={data:e,width:n,height:i,scale:o.value}}))})));const T={content:"workbook",pageSetup:{background:!0},margins:{top:0,bottom:0,left:0,right:0},pageSizes:v,pageSize:{x:210,y:297},scale:"fitMap",hasWatermark:s},x=await(0,r.g5)(T,h),y={},S=x.effectSide.forSheets,w={};c.forEach((e=>{const t=S[e];w[e]=t.length>0&&t[0]}));for(const e of c){const t=w[e];Object.values(w).filter((e=>e&&e!==t)).forEach((e=>{x.hideSvg(e)})),x.showSvg(t);const n={widthInch:h[e].width/u.x,heightInch:h[e].height/u.y},i=T.pageSizes[e].orientation||T.orientation,o={pageRanges:"1",pageSize:{width:"landscape"===i?n.heightInch:n.widthInch,height:"landscape"===i?n.widthInch:n.heightInch},printBackground:!0,landscape:"landscape"===i},l=(0,a.getCurrentWebContents)(),r=await l.printToPDF(o);r&&(y[e]=r)}if(x&&x.clean(),await(0,l.Gm)(),1===Object.keys(h).length)await Z(Object.values(y)[0],Object.values(f)[0]);else if(Object.keys(h).length>1){const{title:e}=(0,I.FU)();await B(y,f,e)}};const Z=async(e,t)=>{const{T:n}=(0,u.JE)(),i=await(0,h.ZZ)({title:n("Save"),suggestPath:{suggestedName:t},filters:[{name:"PDF",extensions:["pdf"]}]});i&&(await(0,l.yS)(i,e),s.shell.openPath(i))},B=async(e,t,n)=>{const{T:i}=(0,u.JE)(),{canceled:r,filePaths:c}=await a.dialog.showOpenDialog((0,a.getCurrentWindow)(),{title:i("Save"),buttonLabel:i("Save"),properties:["openDirectory","createDirectory"],securityScopedBookmarks:!0});if(r||!c||!c.length)return;const p=c[0],g=(0,f.o_)(p,n);await d.Z.ensureDir(g);for(const n of Object.keys(e)){const i=t[n],a=o().resolve(g,i+".pdf");await(0,l.yS)(a,e[n])}s.shell.openPath(g)},H={content:"currentMap",copies:1,margins:{top:"20mm",bottom:"6mm",left:"14mm",right:"14mm"},orientation:"landscape",pageSetup:{background:!0},pageSize:{x:297,y:210},saveAsPdf:!0,scale:"fitMap",sides:"one-sided",useSelectedPrinter:!1}},48825:(e,t,n)=>{"use strict";n.d(t,{yE:()=>ii,ye:()=>oi,P1:()=>h,_p:()=>ni,YH:()=>_n,OD:()=>ve,a7:()=>me,_l:()=>$n,EQ:()=>Te,$j:()=>Rn,yS:()=>xe,e3:()=>he,xS:()=>Fn,ww:()=>ge,$R:()=>ne,b0:()=>be,_v:()=>Yn,Y8:()=>ae,rH:()=>le,d5:()=>re,OE:()=>Xn,Gj:()=>oe,y9:()=>T,Ww:()=>zn,fW:()=>Kn,xI:()=>i,N8:()=>Ie,wM:()=>ce,kI:()=>ke,$F:()=>de,KQ:()=>ei,u9:()=>v,Dq:()=>ti,N_:()=>ie,dI:()=>ai,Qp:()=>Ln});var i={};n.r(i),n.d(i,{getEquationImageInfo:()=>We,getEquationXapUrl:()=>Re,getLinkTitle:()=>Ze,getMarkerResources:()=>je,getMostlyUsedLabels:()=>ze,openLink:()=>_e,selectionNavigateDown:()=>He,selectionNavigateUp:()=>Be,setLabelSortOrder:()=>Ge,sortLabels:()=>Ue});var o=n(2954),a=n(52353),l=n.n(a),r=n(18446),d=n.n(r),c=n(87141),s=n(96829),u=n(63111),p=n(84374),g=n(27049);const h=20,v={"1. ":"numeral-arabic","A. ":"alphabet-uppercase","a. ":"alphabet-lowercase","I. ":"numeral-roman"};function m(e,{rootTopicId:t,isParseAll:n}={rootTopicId:"",isParseAll:!1}){var i,o;let a=e.rootTopic;t&&(a=(null===(i=e.query({id:t}))||void 0===i?void 0:i.asTopic())||e.rootTopic);const l={central:b(a,0),attached:[],detached:[],labelSortOrder:null!==(o=e.labelSortOrder)&&void 0!==o?o:"auto"};return a.children.forEach((e=>f(l.attached,e,1,n))),t||a.detachedChildren.forEach((e=>f(l.detached,e,1,n))),l}function f(e,t,n,i=!1){if(n>h)return;const o=b(t,n);e.push(o),(i||!o.folded&&!o.hidden)&&t.children.forEach((t=>f(e,t,n+1,i)))}function b(e,t){var n,i;return{topicType:e.topicType,topicId:e.id,parentTopicId:null===(n=e.parentTopic)||void 0===n?void 0:n.id,children:e.children.map((e=>e.id)),detachedChildren:e.detachedChildren.map((e=>e.id)),depth:t,title:e.title||"",attributedTitle:e.attributedTitle||[],labels:Array.from(e.labels.filter(Boolean)),notes:(null===(i=e.notes)||void 0===i?void 0:i.text)?e.notes:null,descendantLength:k(e),folded:"folded"===e.branchState,hidden:I(e,t),markers:e.markers.map((e=>function(e){const{markerModule:t}=(0,p.nZ)(),n=t.getMarkerInfoById(e);return n?{id:e,url:n.imageSrc}:null}(e))).filter(Boolean),webpage:p.HG.webpageFromTopic(e),localFileLink:p.HG.localFileLinkFromTopic(e),topicLink:p.HG.topicLinkFromTopic(e),attachment:p.HG.attachmentFromTopic(e),equation:p.HG.equationFromTopic(e),image:p.HG.imageFromTopic(e),audioNotes:p.HG.audioNotesFromTopic(e),task:e.taskPresentation&&{status:1===e.taskProgress?"done":"todo",presentation:e.taskPresentation,priority:e.taskInfoPriority,progress:e.taskProgress},numbering:e.numberingPattern&&{numberingPattern:e.numberingPattern,numberingTiered:e.numberingTiered,numberingFixedIndex:e.numberingFixedIndex,numberingText:p.HG.getNumberingTextOfTopic(e)}}}function I(e,t){return!(t<=1)&&(!!e.parentTopic&&("folded"===e.parentTopic.branchState||I(e.parentTopic,t-1)))}function k(e){if(!e)return 0;const t=e.children.map(k).reduce(((e,t)=>e+t),0);return e.children.length+t}function T(e,t){switch(t.type){case"add":return function(e,t){var n,i,o,a,l,r,d,c,s,u,g;const h=null===(n=e.query({id:t.parentTopicId}))||void 0===n?void 0:n.asTopic();if(!h)return e;let v=e.Topic().attrs({title:t.title,attributedTitle:t.attributedTitle||[],branchState:t.branchState,labels:t.labels,markers:t.markers,notes:t.notes,href:t.topicLink||t.localFileLink||t.webpage||t.attachment,imagePlacement:null===(i=t.image)||void 0===i?void 0:i.placement,imageSource:null===(o=t.image)||void 0===o?void 0:o.src,imageIsMathJaxImage:!!t.equation});const m=t.equation;m&&(v=v.extensionBy(p.o9.Equation,{content:{content:m,imageSource:null===(a=t.image)||void 0===a?void 0:a.src}}),t.image&&(v=v.attrs({imageSource:null===(l=t.image)||void 0===l?void 0:l.src,imageIsMathJaxImage:!0,imageWidth:null===(r=t.image)||void 0===r?void 0:r.width})));t.audioNotes&&(v=v.attrs({title:t.title}).extensionBy(p.o9.AudioNotes,{content:null,resources:[t.audioNotes]}));t.task&&(v=v.extensionBy(p.o9.Task,{content:{status:t.task}}));t.numbering&&(v=v.attrs({numberingPattern:t.numbering.numberingPattern||null,numberingTiered:t.numbering.numberingTiered||null,numberingFixedIndex:null!==(d=t.numbering.numberingFixedIndex)&&void 0!==d?d:null}));"function"==typeof t.callback&&t.callback({newTopicId:v.id});if("detached"===t.topicType)return null===(s=null===(c=h.asMutable().addDetachedChildren([v],{at:t.targetIndex}))||void 0===c?void 0:c.commit())||void 0===s?void 0:s.ownerDocument;return null===(g=null===(u=h.asMutable().addChildren([v],{at:t.targetIndex}))||void 0===u?void 0:u.commit())||void 0===g?void 0:g.ownerDocument}(e,t);case"update":return function(e,t){var n,i,o,a,r,d,c,s,u,g,h,v,m,f,b,I,k;const T=null!==(o=null!==(i=null!==(n=t.topicLink)&&void 0!==n?n:t.localFileLink)&&void 0!==i?i:t.webpage)&&void 0!==o?o:t.attachment;let x=null===(r=null===(a=e.query({id:t.topicId}))||void 0===a?void 0:a.asTopic())||void 0===r?void 0:r.asMutable().attrs({...!l()(t.title)&&{title:t.title},...!l()(t.attributedTitle)&&{attributedTitle:t.attributedTitle},...!l()(t.branchState)&&{branchState:t.branchState},...!l()(t.labels)&&{labels:t.labels},...!l()(t.markers)&&{markers:t.markers},...!l()(t.notes)&&{notes:t.notes},...!l()(T)&&{href:T},...!l()(null===(d=t.image)||void 0===d?void 0:d.placement)&&{imagePlacement:null===(c=t.image)||void 0===c?void 0:c.placement},...!l()(null===(s=t.image)||void 0===s?void 0:s.src)&&{imageSource:null===(u=t.image)||void 0===u?void 0:u.src},...!l()(null===(g=t.image)||void 0===g?void 0:g.width)&&{imageWidth:null===(h=t.image)||void 0===h?void 0:h.width},...!l()(null===(v=t.image)||void 0===v?void 0:v.height)&&{imageHeight:null===(m=t.image)||void 0===m?void 0:m.height},...!l()(t.equation)&&{imageIsMathJaxImage:!!t.equation},...!l()(t.numbering)&&{numberingPattern:t.numbering.numberingPattern||null,numberingTiered:t.numbering.numberingTiered||null,numberingFixedIndex:null!==(f=t.numbering.numberingFixedIndex)&&void 0!==f?f:null}});if(!x)return e;const y=t.equation;y&&(x=x.extensionBy(p.o9.Equation,{content:{content:y,imageSource:null===(b=t.image)||void 0===b?void 0:b.src}}),t.image&&(x=x.attrs({imageSource:null===(I=t.image)||void 0===I?void 0:I.src,imageIsMathJaxImage:!0,imageWidth:null===(k=t.image)||void 0===k?void 0:k.width})));t.audioNotes&&(x=x.attrs({title:t.title}).extensionBy(p.o9.AudioNotes,{content:null,resources:[t.audioNotes]}));t.task&&(x=x.extensionBy(p.o9.Task,{content:{status:t.task}}));"function"==typeof t.callback&&t.callback({topicId:x.id});return x.commit().ownerDocument}(e,t);case"delete":return function(e,t){var n,i;const o=null===(n=e.query({id:t.topicId}))||void 0===n?void 0:n.asTopic(),a=null==o?void 0:o.ownerSheet,l=null===(i=null==o?void 0:o.asRemovable().remove())||void 0===i?void 0:i.ownerSheet,r=p.HG.findSelectableTopicAfterDeletion(null==o?void 0:o.id,l,a);"function"==typeof t.callback&&t.callback({nextTopicId:r});return null==l?void 0:l.ownerDocument}(e,t);case"move":return function(e,t){var n,i,o;"function"==typeof t.callback&&t.callback({topicId:t.topicId});return(null===(o=null===(i=null===(n=e.query({id:t.topicId}))||void 0===n?void 0:n.asTopic())||void 0===i?void 0:i.asMovable({parent:{id:t.toParentTopicId},at:t.toTargetIndex,as:"detached"===t.topicType?"detached":"attached"}))||void 0===o?void 0:o.move().ownerDocument)||e}(e,t);case"deleteAttrs":return function(e,t){var n,i;const o=t.topicLink||t.localFileLink||t.webpage||t.attachment;let a=null===(i=null===(n=e.query({id:t.topicId}))||void 0===n?void 0:n.asTopic())||void 0===i?void 0:i.asMutable().attrs({branchState:x(t.branchState),labels:x(t.labels),markers:x(t.markers),notes:x(t.notes),href:x(o),imagePlacement:x(t.image),imageSource:x(t.image),imageIsMathJaxImage:x(t.equation),numberingPattern:x(t.numbering),numberingTiered:x(t.numbering),numberingFixedIndex:x(t.numbering)});o&&(a=null==a?void 0:a.extensionBy(p.o9.WebVideo,null));t.equation&&(a=null==a?void 0:a.extensionBy(p.o9.Equation,null));t.audioNotes&&(a=null==a?void 0:a.extensionBy(p.o9.AudioNotes,null));t.task&&(a=null==a?void 0:a.extensionBy(p.o9.Task,null));"function"==typeof t.callback&&t.callback({topicId:a.id});return a.commit().ownerDocument}(e,t)}}function x(e){return e?null:void 0}var y=n(72298),S=n(71017),w=n.n(S),C=n(58659),E=n(12455),M=n(57507),L=n(45412),F=n(85786),N=n(7104);const O=[{spellCheck:!0},{label:(0,s.WZ)("Learn Spelling"),handler(){const e=be();e.length<=0||L.A.add(e)}},{divider:!0},{label:(0,s.WZ)("Copy"),shortcut:"CmdOrCtrl+C",commandId:"copy"},{label:(0,s.WZ)("Cut"),shortcut:"CmdOrCtrl+X",commandId:"cut"},{label:(0,s.WZ)("Paste"),shortcut:"CmdOrCtrl+V",commandId:"paste"},{label:(0,s.WZ)("Delete"),shortcut:"Backspace",commandId:"delete"},{divider:!0},{label:(0,s.WZ)("Select All"),shortcut:"CmdOrCtrl+A",commandId:"selectAll"}],A=[{commandId:"editor.removeMarker",label:(0,s.WZ)("Marker"),hideOnDisabled:!0},{commandId:"editor.removeLabel",label:(0,s.WZ)("Label"),hideOnDisabled:!0},{commandId:"editor.removeLink",label:(0,s.WZ)("Link"),hideOnDisabled:!0},{commandId:"editor.removeTodo",label:(0,s.WZ)("Task"),hideOnDisabled:!0}],P=[{commandId:"editor.clearText",label:(0,s.WZ)("Clear Text"),hideOnDisabled:!0},{commandId:"editor.removeMarkerForTopicContextMenu",label:(0,s.WZ)("Remove Marker"),hideOnDisabled:!0},{commandId:"editor.removeLabelForTopicContextMenu",label:(0,s.WZ)("Remove Label"),hideOnDisabled:!0},{commandId:"editor.removeLinkForTopicContextMenu",label:(0,s.WZ)("Remove Link"),hideOnDisabled:!0},{commandId:"editor.removeTodoForTopicContextMenu",label:(0,s.WZ)("Remove Task"),hideOnDisabled:!0},{submenu:A,commandId:"editor.removeTopicContent",label:(0,s.WZ)("Remove"),hideOnDisabled:!0}],D=[...[{label:(0,s.WZ)("Insert"),submenu:[{label:(0,s.WZ)("Note"),commandId:"editor.showNotesEditor"},{label:(0,s.WZ)("Label"),commandId:"editor.showLabelEditor"},{commandId:"editor.addTodo",label:(0,s.WZ)("To-do")},{label:(0,s.WZ)("Link(noun)"),submenu:[{label:(0,s.WZ)("Webpage"),commandId:"editor.showHyperlinkEditor"},{label:(0,s.WZ)("Topic"),commandId:"editor.showTopiclinkEditor"},{label:(0,s.WZ)("Local File"),commandId:"editor.addFileLink"},{label:(0,s.WZ)("Local Folder"),commandId:"editor.addFolderLink"}].filter((e=>Boolean(e)))},{divider:!0},{label:(0,s.WZ)("Attachment"),commandId:"editor.addAttachmentOnNewTopic"},{label:(0,s.WZ)("Audio Note"),commandId:"editor.addAudioOnNewTopic"},{divider:!0},{label:(0,s.WZ)("Marker"),commandId:"workbench.toggleMarkerPanel"},{label:(0,s.WZ)("Sticker"),commandId:"workbench.toggleStickerPanel"},{label:(0,s.WZ)("Illustration"),commandId:"workbench.toggleIllustrationPanel"},{label:(0,s.WZ)("Local Image"),commandId:"editor.addLocalImage"},{label:(0,s.WZ)("Equation"),commandId:"editor.showEquationEditor"}]}],{divider:!0},{label:(0,s.WZ)("Copy"),shortcut:"CmdOrCtrl+C",commandId:"copy"},{label:(0,s.WZ)("Cut"),shortcut:"CmdOrCtrl+X",commandId:"cut"},{label:(0,s.WZ)("Paste"),shortcut:"CmdOrCtrl+V",commandId:"paste"},{label:(0,s.WZ)("Duplicate"),shortcut:"CmdOrCtrl+D",commandId:"duplicate"},{divider:!0},{label:(0,s.WZ)("Indent"),shortcut:"Tab",commandId:"outliner.indent"},{label:(0,s.WZ)("Outdent"),shortcut:"Shift+Tab",commandId:"outliner.outdent"},{divider:!0},{label:(0,s.WZ)("Delete"),shortcut:"Backspace",commandId:"delete"},...P,{divider:!0},{label:(0,s.WZ)("Mark as Completed"),commandId:"editor.checkTodo",hideOnDisabled:!0},{label:(0,s.WZ)("Mark as Uncompleted"),commandId:"editor.uncheckTodo",hideOnDisabled:!0},{label:(0,s.WZ)("Mark as Canceled"),commandId:"editor.cancelTask",hideOnDisabled:!0},{divider:!0},{getLabel:({selectionIds:e,topicItems:t})=>e.map((e=>t.find((t=>t.topicId===e)).folded)).reduce(((e,t)=>e||t),!1)?(0,s.WZ)("Unfold Subtopic"):(0,s.WZ)("Fold Subtopic"),shortcut:"CmdOrCtrl+/",commandId:"editor.toggleBranch"}],_=[...D,{divider:!0},{getLabel:({isBranchOnlyMode:e})=>e?(0,s.WZ)("Show Full Content"):(0,s.WZ)("Show Branch Only"),getCommandId:({isBranchOnlyMode:e})=>e?"editor.exitBranchOnly":"editor.showBranchOnly"},{divider:!0},{label:(0,s.WZ)("New Sheet From Topic"),commandId:"editor.newSheetFromTopic"}],q=[{label:(0,s.WZ)("Delete"),commandId:"outliner.deleteTask"},{label:(0,s.WZ)("Mark as Canceled"),commandId:"editor.cancelTask"}],Z=[{label:(0,s.WZ)("Edit"),commandId:"outliner.editMarker"},{divider:!0},{label:(0,s.WZ)("Copy"),shortcut:"CmdOrCtrl+C",commandId:"copy"},{label:(0,s.WZ)("Cut"),shortcut:"CmdOrCtrl+X",commandId:"cut"},{label:(0,s.WZ)("Paste"),shortcut:"CmdOrCtrl+V",commandId:"paste"},{label:(0,s.WZ)("Delete"),shortcut:"Backspace",commandId:"outliner.deleteMarker"}],B=[{label:(0,s.WZ)("Delete"),shortcut:"Backspace",commandId:"outliner.deleteLabel"}],H=[{label:(0,s.WZ)("Edit"),commandId:"editor.showHyperlinkEditor"},{divider:!0},{label:(0,s.WZ)("Delete"),commandId:"outliner.removeHyperlink"}],z=[{label:(0,s.WZ)("Edit"),commandId:"editor.showTopiclinkEditor"},{divider:!0},{label:(0,s.WZ)("Delete"),commandId:"outliner.removeHyperlink"}],W=[{label:(0,s.WZ)("Edit"),commandId:"editor.addFileLink"},{divider:!0},{label:(0,s.WZ)("Delete"),commandId:"outliner.removeHyperlink"}],R=[{label:(0,s.WZ)("Edit"),commandId:"editor.addFolderLink"},{divider:!0},{label:(0,s.WZ)("Delete"),commandId:"outliner.removeHyperlink"}],j=[{label:(0,s.WZ)("Delete"),commandId:"outliner.removeHyperlink"},{divider:!0},{label:(0,s.WZ)("Save As"),commandId:"outliner.saveAsAttachment"}],G=[{label:(0,s.WZ)("Preview"),shortcut:"Space",commandId:"outliner.previewImage"},{divider:!0},{label:(0,s.WZ)("Copy"),shortcut:"CmdOrCtrl+C",commandId:"copy"},{label:(0,s.WZ)("Cut"),shortcut:"CmdOrCtrl+X",commandId:"cut"},{label:(0,s.WZ)("Paste"),shortcut:"CmdOrCtrl+V",commandId:"paste"},{label:(0,s.WZ)("Delete"),shortcut:"Backspace",commandId:"delete"},{divider:!0},{label:(0,s.WZ)("Save as"),commandId:"outliner.saveAsImage"},{divider:!0},{label:(0,s.WZ)("Reset Size"),commandId:"outliner.resizeTopicImage"}],U=[{label:(0,s.WZ)("Copy"),shortcut:"CmdOrCtrl+C",commandId:"copy"},{label:(0,s.WZ)("Cut"),shortcut:"CmdOrCtrl+X",commandId:"cut"},{label:(0,s.WZ)("Paste"),shortcut:"CmdOrCtrl+V",commandId:"paste"},{label:(0,s.WZ)("Delete"),shortcut:"Backspace",commandId:"outliner.removeTopicEquation"},{divider:!0},{label:(0,s.WZ)("Save as"),commandId:"outliner.saveAsEquation"},{divider:!0},{label:(0,s.WZ)("Reset Size"),commandId:"outliner.resizeTopicEquation"}],V=[{label:(0,s.WZ)("Copy"),shortcut:"CmdOrCtrl+C",handler(){document.execCommand("copy")}},{label:(0,s.WZ)("Cut"),shortcut:"CmdOrCtrl+X",handler(){document.execCommand("cut")}},{label:(0,s.WZ)("Paste"),shortcut:"CmdOrCtrl+V",handler(){document.execCommand("paste")}},{label:(0,s.WZ)("Delete"),shortcut:"Backspace",handler(){document.execCommand("delete")}},{divider:!0},{label:(0,s.WZ)("Select All"),shortcut:"CmdOrCtrl+A",handler(){document.execCommand("selectAll")}}],Y={TEXT:O,TOPIC:_,MULTI_TOPIC:D,TASK:q,MARKER:Z,LABEL:B,WEBPAGE:H,TOPICLINK:z,LOCALFILELINK:W,FOLDERLINK:R,ATTACHMENT:j,IMAGE:G,EQUATION:U,NOTES:[{spellCheck:!0},...V],NOTES_LINK:[{label:(0,s.WZ)("Open Link"),handler({currEditingNotesHref:e}){(0,F.DL)(e,((e,...t)=>(0,c.JE)().T(e,...t)))}},{label:(0,s.WZ)("Copy Link"),handler({currEditingNotesHref:e}){y.clipboard.writeText(e)}},{label:(0,s.WZ)("Edit Link"),handler(){(0,c.JX)().handleCommand("outliner.showNoteLinkInput")}},{label:(0,s.WZ)("Remove Link"),handler({currEditingNotesEditor:e}){e&&e.removeLink()}},{divider:!0},...V],AUDIO_NOTES:[{label:(0,s.WZ)("Delete"),commandId:"outliner.removeAudioNotes"},{divider:!0},{label:(0,s.WZ)("Save as"),commandId:"outliner.saveAsAudioNote"}]};function X(e){return u.TK.includes(e.commandId)&&!u.WK.includes(e.commandId)}function J(e){return Boolean(e.submenu&&e.submenu.filter((e=>!e.divider)).every(X))}function K(e){if(!0!==e.hideOnDisabled)return!0;const t=(0,c.JX)().commandById(e.commandId);return!!t&&t.enabled}const Q=e=>{const t=(0,c.JE)().T,n=e=>{(0,c.JX)().handleCommand(e)},i=e=>{var t;const n=null===(t=(0,E.A)())||void 0===t?void 0:t.commandById(e);return!!n&&!!n.enabled};function o(a){var l;const r=[];for(let d=0;d<a.length;d++){const s=a[d];if(s.divider){"separator"!==(null===(l=r[r.length-1])||void 0===l?void 0:l.type)&&r.push({type:"separator"});continue}if(s.spellCheck){const e=be().trim();if(e.length<=0)continue;const n=L.A.getCorrectionsForMisspelling(e);if(n.length>0)for(const e of n)r.push({label:e,click:()=>{document.execCommand("insertText",!1,e)}});else r.push({label:t("No Guesses Found"),enabled:!1});r.push({type:"separator"});continue}let u=s.label;s.getLabel&&(u=s.getLabel(e.value));let p=()=>s.handler(e.value);if(s.commandId&&(p=()=>n(s.commandId)),"function"==typeof s.getCommandId){const t=s.getCommandId(e.value);s.commandId=t,p=()=>n(t)}const g=!(0,E.A)().contexts["activation.isValid"]&&(X(s)||J(s)),h="dark"===(0,c.S)().appearance?"static/assets/images/pro/menu-pro-small-dark@2x.png":"static/assets/images/pro/menu-pro-small@2x.png";r.push(Object.assign({label:t("$$",u),click:p,enabled:!s.commandId||i(s.commandId)},s.shortcut?{accelerator:(0,C.ic)(s.shortcut)}:{},g?{icon:w().join((0,N.bY)(),h)}:{},s.submenu?{submenu:o(s.submenu.filter(K))}:{}))}return r}return{openOutlinerCtxMenu:e=>{"TEXT"===e?L.A.setSuggestedBuildSpellContextMenuFn((()=>{(0,M.k)(o(Y.TEXT.filter(K)))})):setTimeout((()=>{(0,M.k)(o(Y[e].filter(K)))}),200)}}};var $=n(37529),ee=n.n($),te=n(14766);const ne=e=>e.innerText.replace(/&nbsp;/g," "),ie=(e,t,n)=>{if(n&&n.length>1){const t=document.createDocumentFragment();let i;for(let e=0;e<n.length;e++){const o=n[e];i=document.createElement("span"),i.innerText=o.text,i.classList.add("outliner-topic-title"),t.appendChild(i)}for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(t)}else e.innerText=t},oe=(e,t=document)=>e?t.querySelector(`#topic-${(0,te.N)(e)} .outliner-topic-title`):null,ae=(e,t=document)=>e?t.querySelector(`#topic-${(0,te.N)(e)}`):null,le=e=>e.closest(".outliner-topic-container"),re=e=>{const t=le(e);return t?t.dataset.topicId:""},de=(e,t=0)=>{se(e,t,t)},ce=(e,t,n,i)=>{let o=0;const a=ee()(n,t,i);for(;a.length>0&&a[0][0]===ee().EQUAL;)o+=a.shift()[1].length;a.length>0&&a[0][0]===ee().DELETE&&(o+=a[0][1].length);const l=o;for(const[e,t]of a.filter((([e])=>e!==ee().EQUAL)))e===ee().INSERT?o+=t.length:e===ee().DELETE&&(o-=t.length);o=o<0?0:o,l!==o&&de(e,o)},se=(e,t=0,n=0)=>{try{if(e.childNodes.length<=0)return void e.focus();const i=document.createRange(),o=window.getSelection(),a={node:-1,offset:0,padding:t},l={node:-1,offset:0,padding:n};let r=null,d=null;for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(a.node++,r=e.childNodes[a.node],n.nodeValue){if(!(a.padding>0))break;if(n.nodeValue.length>=a.padding){a.offset=a.padding,a.padding=0;break}a.padding-=n.nodeValue.length}else if("BR"===n.nodeName&&a.padding--,"SPAN"===n.nodeName){if(r=e.childNodes[a.node].childNodes[0],!(a.padding>0))break;if(!(n.innerText.length+a.offset<a.padding)){a.offset=a.padding-a.offset,a.padding=0;break}a.offset+=n.innerText.length}}for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(l.node++,d=e.childNodes[l.node],n.nodeValue){if(!(l.padding>0))break;if(n.nodeValue.length>=l.padding){l.offset=l.padding,l.padding=0;break}l.padding-=n.nodeValue.length}else if("BR"===n.nodeName&&l.padding--,"SPAN"===n.nodeName){if(d=e.childNodes[l.node].childNodes[0],!(l.padding>0))break;if(!(n.innerText.length+l.offset<l.padding)){l.offset=l.padding-l.offset,l.padding=0;break}l.offset+=n.innerText.length}}if(!r||!d)return;i.setStart(r,a.offset),i.setEnd(d,l.offset),o.removeAllRanges(),o.addRange(i)}catch(t){e.focus()}},ue=e=>Array.from(e).map((e=>"#text"===e.nodeName||"BR"===e.nodeName?e:ue(e.childNodes))).flat(),pe=e=>{const t=e.ownerDocument||e.document,n=t.defaultView||t.parentWindow;let i;if(void 0!==n.getSelection){if(i=n.getSelection(),i.rangeCount>0){const t=n.getSelection().getRangeAt(0);let{startOffset:i,endOffset:o}=t;const{startContainer:a,endContainer:l}=t,r=ue(e.childNodes),d=e===a?i:Array.prototype.indexOf.call(r,a),c=e===l?o:Array.prototype.indexOf.call(r,l);return d>0&&(i+=Array.prototype.slice.call(r,0,d).map((e=>{switch(e.nodeName){case"#text":return e.nodeValue.length;case"BR":return 1}})).reduce(((e,t)=>e+t),0)),c>0&&(o+=Array.prototype.slice.call(r,0,c).map((e=>{switch(e.nodeName){case"#text":return e.nodeValue.length;case"BR":return 1}})).reduce(((e,t)=>e+t),0)),[i,o]}}else if((i=t.selection)&&"Control"!=i.type){const n=i.createRange(),o=t.body.createTextRange();return o.moveToElementText(e),o.setEndPoint("EndToEnd",n),[o.startOffset,o.endOffset]}},ge=e=>{const t=pe(e)||[0,0];return t[1]-t[0]},he=e=>(pe(e)||[0,0])[1],ve=e=>{const t=document.body.querySelector("#dummy-text-element");t&&t.parentElement.removeChild(t);const n=e.cloneNode(!1);n.id="dummy-text-element",document.body.appendChild(n);const i=document.createElement("span");n.appendChild(i);const o=document.createElement("span");n.appendChild(o);const a=window.getComputedStyle(e,null);n.style.display="block",n.style.overflowY="auto",n.style.position="fixed",n.style.bottom="100px",n.style.left="5000px",n.style.zIndex="100",n.style.width=a.width,n.style.height=a.height,n.style.fontFamily=a.fontFamily,n.style.fontSize=a.fontSize;const l=ne(e),r=he(e);i.innerText="a";const d=Array.from(i.getClientRects())[0].height;i.innerHTML=l.slice(0,r).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(new RegExp(String.fromCharCode(10),"g"),"<br/>"),o.innerHTML=l.slice(r).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(new RegExp(String.fromCharCode(10),"g"),"<br/>");const c=Array.from(i.getClientRects()),s=Array.from(o.getClientRects()),u=(e,t,n=.001)=>Math.abs(e-t)<n;u(s.map((({height:e})=>e)).reduce(((e,t)=>e+t)),d);return{isOnFirstLine:0===l.length||0===r||u(c.map((({height:e})=>e)).reduce(((e,t)=>e+t)),d)&&c[0].top===s[0].top,isOnLastLine:0===l.length||u(s.map((({height:e})=>e)).reduce(((e,t)=>e+t)),d)}},me=()=>{window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},fe=(e,t,n,i)=>e.substring(0,t)+i+e.substring(n),be=()=>{if(window.getSelection){return window.getSelection().toString()}return document.selection?document.selection.toString():""},Ie=e=>{const t=new Image;return new Promise(((n,i)=>{t.onload=function(){const{height:e,width:i}=t;n({height:e,width:i})},t.onerror=e=>i(e),t.src=e}))},ke=(e,t=-1,n=!1)=>{if((e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(e)&&!n)return;const i=document.querySelector("#outliner");if(!i)return;const o=i.scrollHeight,a=window.innerHeight;if(o<=a)return;const l=t>=0?t:.6*a,r=((e,t=document.documentElement)=>{const n=e.getBoundingClientRect(),i=t.scrollTop||window.pageYOffset,o=t.scrollLeft||window.pageXOffset,a=t.offsetTop||0,l=t.offsetLeft||0,r=n.top+i-a,d=n.left+o-l,c=r+n.height,s=d+n.width;return{top:Math.round(r),left:Math.round(d),right:Math.round(s),bottom:Math.round(c),height:n.height,width:n.width}})(e,i||document.documentElement),d=r.top,c=r.height,s=o-(d+c);let u=d-l;u+c+s>=o&&(u=o-(c+s));try{i.scrollTo(0,u)}catch(e){i.scrollTo({top:u,left:0,behavior:"smooth"})}},Te=(e,t=1)=>{const n=e.cloneNode(!0);n.classList.remove("topic-selected"),n.style.maxWidth="650px",n.style.width="100%",n.style.position="fixed",n.style.left="5000px",n.style.padding="5px 0",n.style.borderRadius="5px",n.style.cursor="-webkit-grabbing",n.id="dummy-"+Math.random().toString(32).substr(2),n.querySelector(".outliner-topic-dot")&&n.classList.remove("has-child");const i=n.querySelector(".outliner-topic-title");i&&t>1&&(n.classList.add("is-folded"),i.dataset.dataChildCount=t.toString());const o=document.createElement("div");return o.appendChild(n),document.body.appendChild(o),o},xe=e=>{const t=oe(e);t&&(ke(t),t.focus(),de(t,ne(t).length))};var ye=n(67657),Se=n(57310),we=n.n(Se),Ce=n(57147),Ee=n(5893),Me=n(13382),Le=n(94593),Fe=n(90435),Ne=n(54856);const Oe=e=>y.shell.openPath(e),Ae=e=>y.shell.showItemInFolder(e);var Pe=n(89411),De=n(69361);async function _e(e){var t;const{handleOutlinerOperation:n}=ai(),i=(0,c.JE)().T;if(e.webpage){if(u.nd)return void Fe.ZP.fetch(Ne.QN);!function(e,t=(e=>e)){const n=we().parse(e).protocol;y.shell.openExternal(n?e:`http://${e}`).catch((()=>{(0,Me.N0)({title:"Xmind",message:t("Unable to open link."),detail:t("This link is invalid and cannot be opened through browser."),buttons:[t("OK")]})}))}(e.webpage,i)}if(e.topicLink){const{document:o}=(0,p.nZ)(),a=we().parse(e.topicLink).hash.substring(1);if(!(null===(t=o.value.query({id:a}))||void 0===t?void 0:t.asTopic())){const[t]=await(0,Me.N0)({title:i("Invalid Topic Link"),message:i("The target topic may have been deleted. Do you want to delete this topic link as well?"),buttons:[i("Delete It"),i("No")],defaultId:0,cancelId:1});return void(0===t&&n({type:"deleteAttrs",topicId:e.topicId,topicLink:!0}))}(0,c.JX)().handleCommand("editor.selectTopicById",{topicId:a})}if(e.localFileLink){let t,n;0;try{t=(0,Ee.iZ)(e.localFileLink)}catch(n){t=e.localFileLink.slice(5)}const{source:o}=(0,Pe.FU)();if(w().isAbsolute(t))n=t;else{if(!o.startsWith("file:"))return;{const e=(0,Ee.iZ)(o),i=w().dirname(e);n=w().join(i,t)}}try{Le.Z.accessSync(n,Ce.constants.F_OK),await Oe(n)}catch(e){await(0,Me.N0)({title:"Xmind",message:i("Failed to open this file link."),detail:i("Probably the location or name of this file/folder is changed."),buttons:[i("OK")],defaultId:0})}}if(e.attachment){const{getResourceUrlByXapUrl:t}=(0,p.nZ)(),{lastSaveDirectory:n,doNotShowAttachmentMessageAgain:o,setDoNotShowAttachmentMessageAgain:a}=(0,c._I)(),l=await t(e.attachment),r=(0,Ee.iZ)(l);let d="";try{d=n||ye.app.getPath("downloads")}catch(e){d="downloads"}const s=w().extname(r);let u=e.title;if(u&&!u.endsWith(s)&&(u+=s),o)qe(r,d,u);else{const{response:e,checkboxChecked:t}=await ye.dialog.showMessageBox({title:"Xmind",message:i("Trying to Open Attachment"),detail:i("Xmind will save this attachment to $1 and open with default application in your system.",d),checkboxLabel:i("Don't show this message again."),buttons:[i("Save and Open"),i("Cancel")],defaultId:0,cancelId:1});0===e&&(t&&a(),qe(r,d,u))}}}async function qe(e,t,n){const i=(0,c.JE)().T,{setLastDirectory:o}=(0,c._I)();try{Le.Z.accessSync(t,Ce.constants.F_OK|Ce.constants.W_OK);const i=(0,Ee.AK)(t,n);if(!i)return;const o=w().join(t,i);await Le.Z.copyFile(e,o);try{".xmind"===w().extname(o)&&Le.Z.accessSync(o,Ce.constants.F_OK|Ce.constants.W_OK),await Oe(o)}catch(e){Ae(o)}}catch(a){const[l]=await(0,Me.N0)({title:"Xmind",message:i("Failed to Save File"),detail:i("Xmind doesn't have permission to save file to $1, please choose another folder to save.",t),buttons:[i("Choose Folder"),i("Cancel")],defaultId:0,cancelId:1});if(0===l){const t=await(0,Me.ZZ)({title:"Save",suggestPath:{suggestedName:n}});if(t){const i=w().dirname(t);o({lastSaveDirectory:i}),await qe(e,i,n)}}}}async function Ze(e){var t;const n=(0,c.JE)().T;let i="";if(e.webpage)try{const t=await Fe.ZP.fetch(Ne.lf.FETCH_URL_METADATA,e.webpage),n=Object.assign({title:""},t);i=function(e){let t=e;if(!t)return"";for(;t.indexOf("&#x")>=0;){const[e,n]=t.match(/&#x([\d\w]+);/m);t=t.replace(e,String.fromCharCode(parseInt(n,16)))}return t}(n["og:title"]||n.title||e.webpage)}catch(t){console.error(t),i=e.webpage}if(e.topicLink){const{document:o,sheets:a}=(0,p.nZ)(),l=we().parse(e.topicLink).hash.substring(1),r=null===(t=o.value.query({id:l}))||void 0===t?void 0:t.asTopic();if(r){i=`${a.value.find((e=>e.id===r.ownerSheet.id)).title}   ${r.title}`}else i=n("Invalid Topic Link")}if(e.localFileLink&&(i=decodeURIComponent(w().basename(we().parse(e.localFileLink).path))),e.attachment){i=`${w().extname(we().parse(e.attachment).path).substring(1).toUpperCase()} ${n("File")}`}return i}function Be({topicId:e}){const{outlinerState:t}=ai();if(!e)return;const n=t.value.topicItems.filter((e=>!e.hidden)),i=n.findIndex((t=>t.topicId===e));if(-1===i||0===i)return;const o=n[i-1],a=oe(o.topicId);a&&de(a,0)}function He({topicId:e}){const{outlinerState:t}=ai();if(!e)return;const n=t.value.topicItems.filter((e=>!e.hidden)),i=n.findIndex((t=>t.topicId===e));if(-1===i||i===n.length-1)return;const o=n[i+1],a=oe(o.topicId);a&&de(a,0)}const ze=()=>{const{activeSheet:e}=(0,p.nZ)();return p.HG.allLabelsFromSheet(e.value)},We=async({equation:e})=>{const t=await(0,p.nZ)().generateMathJaxSVG(e),n=await(0,p.nZ)().isMathJaxValid(e);return{imageSource:p.ZQ.getSVGUri(t),isMathJaxValid:n}},Re=async({equation:e})=>{const{createXapUrlByArrayBuffer:t}=(0,p.nZ)(),{imageSource:n}=await We({equation:e}),i=await(0,De.sA)(n,1,"blob","png"),o=await i.arrayBuffer();return await t(o,".png")},je=({markerId:e})=>{const{markerModule:t}=(0,p.nZ)(),{getMarkerGroupById:n,getMarkerInfoById:i}=t,o=t.getMarkerInfoById(e);if(o){const e=n(o.groupId);return e?e.markerIds.map((e=>{const{imageSrc:t,id:n,hidden:o}=i(e);if(o)return;return{id:n,url:t.split("\\").join("/")}})).filter(Boolean):[]}return[]},Ge=e=>{const{activeSheet:t,changeDoc:n}=(0,p.nZ)();n(t.value.asMutable().attrs({labelSortOrder:"auto"===e?"auto":"manual"}).commit().ownerDocument)},Ue=(e,t)=>p.HG.sortTopicLabels(e,{sortOrder:t});var Ve=n(19741),Ye=n(46952),Xe=n(83282),Je=n(46016),Ke=n(64805);async function Qe(){const{outlinerState:e}=ai(),{currEditingTopicId:t,selectionIds:n,topicItems:i}=e.value;if(n.length>1)return;const o=n[0]||t;if(!o)return;const a=i.find((e=>e.topicId===o));if(!a)return;const l=On(o),r=oe(o);if(!r)return;const d=e.value.topicItems.find((e=>e.topicId===a.parentTopicId)),c=o===i[0].topicId,s=Dn(a),u=he(r),p=!c&&!(s!==(null==d?void 0:d.children.length)-1||1===a.depth||a.image||a.notes||a.labels.length>0||a.markers.length>0);switch(!0){case 1===n.length:zn({type:"add",topicType:a.topicType,parentTopicId:a.descendantLength>0?o:a.parentTopicId,targetIndex:a.descendantLength>0?0:s+1,title:"",callback:_n,...a.task&&{task:"todo"},...a.numbering&&"attached"===a.topicType&&{numbering:{numberingPattern:a.numbering.numberingPattern}}});break;case u<l.length||!c&&0===l.length&&s<d.children.length-1:{const e=l.slice(0,u),t=l.slice(u);let n=[],i=[];a.attributedTitle.length>1&&([n,i]=ei(a.attributedTitle,u)),await zn({type:"update",topicId:o,title:e,attributedTitle:n}),await Rn([o],{labels:!0,notes:!0,webpage:!0,localFileLink:!0,topicLink:!0,attachment:!0,equation:!0,image:!0,audioNotes:!0}),await zn({type:"add",topicType:a.topicType,parentTopicId:c?o:a.parentTopicId,targetIndex:c?0:s+1,title:t,attributedTitle:i,labels:a.labels,notes:a.notes,webpage:a.webpage,localFileLink:a.localFileLink,topicLink:a.topicLink,attachment:a.attachment,equation:a.equation,image:a.image,audioNotes:a.audioNotes,callback:_n,...a.task&&{task:"todo"},...a.numbering&&"attached"===a.topicType&&{numbering:{numberingPattern:a.numbering.numberingPattern}}});break}case l.length>0||0===l.length&&!p:zn({type:"add",topicType:a.topicType,parentTopicId:c||a.descendantLength>0&&!a.folded?o:a.parentTopicId,targetIndex:c||a.descendantLength>0&&!a.folded?0:s+1,title:"",callback:_n,...a.task&&{task:"todo"},...a.numbering&&"attached"===a.topicType&&{numbering:{numberingPattern:a.numbering.numberingPattern}}});break;case 0===l.length&&p:Gn()}}function $e(){const{document:e,changeDoc:t}=(0,p.nZ)(),{outlinerState:n}=ai(),{selectionIds:i,topicItems:o}=n.value,a=Fn(),l=i.length>0?i:a?[a.topicId]:[],r=l.reduce(((e,t)=>{const n=o.find((e=>e.topicId===t));return n?e.concat(n.children):e}),[]);let d=e.value;l.filter((e=>!r.includes(e))).map((async e=>{var t,n,i,a,l;const r=o.find((t=>t.topicId===e)),c=null===(t=d.query({id:r.parentTopicId}))||void 0===t?void 0:t.asTopic(),s=d.queryList([{id:e}]).clone(),u=("detached"===r.topicType?c.detachedChildren:c.children).findIndex((t=>t.id===e))+1;d="detached"===r.topicType?null===(i=null===(n=c.asMutable().addDetachedChildren(s,{at:u}))||void 0===n?void 0:n.commit())||void 0===i?void 0:i.ownerDocument:null===(l=null===(a=c.asMutable().addChildren(s,{at:u}))||void 0===a?void 0:a.commit())||void 0===l?void 0:l.ownerDocument})),t(d)}async function et({topicId:e}){var t;const{document:n,sheets:i,activeSheet:a,executeEditorAction:l}=(0,p.nZ)(),{outlinerSheetModel:r,outlinerState:d,maxTopicsLoopNum:c,updateOutlinerState:h}=ai();let v=null===(t=n.value.query({id:e}))||void 0===t?void 0:t.asTopic();if(!v)return;const m=i.value.find((e=>e.id===v.ownerSheet.id));if(!m)return;const f=()=>{const{attachedTopicsLoopStartIndex:t,attachedTopicsLoopEndIndex:n,detachedTopicsLoopStartIndex:i,detachedTopicsLoopEndIndex:a,topicsLoopNum:l,topicItems:s}=d.value,u=s.findIndex((t=>t.topicId===e));if(-1===u)return;const p=r.value.attached.length;if(u>=t&&u<=n+1||n>=p&&u>=p+i&&u<=p+a){const t=oe(e);if(!t)return;const n=le(t);if(!n)return;h({selectionIds:[e]}),ke(n)}else{let e=0,t=0;u>c.value&&(u>p?(e=Math.max(p-c.value,0),t=Math.max(u-p-u%l-l,0)):e=Math.max(u-u%l-l,0)),h({attachedTopicsLoopStartIndex:e,attachedTopicsLoopEndIndex:e+c.value,detachedTopicsLoopStartIndex:t,detachedTopicsLoopEndIndex:t+c.value}),(0,o.Y3)((()=>{f()}))}};await(async()=>{var e;const{topicItems:t}=d.value,n=[],i=t.reduce(((e,t)=>({...e,[t.topicId]:!0})),{});for(;v.parentTopic&&!i[v.id];)"folded"===(null===(e=v.parentTopic)||void 0===e?void 0:e.branchState)&&n.push(v.parentTopic.id),v=v.parentTopic;await Promise.all(n.map((e=>{zn({type:"update",topicId:e,branchState:null})})))})(),m.id===a.value.id?f():((0,g.E)().updateSheetRendering({sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,s._v)(100),l({name:"mutateEditor:switchSheet",inputValue:m.id}),setTimeout((()=>{f()}),u.oY))}function tt(){const{outlinerState:e}=ai(),{selectionIds:t}=e.value,n=Fn(),i=t.length>0?t:n?[n.topicId]:[];0!==i.length&&Rn(i,{labels:!0,markers:!0,notes:!0,webpage:!0,localFileLink:!0,topicLink:!0,attachment:!0,equation:!0,image:!0,audioNotes:!0,task:!0,numbering:!0})}async function nt(){const{outlinerState:e}=ai(),{selectionIds:t}=e.value,n=Fn(),i=t.length>0?t:n?[n.topicId]:[];0!==i.length&&await Promise.all(i.map((e=>{zn({type:"update",topicId:e,title:"",attributedTitle:[]})})))}async function it(){const{outlinerState:e}=ai(),{selectionIds:t,topicItems:n}=e.value,i=Fn(),o=(t.length>0?t:i?[i.topicId]:[]).reduce(((e,t)=>{const i=n.find((e=>e.topicId===t));return(null==i?void 0:i.descendantLength)>0?e.concat(i):e}),[]);await Promise.all(o.map((e=>zn({type:"update",topicId:e.topicId,branchState:e.descendantLength>0&&e.folded?null:"folded"}))))}function ot(e){const{activeSheet:t}=(0,p.nZ)(),n=e.reduce(((e,n)=>{var i;const o=null===(i=t.value.query({id:n}))||void 0===i?void 0:i.asTopic();return o&&o.children.length>0?e.concat(o,ot(o.children.map((e=>e.id)))):e}),[]);return Array.from(new Set(n))}async function at(){const{outlinerState:e}=ai(),{selectionIds:t,topicItems:n}=e.value,i=Fn(),o=ot(t.length>0?t:i?[i.topicId]:[n[0].topicId]),a=o.some((e=>e.children.length>0&&"folded"!==e.branchState))?"folded":null;await Promise.all(o.filter((e=>e.branchState!==a)).map((e=>zn({type:"update",topicId:e.id,branchState:a}))))}function lt(){const{isInBranchOnly:e}=(0,p.nZ)();e.value?(0,c.JX)().handleCommand("editor.exitBranchOnly"):(0,c.JX)().handleCommand("editor.showBranchOnly")}function rt(){const{activeSheetId:e,changeViewerState:t}=(0,p.nZ)(),{outlinerState:n,outlinerSheetModel:i}=ai(),{currEditingTopicId:o,selectionIds:a}=n.value;if(a.length>1)return;const l=i.value.detached.map((e=>e.topicId));t(e.value,{selection:{kind:"topics",topics:a},scopeTopicId:1===a.length?a[0]:o,...l.length>0&&{hiddenFloatingTopics:l}})}function dt(){const{activeSheetId:e,changeViewerState:t}=(0,p.nZ)();t(e.value,{scopeTopicId:null,hiddenFloatingTopics:null})}function ct(e){const{outlinerState:t}=ai(),{selectionIds:n,topicItems:i}=t.value,o=Fn(),a=n.length>0?n:o?[o.topicId]:[];if(0===a.length)return;const l=a.map((e=>i.find((t=>t.topicId===e))));for(const{topic:t,depthLevel:n}of st({topicItems:i,targetTopics:l,maxLevel:e})){const i=n===e?"folded":null;zn({type:"update",topicId:t.topicId,branchState:i})}}function*st({topicItems:e,targetTopics:t,maxLevel:n,prevDepthLevel:i}){for(const o of t){const t=null!=i?i+1:0;if(yield{topic:o,depthLevel:t},t>n)return;const a=e.filter((e=>o.children.includes(e.topicId)));for(const i of st({topicItems:e,targetTopics:a,maxLevel:n,prevDepthLevel:t}))yield i}}function ut(e){const{activeSheet:t,changeDoc:n}=(0,p.nZ)(),{outlinerState:i}=ai(),{selectionIds:o}=i.value,a=Fn(),l=o.length>0?o:a?[a.topicId]:[];if(0===l.length)return;n(e(l,t.value).ownerDocument)}function pt(){ut(p.HG.addTopicsTodo)}function gt(){ut(p.HG.removeTopicsTodo)}function ht(){ut(p.HG.checkTopicsTodo)}function vt(){ut(p.HG.uncheckTopicsTodo)}function mt(){ut(p.HG.changeTopicsQuickStyleToCrossOutWithCancelingTopicsTask)}function ft(e,t){const{activeSheet:n,changeDoc:i}=(0,p.nZ)(),{outlinerState:o}=ai(),{selectionIds:a}=o.value,l=Fn(),r=a.length>0?a:l?[l.topicId]:[];if(0===r.length)return;i(e(r,n.value,t).ownerDocument)}async function bt(){const{outlinerState:e,updateOutlinerState:t}=ai(),{currEditingTopicId:n,selectionIds:i,topicItems:o}=e.value;if(n===o[0].topicId)return;const a=Hn();i.length>0?(await Vn(i),t({selectionIds:[]})):await zn({type:"delete",topicId:n});An(o[a-1].topicId)}function It(){return kt({isDelKey:!0})}async function kt({isDelKey:e=!1}={}){const{outlinerState:t,outlinerSheetModel:n,updateOutlinerState:i}=ai(),{selectionIds:o,topicItems:a,selectonType:l,topicsLoopNum:r,inputMethodInputting:d}=t.value;if(!d)switch(l){case ni.TEXT:{const t=Fn();if(!t)return;const n=oe(t.topicId);if(!n)return;const i=On(t.topicId);if(0!==he(n)||e)e?document.execCommand("forwardDelete"):document.execCommand("delete");else{if(t.numbering)return void ft(p.HG.clearTopicsNumbering);if(t.markers.length>0)return void zn({type:"update",topicId:t.topicId,markers:t.markers.slice(0,-1).map((e=>e.id))});if(t.task)return void gt();const e=a.findIndex((e=>e.topicId===t.topicId));if(0===e)return;const o=a[e-1];if(o.depth!==t.depth||o.depth===t.depth&&o.descendantLength>0){if(i||t.descendantLength>0)return;if(o.folded){const e=ot([o.topicId]).filter((e=>"folded"===e.branchState));return zn({type:"delete",topicId:t.topicId}),void await Promise.all(e.map((e=>zn({type:"update",topicId:e.id,branchState:null}))))}}const l=o.title,r=o.markers,d=$n({title:l,attributedTitle:o.attributedTitle},{title:i,attributedTitle:t.attributedTitle});if(t.descendantLength>0)return await zn({type:"delete",topicId:o.topicId}),zn({type:"update",topicId:t.topicId,title:l+i,attributedTitle:d,markers:r.map((e=>e.id))}),void setTimeout((()=>{de(n,l.length||i.length)}));const c=oe(o.topicId);ie(c,l+i,d),de(c,l.length||i.length),zn({type:"delete",topicId:t.topicId}),zn({type:"update",topicId:o.topicId,title:l+i,attributedTitle:d})}break}case ni.TOPIC:{const e=a[Hn()-1];if(!e)return;e.topicId===n.value.central.topicId&&i({attachedTopicsLoopStartIndex:0,attachedTopicsLoopEndIndex:r}),await Vn(o),i({selectionIds:[]}),An(e.topicId);break}case ni.IMAGE:Wn({image:!0});break;case ni.EQUATION:Wn({equation:!0,image:!0})}}async function Tt(){const{outlinerState:e}=ai(),{selectionIds:t,topicItems:n}=e.value,i=Fn(),o=t.length>0?t:i?[i.topicId]:[],a=o.reduce(((e,t)=>{const i=n.find((e=>e.topicId===t));return i?e.concat(i.children):e}),[]),l=o.filter((e=>!a.includes(e))).map((e=>n.find((t=>t.topicId===e)))).sort(((e,t)=>n.findIndex((t=>t.topicId===e.topicId))-n.findIndex((e=>e.topicId===t.topicId)))),r=[];for(let e=0;e<l.length;e++){const t=l[e];let i="",o=0;if("detached"===t.topicType&&n[0].detachedChildren[0]===t.topicId){const e=n.filter((e=>"attached"===e.topicType&&1===e.depth)),t=e[e.length-1];i=t.topicId,o=t.children.length}else{const n=qn(t);if(!n)continue;if(e>=1&&t.depth===l[e-1].depth){const t=r.find((t=>t.topicId===l[e-1].topicId));if(!t)continue;i=t.toParentTopicId,o=t.toTargetIndex+1}else i=n.topicId,o=n.children.length}r.push({type:"move",topicId:t.topicId,toParentTopicId:i,toTargetIndex:o})}await Promise.all(r.map((e=>zn(e))))}function xt(){const{outlinerState:e,updateOutlinerState:t}=ai(),{currEditingTopicId:n,selectionIds:i,startTopicId:o,topicItems:a}=e.value;if(0===i.length)return void t({selectionIds:[n]});const l=i[0],r=i[i.length-1],d=a.find((e=>e.topicId===l)),c=a.find((e=>e.topicId===r)),s=qn(d),u=qn(c);let p="";if(l===o&&u&&(p=u.topicId),r===o&&s&&(p=s.topicId),!p)return;let g=a.findIndex((({topicId:e})=>e===o)),h=a.findIndex((e=>e.topicId===p));h<g&&([g,h]=[h,g]);t({selectionIds:a.slice(g,h+1).map((e=>e.topicId))})}function yt(){const{outlinerState:e,updateOutlinerState:t}=ai(),{currEditingTopicId:n,selectionIds:i,startTopicId:o,topicItems:a}=e.value;if(0===i.length)return void t({selectionIds:[n]});const l=i[0],r=i[i.length-1],d=a.find((e=>e.topicId===l)),c=a.find((e=>e.topicId===r)),s=Zn(d),u=Zn(c);let p="";if(l===o&&u&&(p=u.topicId),r===o&&s&&(p=s.topicId),!p)return;let g=a.findIndex((({topicId:e})=>e===o)),h=a.findIndex((e=>e.topicId===p));h<g&&([g,h]=[h,g]);t({selectionIds:a.slice(g,h+1).map((e=>e.topicId))})}function St(){const{outlinerState:e}=ai(),{currEditingTopicId:t,selectionIds:n,topicItems:i}=e.value,o=(t?[t]:n).map((e=>i.find((t=>t.topicId===e))));for(let e=0;e<o.length;e++){const t=o[e],n=qn(t);if(!n)break;const i=Dn(n);zn({type:"move",topicType:t.topicType,topicId:t.topicId,toParentTopicId:t.parentTopicId,toTargetIndex:i})}}function wt(){const{outlinerState:e}=ai(),{currEditingTopicId:t,selectionIds:n,topicItems:i}=e.value,o=(t?[t]:n).map((e=>i.find((t=>t.topicId===e))));for(let e=o.length-1;e>=0;e--){const t=o[e],n=Zn(t);if(!n)break;const i=Dn(n);zn({type:"move",topicType:t.topicType,topicId:t.topicId,toParentTopicId:t.parentTopicId,toTargetIndex:i})}}function Ct(){const{outlinerState:e}=ai(),{currEditingTopicId:t}=e.value;if(!t)return;const n=oe(t);n&&de(n,0)}function Et(){const{outlinerState:e}=ai(),{currEditingTopicId:t}=e.value;if(!t)return;const n=oe(t);n&&de(n,ne(n).length)}function Mt(){const e=qn(Fn());if(!e)return;const t=oe(e.topicId);de(t,ne(t).length)}function Lt(){const e=Zn(Fn());if(!e)return;const t=oe(e.topicId);de(t,ne(t).length)}function Ft(){const{outlinerState:e,updateOutlinerState:t}=ai(),{currEditingTopicId:n,selectionIds:i,topicItems:o}=e.value;if(i.length!==o.length-1)if(n){const e=oe(n);if(!e)return;if(ge(e)===ne(e).length)return me(),void a();se(e,0,ne(e).length)}else a();function a(){t({selectionIds:o.slice(1).map((e=>e.topicId))})}}var Nt,Ot=n(50743);function At({value:e}){const{markerModule:t}=(0,p.nZ)(),n=Fn();if(!n)return;let i=n.markers.map((e=>e.id));const o=i.find((n=>t.isSiblingMarkers(n,e)));i=o?i.map((t=>t===o?e:t)):i.concat(e),zn({type:"update",topicId:n.topicId,markers:i})}function Pt(){const{outlinerState:e,updateOutlinerState:t}=ai(),{currEditingMarkerId:n}=e.value,i=Fn();if(!i)return;const o=oe(i.topicId);if(!o)return;const a=le(o).querySelector(".outliner-topic-marker-container").getBoundingClientRect();t({popoverEditorState:{visible:"marker",payload:{topicId:i.topicId,editorRect:a,markers:i.markers,markerId:n}}})}function Dt(){const{outlinerState:e}=ai(),{selectionIds:t}=e.value,n=Fn(),i=t.length>0?t:n?[n.topicId]:[];0!==i.length&&Rn(i,{markers:!0})}async function _t({value:e}){const{getResourceUrlByXapUrl:t}=(0,p.nZ)(),{outlinerState:n}=ai(),{selectionIds:i,topicItems:o}=n.value,a=Fn(),l=i.length>0?i:a?[a.topicId]:[],r=l.map((e=>o.find((t=>t.topicId===e))));if(0===r.length)return;await Promise.all(r.filter((e=>!!e.equation)).map((({topicId:e})=>{zn({type:"deleteAttrs",topicId:e,equation:!0})})));const d=await t(e);let{width:c,height:s}=await Ie(d);const u=s/c;c<ii.MIN?(c=ii.MIN,s=c*u):c>ii.MAX&&(c=ii.MAX,s=c*u),await Promise.all(l.map((t=>{zn({type:"update",topicId:t,image:{src:e,width:c,height:s}})})))}async function qt(){const e=(0,c.JE)().T,{createXapUrl:t,getResourceUrlByXapUrl:n}=(0,p.nZ)(),i=Fn();if(!i)return;const{filePaths:o,canceled:a}=await ye.dialog.showOpenDialog((0,ye.getCurrentWindow)(),{buttonLabel:e("Insert"),filters:[{name:"All",extensions:["png","apng","jpg","jpeg","jpe","jif","jfif","jfi","tif","webp","gif","svg","xbm","xbm","dib","ico","avif","bmp"]},{name:"PNG",extensions:["png","apng"]},{name:"JPG",extensions:["jpg","jpeg","jpe","jif","jfif","jfi"]},{name:"WebP",extensions:["webp"]},{name:"GIF",extensions:["gif"]},{name:"SVG",extensions:["svg"]},{name:"XBM",extensions:["xbm"]},{name:"BMP",extensions:["xbm","dib","bmp"]},{name:"ICO",extensions:["ico"]},{name:"AVIF",extensions:["avif"]}]});if(a||!o||!o.length)return;const l=o[0];if(Le.Z.existsSync(l)){const e=await t(l),o=await n(e);let{width:a,height:r}=await Ie(o);const d=r/a;a<ii.MIN?(a=ii.MIN,r=a*d):a>ii.MAX&&(a=ii.MAX,r=a*d),i.equation&&Wn({equation:!0}),zn({type:"update",topicId:i.topicId,image:{src:e,width:a,height:r}})}}async function Zt(){const{stage:e}=(0,Pe.FU)(),t=Fn();if(!t)return;const n=t.image.src.split("/").slice(-1).pop(),i=await e.take(t.image.src.replace("xap:",""));Un(n).then((function(e){Le.Z.writeFileSync(e,i)}))}async function Bt(){const{getResourceUrlByXapUrl:e}=(0,p.nZ)(),t=Fn();if(!t)return;const n=await e(t.image.src),i=await Ie(n);let o=i.width,a=i.height;const l=a/o;o<ii.MIN?(o=ii.MIN,a=o*l):o>ii.MAX&&(o=ii.MAX,a=o*l),zn({type:"update",topicId:t.topicId,image:{width:o,height:a}})}function Ht(){Wn({equation:!0,image:!0})}async function zt(){const{updateOutlinerState:e}=ai(),t=Fn();t&&e({currEditingNotesTopicId:t.topicId})}function Wt(){Wn({notes:!0})}function Rt(){const{outlinerState:e,updateOutlinerState:t}=ai();e.value.currEditingNotesTopicId&&t({isNoteLinkInputVisible:!0})}function jt(){const{outlinerState:e,updateOutlinerState:t,outlinerSheetModel:n}=ai(),{selectionIds:i}=e.value,o=Fn();if(!o)return;const a=oe(o.topicId);if(!a)return;const l=le(a),r=(l.querySelector(".outliner-topic-label-container")||l.querySelector(".outliner-topic-dot")||l.querySelector(".outliner-topic-left")).getBoundingClientRect();t({popoverEditorState:{visible:"label",payload:{targetIds:i.length>0?i:[o.topicId],editorRect:r,labels:o.labels,labelSortOrder:n.value.labelSortOrder}}})}function Gt(){const{outlinerState:e}=ai(),{selectionIds:t}=e.value,n=Fn(),i=t.length>0?t:n?[n.topicId]:[];0!==i.length&&Rn(i,{labels:!0})}function Ut(){const{outlinerState:e,updateOutlinerState:t}=ai(),{currEditingLabel:n}=e.value,i=Fn();i&&(zn({type:"update",topicId:i.topicId,labels:i.labels.filter((e=>e!==n))}),t({selectonType:ni.TOPIC}))}function Vt(){const{updateOutlinerState:e}=ai();e({audioBarMode:"audio_record",audioAutoPlay:!1})}function Yt(){Wn({audioNotes:!0})}async function Xt(){const{stage:e}=(0,Pe.FU)(),t=Fn();if(!t)return;const n=t.audioNotes.split("/").slice(-1).pop(),i=await e.take(t.audioNotes.replace("xap:",""));Un(n).then((function(e){Le.Z.writeFileSync(e,i)}))}function Jt(){const{updateOutlinerState:e}=ai(),t=Fn();if(!t)return;const n=oe(t.topicId);if(!n)return;const i=le(n),o=(i.querySelector(".outliner-topic-equation")||i.querySelector(".outliner-topic-dot")||i.querySelector(".outliner-topic-left")).getBoundingClientRect();e({popoverEditorState:{visible:"equation",payload:{topicId:t.topicId,editorRect:o,equation:t.equation}}})}async function Kt(){const{stage:e}=(0,Pe.FU)(),t=Fn();if(!t)return;const n=(i="Equation",(0,c.JE)().T(i)+".png");var i;const o=await e.take(t.image.src.replace("xap:",""));Un(n).then((function(e){Le.Z.writeFileSync(e,o)}))}function Qt(){const{document:e,changeDoc:t}=(0,p.nZ)(),n=Fn();if(!n)return;t(p.HG.resetTopicImageSizeFor(e.value,n.topicId))}function $t(){Wn({equation:!0,image:!0})}async function en(){var e;const{outlinerState:t}=ai(),{activeSheet:n,activeSheetFigure:i,setCPData:o,activeSheetViewer:a,activeSheetViewerState:l}=(0,p.nZ)(),{stage:r}=(0,Pe.FU)(),{selectonType:d,selectionIds:c,currEditingMarkerId:s}=t.value,u=Fn(),g=c.length>0?c:u?[u.topicId]:[];if(0===g.length)return;let h=null;switch(d){case ni.TOPIC:case ni.MARKER:h={kind:"topics",topics:g};break;case ni.IMAGE:case ni.EQUATION:h={kind:"images",topics:g}}const v=ni.MARKER===d,{data:m}=v&&s?await p.HG.buildCopiedMarkerData({selection:h,sheet:n.value},s):await p.HG.buildCPDataForSelection({selection:h,sheet:n.value,sheetFigure:i.value,textInputManager:null===(e=a.value)||void 0===e?void 0:e.textInputManager,editSession:l.value.editSession},r);m&&o(m)}function tn(){const{outlinerState:e,updateOutlinerState:t}=ai(),{selectonType:n}=e.value;n!==ni.TEXT?(en(),[ni.MARKER].includes(n)&&t({selectonType:ni.TOPIC})):document.execCommand("copy")}async function nn(){const{outlinerState:e,updateOutlinerState:t}=ai(),{selectonType:n,selectionIds:i}=e.value;if(n!==ni.TEXT)switch(en(),n){case ni.TOPIC:await Vn(i),t({selectionIds:[]});break;case ni.MARKER:jn(),t({selectonType:ni.TOPIC});break;case ni.IMAGE:Wn({image:!0});break;case ni.EQUATION:Wn({equation:!0,image:!0})}else document.execCommand("cut")}async function on(e,t){const{createXapUrlByArrayBuffer:n}=(0,p.nZ)();return(await n(e,t)).slice(4)}async function an(){const{outlinerState:e,updateOutlinerState:t}=ai(),{document:n,changeDoc:i,activeSheet:o,getCPData:a,markerModule:l,activeSheetFigure:r}=(0,p.nZ)(),{stage:d}=(0,Pe.FU)(),{selectionIds:c,selectonType:s}=e.value,u=Fn(),g=c.length>0?c:u?[u.topicId]:[];if(0===g.length)return;const h=await a();let v=!1;const{sheet:m,selection:f}=await p.HG.pasteCPDataForSelection({selection:{kind:"topics",topics:g},sheet:o.value,isSiblingMarkers:l.isSiblingMarkers},h,on,d,{...0===c.length&&{pasteText:e=>{v=!0,async function(e,t){const{outlinerState:n}=ai(),{topicItems:i}=n.value,o=e.map((e=>e.text)).join("");if(t.length>0){const e=i[Hn()],{parentTopicId:n}=e,a=Dn(e);await Vn(t),zn({type:"add",parentTopicId:n,targetIndex:a,title:o,attributedTitle:[]})}else{const e=Fn();if(!e)return;const t=oe(e.topicId);if(!t)return;const[n,i]=pe(t)||[0,0],a=e.title;let l=a;l=n===i?a.slice(0,n)+o+a.slice(n):fe(a,n,i,o),zn({type:"update",topicId:e.topicId,title:l,attributedTitle:[]})}}(e,c)}},sheetFigure:r.value})||{};if(!v)if(m){if(i(m.ownerDocument),[ni.MARKER].includes(s)&&t({selectonType:ni.TOPIC}),s!==ni.TOPIC){const e="topics"==f.kind?f.topics:[];if(0===e.length)return;if(1===e.length&&1===g.length&&e[0]===g[0])return;setTimeout((async()=>{if(!u)return;ot([u.topicId]).filter((e=>"folded"===e.branchState)).map((async e=>{await zn({type:"update",topicId:e.id,branchState:null})}))})),setTimeout((()=>{var t;const i=e[e.length-1],o=null===(t=n.value.query({id:i}))||void 0===t?void 0:t.asTopic();if(!o)return;An(Bn(o).id,{toLastPos:!0})}))}}else;}!function(e){e.None="none",e.LineThrough="line-through",e.Underline="underline",e.LineThroughAndUnderline="line-through underline"}(Nt||(Nt={}));const ln=()=>{const{activeSheetId:e,sheets:t}=(0,p.nZ)(),n=t.value.map((e=>e.id));if(!n||n.length<2)return;return n.indexOf(e.value)},rn=e=>{const{executeEditorAction:t,sheets:n}=(0,p.nZ)(),i=n.value[e];if(!i)return;t({name:"mutateEditor:switchSheet",inputValue:i.id})};async function dn(){const e=(0,c.JE)().T,{changeDoc:t,activeSheet:n,executeEditorAction:i}=(0,p.nZ)(),o=Fn();if(!o)return;const a=p.HG.newSheetFromTopic(n.value,o.topicId,e);if(null===a)return;const{newSheet:l,newDocument:r}=a;t(r),(0,g.E)().updateSheetRendering({sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,s._v)(100),i({name:"mutateEditor:switchSheet",inputValue:l.id})}function cn(){const{executeEditorAction:e}=(0,p.nZ)();e({name:"mutateEditor:newSheet"})}function sn(){const{sheets:e}=(0,p.nZ)(),t=ln();if(t>-1){let n=t-1;n=n<0?n+e.value.length:n,rn(n)}}function un(){const{sheets:e}=(0,p.nZ)(),t=ln();if(t>-1){const n=(t+1)%e.value.length;rn(n)}}var pn=n(81296),gn=n.n(pn),hn=n(33394);async function vn(){const e=(0,c.JE)().T,{createXapUrlByArrayBuffer:t}=(0,p.nZ)(),n=Fn();if(!n)return;const{filePaths:i,canceled:o}=await ye.dialog.showOpenDialog((0,ye.getCurrentWindow)(),{buttonLabel:e("Insert")});if(o||!i||!i.length)return;const a=i[0];if(gn().existsSync(a)){if(gn().statSync(a).isDirectory())return void(0,Me.N0)({type:"warning",title:"Xmind",detail:e("Folder is not supported."),message:e("Insert Attachment Failed"),buttons:[e("OK")],defaultId:0,cancelId:0,noLink:!0});const i=await gn().readFile(a),o=w().basename(a),l=w().extname(a),r=await t(i,l);zn({type:"add",topicType:n.topicType,parentTopicId:n.topicId,targetIndex:0,title:o,attachment:r,callback:_n})}}async function mn(e){const t=(0,c.JE)().T,{outlinerState:n}=ai(),{selectionIds:i}=n.value,o=Fn(),a=i.length>0?i:o?[o.topicId]:[];if(0===a.length)return;const{filePaths:l,bookmarks:r,canceled:d}=await ye.dialog.showOpenDialog((0,ye.getCurrentWindow)(),{properties:"folder"===e?["openDirectory"]:["openFile"],buttonLabel:t("Insert"),securityScopedBookmarks:!0});if(d||!l||!l.length)return;const s=l[0];if(!gn().existsSync(s))return;if(r&&r.length===l.length)for(let e=0;e<l.length;e++){const t=l[e],n=r[e];t&&n&&await hn.Z.bindBookmark({fp:t,bookmark:n})}const u=(0,Ee.u3)(s);await Promise.all(a.map((t=>{zn({type:"update",topicId:t,..."file"===e&&{localFileLink:u},..."folder"===e&&{attachment:u}})})))}async function fn(){const{document:e,activeSheetId:t,activeSheetFigure:n,changeDoc:i,createXapUrlByArrayBuffer:o}=(0,p.nZ)(),a=(0,Je.$)(),{outlinerState:l}=ai(),{selectionIds:r}=l.value,d=Fn(),c=r.length>0?r:d?[d.topicId]:[];if(0===c.length)return;const{result:s}=await Fe.ZP.fetch(Ne.Fx,{name:"dialog-hyperlink",parentId:window.id,wait:!0,query:{topicHref:c.length>1?"":d.webpage||"",userAutoFillOpt:a.hyperLinkAutoFillOpt||""}});if(s)switch(s.action){case"set":{a.changeHyperLinkAutoFillOpt(s.autoFillOpt);const l=("all"===s.autoFillOpt||"title"===s.autoFillOpt)&&s.webTitle,r=("all"===s.autoFillOpt||"thumbnail"===s.autoFillOpt)&&s.isVideoUrl&&s.thumbnail;let d=null;r&&(d=await o(s.thumbnail,".png"));let u=e.value;await Promise.all(c.map((e=>{u=p.HG.changeWebLinkFor(u.sheets.find((e=>e.id===t.value)),n.value,e,{href:s.webUrl,title:l?s.webTitle:null,videoThumbnail:d,videoEmbedUrl:s.embedUrl})}))),i(u);break}case"remove":Wn({webpage:!0,topicLink:!0})}}async function bn(){const{document:e}=(0,p.nZ)(),t=Fn();if(!t||(0,g.E)().isTopicLinkDialogShowing)return;(0,g.E)().changeIsTopicLinkDialogShowing(!0);const n="xmind:#",i=!!t.topicLink;let o=null;i&&(o=t.topicLink.slice(7));let a=Fe.ZP.route((0,Ne.zj)(window.editorId),(async()=>JSON.stringify(await p.HG.serializeDocument(e.value))));const{result:l}=await Fe.ZP.fetch(Ne.Fx,{name:"dialog-topiclink",parentId:window.id,wait:!0,query:{hasTopicLink:i,xmindObjectId:o,editorId:window.editorId}});if(a&&(a(),a=null),(0,g.E)().changeIsTopicLinkDialogShowing(!1),l)switch(l.action){case"set":zn({type:"update",topicId:t.topicId,topicLink:`${n}${l.topicId}`}),l.twoWay&&zn({type:"update",topicId:l.topicId,topicLink:`${n}${t.topicId}`});break;case"remove":Wn({topicLink:!0})}}function In(){const{updateOutlinerState:e}=ai();Wn({localFileLink:!0,webpage:!0,attachment:!0,topicLink:!0}),e({selectonType:ni.TOPIC})}function kn(){const{outlinerState:e}=ai(),{selectionIds:t}=e.value,n=Fn(),i=t.length>0?t:n?[n.topicId]:[];0!==i.length&&Rn(i,{localFileLink:!0,webpage:!0,attachment:!0,topicLink:!0})}async function Tn(){const{stage:e}=(0,Pe.FU)(),t=Fn();if(!t)return;let n=t.title;const i=w().extname(t.attachment);n&&!n.endsWith(i)&&(n+=i);const o=await e.take(t.attachment.replace("xap:",""));Un(n).then((function(e){gn().writeFileSync(e,o)}))}function xn(){const{executeAction:e}=(0,p.nZ)();e({name:"redo"})}function yn(){const{executeAction:e}=(0,p.nZ)();e({name:"undo"})}var Sn=n(78198);function wn(){const{outlinerState:e}=ai(),{activeSheetId:t}=(0,p.nZ)(),{updateOutlinerSheetStatus:n}=(0,g.E)(),{outlinerScale:i}=e.value,o=100*i;if(o>=300)return;const a=(0,Sn.sC)(o);n({id:t.value,zoomScale:a})}function Cn(){const{outlinerState:e}=ai(),{activeSheetId:t}=(0,p.nZ)(),{updateOutlinerSheetStatus:n}=(0,g.E)(),{outlinerScale:i}=e.value,o=100*i;if(o<=80)return;const a=(0,Sn.lY)(o);n({id:t.value,zoomScale:a})}function En(){const{activeSheetId:e}=(0,p.nZ)(),{updateOutlinerSheetStatus:t}=(0,g.E)();t({id:e.value,zoomScale:100})}async function Mn(){var e;const t=(0,c.km)(),{getResourceUrlByXapUrl:n}=(0,p.nZ)(),{outlinerState:i}=ai(),{currEditingTopicId:o,invalidImageIds:a}=i.value;if(!o)return;const l=i.value.topicItems.find((e=>e.topicId===o));if(!l||!l.image.src||a.includes(l.topicId))return;const r=await n(l.image.src);if((null===(e=t.imageViewerContext)||void 0===e?void 0:e.imageUrl)===r)return;const d=await Ie(r);(0,c.JX)().handleCommand("imageViewer",{imageUrl:r,imageSize:d,title:l.title||"",winId:(0,ye.getCurrentWindow)().id})}function Ln(){const{outlinerState:e}=ai(),t=(0,Ve.y)(),n=`editor/${window.editorId}/outliner`;function i(t){return"function"==typeof t?()=>(0,Je.$)().isOutlinerMode&&!e.value.inputMethodInputting&&t():()=>(0,Je.$)().isOutlinerMode&&!e.value.inputMethodInputting}function o(){return""!==e.value.currEditingTopicId||0!==e.value.selectionIds.length}function a(){return 1===e.value.selectionIds.length}function l(){return e.value.selectonType===ni.TEXT}function r(){return e.value.selectonType===ni.NOTES}function d(){return e.value.selectonType!==ni.NOTES}function c(){const{selectonType:t,invalidImageIds:n,currEditingTopicId:i}=e.value;return[ni.IMAGE,ni.EQUATION].includes(t)&&n.includes(i)}function s(){const e=Fn();return!!e&&!e.audioNotes}function u(){const{selectionIds:t,topicItems:n}=e.value;return t.filter((e=>{const t=n.find((t=>t.topicId===e));return!!t&&!!t.task})).length>0}function g(){const{selectionIds:t,topicItems:n}=e.value;return t.filter((e=>{const t=n.find((t=>t.topicId===e));return!!t&&t.markers.length>0})).length>0}function h(){const{selectionIds:t,topicItems:n}=e.value;return t.filter((e=>{const t=n.find((t=>t.topicId===e));return!!t&&t.labels.length>0})).length>0}function v(){const{selectionIds:t,topicItems:n}=e.value;return t.filter((e=>{const t=n.find((t=>t.topicId===e));return!!t&&(t.webpage||t.localFileLink||t.topicLink||t.attachment)})).length>0}return{registerCommands:()=>{t.registerCommands([{id:"outliner.addTopic",provider:n,enabledFn:i((()=>l()||a())),handler:Qe},{id:"outliner.deleteTopic",provider:n,enabledFn:i(),handler:bt},{id:"outliner.deleteWithDel",provider:n,enabledFn:i(d),handler:It},{id:"delete",provider:n,enabledFn:i(d),handler:kt},{id:"outliner.previewImage",provider:n,enabledFn:i((()=>e.value.selectonType===ni.IMAGE&&!c())),handler:Mn},{id:"outliner.indent",provider:n,enabledFn:i((()=>{const{topicItems:t}=e.value;if(r())return!1;const n=t[Hn()];return!!n&&Boolean(qn(n))})),handler:Tt},{id:"outliner.outdent",provider:n,enabledFn:i((()=>{if(r())return!1;const{topicItems:t}=e.value,n=t[Hn()];return!(!n||n.depth<=1)})),handler:Gn},{id:"outliner.multiSelectionNavigateUp",provider:n,enabledFn:i(d),handler:xt},{id:"outliner.multiSelectionNavigateDown",provider:n,enabledFn:i(d),handler:yt},{id:"outliner.exchangeSiblingTopicUp",provider:n,enabledFn:i(o),handler:St},{id:"outliner.exchangeSiblingTopicDown",provider:n,enabledFn:i(o),handler:wt},{id:"outliner.moveCaretCharacterToBeginning",provider:n,enabledFn:i(),handler:Ct},{id:"outliner.moveCaretCharacterToEnd",provider:n,enabledFn:i(),handler:Et},{id:"outliner.moveCaretCharacterToAboveSiblingTopic",provider:n,enabledFn:i(),handler:Mt},{id:"outliner.moveCaretCharacterToBelowSiblingTopic",provider:n,enabledFn:i(),handler:Lt},{id:"editor.enterLineBreak",provider:n,enabledFn:i(),handler:()=>{document.execCommand("insertText",!1,"\n")}},{id:"selectAll",provider:n,enabledFn:i(d),handler:Ft},{id:"editor.addMarker",provider:n,enabledFn:i(),handler:At},{id:"editor.changeImage",provider:n,enabledFn:i(o),handler:_t},{id:"editor.showNotesEditor",provider:n,enabledFn:i((()=>l()||a())),handler:zt},{id:"outliner.showNoteLinkInput",provider:n,enabledFn:i(r),handler:Rt},{id:"editor.showLabelEditor",provider:n,enabledFn:i(o),handler:jt},{id:"editor.showHyperlinkEditor",provider:n,enabledFn:i((()=>{const e=Fn();return!!e&&(!e.audioNotes&&(!e.webpage||!e.webpage.startsWith("xap:")))})),handler:fn},{id:"editor.showTopiclinkEditor",provider:n,enabledFn:i((()=>!(e.value.selectionIds.length>1)&&s())),handler:bn},{id:"editor.addFileLink",provider:n,enabledFn:i(s),handler:async()=>await mn("file")},{id:"editor.addFolderLink",provider:n,enabledFn:i(s),handler:async()=>await mn("folder")},{id:"editor.addAttachmentOnNewTopic",provider:n,enabledFn:i((()=>l()||a())),handler:vn},{id:"editor.addAudioOnNewTopic",provider:n,enabledFn:i((()=>l()||a())),handler:Vt},{id:"editor.addLocalImage",provider:n,enabledFn:i((()=>l()||a())),handler:qt},{id:"editor.showEquationEditor",provider:n,enabledFn:i((()=>l()||a()||e.value.selectonType===ni.EQUATION)),handler:Jt},{id:"copy",provider:n,enabledFn:i((()=>d()&&!c())),handler:tn},{id:"cut",provider:n,enabledFn:i((()=>d()&&!c())),handler:nn},{id:"paste",provider:n,enabledFn:i((()=>d()&&!c())),handler:an},{id:"duplicate",provider:n,enabledFn:i(d),handler:$e},{id:"editor.toggleBranch",provider:n,enabledFn:i((()=>{if(l()){const e=Fn();return!!e&&(0!==e.depth&&e.descendantLength>0)}return e.value.selectionIds.length>0&&e.value.selectionIds.some((t=>{const n=e.value.topicItems.find((e=>e.topicId===t));return n&&n.descendantLength>0}))})),handler:it},{id:"editor.toggleAllBranch",provider:n,enabledFn:i((()=>{if(l()){const e=Fn();return!!e&&(0!==e.depth&&e.descendantLength>0)}return!(e.value.selectionIds.length>0)||e.value.selectionIds.some((t=>{const n=e.value.topicItems.find((e=>e.topicId===t));return n&&n.descendantLength>0}))})),handler:at},{id:"editor.newSheetFromTopic",provider:n,enabledFn:i((()=>l()||a())),handler:dn},{id:"outliner.saveAsImage",provider:n,enabledFn:i((()=>!c())),handler:Zt},{id:"outliner.resizeTopicImage",provider:n,enabledFn:i((()=>!c())),handler:Bt},{id:"outliner.editMarker",provider:n,enabledFn:i(),handler:Pt},{id:"outliner.removeHyperlink",provider:n,enabledFn:i(),handler:In},{id:"editor.removeLink",provider:n,enabledFn:i((()=>v()&&(u()||g()||h()))),handler:kn},{id:"editor.removeLinkForTopicContextMenu",provider:n,enabledFn:i((()=>!u()&&!g()&&!h()&&v())),handler:kn},{id:"outliner.saveAsAttachment",provider:n,enabledFn:i(),handler:Tn},{id:"outliner.saveAsEquation",provider:n,enabledFn:i((()=>!c())),handler:Kt},{id:"outliner.resizeTopicEquation",provider:n,enabledFn:i((()=>!c())),handler:Qt},{id:"outliner.removeAudioNotes",provider:n,enabledFn:i(),handler:Yt},{id:"outliner.saveAsAudioNote",provider:n,enabledFn:i(),handler:Xt},{id:"workbench.exportPdf",provider:n,enabledFn:i(),handler:Ye.exportPDF},{id:"print",provider:n,enabledFn:i(),handler:Xe.S0},{id:"editor.toggleBranchOnly",provider:n,enabledFn:i((()=>{const t=Fn();return!(!e.value.isBranchOnlyMode&&(!t||0===t.depth||e.value.selectionIds.length>1))})),handler:lt},{id:"editor.showBranchOnly",provider:n,enabledFn:i(),handler:rt},{id:"editor.exitBranchOnly",provider:n,enabledFn:i(),handler:dt},{id:"redo",provider:n,enabledFn:i(d),handler:xn},{id:"undo",provider:n,enabledFn:i(d),handler:yn},{id:"editor.zoomIn",provider:n,enabledFn:i(),handler:wn},{id:"editor.zoomOut",provider:n,enabledFn:i(),handler:Cn},{id:"editor.resetZoom",provider:n,enabledFn:i(),handler:En},{id:"outliner.removeTopicEquation",provider:n,enabledFn:i(),handler:$t},{id:"editor.clearText",provider:n,enabledFn:i((()=>{const{selectionIds:t,topicItems:n}=e.value;return t.some((e=>{const t=n.find((t=>t.topicId===e));return!!(null==t?void 0:t.title)}))})),handler:nt},{id:"editor.removeTopicContent",provider:n,enabledFn:i((()=>[u(),g(),h(),v()].filter(Boolean).length>1)),handler:()=>{}},{id:"editor.removeMarker",provider:n,enabledFn:i((()=>g()&&(u()||h()||v()))),handler:Dt},{id:"editor.removeMarkerForTopicContextMenu",provider:n,enabledFn:i((()=>!u()&&g()&&!h()&&!v())),handler:Dt},{id:"editor.removeLabel",provider:n,enabledFn:i((()=>h()&&(u()||g()||v()))),handler:Gt},{id:"editor.removeLabelForTopicContextMenu",provider:n,enabledFn:i((()=>!u()&&!g()&&h()&&!v())),handler:Gt},{id:"editor.removeNote",provider:n,enabledFn:i(),handler:Wt},{id:"editor.removeStickerOrImageOrEquation",provider:n,enabledFn:i(),handler:Ht},{id:"editor.addSheet",provider:n,enabledFn:i(),handler:cn},{id:"editor.previousSheet",provider:n,enabledFn:i(),handler:sn},{id:"editor.nextSheet",provider:n,enabledFn:i(),handler:un},{id:"editor.keepTextOnly",enabledFn:i(),provider:n,handler:tt},...[{id:"editor.addMarkerOne",payload:{priority:1}},{id:"editor.addMarkerTwo",payload:{priority:2}},{id:"editor.addMarkerThree",payload:{priority:3}},{id:"editor.addMarkerFour",payload:{priority:4}},{id:"editor.addMarkerFive",payload:{priority:5}},{id:"editor.addMarkerSix",payload:{priority:6}},{id:"editor.addMarkerSeven",payload:{priority:7}}].map((e=>({id:e.id,provider:n,enabledFn:i(),handler:()=>{!function(e){const{markerGroups:t,addMarker:n}=(0,Ot.HV)(),i=t.value.find((e=>"priorityMarkers"===e.id)),o=((null==i?void 0:i.markers)||[])[e-1];i&&o&&n(o,i)}(e.payload.priority)}}))),...[{id:"editor.toggleBranchLevelOne",payload:{level:1}},{id:"editor.toggleBranchLevelTwo",payload:{level:2}},{id:"editor.toggleBranchLevelThree",payload:{level:3}},{id:"editor.toggleBranchLevelFour",payload:{level:4}},{id:"editor.toggleBranchLevelFive",payload:{level:5}},{id:"editor.toggleBranchLevelSix",payload:{level:6}},{id:"editor.toggleBranchLevelSeven",payload:{level:7}},{id:"editor.toggleBranchLevelEight",payload:{level:8}},{id:"editor.toggleBranchLevelNine",payload:{level:9}}].map((t=>({id:t.id,provider:n,enabledFn:i((()=>!r()&&!e.value.popoverEditorState.visible)),handler:()=>{ct(t.payload.level)}}))),{id:"editor.selectTopicById",provider:n,enabledFn:i(),handler:et},{id:"workbench.toggleMarkerPanel",provider:n,enabledFn:i(o),handler:()=>Jn(Ke.QN.IMAGE,Ke.ll.MARKER)},{id:"workbench.toggleStickerPanel",provider:n,enabledFn:i(o),handler:()=>Jn(Ke.QN.IMAGE,Ke.ll.STICKER)},{id:"workbench.toggleIllustrationPanel",provider:n,enabledFn:i(o),handler:()=>Jn(Ke.QN.IMAGE,Ke.ll.ILLUSTRATION)},{id:"outliner.deleteMarker",provider:n,enabledFn:i(),handler:jn},{id:"outliner.deleteLabel",provider:n,enabledFn:i(),handler:Ut},{id:"editor.addTodo",provider:n,enabledFn:i(o),handler:pt},{id:"editor.removeTodo",provider:n,enabledFn:i((()=>u()&&(g()||h()||v()))),handler:gt},{id:"editor.removeTodoForTopicContextMenu",provider:n,enabledFn:i((()=>!0)),handler:gt},{id:"editor.checkTodo",provider:n,enabledFn:i((()=>{const{activeSheet:e}=(0,p.nZ)(),t=Nn();return p.HG.filterTopicsTodoCheckable(t,e.value).length>0})),handler:ht},{id:"editor.uncheckTodo",provider:n,enabledFn:i((()=>{const{activeSheet:e}=(0,p.nZ)(),t=Nn();return p.HG.filterTopicsTodoUncheckable(t,e.value).length>0})),handler:vt},{id:"editor.cancelTask",provider:n,enabledFn:i((()=>{const{activeSheet:e}=(0,p.nZ)(),t=Nn();return p.HG.filterTopicsTaskCancelable(t,e.value).length>0})),handler:mt},{id:"outliner.deleteTask",provider:n,enabledFn:i(u),handler:gt}])},unregisterCommands:()=>{t.unregisterCommands(["outliner.addTopic","outliner.deleteTopic","outliner.deleteWithDel","delete","outliner.indent","outliner.outdent","outliner.multiSelectionNavigateUp","outliner.multiSelectionNavigateDown","outliner.exchangeSiblingTopicUp","outliner.exchangeSiblingTopicDown","outliner.moveCaretCharacterToBeginning","outliner.moveCaretCharacterToEnd","outliner.moveCaretCharacterToAboveSiblingTopic","outliner.moveCaretCharacterToBelowSiblingTopic","editor.enterLineBreak","selectAll","editor.addMarker","editor.changeImage","editor.showNotesEditor","outliner.showNoteLinkInput","editor.showLabelEditor","editor.showHyperlinkEditor","editor.showTopiclinkEditor","editor.addFileLink","editor.addFolderLink","editor.addAttachmentOnNewTopic","editor.addAudioOnNewTopic","editor.addLocalImage","editor.showEquationEditor","copy","cut","paste","duplicate","editor.toggleBranch","editor.toggleAllBranch","editor.newSheetFromTopic","outliner.saveAsImage","outliner.resizeTopicImage","outliner.removeHyperlink","outliner.editMarker","editor.removeLink","editor.removeLinkForTopicContextMenu","outliner.saveAsAttachment","outliner.saveAsEquation","outliner.resizeTopicEquation","outliner.removeAudioNotes","outliner.saveAsAudioNote","workbench.exportPdf","print","editor.toggleBranchOnly","editor.showBranchOnly","editor.exitBranchOnly","redo","undo","editor.zoomIn","editor.zoomOut","editor.resetZoom","outliner.removeTopicEquation","editor.removeTopicContent","editor.removeMarker","editor.removeMarkerForTopicContextMenu","editor.removeLabel","editor.removeLabelForTopicContextMenu","editor.removeNote","editor.removeStickerOrImageOrEquation","editor.addSheet","editor.previousSheet","editor.nextSheet","editor.keepTextOnly","editor.addMarkerOne","editor.addMarkerTwo","editor.addMarkerThree","editor.addMarkerFour","editor.addMarkerFive","editor.addMarkerSix","editor.addMarkerSeven","editor.toggleBranchLevelOne","editor.toggleBranchLevelTwo","editor.toggleBranchLevelThree","editor.toggleBranchLevelFour","editor.toggleBranchLevelFive","editor.toggleBranchLevelSix","editor.toggleBranchLevelSeven","editor.toggleBranchLevelEight","editor.toggleBranchLevelNine","editor.selectTopicById","workbench.toggleMarkerPanel","workbench.toggleStickerPanel","workbench.toggleIllustrationPanel","outliner.deleteMarker","outliner.deleteLabel","editor.addTodo","editor.removeTodo","editor.removeTodoForTopicContextMenu","editor.checkTodo","editor.uncheckTodo","editor.cancelTask","outliner.deleteTask"].map((e=>({id:e,provider:n}))))}}}function Fn(){const{outlinerState:e}=ai(),{currEditingTopicId:t,selectionIds:n,topicItems:i}=e.value,o=1===n.length?n[0]:t;return o?i.find((e=>e.topicId===o)):null}function Nn(){const{outlinerState:e}=ai(),{selectionIds:t}=e.value,n=Fn();return t.length>0?t:n?[n.topicId]:[]}function On(e){const t=oe(e);if(t)return ne(t)}function An(e,t){const{outlinerSheetModel:n,outlinerState:i,updateOutlinerState:a,maxTopicsLoopNum:l}=ai(),{attachedTopicsLoopStartIndex:r,attachedTopicsLoopEndIndex:d,detachedTopicsLoopStartIndex:c,detachedTopicsLoopEndIndex:s,topicsLoopNum:u,topicItems:p}=i.value,g=p.findIndex((t=>t.topicId===e));if(-1===g)return;const h=n.value.attached.length;if(g>=r&&g<=d+1||d>=h&&g>=h+c&&g<=h+s){const n=oe(e);if(!n)return;const i=le(n);if(!i)return;ke(i),setTimeout((()=>{(null==t?void 0:t.toLastPos)?de(n,ne(n).length):n.focus()}))}else{let t=0,n=0;g>l.value&&(g>h?(t=Math.max(h-l.value,0),n=Math.max(g-h-g%u-u,0)):t=Math.max(g-g%u-u,0)),a({attachedTopicsLoopStartIndex:t,attachedTopicsLoopEndIndex:t+l.value,detachedTopicsLoopStartIndex:n,detachedTopicsLoopEndIndex:n+l.value}),(0,o.Y3)((()=>{An(e)}))}}function Pn(e,t){return"detached"===e.topicType?t.detachedChildren:t.children}function Dn(e){if(!e.parentTopicId)return 0;const{outlinerState:t}=ai(),n=t.value.topicItems.find((t=>t.topicId===e.parentTopicId));if(!n)return-1;return Pn(e,n).findIndex((t=>t===e.topicId))}async function _n({newTopicId:e}){const{updateOutlinerState:t,outlinerState:n,outlinerSheetModel:i}=ai(),{selectionIds:o,attachedTopicsLoopEndIndex:a,detachedTopicsLoopEndIndex:l,topicsLoopNum:r}=n.value;0!==o.length&&t({selectionIds:[]}),0===n.value.detachedTopicsLoopStartIndex&&a<=i.value.attached.length-1&&t({attachedTopicsLoopEndIndex:a+r}),a>=i.value.attached.length-1&&l<=i.value.detached.length-1&&t({detachedTopicsLoopEndIndex:l+r}),t({currFocusTopicId:e})}function qn(e){const{outlinerState:t}=ai(),{topicItems:n}=t.value;for(let t=n.findIndex((t=>t.topicId===e.topicId))-1;t>=0;--t){const i=n[t];if(i.depth<e.depth)return null;if(i.depth===e.depth)return i}return null}function Zn(e){const{outlinerState:t}=ai(),{topicItems:n}=t.value;if(!e.parentTopicId)return null;const i=Dn(e),o=n.find((t=>t.topicId===e.parentTopicId));if(!o)return null;const a=Pn(e,o);return i===a.length-1?null:n.find((e=>e.topicId===a[i+1]))}function Bn(e){var t;const{document:n}=(0,p.nZ)();if(e.children.length>0){const i=null===(t=n.value.query({id:e.children[e.children.length-1].id}))||void 0===t?void 0:t.asTopic();return i?Bn(i):e}return e}function Hn(){const{outlinerState:e}=ai(),{currEditingTopicId:t,selectionIds:n,topicItems:i}=e.value;return n.length>0?n.map((e=>i.findIndex((t=>t.topicId===e)))).reduce(((e,t)=>Math.min(e,t)),i.length-1):i.findIndex((e=>e.topicId===t))}function zn(e){const{document:t,changeDoc:n}=(0,p.nZ)();n(T(t.value,e))}function Wn(e){const t=Fn();t&&zn({type:"deleteAttrs",topicId:t.topicId,...e})}async function Rn(e,t){await Promise.all(e.map((e=>zn({type:"deleteAttrs",topicId:e,...t}))))}function jn(){const{outlinerState:e,updateOutlinerState:t}=ai(),{currEditingMarkerId:n}=e.value,i=Fn();i&&(zn({type:"update",topicId:i.topicId,markers:i.markers.filter((e=>e.id!==n)).map((e=>e.id))}),t({selectonType:ni.TOPIC}))}async function Gn(){const{outlinerState:e}=ai(),{selectionIds:t,topicItems:n}=e.value,i=Fn(),o=t.length>0?t:i?[i.topicId]:[],a=o.reduce(((e,t)=>{const i=n.find((e=>e.topicId===t));return i?e.concat(i.children):e}),[]),l=o.filter((e=>!a.includes(e))).map((e=>n.find((t=>t.topicId===e)))).filter((e=>!(!e||e.depth<=1))).sort(((e,t)=>n.findIndex((t=>t.topicId===e.topicId))-n.findIndex((e=>e.topicId===t.topicId)))),r=[];for(let t=0;t<l.length;t++){const n=l[t],i=e.value.topicItems.find((e=>e.topicId===n.parentTopicId)),o=e.value.topicItems.find((e=>e.topicId===i.parentTopicId));let a=("detached"===i.topicType?o.detachedChildren:o.children).findIndex((e=>e===i.topicId))+1;if(t>=1&&n.depth===l[t-1].depth){const e=r.find((e=>e.topicId===l[t-1].topicId));if(!e)continue;a=e.toTargetIndex+1}r.push({type:"move",topicId:n.topicId,topicType:i.topicType,toParentTopicId:o.topicId,toTargetIndex:a})}await Promise.all(r.map((e=>zn(e))))}async function Un(e){let t="";try{t=(0,c._I)().lastSaveDirectory||ye.app.getPath("downloads")}catch(e){t="downloads"}const n=await(0,Me.ZZ)({title:"Save",suggestPath:{suggestedName:e,defaultPath:t}});return new Promise((function(e){if(n){const t=w().dirname(n);Fe.ZP.fetch(Ne.Pp,{mutations:[{id:"attachment",type:"setLastDirectory",payload:[{lastSaveDirectory:t}]}]}),e(n)}}))}const Vn=async e=>{if(0===e.length)return;const t=Yn(e);await Promise.all(e.filter((e=>!t.includes(e))).map((e=>zn({type:"delete",topicId:e}))))},Yn=e=>{const{outlinerState:t}=ai(),{topicItems:n}=t.value;return e.reduce(((e,t)=>{const i=n.find((e=>e.topicId===t));return i?e.concat(i.children):e}),[])},Xn=e=>{const{outlinerState:t}=ai(),{topicItems:n}=t.value;return e.reduce(((e,t)=>{const i=n.find((e=>e.topicId===t));return i?i.children.length>0?e.concat(i.topicId,Xn(i.children)):e.concat(i.topicId):e}),[])},Jn=(e,t,n={popover:""})=>{const i=(0,Je.$)(),o=i.isRightbarVisible;if(e||t||i.updateRightBarPanel({visible:!o}),e&&t){const a=i.rightBarPanel,l=!(o&&a===e&&i.rightPanelTab[a]===t&&i.rightPanelTabConfig.popover===n.popover);i.updateRightBarPanel({visible:l,panel:e,tab:t,tabConfig:n})}},Kn=e=>0===e.filter((({text:e,...t})=>Object.values(t).some(Boolean))).length,Qn=e=>({text:e,fontFamily:null,fontSize:null,fontWeight:null,fontStyle:null,textTransform:null,textDecoration:null,textAlign:null,textColor:null}),$n=(e,t)=>{let n=e.attributedTitle.concat(t.attributedTitle);return e.attributedTitle.length>1&&t.attributedTitle.length<=1&&(n=e.attributedTitle.concat(t.title?Qn(t.title):[])),e.attributedTitle.length<=1&&t.attributedTitle.length>1&&(n=(e.title?[Qn(e.title)]:[]).concat(t.attributedTitle)),n},ei=(e,t)=>{let n=0,[i,o]=e.reduce(((e,i)=>(e=t>n+i.text.length?[e[0].concat(i),e[1]]:t<=n?[e[0],e[1].concat(i)]:[e[0].concat({...i,text:i.text.slice(0,t-n)}),e[1].concat({...i,text:i.text.slice(t-n)})],n+=i.text.length,e)),[[],[]]);return Kn(i)&&(i=[]),Kn(o)&&(o=[]),[i,o]},ti=({attributedTitle:e,oldTitle:t,newTitle:n,pos:i})=>{const o=ee()(t,n,i),a=o[0][0]===ee().EQUAL&&o.find((e=>e[0]===ee().EQUAL)),l=o.find((e=>e[0]===ee().DELETE)),r=o.find((e=>e[0]===ee().INSERT)),d=a&&a[1].length||0;let c=[...e],s=0;return l&&l.length>0&&(c=e.reduce(((e,t)=>{const n=s<=d&&d<s+t.text.length,i=s>d&&s+t.text.length<d+l[1].length,o=s<d+l[1].length&&d+l[1].length<=s+t.text.length;if(n){const n=t.text.slice(0,d-s)+t.text.slice(d-s+l[1].length);e=e.concat({...t,text:n})}if(i&&(e=e.concat({...t,text:""})),!n&&o){const n=t.text.slice(d-s+l[1].length);e=e.concat({...t,text:n})}return n||o||i||(e=e.concat(t)),s+=t.text.length,e}),[]),c=c.filter((e=>!!e.text)),Kn(c)&&(c=[])),s=0,r&&r.length>0&&(c=c.reduce(((e,t)=>(e=(s<d||0===s)&&d<=s+t.text.length?e.concat({...t,text:t.text.slice(0,d-s)+r[1]+t.text.slice(d-s)}):e.concat(t),s+=t.text.length,e)),[])),c};var ni;!function(e){e.TEXT="TEXT",e.TOPIC="TOPIC",e.LABEL="LABEL",e.TASK="TASK",e.MARKER="MARKER",e.WEBPAGE="WEBPAGE",e.LOCALFILELINK="LOCALFILELINK",e.FOLDERLINK="FOLDERLINK",e.TOPICLINK="TOPICLINK",e.ATTACHMENT="ATTACHMENT",e.EQUATION="EQUATION",e.IMAGE="IMAGE",e.NOTES="NOTES",e.AUDIO_NOTES="AUDIO_NOTES",e.NONE="NONE"}(ni||(ni={}));const ii={MAX:200,MIN:64},oi={MAX:650,MIN:64};const ai=(()=>{const e=Symbol("default-outliner"),t=new Map;return(n=e)=>{if(t.has(n))return t.get(n);const i=Object.assign(function(){const{document:e,activeSheetId:t,changeDoc:n}=(0,p.nZ)(),i=(0,o.iH)(!0),a=(0,o.iH)(""),r=(0,o.iH)(""),h=(0,o.iH)(""),v=(0,o.iH)(""),f=(0,o.iH)(""),b=(0,o.iH)(""),I=(0,o.iH)(null),k=(0,o.iH)([]),x=(0,o.iH)([]),y=(0,o.iH)(ni.TEXT),S=(0,o.iH)(""),w=(0,o.iH)(!1),C=(0,o.iH)(!1),E=(0,o.iH)([]),M=(0,o.iH)(ni.TOPIC),L=(0,o.iH)(0),F=(0,o.iH)({toParentTopicId:"",toTargetIndex:0,rect:{left:0,top:0},toTopicType:"attached",toTopicId:""}),N=(0,o.iH)({visible:"",payload:{}}),O=(0,o.iH)(""),A=(0,o.iH)(""),P=(0,o.iH)(!1),D=(0,o.iH)(!1),_=(0,o.iH)(!1),q=(0,o.iH)(""),Z=(0,o.iH)(!1),B=(0,o.iH)(null),H=(0,o.iH)(50),z=(0,o.iH)(0),W=(0,o.iH)(50),R=(0,o.iH)(0),j=(0,o.iH)(50),G=(0,o.iH)({}),U=(0,o.Fl)((()=>(0,p.nZ)().activeSheetViewerState.value.scopeTopicId)),V=(0,o.Fl)((()=>e.value.sheets.map((e=>m(e,{rootTopicId:U.value,isParseAll:!1}))))),Y=(0,o.Fl)((()=>m(e.value.sheets.find((e=>e.id===t.value)),{rootTopicId:U.value,isParseAll:!1}))),X=(0,o.Fl)((()=>m(e.value.sheets.find((e=>e.id===t.value)),{rootTopicId:U.value,isParseAll:!0}))),J=(0,o.Fl)((()=>[Y.value.central,...Y.value.attached,...Y.value.detached])),K=(0,o.Fl)((()=>[X.value.central,...X.value.attached,...X.value.detached])),$=(0,o.Fl)((()=>{const{activeSheetId:e}=(0,p.nZ)();return(0,g.E)().getOutlinerZoomScaleForSheet(e.value)/100})),ee=(0,o.Fl)((()=>(0,p.nZ)().isInBranchOnly.value)),te=(0,o.Fl)((()=>Math.max(2*H.value,100))),ne=(0,o.Fl)((()=>({isEditable:i.value,currEditingTopicId:a.value,currFocusTopicId:r.value,currEditingMarkerId:h.value,currEditingLabel:v.value,currEditingNotesTopicId:f.value,currEditingNotesHref:b.value,currEditingNotesEditor:I.value,startTopicId:S.value,selectionIds:k.value,invalidImageIds:x.value,selectonType:y.value,topicItems:J.value,allTopicItems:K.value,outlinerScale:$.value,isSelecting:w.value,isMouseDown:C.value,draggingTopicIds:E.value,draggingType:M.value,draggingStartPageY:L.value,draggingPos:F.value,popoverEditorState:N.value,audioBarMode:O.value,audioFilePath:A.value,audioAutoPlay:P.value,audioRecording:D.value,inputMethodInputting:_.value,isBranchOnlyMode:ee.value,ghostImgElementId:q.value,isNoteLinkInputVisible:Z.value,topicsLoopNum:H.value,attachedTopicsLoopStartIndex:z.value,attachedTopicsLoopEndIndex:W.value,detachedTopicsLoopStartIndex:R.value,detachedTopicsLoopEndIndex:j.value,sheetStatus:G.value,tooltip:B.value}))),{openOutlinerCtxMenu:ie}=Q(ne);return(0,o.YP)((()=>k.value),(e=>{i.value=0===e.length,e.length>0&&me(),1!==e.length||[ni.MARKER,ni.LABEL,ni.WEBPAGE,ni.TOPICLINK,ni.ATTACHMENT,ni.LOCALFILELINK,ni.FOLDERLINK,ni.AUDIO_NOTES].includes(y.value)||(y.value=ni.TOPIC),e.length>1&&(y.value=ni.TOPIC)}),{immediate:!1}),(0,o.YP)((()=>y.value),(e=>{e!==ni.MARKER&&(h.value=""),e!==ni.LABEL&&(v.value=""),e!==ni.NOTES&&(b.value="",I.value=null)}),{immediate:!1}),(0,o.YP)((()=>ee.value),(e=>{z.value=0,W.value=H.value,R.value=0,j.value=H.value,e&&(k.value=[])}),{immediate:!1}),(0,o.YP)((()=>U.value),((e,t)=>{null!==e&&setTimeout((()=>{xe(e)})),null===e&&null!==t&&setTimeout((()=>{(0,c.JX)().handleCommand("editor.selectTopicById",{topicId:t})}))}),{immediate:!1}),(0,o.YP)((()=>t.value),(async e=>{const{executeAction:t}=(0,p.nZ)();t({name:"mutate:interruptingEditSession"});const{updateSheetRendering:n,sheetRenderingStartAt:i,sheetRendering:o}=(0,g.E)();if(o&&i){const e=(new Date).getTime()-i;e<u.oY&&await(0,s._v)(u.oY-e),n({sheetRendering:!1,sheetRenderingStartAt:null})}const a=window.document.querySelector("#outliner");a&&(G.value[e]?(z.value=G.value[e].attachedTopicsLoopStartIndex,W.value=G.value[e].attachedTopicsLoopEndIndex,setTimeout((()=>{a.scrollTo(0,G.value[e].top)}))):(z.value=0,W.value=H.value,R.value=0,j.value=H.value,a.scrollTo(0,0),setTimeout((()=>{xe(Y.value.central.topicId)}))))}),{immediate:!0}),{outlinerModel:V,outlinerSheetModel:Y,handleOutlinerOperation:t=>{const i=T(e.value,t);n(i)},outlinerState:ne,updateOutlinerState:e=>{l()(e.currEditingTopicId)||d()(a.value,e.currEditingTopicId)||(a.value=e.currEditingTopicId),l()(e.currFocusTopicId)||d()(r.value,e.currFocusTopicId)||(r.value=e.currFocusTopicId),l()(e.currEditingMarkerId)||d()(h.value,e.currEditingMarkerId)||(h.value=e.currEditingMarkerId),l()(e.currEditingLabel)||d()(v.value,e.currEditingLabel)||(v.value=e.currEditingLabel),l()(e.currEditingNotesTopicId)||d()(f.value,e.currEditingNotesTopicId)||(f.value=e.currEditingNotesTopicId),l()(e.currEditingNotesHref)||d()(b.value,e.currEditingNotesHref)||(b.value=e.currEditingNotesHref),l()(e.currEditingNotesEditor)||(I.value=e.currEditingNotesEditor),l()(e.startTopicId)||d()(S.value,e.startTopicId)||(S.value=e.startTopicId),l()(e.selectionIds)||d()(k.value,e.selectionIds)||(k.value=e.selectionIds),l()(e.invalidImageIds)||d()(x.value,e.invalidImageIds)||(x.value=e.invalidImageIds),l()(e.selectonType)||d()(y.value,e.selectonType)||(y.value=e.selectonType),l()(e.isSelecting)||d()(w.value,e.isSelecting)||(w.value=e.isSelecting),l()(e.isMouseDown)||d()(C.value,e.isMouseDown)||(C.value=e.isMouseDown),l()(e.draggingTopicIds)||d()(E.value,e.draggingTopicIds)||(E.value=e.draggingTopicIds),l()(e.draggingType)||d()(M.value,e.draggingType)||(M.value=e.draggingType),l()(e.draggingStartPageY)||d()(L.value,e.draggingStartPageY)||(L.value=e.draggingStartPageY),l()(e.draggingPos)||d()(F.value,e.draggingPos)||(F.value=e.draggingPos),l()(e.popoverEditorState)||d()(N.value,e.popoverEditorState)||(N.value=e.popoverEditorState),l()(e.audioBarMode)||d()(O.value,e.audioBarMode)||(O.value=e.audioBarMode),l()(e.audioFilePath)||d()(A.value,e.audioFilePath)||(A.value=e.audioFilePath),l()(e.audioAutoPlay)||d()(P.value,e.audioAutoPlay)||(P.value=e.audioAutoPlay),l()(e.audioRecording)||d()(D.value,e.audioRecording)||(D.value=e.audioRecording),l()(e.inputMethodInputting)||d()(_.value,e.inputMethodInputting)||(_.value=e.inputMethodInputting),l()("undefined"!==e.ghostImgElementId)||d()(q.value,e.ghostImgElementId)||(q.value=e.ghostImgElementId),l()(e.isNoteLinkInputVisible)||d()(Z.value,e.isNoteLinkInputVisible)||(Z.value=e.isNoteLinkInputVisible),l()(e.topicsLoopNum)||d()(H.value,e.topicsLoopNum)||(H.value=e.topicsLoopNum),l()(e.tooltip)||d()(B.value,e.tooltip)||(B.value=e.tooltip),l()(e.attachedTopicsLoopStartIndex)||d()(z.value,e.attachedTopicsLoopStartIndex)||(z.value=e.attachedTopicsLoopStartIndex),l()(e.attachedTopicsLoopEndIndex)||d()(W.value,e.attachedTopicsLoopEndIndex)||(W.value=e.attachedTopicsLoopEndIndex),l()(e.detachedTopicsLoopStartIndex)||d()(R.value,e.detachedTopicsLoopStartIndex)||(R.value=e.detachedTopicsLoopStartIndex),l()(e.detachedTopicsLoopEndIndex)||d()(j.value,e.detachedTopicsLoopEndIndex)||(j.value=e.detachedTopicsLoopEndIndex),l()(e.sheetStatus)||d()(G.value,e.sheetStatus)||(G.value=e.sheetStatus)},openOutlinerCtxMenu:ie,maxTopicsLoopNum:te}}(),{unregisterOutliner:()=>{t.clear()}});return t.set(n,i),i}})()},70245:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});var i=n(2954);const o=()=>({handleOutlinerOperation:(0,i.f3)("handleOutlinerOperation"),outlinerState:(0,i.f3)("outlinerState"),updateOutlinerState:(0,i.f3)("updateOutlinerState"),outlinerActions:(0,i.f3)("outlinerActions"),openOutlinerCtxMenu:(0,i.f3)("openOutlinerCtxMenu")})},14766:(e,t,n)=>{"use strict";function i(e){return e.replace(/[^-]/g,(e=>"_"+e.charCodeAt(0).toString(16)))}n.d(t,{N:()=>i})},25581:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTYgKDgxNTg4KSAtIGh0dHBzOi8vc2tldGNoLmNvbS0tPjx0aXRsZT5hdWRpb25vdGU8L3RpdGxlPjxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPjxnIGlkPSJhdWRpb25vdGUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMy4wMDAwMDAsIDEuMDAwMDAwKSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEuMiI+PHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMi4zODIiIHk9IjAuNiIgd2lkdGg9IjUuMDM3IiBoZWlnaHQ9IjguNjAxIiByeD0iMi41MTg1Ii8+PHBhdGggZD0iTTkuODAxLDUuMzQ2IEw5LjgwMSw2LjM4NTUgQzkuODAxLDkuMjU1OTk5OTkgNy42MDY5NzE0MiwxMS41ODMgNC45MDA1LDExLjU4MyBDMi4xOTQwMjg1OCwxMS41ODMgMCw5LjI1NTk5OTk5IDAsNi4zODU1IEwwLDUuMzQ2IiBpZD0iUGF0aCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTQuOTAwNSwxMi4wMjg1IEw0Ljk1LDEzLjIiIGlkPSJQYXRoLTQ5IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L2c+PC9nPjwvc3ZnPg=="},16884:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE4cHgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTUgKDc4MDc2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbS0tPjx0aXRsZT5kYXNoPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBpZD0iZGFzaCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iMC4xIj48ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguNTAwMDAwLCAxLjUwMDAwMCkiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+PHBvbHlnb24gaWQ9IlBhdGgiIHBvaW50cz0iMC4xIDAgMC4xIDMgMC45IDMgMC45IDAiLz48cG9seWdvbiBpZD0iUGF0aCIgcG9pbnRzPSIwLjEgNiAwLjEgOSAwLjkgOSAwLjkgNiIvPjxwb2x5Z29uIGlkPSJQYXRoIiBwb2ludHM9IjAuMSAxMiAwLjEgMTUgMC45IDE1IDAuOSAxMiIvPjwvZz48L2c+PC9zdmc+"},23543:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE4cHgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48dGl0bGU+ZGFzaDwvdGl0bGU+PGcgaWQ9ImRhc2giIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuMiI+PGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjUwMDAwMCwgMS41MDAwMDApIiBmaWxsPSIjMDAwMDAwIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjxwb2x5Z29uIGlkPSJQYXRoIiBwb2ludHM9IjAuMSAwIDAuMSAzIDAuOSAzIDAuOSAwIi8+PHBvbHlnb24gaWQ9IlBhdGgiIHBvaW50cz0iMC4xIDYgMC4xIDkgMC45IDkgMC45IDYiLz48cG9seWdvbiBpZD0iUGF0aCIgcG9pbnRzPSIwLjEgMTIgMC4xIDE1IDAuOSAxNSAwLjkgMTIiLz48L2c+PC9nPjwvc3ZnPg=="},23052:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n.p+"images/drag_ctrl.svg"},59384:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48dGl0bGU+Zm9sZF90cmlhbmdsZV9pY29uX3doaXRlPC90aXRsZT48ZyBpZD0iZm9sZF90cmlhbmdsZV9pY29uX3doaXRlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNC41NzYsMy40MzIgTDExLjYxNiw4LjcxMiBDMTEuNzc1MDU4LDguODMxMjkzNTEgMTEuODA3MjkzNSw5LjA1Njk0MTk5IDExLjY4OCw5LjIxNiBDMTEuNjY3NTMyNSw5LjI0MzI5MDA0IDExLjY0MzI5LDkuMjY3NTMyNDcgMTEuNjE2LDkuMjg4IEw0LjU3NiwxNC41NjggQzQuNDE2OTQxOTksMTQuNjg3MjkzNSA0LjE5MTI5MzUxLDE0LjY1NTA1OCA0LjA3MiwxNC40OTYgQzQuMDI1MjY0MDMsMTQuNDMzNjg1NCA0LDE0LjM1Nzg5MzMgNCwxNC4yOCBMNCwzLjcyIEM0LDMuNTIxMTc3NDkgNC4xNjExNzc0OSwzLjM2IDQuMzYsMy4zNiBDNC40Mzc4OTMyOCwzLjM2IDQuNTEzNjg1MzgsMy4zODUyNjQwMyA0LjU3NiwzLjQzMiBaIiBpZD0iUGF0aC03IiBmaWxsPSIjRjZGNkY2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjAwMDAwMCwgOS4wMDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC04LjAwMDAwMCwgLTkuMDAwMDAwKSAiLz48L2c+PC9zdmc+"},99845:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTYgKDgxNTg4KSAtIGh0dHBzOi8vc2tldGNoLmNvbS0tPjx0aXRsZT5maWxlbGluazwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9ImZpbGVsaW5rIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxnIGlkPSJHcm91cC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjUwMDAwMCwgMi4wMDAwMDApIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMS4yIj48cG9seWxpbmUgaWQ9IlBhdGgtMTQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAyLjI1MDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0yLjI1MDAwMCkgIiBwb2ludHM9IjAuNSAwIDAuNSA0LjUgNC41IDQuNSIvPjxwYXRoIGQ9Ik05LjUsMCBMNCwwIEwwLDQgTDAsMTEgQzYuNzYzNTM3NTFlLTE3LDExLjU1MjI4NDcgMC40NDc3MTUyNSwxMiAxLDEyIEw4LjUsMTIgTDkuNSwxMiBDMTAuMDUyMjg0NywxMiAxMC41LDExLjU1MjI4NDcgMTAuNSwxMSBMMTAuNSwzIEwxMC41LDEgQzEwLjUsMC40NDc3MTUyNSAxMC4wNTIyODQ3LC0xLjAxNDUzMDYzZS0xNiA5LjUsMCBaIiBpZD0iUGF0aC0xMyIvPjwvZz48L2c+PC9zdmc+"},57298:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n.p+"images/link-local-folder.svg"},8056:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n.p+"images/link-topic.svg"},39904:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n.p+"images/link-webpage.svg"},64821:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n.p+"images/bold.svg"},29547:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n.p+"images/italic.svg"},18234:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n.p+"images/link.svg"},71287:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTYgKDgxNTg4KSAtIGh0dHBzOi8vc2tldGNoLmNvbS0tPjx0aXRsZT5saXN0PC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBpZD0ibGlzdCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgaWQ9ImJ1bGxldCI+PHJlY3QgaWQ9IlJlY3RhbmdsZS04MyIgZmlsbD0iIzAwMDAwMCIgb3BhY2l0eT0iMC45IiB4PSI1LjAzMTI1IiB5PSIzLjUiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxLjI1IiByeD0iMC4yNSIvPjxyZWN0IGlkPSJSZWN0YW5nbGUtODMtQ29weS0yIiBmaWxsPSIjMDAwMDAwIiBvcGFjaXR5PSIwLjkiIHg9IjUuMDMxMjUiIHk9IjcuNzUiIHdpZHRoPSI5IiBoZWlnaHQ9IjEuMjUiIHJ4PSIwLjI1Ii8+PHJlY3QgaWQ9IlJlY3RhbmdsZS04My1Db3B5LTMiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAuOSIgeD0iNS4wMzEyNSIgeT0iMTIiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxLjI1IiByeD0iMC4yNSIvPjxjaXJjbGUgaWQ9Ik92YWwiIGZpbGw9IiMxOTE5MTkiIGN4PSIyLjUiIGN5PSI0IiByPSIxIi8+PGNpcmNsZSBpZD0iT3ZhbC1Db3B5IiBmaWxsPSIjMTkxOTE5IiBjeD0iMi41IiBjeT0iOC41IiByPSIxIi8+PGNpcmNsZSBpZD0iT3ZhbC1Db3B5LTIiIGZpbGw9IiMxOTE5MTkiIGN4PSIyLjUiIGN5PSIxMi41IiByPSIxIi8+PC9nPjwvZz48L3N2Zz4="},43427:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n.p+"images/number.svg"},63846:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n.p+"images/underline.svg"},90029:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(2954);const o=(0,i.aZ)({__name:"visibility-sensor",props:{options:{default:()=>({})}},emits:["change"],setup(e,{emit:t}){const n=e,o=(0,i.iH)(null);let a=null;return(0,i.bv)((async()=>{if(await new Promise((e=>setTimeout(e,0))),!o.value)return;let e=0,i=0,l=null;a=new IntersectionObserver((([n])=>{const o=n.isIntersecting,a=n.boundingClientRect.top;o?(e=n.boundingClientRect.top,0!==i&&(l=a>i?"top":"bottom")):(i=n.boundingClientRect.top,0!==e&&(l=a>e?"top":"bottom")),t("change",{visible:o,direction:l})}),n.options),a.observe(o.value)})),(0,i.Jd)((()=>{a&&a.disconnect()})),{__sfc:!0,props:n,emit:t,entryContainer:o,io:a}}});const a=(0,n(51900).Z)(o,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"entryContainer"},[e._t("default")],2)}),[],!1,null,null,null).exports},14474:(e,t,n)=>{"use strict";n.d(t,{Z:()=>fe});var i=n(2954),o=n(90255),a=n.n(o),l=n(71017),r=n.n(l),d=n(87141),c=n(94593),s=n(90029),u=n(53775),p=n(84374),g=n(48825),h=n(27049),v=n(14766),m=n(70245);const f=(0,i.aZ)({__name:"topic-marker",props:{topicId:null,markers:{default:()=>[]},size:{default:18}},setup(e){const t=e,{outlinerState:n,updateOutlinerState:o,openOutlinerCtxMenu:a}=(0,m.p)(),l=(0,i.iH)(null),r=()=>{o({currEditingTopicId:t.topicId,selectionIds:[t.topicId],selectonType:g._p.MARKER})},d=()=>{var e;n.value.selectonType!==g._p.TOPIC&&o({selectonType:g._p.TOPIC}),null===(e=l.value)||void 0===e||e.removeEventListener("mouseout",d)};return{__sfc:!0,props:t,isMac:false,outlinerState:n,updateOutlinerState:o,openOutlinerCtxMenu:a,topicMarkerContainer:l,getTopicMarkerItemStyle:e=>({width:`${t.size}px`,height:`${t.size}px`,backgroundSize:`${t.size}px`,backgroundImage:`url('${e}')`}),handleFocus:r,handleMarkerClick:(e,n)=>{const i=e.target.getBoundingClientRect();r(),o({popoverEditorState:{visible:"marker",payload:{topicId:t.topicId,editorRect:i,markers:t.markers,markerId:n}}})},handleMouseout:d,handleContextMenu:(e,t)=>{r(),o({currEditingMarkerId:t}),a("MARKER")}}}});n(14433);var b=n(51900);const I=(0,b.Z)(f,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"topicMarkerContainer",staticClass:"outliner-topic-marker-container uk-flex uk-flex-middle"},e._l(e.markers,(function({id:e,url:i}){return t("div",{key:e,staticClass:"outliner-topic-marker uk-float-left"},[t("span",{staticClass:"outliner-topic-marker-item",style:n.getTopicMarkerItemStyle(i),on:{click:function(t){return t.stopPropagation(),t.preventDefault(),n.handleMarkerClick(t,e)},mousedown:function(e){return e.stopPropagation(),(()=>!1).apply(null,arguments)},contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),n.handleContextMenu(t,e)}}})])})),0)}),[],!1,null,"51d6aece",null).exports;const k=(0,i.aZ)({__name:"topic-label",props:{topicId:null,labels:{default:()=>[]},labelSortOrder:{default:"auto"}},setup(e){const t=e,{outlinerState:n,updateOutlinerState:o,openOutlinerCtxMenu:a}=(0,m.p)(),l=(0,i.iH)(null),r=()=>{o({currEditingTopicId:t.topicId,selectionIds:[t.topicId],selectonType:g._p.LABEL})},d=(0,i.Fl)((()=>{const e=g.xI.sortLabels(t.labels,t.labelSortOrder);return e&&0!==e.length?e:t.labels})),c=()=>{var e;n.value.selectonType!==g._p.TOPIC&&o({selectonType:g._p.TOPIC}),null===(e=l.value)||void 0===e||e.removeEventListener("mouseout",c)};return{__sfc:!0,props:t,isMac:false,outlinerState:n,updateOutlinerState:o,openOutlinerCtxMenu:a,topicLabelRef:l,handleFocus:r,sortedLabels:d,handleClick:()=>{if(!l.value)return;const e=l.value.getBoundingClientRect();r(),o({popoverEditorState:{visible:"label",payload:{targetIds:[t.topicId],editorRect:e,labels:t.labels,labelSortOrder:t.labelSortOrder}}})},handleMouseout:c,handleContextMenu:(e,t)=>{r(),o({currEditingLabel:t}),a("LABEL")}}}});n(76466);const T=(0,b.Z)(k,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return e.labels.length>0?t("div",{ref:"topicLabelRef",staticClass:"outliner-topic-label-container"},e._l(n.sortedLabels,(function(i,o){return t("span",{key:o,staticClass:"outliner-topic-label uk-text-truncate",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.handleClick.apply(null,arguments)},mousedown:function(e){return e.preventDefault(),e.stopPropagation(),(()=>!1).apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),n.handleContextMenu(e,i)}}},[e._v("\n    "+e._s(i)+"\n  ")])})),0):e._e()}),[],!1,null,"7ddad63c",null).exports;var x=n(5893);const y=(0,i.aZ)({__name:"topic-link",props:{topicId:null,webpage:null,localFileLink:null,topicLink:null,attachment:null,title:null},setup(e){const t=e,{outlinerState:n,outlinerActions:o,updateOutlinerState:a,openOutlinerCtxMenu:l}=(0,m.p)(),r=(0,i.iH)(""),d=(0,i.iH)(null),s=(0,i.Fl)((()=>{if(!t.localFileLink)return!1;let e=t.localFileLink;try{e=(0,x.iZ)(e)}catch(t){e=e.slice(5)}try{return c.Z.isDirectorySync(e)}catch(e){return!1}})),u=()=>{a({currEditingTopicId:t.topicId,selectionIds:[t.topicId],selectonType:s.value?g._p.FOLDERLINK:t.localFileLink?g._p.LOCALFILELINK:t.attachment?g._p.ATTACHMENT:t.topicLink?g._p.TOPICLINK:g._p.WEBPAGE})},p=()=>{var e;n.value.selectonType!==g._p.TOPIC&&a({selectonType:g._p.TOPIC}),null===(e=d.value)||void 0===e||e.removeEventListener("mouseout",p)};return(0,i.YP)((()=>[t.webpage,t.topicLink,t.localFileLink,t.attachment]),(async()=>{r.value=await o.getLinkTitle(t)}),{immediate:!0}),{__sfc:!0,props:t,isMac:false,outlinerState:n,outlinerActions:o,updateOutlinerState:a,openOutlinerCtxMenu:l,linkTitle:r,topicLinkContainer:d,isFolderLink:s,handleFocus:u,handleLinkClick:()=>{u(),o.openLink(t)},handleMouseout:p,handleContextMenu:()=>(u(),s.value?l("FOLDERLINK"):t.localFileLink?l("LOCALFILELINK"):t.topicLink?l("TOPICLINK"):t.attachment?l("ATTACHMENT"):void l("WEBPAGE"))}}});n(85093);const S=(0,b.Z)(y,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"topicLinkContainer",staticClass:"outliner-topic-link-container uk-float-left"},[t("div",{staticClass:"outliner-topic-link",class:{"is-webpage":!!e.webpage,"is-topic":!!e.topicLink,"is-local-file":!!e.localFileLink,"is-local-folder":!!e.attachment},on:{click:n.handleLinkClick,contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),n.handleContextMenu.apply(null,arguments)}}},[t("span",{staticClass:"outliner-topic-link-text uk-text-truncate"},[e._v(e._s(n.linkTitle))])])])}),[],!1,null,"d413e324",null).exports;var w=n(69931);const C=(0,i.aZ)({__name:"topic-image",props:{topicId:null,image:null,isSelected:{type:Boolean,default:!1}},setup(e){const t=e,{getResourceUrlByXapUrl:n}=(0,p.nZ)(),{handleOutlinerOperation:o,outlinerState:a,updateOutlinerState:l,openOutlinerCtxMenu:r}=(0,m.p)(),c=(0,i.iH)(null),s=(0,i.iH)(!1),u=(0,i.iH)(!1),h=(0,i.iH)({width:0,height:0}),v=(0,i.iH)({width:0,height:0,ratio:1}),f=(0,i.iH)(!0);let b=null;const I=(0,i.Fl)((()=>(0,d.S)().appearance)),k=(0,i.Fl)((()=>"dark"===I.value?(0,w.ju)("/static/snowbird/resource/addons/image_error_for_dark.svg"):(0,w.ju)("/static/snowbird/resource/addons/image_error_for_light.svg"))),T=(0,i.Fl)((()=>{let e=s.value?v.value.width:t.image.width||h.value.width,n=s.value?v.value.height:t.image.height||h.value.height;return e<g.ye.MIN?(e=g.ye.MIN,n=e*v.value.ratio):e>g.ye.MAX&&(e=g.ye.MAX,n=e*v.value.ratio),{width:e+"px",height:n+"px"}})),x=async()=>{try{const e=await n(t.image.src);if(t.image.height&&t.image.width)v.value.ratio=t.image.height/t.image.width;else{let{height:t,width:n}=await(0,g.N8)(e);v.value.ratio=t/n,n<g.yE.MIN?(n=g.yE.MIN,t=n*v.value.ratio):n>g.yE.MAX&&(n=g.yE.MAX,t=n*v.value.ratio),h.value={width:n,height:t}}y(e),f.value=!0,a.value.invalidImageIds.includes(t.topicId)&&l({invalidImageIds:a.value.invalidImageIds.filter((e=>e!==t.topicId))})}catch(e){f.value=!1,a.value.invalidImageIds.includes(t.topicId)||l({invalidImageIds:a.value.invalidImageIds.concat(t.topicId)}),y(k.value)}},y=e=>{if(c.value)if(c.value.querySelector("img")){if(b.src===e)return;b.src=e,b.style.width="100%"}else b=new Image,b.addEventListener("load",(async()=>{var e;null===(e=c.value)||void 0===e||e.prepend(b)})),b.src=e,b.style.width="100%"},S=e=>{if(!s.value)return;if(!c.value)return;e.preventDefault(),e.stopPropagation();const t=c.value.getBoundingClientRect(),{left:n,top:i}=t;let{clientX:o,clientY:l}=e,r=(o-n)/a.value.outlinerScale,d=(l-i)/a.value.outlinerScale;r>d?d=r*v.value.ratio:r=d*(1/v.value.ratio),r<=g.ye.MIN*a.value.outlinerScale?(r=g.ye.MIN,d=r*v.value.ratio):r>=g.ye.MAX*a.value.outlinerScale&&(r=g.ye.MAX,d=r*v.value.ratio),v.value.width=r,v.value.height=d},C=e=>{s.value&&(e.preventDefault(),e.stopPropagation(),s.value=!1,o({type:"update",topicId:t.topicId,image:{...t.image,...v.value}}),window.removeEventListener("mousemove",S,!1),window.removeEventListener("mouseup",C,!1))},E=()=>{l({currEditingTopicId:t.topicId,selectionIds:[],selectonType:g._p.IMAGE})};return(0,i.bv)((()=>{x()})),(0,i.YP)((()=>t.image),(()=>{x()}),{immediate:!1}),(0,i.YP)((()=>I.value),(()=>{f.value||y(k.value)}),{immediate:!1}),{__sfc:!0,props:t,getResourceUrlByXapUrl:n,handleOutlinerOperation:o,outlinerState:a,updateOutlinerState:l,openOutlinerCtxMenu:r,topicImageContainer:c,isResizing:s,isDragging:u,imageSize:h,resizingSize:v,isImageValid:f,imageEl:b,appearance:I,errImageSrc:k,imgStyle:T,refreshImage:x,loadImage:y,resizeStart:()=>{b&&(s.value=!0,v.value.width=b.width,v.value.height=b.height,window.addEventListener("mousemove",S,!1),window.addEventListener("mouseup",C,!1))},resize:S,resizeEnd:C,handleFoucs:E,handleContextMenu:()=>{E(),r("IMAGE")},handleDragStart:e=>{f.value?(b&&e.dataTransfer.setDragImage(b,0,0),u.value=!0,l({draggingStartPageY:e.pageY,draggingType:g._p.IMAGE,draggingTopicIds:[t.topicId],isMouseDown:!0}),e.dataTransfer.clearData(),e.dataTransfer.setData("outlinerSvg",JSON.stringify(t.image))):e.preventDefault()},handleDragEnd:()=>{u.value=!1},handleDblClick:()=>{(0,d.JX)().handleCommand("outliner.previewImage")}}}});n(94783);const E=(0,b.Z)(C,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"topicImageContainer",staticClass:"outliner-topic-image",class:{"is-selected":e.isSelected,"is-image-valid":n.isImageValid,"is-dragging ":n.isDragging},style:n.imgStyle,on:{mousedown:function(e){return e.stopPropagation(),(()=>!1).apply(null,arguments)},dragstart:function(e){return e.stopPropagation(),n.handleDragStart.apply(null,arguments)},dragend:function(e){return e.stopPropagation(),n.handleDragEnd.apply(null,arguments)},click:function(e){return e.preventDefault(),e.stopPropagation(),n.handleFoucs.apply(null,arguments)},dblclick:function(e){return e.stopPropagation(),n.handleDblClick.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),n.handleContextMenu.apply(null,arguments)}}},[t("div",{staticClass:"outliner-topic-image-handler",on:{mousedown:function(e){return e.preventDefault(),e.stopPropagation(),n.resizeStart.apply(null,arguments)}}})])}),[],!1,null,"70581c3c",null).exports;const M=(0,i.aZ)({__name:"topic-equation",props:{topicId:null,equation:null,image:null,isSelected:{type:Boolean,default:!1}},setup(e){const t=e,{getResourceUrlByXapUrl:n}=(0,p.nZ)(),{outlinerState:o,updateOutlinerState:a,handleOutlinerOperation:l,outlinerActions:r,openOutlinerCtxMenu:c}=(0,m.p)(),s=(0,i.iH)(null),u=(0,i.iH)(!1),h=(0,i.iH)(!1),v=(0,i.iH)({width:0,height:0}),f=(0,i.iH)({width:0,height:0,ratio:1}),b=(0,i.iH)(!0);let I=null;const k=(0,i.Fl)((()=>(0,d.S)().appearance)),T=(0,i.Fl)((()=>"dark"===k.value?(0,w.ju)("/static/snowbird/resource/addons/image_error_for_dark.svg"):(0,w.ju)("/static/snowbird/resource/addons/image_error_for_light.svg"))),x=(0,i.Fl)((()=>{let e=u.value?f.value.width:t.image.width||v.value.width,n=u.value?f.value.height:t.image.height||v.value.height;return e>g.ye.MAX&&(e=g.ye.MAX,n=e*f.value.ratio),{width:e+"px",height:n+"px"}})),y=async()=>{try{if("xap:undefined"!==t.image.src)if(t.image.width||v.value.width)f.value.ratio=t.image.height/t.image.width;else{const e=await n(t.image.src),{width:i,height:o}=await(0,g.N8)(e);f.value.ratio=o/i,v.value={width:i,height:o}}const{imageSource:e,isMathJaxValid:i}=await r.getEquationImageInfo({equation:t.equation});if(b.value=i,"xap:undefined"===t.image.src){const{width:t,height:n}=await(0,g.N8)(e);f.value.ratio=n/t,v.value={width:t,height:n}}S(e),i&&o.value.invalidImageIds.includes(t.topicId)&&a({invalidImageIds:o.value.invalidImageIds.filter((e=>e!==t.topicId))}),i||o.value.invalidImageIds.includes(t.topicId)||a({invalidImageIds:o.value.invalidImageIds.concat(t.topicId)})}catch(e){b.value=!1,o.value.invalidImageIds.includes(t.topicId)||a({invalidImageIds:o.value.invalidImageIds.concat(t.topicId)}),S(T.value)}},S=e=>{if(s.value)if(s.value.querySelector("img")){if(I.src===e)return;I.src=e,I.style.width="100%"}else I=new Image,I.addEventListener("load",(async()=>{var e;null===(e=s.value)||void 0===e||e.prepend(I)})),I.src=e,I.style.width="100%"},C=e=>{if(!u.value)return;if(!s.value)return;e.preventDefault(),e.stopPropagation();const t=s.value.getBoundingClientRect(),{left:n,top:i}=t;let{clientX:a,clientY:l}=e,r=(a-n)/o.value.outlinerScale,d=(l-i)/o.value.outlinerScale;r>d?d=r*f.value.ratio:r=d*(1/f.value.ratio),r>=g.ye.MAX*o.value.outlinerScale&&(r=g.ye.MAX,d=r*f.value.ratio),f.value.width=r,f.value.height=d},E=e=>{u.value&&(e.preventDefault(),e.stopPropagation(),u.value=!1,l({type:"update",topicId:t.topicId,equation:t.equation,image:{width:f.value.width,height:f.value.height}}),window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",E))},M=()=>{a({currEditingTopicId:t.topicId,selectionIds:[],selectonType:g._p.EQUATION})};return(0,i.bv)((()=>{y()})),(0,i.YP)((()=>[t.equation,t.image]),(()=>{y()}),{immediate:!1}),(0,i.YP)((()=>k.value),(()=>{b.value||S(T.value)}),{immediate:!1}),{__sfc:!0,props:t,getResourceUrlByXapUrl:n,outlinerState:o,updateOutlinerState:a,handleOutlinerOperation:l,outlinerActions:r,openOutlinerCtxMenu:c,topicEquationContainer:s,isResizing:u,isDragging:h,equationSize:v,resizingSize:f,isImageValid:b,imageEl:I,appearance:k,errImageSrc:T,imgStyle:x,refreshEquation:y,loadEquation:S,resizeStart:()=>{I&&(u.value=!0,f.value.ratio=I.height/I.width,f.value.width=I.width,f.value.height=I.height,window.addEventListener("mousemove",C,!1),window.addEventListener("mouseup",E,!1))},resize:C,resizeEnd:E,handleFoucs:M,handleDblClick:()=>{(0,d.JX)().handleCommand("editor.showEquationEditor")},handleContextMenu:()=>{M(),c("EQUATION")},handleDragStart:e=>{b.value?(I&&e.dataTransfer.setDragImage(I,0,0),h.value=!0,a({draggingStartPageY:e.pageY,draggingType:g._p.EQUATION,draggingTopicIds:[t.topicId],isMouseDown:!0}),e.dataTransfer.clearData(),e.dataTransfer.setData("outlinerSvg",JSON.stringify({equation:t.equation,image:t.image}))):e.preventDefault()},handleDragEnd:()=>{h.value=!1}}}});n(51819);const L=(0,b.Z)(M,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"outliner-topic-equation-container",class:{"is-selected":e.isSelected,"is-dragging ":n.isDragging}},[t("div",{ref:"topicEquationContainer",staticClass:"outliner-topic-equation",class:{"is-image-valid":n.isImageValid},style:n.imgStyle,on:{mousedown:function(e){return e.stopPropagation(),(()=>!1).apply(null,arguments)},dragstart:function(e){return e.stopPropagation(),n.handleDragStart.apply(null,arguments)},dragend:function(e){return e.stopPropagation(),n.handleDragEnd.apply(null,arguments)},dblclick:function(e){return e.stopPropagation(),n.handleDblClick.apply(null,arguments)},click:function(e){return e.preventDefault(),e.stopPropagation(),n.handleFoucs.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),n.handleContextMenu.apply(null,arguments)}}}),e._v(" "),t("div",{staticClass:"outliner-topic-equation-handler",on:{mousedown:function(e){return e.preventDefault(),e.stopPropagation(),n.resizeStart.apply(null,arguments)}}})])}),[],!1,null,"8295fd3a",null).exports;var F=n(68924),N=n.n(F),O=n(74761),A=n(63111),P=n(54856),D=n(90435),_=n(85786),q=n(67214);const Z=(0,i.aZ)({__name:"topic-note",props:{topicId:null,notes:null},setup(e){const t=e,n="xmind-autolink",o=(0,d.JE)().T,{outlinerState:a,updateOutlinerState:l,handleOutlinerOperation:r,openOutlinerCtxMenu:c}=(0,m.p)(),s=(0,i.iH)(null),p=(0,i.iH)(null),h=(0,i.iH)(null),v=(0,i.iH)(!1),f=(0,i.iH)(!1),b=(0,i.iH)(!1),I=(0,i.iH)(!!t.notes),k=(0,i.iH)(!1),T=(0,i.iH)(null),x=(0,i.iH)(""),y=(0,i.Fl)((()=>a.value.currEditingNotesTopicId===t.topicId||I.value)),S=()=>{p.value&&(h.value=new O.Editor({container:p.value}),h.value.placeholder=o("Enter your note in here."),l({currEditingNotesEditor:h.value}))},w=()=>{if(h.value||S(),b.value)return;if(!t.notes)return void h.value.cleanContent();const e={plain:{content:t.notes.text},realHTML:{content:t.notes.html?N()(t.notes.html,{onIgnoreTag:(e,t)=>{if(e===n)return t},safeAttrValue:(e,t,n,i)=>"a"===e&&"href"===t?n:(0,F.safeAttrValue)(e,t,n,i)}):t.notes.html}};(0,i.Y3)().then((()=>{h.value.setNoteData(e)}))},C=()=>{if(!h.value)return;if(!h.value.canUndo())return;const e=h.value.getNoteData();r({type:"update",topicId:t.topicId,notes:e?{text:e.plain.content,html:e.realHTML.content}:null})},E=(0,u.Ds)(C,500),M=async()=>{f.value=!1,h.value.autoFitLinkSelectedRange(),h.value.setSelectionStyle(O.Type.TextStyles.frozen,null,{isCanUndo:!1}),await new Promise((e=>setTimeout(e,500))),k.value=!0;const e=h.value.getSingleWholeLink();x.value=e||"",T.value&&setTimeout((()=>{T.value.focus()}))},L=()=>{h.value.removeSelectionStyle(O.Type.TextStyles.frozen,{isCanUndo:!1}),v.value=!1,setTimeout((()=>{k.value=!1,l({isNoteLinkInputVisible:!1})}),300)},Z=()=>{h.value.setLink(x.value),x.value=""},B=e=>{if(!A.nd)return(0,_.DL)(e.detail.href,o);D.ZP.fetch(P.QN)};return(0,i.bv)((()=>{t.notes&&w(),p.value.addEventListener("link-activated",B)})),(0,i.Jd)((()=>{p.value.removeEventListener("link-activated",B)})),(0,i.YP)((()=>t.notes),(e=>{I.value=!!e,e&&w()}),{immediate:!1}),(0,i.YP)((()=>a.value.currEditingNotesTopicId),(e=>{e===t.topicId&&(w(),setTimeout((()=>{(0,g.kI)(s.value),h.value.focus()}),100))}),{immediate:!1}),(0,i.YP)((()=>a.value.isNoteLinkInputVisible),(e=>{a.value.currEditingNotesTopicId===t.topicId&&e&&M()}),{immediate:!1}),{__sfc:!0,XMIND_AUTO_LINK_TAG:n,props:t,$T:o,outlinerState:a,updateOutlinerState:l,handleOutlinerOperation:r,openOutlinerCtxMenu:c,topicNoteElement:s,topicNoteContainer:p,notesEditor:h,hasSelection:v,isNoteToolbarVisible:f,isNoteFocused:b,isNoteVisible:I,isLinkInputVisible:k,linkInput:T,link:x,isTopicNoteVisible:y,initNotesEditor:S,refreshNoteData:w,saveNote:C,handleChange:E,handleFocusChange:()=>{const e=s.value&&s.value.contains(document.activeElement);if(f.value=e,e)l({currEditingTopicId:t.topicId,selectionIds:[],selectonType:g._p.NOTES,currEditingNotesEditor:h.value});else{if(!h.value)return;h.value.getNoteData()||(I.value=!1),l({currEditingNotesTopicId:"",isMouseDown:!1})}},handleSelectionChange:()=>{if(!h.value)return;const e=h.value.getSelectedRange();v.value=e[0]!==e[1]},toggleSelectionStyle:e=>{h.value&&h.value.toggleSelectionStyle(e)},showNoteLinkInput:M,closeNoteLinkInput:L,setLink:Z,handleNoteLinkInputKeyDown:e=>{a.value.inputMethodInputting||(["Tab","Enter"].includes(e.key)&&e.preventDefault(),"Enter"===e.key&&Z(),"Escape"===e.key&&L())},handleCompositionstart:()=>{l({inputMethodInputting:!0})},handleCompositionend:()=>{l({inputMethodInputting:!1})},handleContextMenu:e=>{const n=e.target,i=O.Editor.getHref(n);l({currEditingNotesTopicId:t.topicId}),i?((0,q.FW)(n),l({currEditingNotesHref:i}),c("NOTES_LINK")):(l({currEditingNotesHref:""}),c("NOTES"))},onLinkActivated:B,NotesEditor:O.Editor}}});n(91717);const B=(0,b.Z)(Z,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{directives:[{name:"show",rawName:"v-show",value:n.isTopicNoteVisible,expression:"isTopicNoteVisible"}],ref:"topicNoteElement",staticClass:"outliner-topic-note uk-position-relative",on:{mousedown:function(e){return e.stopPropagation(),(()=>!1).apply(null,arguments)},focus:n.handleFocusChange,blur:n.handleFocusChange}},[t("div",{directives:[{name:"show",rawName:"v-show",value:n.hasSelection&&n.isNoteToolbarVisible&&!n.isLinkInputVisible,expression:"hasSelection && isNoteToolbarVisible && !isLinkInputVisible"}],staticClass:"outliner-topic-note-toolbar"},[t("button",{staticClass:"ol-b ql-bold",on:{click:function(e){return n.toggleSelectionStyle(n.NotesEditor.TextStyles.bold)}}}),e._v(" "),t("button",{staticClass:"ol-i ql-italic",on:{click:function(e){return n.toggleSelectionStyle(n.NotesEditor.TextStyles.italic)}}}),e._v(" "),t("button",{staticClass:"ol-u ql-underline",on:{click:function(e){return n.toggleSelectionStyle(n.NotesEditor.TextStyles.underline)}}}),e._v(" "),t("button",{staticClass:"ol-ul ql-list",attrs:{value:"bullet"},on:{click:function(e){return n.toggleSelectionStyle(n.NotesEditor.TextStyles.bullet)}}}),e._v(" "),t("button",{staticClass:"ol-ol ql-list",attrs:{value:"ordered"},on:{click:function(e){return n.toggleSelectionStyle(n.NotesEditor.TextStyles.number)}}}),e._v(" "),t("button",{staticClass:"ol-link",on:{click:n.showNoteLinkInput}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:n.isLinkInputVisible,expression:"isLinkInputVisible"}],staticClass:"outliner-topic-note-link-input-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.link,expression:"link"}],ref:"linkInput",staticClass:"uk-input outliner-topic-note-link-input",attrs:{placeholder:n.$T("Enter Link URL")},domProps:{value:n.link},on:{blur:n.closeNoteLinkInput,compositionstart:n.handleCompositionstart,compositionend:n.handleCompositionend,keydown:n.handleNoteLinkInputKeyDown,input:function(e){e.target.composing||(n.link=e.target.value)}}}),e._v(" "),t("button",{staticClass:"vk-button-tile outliner-topic-note-link-confirm-btn",staticStyle:{padding:"2px"},on:{click:n.setLink}},[t("span",{attrs:{"uk-icon":"icon: check"}})])]),e._v(" "),t("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.outlinerNotes"],expression:"['focus.outlinerNotes']",arg:"group"}],ref:"topicNoteContainer",staticClass:"outliner-topic-note-container",attrs:{tabindex:"-1"},on:{focus:function(e){n.isNoteFocused=!0},blur:function(e){n.isNoteFocused=!1},change:n.handleChange,selectionchange:n.handleSelectionChange,contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),n.handleContextMenu.apply(null,arguments)}}})])}),[],!1,null,"516a1b72",null).exports;const H=(0,i.aZ)({__name:"topic-task",props:{topicId:null,task:null,size:{default:18}},setup(e){const t=e,{outlinerState:n,updateOutlinerState:o,openOutlinerCtxMenu:a}=(0,m.p)(),l=(0,i.iH)(null),r=(0,i.Fl)((()=>"dark"===(0,d.S)().appearance)),c=(0,i.Fl)((()=>"todo-checkbox"===t.task.presentation?"done"===t.task.status?p.viewerKit.TaskButtonImageAppearance.TodoCheckboxChecked:p.viewerKit.TaskButtonImageAppearance.TodoCheckbox:p.viewerKit.TaskButtonImageAppearance.TodoProgress)),s=(0,i.Fl)((()=>{const{taskModule:e}=(0,p.nZ)();return e.loadTaskImage(c.value,{frontColor:r.value?"rgba(255, 255, 255, 0.9)":"#000000e6",backColor:r.value?"#1e2021":"#fff",priority:t.task.priority,progress:t.task.progress})((e=>e))})),u=(0,i.Fl)((()=>({width:`${t.size}px`,height:`${t.size}px`,backgroundSize:`${t.size}px`,backgroundImage:`url('${s.value}')`}))),h=()=>{o({currEditingTopicId:t.topicId,selectionIds:[t.topicId],selectonType:g._p.TASK})},v=()=>{var e;n.value.selectonType!==g._p.TOPIC&&o({selectonType:g._p.TOPIC}),null===(e=l.value)||void 0===e||e.removeEventListener("mouseout",v)};return{__sfc:!0,props:t,isMac:false,outlinerState:n,updateOutlinerState:o,openOutlinerCtxMenu:a,topicTaskContainer:l,onTaskImgHovered:()=>{if("todo-progress"===t.task.presentation&&l.value){const e=document.querySelector(".outliner-mode-container");if(!e)return;const n=e.getBoundingClientRect(),i=`${Math.round(t.task.progress/1*100)}%`,a=l.value.getBoundingClientRect(),r={left:a.left-n.left,top:a.top-n.top};o({tooltip:{location:{x:r.left,y:r.top},content:i}})}},onTaskImgExitHovered:()=>{o({tooltip:null})},isDark:r,todoImageAppearance:c,taskImageUrl:s,taskImageStyle:u,handleFocus:h,handleTaskClick:()=>{o({tooltip:null}),h(),setTimeout((()=>{"todo-checkbox"!==t.task.presentation&&"todo-progress"!==t.task.presentation||(1===t.task.progress?(0,d.JX)().handleCommand("editor.uncheckTodo"):(0,d.JX)().handleCommand("editor.checkTodo"))}),200)},handleMouseout:v,handleContextMenu:e=>{o({tooltip:null}),h(),a("TASK")}}}});n(16401);const z=(0,b.Z)(H,(function(){var e=this._self._c,t=this._self._setupProxy;return e("div",{ref:"topicTaskContainer",staticClass:"outliner-topic-task-container uk-flex uk-flex-middle"},[e("div",{staticClass:"outliner-topic-task uk-float-left"},[e("div",{staticClass:"outliner-topic-task-img",style:t.taskImageStyle,on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleTaskClick.apply(null,arguments)},mousedown:function(e){return e.stopPropagation(),(()=>!1).apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),t.handleContextMenu.apply(null,arguments)},mouseenter:t.onTaskImgHovered,mouseleave:t.onTaskImgExitHovered}})])])}),[],!1,null,"c226e720",null).exports;const W=(0,i.aZ)({__name:"topic-title",props:{topicType:null,topicId:null,title:null,attributedTitle:null,descendantLength:null,isEditable:{type:Boolean,default:!1},numbering:null},setup(e){const t=e,n=(0,d.JE)().T,{handleOutlinerOperation:o,outlinerState:a,updateOutlinerState:l,outlinerActions:r}=(0,m.p)(),c=(0,i.iH)(null),s=(0,i.iH)(!1),u=(0,i.iH)(""),p=()=>{if(a.value.inputMethodInputting)return;const e=(0,g.$R)(c.value);if("root"===t.topicType&&v(e),t.attributedTitle.length>1){const n=(0,g.e3)(c.value),i=(0,g.Dq)({attributedTitle:t.attributedTitle,oldTitle:t.title,newTitle:e,pos:n});o({type:"update",topicId:t.topicId,title:e,attributedTitle:i})}else o({type:"update",topicId:t.topicId,title:e})},h=(e,n)=>{o({type:"update",topicId:t.topicId,title:e.slice(3),numbering:{numberingPattern:n,numberingFixedIndex:0}})},v=e=>{s.value=0===e.length},f=(e,n,i)=>{c.value&&((0,g.N_)(c.value,e,i),"root"===t.topicType&&v(e),(0,g.wM)(c.value,e,n))};return(0,i.bv)((()=>{c.value&&((0,g.N_)(c.value,t.title,t.attributedTitle),"root"===t.topicType&&setTimeout((()=>{c.value&&(v(t.title),u.value=n("Everything begins from your mind."))})),a.value.currFocusTopicId===t.topicId&&c.value.focus())})),(0,i.YP)((()=>t.title),((e,n)=>{const i=(0,g.$R)(c.value),a=g.u9[e.slice(0,3)];!t.numbering&&"attached"===t.topicType&&a&&h(e,a),"\n"===e&&o({type:"update",topicId:t.topicId,title:""}),e.includes("\n")?f(e,n,t.attributedTitle):e!==i&&f(e,i,t.attributedTitle)}),{immediate:!1}),(0,i.YP)((()=>t.attributedTitle),(e=>{e.length>0&&(0,g.fW)(e)&&o({type:"update",topicId:t.topicId,attributedTitle:[]})}),{immediate:!1}),{__sfc:!0,props:t,$T:n,handleOutlinerOperation:o,outlinerState:a,updateOutlinerState:l,outlinerActions:r,textRef:c,isTextEmpty:s,textPlaceholder:u,handleCompositionstart:()=>{l({inputMethodInputting:!0})},handleCompositionend:()=>{l({inputMethodInputting:!1}),(0,i.Y3)((()=>{p()}))},handleInput:p,handleKeydown:e=>{if(a.value.inputMethodInputting)return;if("Enter"===e.key)return e.preventDefault();if((e.ctrlKey||e.metaKey)&&["b","i","u"].includes(e.key))return e.preventDefault();const{isOnFirstLine:n,isOnLastLine:i}=(0,g.OD)(c.value);switch(e.key){case"ArrowUp":if(!n)return;e.preventDefault(),r.selectionNavigateUp({topicId:t.topicId});break;case"ArrowDown":if(!i)return;e.preventDefault(),r.selectionNavigateDown({topicId:t.topicId})}},handleFocus:()=>{l({currEditingTopicId:t.topicId,startTopicId:t.topicId,selectonType:g._p.TEXT})},handleMouseDown:e=>{0===e.button&&l({isMouseDown:!0})},changeTextToNumbering:h,refreshTextEmptyStatus:v,refreshTitle:f}}});n(45137);const R=(0,b.Z)(W,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("span",{ref:"textRef",staticClass:"outliner-topic-title uk-flex-1",class:{"is-empty":n.isTextEmpty},attrs:{contenteditable:e.isEditable,"data-child-count":e.descendantLength,placeholder:n.textPlaceholder},on:{compositionstart:n.handleCompositionstart,compositionend:n.handleCompositionend,input:n.handleInput,keydown:n.handleKeydown,focus:n.handleFocus,mousedown:n.handleMouseDown}})}),[],!1,null,"64ce769f",null).exports,j=(0,i.aZ)({__name:"central-topic",props:{topicType:null,topicId:null,children:null,depth:null,title:null,attributedTitle:null,labelSortOrder:{default:"auto"},labels:{default:()=>[]},markers:{default:()=>[]},descendantLength:null,folded:{type:Boolean},hidden:{type:Boolean},parentTopicId:null,notes:{default:null},webpage:{default:null},localFileLink:null,topicLink:{default:null},attachment:{default:null},equation:{default:null},image:{default:null},audioNotes:{default:null},task:null,isEditable:{type:Boolean,default:!1},isImageSelected:{type:Boolean,default:!1},isEquationSelected:{type:Boolean,default:!1}},setup(e){const t=e,{updateOutlinerState:n,openOutlinerCtxMenu:o}=(0,m.p)(),a=(0,i.iH)(null),l=(0,i.iH)(t.task),r=(0,i.iH)(t.markers),d=(0,i.iH)(t.labels),c=(0,i.iH)(t.image),s=(0,i.Fl)((()=>t.webpage||t.localFileLink||t.topicLink||t.attachment)),p=(0,i.Fl)((()=>({topicId:t.topicId,webpage:t.webpage,localFileLink:t.localFileLink,topicLink:t.topicLink,attachment:t.attachment,title:t.title}))),h=(0,u.P2)((e=>{if(e.dataTransfer.items.length>0&&"file"===e.dataTransfer.items[0].kind){const t=e.dataTransfer.items[0].type.startsWith("image/");n({isMouseDown:!0,draggingType:t?g._p.IMAGE:g._p.ATTACHMENT})}}),30),f=(0,u.P2)((()=>{n({draggingPos:{toParentTopicId:"",toTargetIndex:0,rect:{top:a.value.clientHeight+124,left:0},toTopicType:"root",toTopicId:t.topicId}})}),30);return(0,i.YP)((()=>t.task),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(l.value=e)}),{immediate:!1}),(0,i.YP)((()=>t.markers),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(r.value=e)}),{immediate:!1}),(0,i.YP)((()=>t.labels),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(d.value=e)}),{immediate:!1}),(0,i.YP)((()=>t.image),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(c.value=e)}),{immediate:!1}),{__sfc:!0,props:t,updateOutlinerState:n,openOutlinerCtxMenu:o,centralTopicContainer:a,topicTasks:l,topicMarkers:r,topicLabels:d,topicImageData:c,hasLink:s,linkData:p,handleDragEnter:h,handleDragOver:f,handleContextMenu:()=>{o("TEXT")},escapeIdentifier:v.N,TopicMarker:I,TopicLabel:T,TopicLink:S,TopicImage:E,TopicEquation:L,TopicNote:B,TopicTask:z,TopicTitle:R}}});n(15274);const G=(0,b.Z)(j,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"centralTopicContainer",staticClass:"outliner-central-topic outliner-topic-container uk-position-relative uk-width-1-1",attrs:{id:`topic-${n.escapeIdentifier(e.topicId)}`,"data-topic-id":e.topicId},on:{dragenter:function(e){return e.preventDefault(),e.stopPropagation(),n.handleDragEnter.apply(null,arguments)},dragover:function(e){return e.preventDefault(),e.stopPropagation(),n.handleDragOver.apply(null,arguments)},contextmenu:n.handleContextMenu}},[t("div",{staticClass:"uk-flex"},[t("div",{staticClass:"outliner-topic-left"}),e._v(" "),n.topicTasks?t(n.TopicTask,{attrs:{"topic-id":e.topicId,task:n.topicTasks,size:30}}):e._e(),e._v(" "),n.topicMarkers.length?t(n.TopicMarker,{attrs:{"topic-id":e.topicId,markers:n.topicMarkers,size:30}}):e._e(),e._v(" "),t(n.TopicTitle,e._b({},"topic-title",{topicType:e.topicType,topicId:e.topicId,title:e.title,attributedTitle:e.attributedTitle,descendantLength:e.descendantLength,isEditable:e.isEditable},!1))],1),e._v(" "),t("div",{staticClass:"outliner-topic-inserts"},[n.topicLabels.length?t(n.TopicLabel,{attrs:{"topic-id":e.topicId,labels:n.topicLabels,"label-sort-order":e.labelSortOrder}}):e._e(),e._v(" "),n.hasLink?t(n.TopicLink,e._b({},"topic-link",n.linkData,!1)):e._e(),e._v(" "),n.topicImageData&&!e.equation?t(n.TopicImage,{attrs:{"topic-id":e.topicId,image:n.topicImageData,"is-selected":e.isImageSelected}}):e._e(),e._v(" "),e.equation&&n.topicImageData?t(n.TopicEquation,{attrs:{"topic-id":e.topicId,equation:e.equation,image:n.topicImageData,"is-selected":e.isEquationSelected}}):e._e(),e._v(" "),t(n.TopicNote,{attrs:{"topic-id":e.topicId,notes:e.notes}})],1)])}),[],!1,null,"9c6aca94",null).exports;var U=n(96829);const V=(0,i.aZ)({__name:"topic-audio-note",props:{topicId:null,audioNotes:null},setup(e){const t=e,{outlinerState:n,updateOutlinerState:o,openOutlinerCtxMenu:a}=(0,m.p)(),l=(0,i.iH)(null),r=()=>{o({currEditingTopicId:t.topicId,selectionIds:[t.topicId],selectonType:g._p.AUDIO_NOTES})},d=()=>{var e;n.value.selectonType!==g._p.TOPIC&&o({selectonType:g._p.TOPIC}),null===(e=l.value)||void 0===e||e.removeEventListener("mouseout",d)};return{__sfc:!0,props:t,isMac:false,outlinerState:n,updateOutlinerState:o,openOutlinerCtxMenu:a,topicAudioNoteContainer:l,handleFocus:r,handleClick:()=>{r();const e=n.value.audioBarMode;o({audioBarMode:"open_new_audio_play"===e?"audio_play":"open_new_audio_play",audioAutoPlay:!0,audioFilePath:t.audioNotes})},handleMouseout:d,handleContextMenu:()=>{r(),a("AUDIO_NOTES")}}}});n(13920);const Y=(0,b.Z)(V,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"topicAudioNoteContainer",staticClass:"outliner-topic-audio-note",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.handleClick.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),n.handleContextMenu.apply(null,arguments)}}},[e._v("\n  "+e._s(e.$T("Audio Note"))+"\n")])}),[],!1,null,"1fa1ed7a",null).exports;const X=(0,i.aZ)({__name:"topic-numbering",props:{topicId:null,numberingText:null},setup:e=>({__sfc:!0})});n(60281);const J=(0,b.Z)(X,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"outliner-topic-numbering uk-flex uk-flex-middle"},[t("div",{staticClass:"uk-float-left"},[e._v("\n    "+e._s(e.numberingText)+"\n  ")])])}),[],!1,null,"7cabaa9c",null).exports,K=(0,i.aZ)({__name:"topic",props:{topicType:null,topicId:null,children:null,depth:null,title:null,attributedTitle:null,labelSortOrder:{default:"auto"},labels:{default:()=>[]},markers:{default:()=>[]},descendantLength:null,folded:{type:Boolean},hidden:{type:Boolean},parentTopicId:null,notes:{default:null},webpage:{default:null},localFileLink:null,topicLink:{default:null},attachment:{default:null},equation:{default:null},image:{default:null},audioNotes:{default:null},task:null,numbering:null,isEditable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},isImageSelected:{type:Boolean,default:!1},isEquationSelected:{type:Boolean,default:!1},isDragging:{type:Boolean,default:!1}},setup(e){const t=e,{handleOutlinerOperation:n,outlinerState:o,updateOutlinerState:a,openOutlinerCtxMenu:l}=(0,m.p)(),r=(0,i.iH)(t.task),c=(0,i.iH)(t.numbering),s=(0,i.iH)(t.markers),p=(0,i.iH)(t.labels),h=(0,i.iH)(t.image),f=(0,i.iH)(t.attributedTitle),b=(0,i.Fl)((()=>t.webpage||t.localFileLink||t.topicLink||t.attachment)),k=(0,i.Fl)((()=>({topicId:t.topicId,webpage:t.webpage,localFileLink:t.localFileLink,topicLink:t.topicLink,attachment:t.attachment,title:t.title}))),x=(0,i.Fl)((()=>({paddingLeft:22*(t.depth-1)+"px"}))),y=(0,i.Fl)((()=>t.depth===g.P1&&t.descendantLength>0)),w=(0,u.P2)((e=>{if(e.dataTransfer.items.length>0&&"file"===e.dataTransfer.items[0].kind){const t=e.dataTransfer.items[0].type.startsWith("image/");a({isMouseDown:!0,draggingType:t?g._p.IMAGE:g._p.ATTACHMENT})}}),30),C=(0,u.P2)((e=>{e.dataTransfer.dropEffect="move";const t=(0,g.rH)(e.target);if(!t)return;let n=t.dataset.topicId;const{draggingTopicIds:i,draggingType:l,draggingStartPageY:r,topicItems:d,outlinerScale:c}=o.value;if(i.includes(n)&&l===g._p.TOPIC)return;const s=d.filter((e=>["attached","detached"].includes(e.topicType))),u=s.find((e=>e.topicId===n)),p=d.find((e=>e.topicId===u.parentTopicId)),h="detached"===u.topicType&&0===p.depth?p.detachedChildren:p.children,{left:v,top:m}=t.getBoundingClientRect();let f=Math.round((e.pageX-v)/(22*c))-1;const b=u.topicId===s[0].topicId&&e.pageY<m+t.offsetHeight/2;f<0&&(f=0),f<p.depth&&(f=p.depth),f>u.depth&&(f=u.depth),[g._p.IMAGE,g._p.EQUATION,g._p.ATTACHMENT].includes(l)&&(f=u.depth),b&&(f=0);let I=u.parentTopicId,k=0,T=t.offsetTop+t.offsetHeight;const x=22*f;if(b&&(T=t.offsetTop,n=d[0].topicId),f===u.depth&&(I=n),f===u.depth-1){k=h.findIndex((e=>e===u.topicId));const t=e.pageY-r>0?"down":"up";"up"!==t||b||(k+=1);const n=d.find((e=>e.topicId===i[0]));"down"===t&&n&&f!==n.depth-1&&(k+=1)}a({draggingPos:{toParentTopicId:I,toTargetIndex:k,rect:{top:T,left:x},toTopicType:u.topicType,toTopicId:n}})}),30),M=()=>{a({isMouseDown:!1,draggingTopicIds:[],draggingType:g._p.NONE,draggingPos:{toParentTopicId:"",toTargetIndex:0,rect:{left:0,top:0},toTopicType:"attached",toTopicId:""}})};return(0,i.YP)((()=>t.task),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(r.value=e)}),{immediate:!1}),(0,i.YP)((()=>t.numbering),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(c.value=e)}),{immediate:!1}),(0,i.YP)((()=>t.markers),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(s.value=e)}),{immediate:!1}),(0,i.YP)((()=>t.labels),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(p.value=e)}),{immediate:!1}),(0,i.YP)((()=>t.image),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(h.value=e)}),{immediate:!1}),(0,i.YP)((()=>t.attributedTitle),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(f.value=e)}),{immediate:!1}),{__sfc:!0,props:t,handleOutlinerOperation:n,outlinerState:o,updateOutlinerState:a,openOutlinerCtxMenu:l,topicTasks:r,topicNumberings:c,topicMarkers:s,topicLabels:p,topicImageData:h,topicAttributedTitle:f,hasLink:b,linkData:k,outlinerTopicStyle:x,isReachedLimit:y,handleReachedLimitClick:()=>{a({currEditingTopicId:t.topicId}),(0,d.JX)().handleCommand("editor.showBranchOnly")},handleDragStart:e=>{const n=e.target;if(!n.classList.contains("outliner-topic-dot"))return;const{selectionIds:i}=o.value,l=i.includes(t.topicId)?i:[t.topicId],r=(0,g.OE)(l);a({draggingStartPageY:e.pageY,draggingType:g._p.TOPIC,draggingTopicIds:r,isMouseDown:!0,selectionIds:[]});const d=(0,g.rH)(n),c=(0,g.EQ)(d,o.value.draggingTopicIds.length);c.classList.add("dragging"),a({ghostImgElementId:c.querySelector(".outliner-topic-container").id}),e.dataTransfer.setDragImage(c,-5,-5),e.dataTransfer.effectAllowed="move",document.querySelector(".vk-window-default").classList.add("grabbing")},handleDragEnter:w,handleDragOver:C,resetDraggingState:M,handleDragEnd:async()=>{await(0,U._v)(100),document.querySelector(".vk-window-default").classList.remove("grabbing"),a({isMouseDown:!1});const{draggingType:e,draggingTopicIds:t,draggingPos:i,topicItems:l,ghostImgElementId:r}=o.value;if(e===g._p.TOPIC){const{toParentTopicId:e,toTargetIndex:o,toTopicType:d}=i,c=(0,g._v)(t),s=t.filter((e=>!c.includes(e)));e&&await Promise.all(s.map(((t,i)=>{const a=l.find((t=>t.topicId===e));n({type:"move",topicType:"detached"===d&&0===a.depth?"detached":"attached",topicId:t,toParentTopicId:e,toTargetIndex:o+i})}))),M();const u=document.body.querySelector("#"+r);u&&(document.body.removeChild(u.parentElement),u.remove()),a({ghostImgElementId:""})}},handleFoldedChange:()=>{n({type:"update",topicId:t.topicId,branchState:t.folded?null:"folded"})},handleContextMenu:()=>{const{selectionIds:e}=o.value,n=(0,g.Gj)(t.topicId),i=(0,g.ww)(n);return a({currEditingTopicId:t.topicId,isMouseDown:!1}),0===i&&(e.includes(t.topicId)||((0,g.a7)(),a({selectionIds:[t.topicId]}))),i>0?l("TEXT"):e.length>1?l("MULTI_TOPIC"):l("TOPIC")},escapeIdentifier:v.N,TopicLabel:T,TopicMarker:I,TopicLink:S,TopicAudioNote:Y,TopicImage:E,TopicEquation:L,TopicNote:B,TopicTask:z,TopicNumbering:J,TopicTitle:R}}}),Q=K;n(9720);const $=(0,b.Z)(Q,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"outliner-topic-container",class:{"main-topic":1===e.depth,"has-child":e.descendantLength>0,"is-folded":e.folded,"topic-selected":e.isSelected,"topic-dragging":e.isDragging},attrs:{id:`topic-${n.escapeIdentifier(e.topicId)}`,"data-topic-id":e.topicId},on:{dragstart:function(e){return e.stopPropagation(),n.handleDragStart.apply(null,arguments)},dragenter:function(e){return e.preventDefault(),e.stopPropagation(),n.handleDragEnter.apply(null,arguments)},dragover:function(e){return e.preventDefault(),e.stopPropagation(),n.handleDragOver.apply(null,arguments)},dragend:function(e){return e.preventDefault(),e.stopPropagation(),n.handleDragEnd.apply(null,arguments)},contextmenu:n.handleContextMenu}},[t("div",{staticClass:"outliner-topic uk-position-relative uk-width-1-1",style:n.outlinerTopicStyle},[t("div",{staticClass:"outliner-topic-outter"},[t("div",{staticClass:"outliner-topic-inner uk-flex uk-position-relative uk-width-1-1 uk-float-left"},[t("div",{staticClass:"outliner-topic-dot uk-position-relative uk-float-left",attrs:{draggable:"true"},on:{click:n.handleFoldedChange}}),e._v(" "),n.topicTasks?t(n.TopicTask,{attrs:{"topic-id":e.topicId,task:n.topicTasks}}):e._e(),e._v(" "),n.topicMarkers.length?t(n.TopicMarker,{attrs:{"topic-id":e.topicId,markers:n.topicMarkers}}):e._e(),e._v(" "),n.topicNumberings?t(n.TopicNumbering,{attrs:{"topic-id":e.topicId,"numbering-text":n.topicNumberings.numberingText}}):e._e(),e._v(" "),t(n.TopicTitle,e._b({},"topic-title",{topicType:e.topicType,topicId:e.topicId,title:e.title,attributedTitle:n.topicAttributedTitle,descendantLength:e.descendantLength,isEditable:e.isEditable,numberings:n.topicNumberings},!1))],1),e._v(" "),t("div",{staticClass:"outliner-reached-limited-container"},[n.isReachedLimit?t("span",{staticClass:"outliner-reached-limited-btn uk-flex-inline",on:{click:n.handleReachedLimitClick}},[e._v("+ "+e._s(e.$T("Show $1 topics",String(e.descendantLength))))]):e._e()]),e._v(" "),t("div",{staticClass:"outliner-topic-inserts uk-flex uk-flex-wrap uk-width-1-1"},[n.topicLabels.length?t(n.TopicLabel,{attrs:{"topic-id":e.topicId,labels:n.topicLabels,"label-sort-order":e.labelSortOrder}}):e._e(),e._v(" "),n.hasLink?t(n.TopicLink,e._b({},"topic-link",n.linkData,!1)):e._e(),e._v(" "),e.audioNotes?t(n.TopicAudioNote,{attrs:{"topic-id":e.topicId,"audio-notes":e.audioNotes}}):e._e(),e._v(" "),t("div",{staticClass:"uk-width-1-1"}),e._v(" "),n.topicImageData&&!e.equation?t(n.TopicImage,{attrs:{"topic-id":e.topicId,image:n.topicImageData,"is-selected":e.isImageSelected}}):e._e(),e._v(" "),e.equation&&n.topicImageData?t(n.TopicEquation,{attrs:{"topic-id":e.topicId,equation:e.equation,image:n.topicImageData,"is-selected":e.isEquationSelected}}):e._e()],1),e._v(" "),t(n.TopicNote,{attrs:{"topic-id":e.topicId,notes:e.notes}}),e._v(" "),t("div",{staticClass:"uk-clearfix"})],1)])])}),[],!1,null,"49988601",null).exports;const ee=(0,i.aZ)({__name:"topic-editor-popover",props:{editorRect:null,popoverWidth:null,popoverHeight:null},emits:["popover-close"],setup(e,{emit:t}){const n=e,o=(0,i.FN)().proxy,a=(0,i.iH)(null),l=(0,i.Fl)((()=>({top:`${n.editorRect.top}px`,left:`${n.editorRect.left}px`,width:`${n.editorRect.width}px`,height:`${n.editorRect.height}px`})));return(0,i.bv)((()=>{setTimeout((()=>{o.$withUIKit((e=>{e.pop(a.value).show()}))}),50),(0,i.Y3)((()=>{o.$withUIKit((e=>{e.util.on(a.value,"hidden",(()=>{t("popover-close")}))}))}))})),{__sfc:!0,props:n,emit:t,vm:o,popoverEl:a,topicEditorPopoverStyle:l}}});const te=(0,b.Z)(ee,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],staticClass:"uk-position-cover"},[t("div",{staticClass:"uk-position-fixed",style:e._self._setupProxy.topicEditorPopoverStyle}),e._v(" "),t("div",{ref:"popoverEl",style:{width:`${e.popoverWidth}px`,height:`${e.popoverHeight}px`},attrs:{"uk-popover":""}},[e._t("default")],2)])}),[],!1,null,null,null).exports;var ne=n(18446),ie=n.n(ne);const oe=(0,i.aZ)({__name:"topic-label-editor",setup(e){const t={inserted:function(e){setTimeout((()=>{e.focus()}),100)}},{handleOutlinerOperation:n,outlinerState:o,updateOutlinerState:a,outlinerActions:l}=(0,m.p)(),r=(0,i.iH)([]),d=(0,i.iH)(null),c=(0,i.iH)(""),s=(0,i.iH)("manual"!==o.value.popoverEditorState.payload.labelSortOrder),u=async()=>{const{targetIds:e}=o.value.popoverEditorState.payload,t=c.value.split(/[,]+/g).map((e=>e.trim())).filter((e=>e.length>0)).filter(((e,t,n)=>n.indexOf(e)===t));t?(ie()(t,o.value.popoverEditorState.payload.labels)||await Promise.all(e.map((e=>{n({type:"update",topicId:e,labels:t})}))),s.value!==("manual"!==o.value.popoverEditorState.payload.labelSortOrder)&&l.setLabelSortOrder(s.value?"auto":"manual")):await Promise.all(e.map((e=>{n({type:"deleteAttrs",topicId:e,labels:!0})}))),a({popoverEditorState:{visible:"",payload:{}}})};return(0,i.bv)((()=>{const{labels:e}=o.value.popoverEditorState.payload;c.value=e.join(","),r.value=l.getMostlyUsedLabels()})),{__sfc:!0,vFocus:t,handleOutlinerOperation:n,outlinerState:o,updateOutlinerState:a,outlinerActions:l,mostlyUsedLabels:r,labelTextarea:d,labelsContent:c,isAutoSort:s,handleCompositionstart:()=>{a({inputMethodInputting:!0})},handleCompositionend:()=>{a({inputMethodInputting:!1})},handleKeydown:e=>{if("Enter"===e.code){if(e.preventDefault(),e.stopPropagation(),o.value.inputMethodInputting)return;u()}"Tab"===e.code&&(e.preventDefault(),e.stopPropagation())},addLabel:e=>{c.value=[c.value,e].filter(Boolean).join(",")},saveAndClose:u,changeAutoSort:e=>{s.value=e},TopicEditorPopover:te}}});n(85273);const ae=(0,b.Z)(oe,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.TopicEditorPopover,{attrs:{"popover-width":280,"popover-height":n.mostlyUsedLabels.length>0?223:148,"editor-rect":n.outlinerState.popoverEditorState.payload.editorRect},on:{"popover-close":n.saveAndClose}},[t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle uk-height-1-1"},[t("div",{staticClass:"outliner-topic-label-editor-content",on:{mousedown:function(e){return e.stopPropagation(),(()=>!1).apply(null,arguments)}}},[t("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle uk-width-1-1 uk-margin-small-bottom"},[t("h4",{staticClass:"outliner-topic-label-editor-title uk-text-disabled uk-text-bold"},[e._v("\n          "+e._s(e.$T("Label"))+"\n        ")]),e._v(" "),t("div",{staticClass:"uk-flex uk-flex-middle"},[t("label",{staticClass:"auto-sort-label",staticStyle:{"line-height":"16px"}},[e._v("\n            "+e._s(e.$T("Auto Sort"))+"\n          ")]),e._v(" "),t("vk-switch",{staticClass:"uk-margin-small-left",attrs:{name:"sort-label",value:n.isAutoSort},on:{change:n.changeAutoSort}})],1)]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.labelsContent,expression:"labelsContent"},{name:"focus",rawName:"v-focus"}],ref:"labelTextarea",staticClass:"outliner-topic-label-editor-textarea",attrs:{placeholder:e.$T("Enter labels, separated by commas")},domProps:{value:n.labelsContent},on:{compositionstart:n.handleCompositionstart,compositionend:n.handleCompositionend,keydown:n.handleKeydown,input:function(e){e.target.composing||(n.labelsContent=e.target.value)}}})]),e._v(" "),n.mostlyUsedLabels.length>0?[t("div",{staticClass:"uk-width-1-1 uk-padding uk-padding-remove-vertical"},[t("hr",{staticClass:"uk-separator uk-width-1-1"})]),e._v(" "),t("div",{staticClass:"uk-height-expand uk-width-1-1 uk-mostly-used-labels uk-padding",staticStyle:{"padding-top":"12px"}},[t("div",{staticClass:"uk-mostly-used-labels-container"},e._l(n.mostlyUsedLabels,(function(i){return t("div",{key:i,staticClass:"uk-mostly-used-labels-item",on:{click:function(e){return n.addLabel(i)}}},[e._v("\n            "+e._s(i)+"\n          ")])})),0)])]:e._e()],2)])}),[],!1,null,"721f091c",null).exports;const le=(0,i.aZ)({__name:"topic-equation-editor",setup(e){const t=(0,d.JE)().T,{handleOutlinerOperation:n,outlinerState:o,updateOutlinerState:a,outlinerActions:l}=(0,m.p)(),{getResourceUrlByXapUrl:r}=(0,p.nZ)(),c=(0,i.iH)(""),s=(0,i.iH)(null),h=(0,i.iH)(!0);let v=null;const f=(0,u.Ds)((async e=>{if(s.value&&"string"==typeof e){for(;s.value.hasChildNodes();)s.value.removeChild(s.value.lastChild);if(e){const{imageSource:t,isMathJaxValid:n}=await l.getEquationImageInfo({equation:e.trim()});h.value=n,b(t)}else{const e=document.createElement("span");e.classList.add("uk-text-bold"),e.style.opacity="0.3",e.style.fontSize="13px",e.innerText=t("Equation Preview"),s.value.append(e)}}}),0),b=e=>{if(s.value)if(s.value.querySelector("img")){if(v.src===e)return;v.src=e}else v=new Image,v.addEventListener("load",(async()=>{s.value.prepend(v)})),v.src=e};return(0,i.bv)((()=>{c.value=o.value.popoverEditorState.payload.equation,f(c.value)})),{__sfc:!0,$T:t,handleOutlinerOperation:n,outlinerState:o,updateOutlinerState:a,outlinerActions:l,getResourceUrlByXapUrl:r,equation:c,equationPreviewContainer:s,isImageValid:h,imageEl:v,goEquationHelp:()=>{D.ZP.fetch(P.lf.GO_EQUATION_HELP,{})},handleInput:e=>{const t=e.target.value;c.value=t,f(t)},handleKeydown:e=>{"Tab"===e.code&&(e.preventDefault(),e.stopPropagation())},saveAndClose:async()=>{const{topicId:e}=o.value.popoverEditorState.payload;if(c.value){if(c.value!==o.value.popoverEditorState.payload.equation){const t=await l.getEquationXapUrl({equation:c.value}),i=await r(t),{width:o,height:a}=await(0,g.N8)(i);n({type:"update",topicId:e,equation:c.value,image:{src:t,width:o,height:a}})}}else n({type:"deleteAttrs",topicId:e,equation:!0,image:!0});a({popoverEditorState:{visible:"",payload:{}}})},handleUpdatePreview:f,loadEquation:b,TopicEditorPopover:te}}});n(51008);const re=(0,b.Z)(le,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.TopicEditorPopover,{attrs:{"popover-width":394,"popover-height":280,"editor-rect":n.outlinerState.popoverEditorState.payload.editorRect},on:{"popover-close":n.saveAndClose}},[t("div",{staticClass:"uk-padding uk-flex uk-flex-column uk-flex-middle uk-height-1-1"},[t("div",{staticClass:"uk-flex uk-flex-between uk-width-1-1 uk-flex-middle",staticStyle:{"margin-bottom":"12px"}},[t("span",{staticClass:"outliner-topic-equation-editor-title uk-text-bold uk-margin-remove-bottom"},[e._v("\n        "+e._s(n.$T("Equation"))+"\n      ")]),e._v(" "),t("span",{staticClass:"equation-help",staticStyle:{outline:"none"},attrs:{tabindex:"-1","uk-icon":"icon: question; ratio: 1.1"},on:{click:n.goEquationHelp}})]),e._v(" "),t("div",{staticClass:"uk-height-expand uk-width-1-1",on:{mousedown:function(e){e.stopPropagation()},click:function(e){e.preventDefault(),e.stopPropagation()}}},[t("textarea",{staticClass:"uk-textarea uk-width-1-1 uk-height-1-1 uk-box-shadow-none uk-padding-remove",attrs:{autofocus:"",spellcheck:"false",placeholder:n.$T("Type or paste LaTeX")},domProps:{value:n.equation},on:{input:n.handleInput,keydown:n.handleKeydown}}),e._v(" "),t("div",{ref:"equationPreviewContainer",staticClass:"outliner-topic-equation-editor-preview-container uk-flex uk-flex-center uk-flex-middle",class:{"is-image-valid":n.isImageValid}})])])])}),[],!1,null,"36038317",null).exports;const de=(0,i.aZ)({__name:"topic-marker-editor",setup(e){const{handleOutlinerOperation:t,outlinerState:n,updateOutlinerState:o,outlinerActions:a}=(0,m.p)(),l=(0,i.Fl)((()=>a.getMarkerResources({markerId:n.value.popoverEditorState.payload.markerId}))),r=(0,i.Fl)((()=>{const e=l.value.length;return e<8?{width:24*(e+1)+31,height:40}:{width:186,height:24*Math.ceil(e/7)+54}})),d=(0,i.Fl)((()=>l.value.length>7?"uk-flex-column uk-flex-center uk-separator":"uk-flex-row uk-flex-middle uk-separator-vertical")),c=(0,i.Fl)((()=>l.value.length>7?"uk-padding-small uk-padding-remove-horizontal uk-padding-remove-top":"uk-padding-small uk-padding-remove-vertical uk-padding-remove-left")),s=(0,i.Fl)((()=>l.value.length>7?"uk-padding-xsmall uk-padding-remove-horizontal uk-padding-remove-bottom uk-flex uk-flex-column uk-flex-center":"uk-padding-xsmall uk-padding-remove-vertical uk-padding-remove-right")),u=()=>{o({selectonType:g._p.TOPIC,popoverEditorState:{visible:"",payload:{}}})};return{__sfc:!0,handleOutlinerOperation:t,outlinerState:n,updateOutlinerState:o,outlinerActions:a,markerResources:l,computedPopoverBounds:r,containerCls:d,markersCls:c,deleteBtnCls:s,handleKeydown:e=>{"Tab"===e.code&&(e.preventDefault(),e.stopPropagation())},changeMarker:e=>{const{topicId:i,markers:o,markerId:a}=n.value.popoverEditorState.payload;t({type:"update",topicId:i,markers:o.map((t=>t.id===a?e:t.id))}),u()},removeMarker:()=>{const{topicId:e,markers:i,markerId:o}=n.value.popoverEditorState.payload,a=i.slice();t({type:"update",topicId:e,markers:a.map((e=>e.id)).filter((e=>e!==o))}),u()},closeMarkerEditor:u,TopicEditorPopover:te}}});const ce=(0,b.Z)(de,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.TopicEditorPopover,{attrs:{"popover-width":n.computedPopoverBounds.width,"popover-height":n.computedPopoverBounds.height,"editor-rect":n.outlinerState.popoverEditorState.payload.editorRect},on:{"popover-close":n.closeMarkerEditor}},[t("div",{staticClass:"uk-flex uk-flex-wrap uk-padding-small uk-child-separator",class:n.containerCls,on:{keydown:n.handleKeydown}},[t("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-flex-wrap",class:n.markersCls},e._l(n.markerResources,(function({id:e,url:i}){return t("button",{key:e,staticClass:"vk-button-tile uk-size-small",on:{mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(t){return t.stopPropagation(),n.changeMarker(e)}}},[t("img",{staticClass:"uk-background-center-center uk-background-norepeat",staticStyle:{height:"16px",width:"16px"},attrs:{draggable:"false","uk-img":"",src:i}})])})),0),e._v(" "),t("div",{class:n.deleteBtnCls},[t("button",{staticClass:"vk-button-tile uk-size-small uk-background-center-center uk-background-norepeat",on:{mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(e){return e.stopPropagation(),n.removeMarker.apply(null,arguments)}}},[t("span",{attrs:{"uk-icon":"icon: trash"}})])])])])}),[],!1,null,"7ccfad06",null).exports;const se=(0,i.aZ)({__name:"topic-placeholder",props:{isVisible:{type:Boolean}},setup:e=>({__sfc:!0})});n(64571);const ue=(0,b.Z)(se,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("i",{staticClass:"topic-placeholder",class:{"topic-dragging":e.isVisible}})}),[],!1,null,"e6807d80",null).exports;const pe=(0,i.aZ)({__name:"tooltip",props:{content:{default:""},location:{default:{x:0,y:0}},showDelay:{default:1e3}},setup(e){const t=e,n=(0,i.iH)(null),o=(0,i.iH)(!1),a=e=>{o.value=e},l=(0,i.iH)(null),r=e=>{l.value=e};let d=null;const c=(0,i.Fl)((()=>{var e,t;return{left:((null===(e=null==l?void 0:l.value)||void 0===e?void 0:e.left)||0)+"px",top:((null===(t=null==l?void 0:l.value)||void 0===t?void 0:t.top)||0)+"px",visibility:o.value?"visible":"hidden"}}));return(0,i.bv)((()=>{var e,i,o,l;a(!1),d&&(clearTimeout(d),d=null),r({left:t.location.x-((null===(i=null===(e=n.value)||void 0===e?void 0:e.getBoundingClientRect())||void 0===i?void 0:i.width)||0)/2+9,top:t.location.y-((null===(l=null===(o=n.value)||void 0===o?void 0:o.getBoundingClientRect())||void 0===l?void 0:l.height)||0)-9}),d=setTimeout((()=>{a(!0)}),t.showDelay)})),(0,i.Ah)((()=>{d&&(clearTimeout(d),d=null)})),{__sfc:!0,TOOLTIP_LEFT_OFFSET:9,TOOLTIP_TOP_OFFSET:-9,props:t,tooltipRef:n,tooltipVisible:o,changeTooltipVisible:a,tooltipLocation:l,changeTooltipLocation:r,tooltipTimeout:d,tooltipStyle:c}}});n(86461);const ge=(0,b.Z)(pe,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"tooltipRef",staticClass:"outliner-tooltip",style:n.tooltipStyle},[e._v("\n  "+e._s(n.props.content)+"\n")])}),[],!1,null,"cfd364ee",null).exports;const he=(0,i.aZ)({__name:"spinner",setup:e=>({__sfc:!0})});n(85042);const ve=(0,b.Z)(he,(function(){var e=this._self._c;this._self._setupProxy;return e("div",{staticClass:"outliner-spinner"})}),[],!1,null,"23cd6977",null).exports;n(51e3);const me=(0,i.aZ)({__name:"index",props:{outlinerSheetModel:null,maxTopicsLoopNum:{default:100},staticMode:{type:Boolean,default:!1}},setup(e){const t=e,o=n(2201),l=(0,d.JE)().T,{handleOutlinerOperation:v,outlinerState:f,updateOutlinerState:b}=(0,m.p)(),{createXapUrlByArrayBuffer:I,activeSheetId:k}=(0,p.nZ)();let T=null,x=null,y=null;const S=(0,i.iH)(null),w=(0,i.iH)(null),C=(0,i.iH)(null),E=(0,i.Fl)((()=>0===f.value.attachedTopicsLoopStartIndex)),M=(0,i.Fl)((()=>{const{attachedTopicsLoopStartIndex:e,attachedTopicsLoopEndIndex:n}=f.value;return t.staticMode?t.outlinerSheetModel.attached:0!==f.value.detachedTopicsLoopStartIndex?[]:t.outlinerSheetModel.attached.slice(e,n+1)})),L=(0,i.Fl)((()=>{const{attachedTopicsLoopEndIndex:e,detachedTopicsLoopStartIndex:n,detachedTopicsLoopEndIndex:i}=f.value;return t.staticMode?t.outlinerSheetModel.detached:e<t.outlinerSheetModel.attached.length-1?[]:t.outlinerSheetModel.detached.slice(n,i+1)})),F=(0,i.Fl)((()=>!t.staticMode&&0===f.value.detachedTopicsLoopStartIndex&&0!==f.value.attachedTopicsLoopStartIndex)),N=(0,i.Fl)((()=>!t.staticMode&&0===f.value.detachedTopicsLoopStartIndex&&f.value.attachedTopicsLoopEndIndex<t.outlinerSheetModel.attached.length-1)),O=(0,i.Fl)((()=>!t.staticMode&&f.value.attachedTopicsLoopEndIndex>=t.outlinerSheetModel.attached.length-1&&0!==f.value.detachedTopicsLoopStartIndex)),A=(0,i.Fl)((()=>!t.staticMode&&f.value.attachedTopicsLoopEndIndex>=t.outlinerSheetModel.attached.length-1&&f.value.detachedTopicsLoopEndIndex<t.outlinerSheetModel.detached.length-1)),P=(0,i.Fl)((()=>{switch(f.value.popoverEditorState.visible){case"label":return ae;case"marker":return ce;case"equation":return re}})),D=(0,i.Fl)((()=>f.value.popoverEditorState.visible)),_=(0,i.Fl)((()=>{const{isMouseDown:e,draggingTopicIds:t,draggingType:n,draggingPos:i}=f.value;return e&&!!i.toTopicId&&(t.length>0||[g._p.IMAGE,g._p.EQUATION,g._p.ATTACHMENT].includes(n))})),q=(0,i.Fl)((()=>({left:`${f.value.draggingPos.rect.left}px`,top:`${f.value.draggingPos.rect.top}px`}))),Z=(0,i.Fl)((()=>f.value.tooltip)),B=()=>{b({isMouseDown:!1,draggingTopicIds:[],draggingType:g._p.NONE,draggingPos:{toParentTopicId:"",toTargetIndex:0,rect:{left:0,top:0},toTopicType:"attached",toTopicId:""}})},H=()=>{{const e=()=>{b({inputMethodInputting:!0})},t=()=>{b({inputMethodInputting:!1})},n=e=>{b({inputMethodInputting:e.isComposing})},i=e=>{const t=(0,d.f7)().codeToKey(e.code),n=229===e.keyCode&&" "!==t&&"Enter"!==t&&"NumpadEnter"!==t&&"Escape"!==t;b({inputMethodInputting:n})};return document.addEventListener("compositionstart",e,!0),document.addEventListener("compositionend",t,!0),document.addEventListener("input",n,!0),document.addEventListener("keydown",i,!0),()=>{document.removeEventListener("compositionstart",e),document.removeEventListener("compositionend",t),document.removeEventListener("input",n),document.removeEventListener("keydown",i)}}},z=()=>{var e,n;const{topicsLoopNum:i,attachedTopicsLoopStartIndex:o}=f.value;return Math.floor(((null===(e=(0,g.Gj)(t.outlinerSheetModel.attached[o+i].topicId))||void 0===e?void 0:e.getBoundingClientRect().top)||0)-((null===(n=(0,g.Gj)(t.outlinerSheetModel.attached[o].topicId))||void 0===n?void 0:n.getBoundingClientRect().top)||0))},W=()=>{var e,n;const{topicsLoopNum:i,detachedTopicsLoopStartIndex:o}=f.value;return Math.floor(((null===(e=(0,g.Gj)(t.outlinerSheetModel.detached[o+i].topicId))||void 0===e?void 0:e.getBoundingClientRect().top)||0)-((null===(n=(0,g.Gj)(t.outlinerSheetModel.detached[o].topicId))||void 0===n?void 0:n.getBoundingClientRect().top)||0))},R=(0,u.Ds)((()=>{if(!S.value)return;const{activeSheetId:e}=(0,p.nZ)(),{sheetStatus:t,attachedTopicsLoopStartIndex:n,attachedTopicsLoopEndIndex:i}=f.value;b({sheetStatus:{...t,[e.value]:{attachedTopicsLoopStartIndex:n,attachedTopicsLoopEndIndex:i,top:S.value.scrollTop}}})}),1e3);return(0,i.bv)((async()=>{if(!S.value)return;y=H(),T=a().create({selectables:[".outliner-topic-inner"],boundaries:["#outliner"],selectionAreaContainer:".outline-selection-area-container",startThreshold:50}).on("beforestart",(({oe:e})=>{const t=e.target;return 0===e.button&&!(!e.metaKey&&(t.classList.contains("outliner-topic-title")||t.classList.contains("outliner-topic-dot")))})).on("start",(({oe:e})=>{e.ctrlKey||e.metaKey||(b({isEditable:!0}),T.clearSelection()),b({isSelecting:!0})})).on("move",(({selected:e})=>{const t=e.reduce(((e,t)=>{const n=(0,g.d5)(t);return n?[...e,n]:e}),[]);b({selectionIds:t})})).on("stop",(({selected:e})=>{const t=e.reduce(((e,t)=>{const n=(0,g.d5)(t);return n?[...e,n]:e}),[]);b({isSelecting:!1,selectionIds:t})}));const e=document.querySelector(".main-topic"),t=Math.max(Math.ceil((S.value.clientHeight||750)/((null==e?void 0:e.clientHeight)||30)*2),50);b({topicsLoopNum:t,attachedTopicsLoopEndIndex:t}),S.value.addEventListener("scroll",R)})),(0,i.Jd)((()=>{T&&T.destroy(),y&&y(),S.value&&S.value.removeEventListener("scroll",R)})),(0,i.YP)((()=>_.value),(e=>{t.staticMode||(e?x=o([S.value],{margin:100,maxSpeed:5,scrollWhenOutside:!0,autoScroll:()=>!0}):x&&x.destroy(!0))}),{immediate:!1}),(0,i.YP)((()=>[M.value,L.value]),(([e,n])=>{if(0===e.length&&0===n.length){const{topicsLoopNum:e}=f.value;b({attachedTopicsLoopStartIndex:0,attachedTopicsLoopEndIndex:e,detachedTopicsLoopStartIndex:0,detachedTopicsLoopEndIndex:e}),S.value.scrollTo(0,0),setTimeout((()=>{(0,g.yS)(t.outlinerSheetModel.central.topicId)}))}}),{immediate:!1}),{__sfc:!0,AutoScroll:o,props:t,$T:l,handleOutlinerOperation:v,outlinerState:f,updateOutlinerState:b,createXapUrlByArrayBuffer:I,activeSheetId:k,selectionLibInstance:T,autoScrollInstance:x,unbindIME:y,outlinerEl:S,outlinerContainer:w,attachedTopicContainer:C,isCentralTopicVisible:E,attachedTopics:M,detachedTopics:L,isAttachedTopicsTopSpinnerVisible:F,isAttachedTopicsBottomSpinnerVisible:N,isDetachedTopicsTopSpinnerVisible:O,isDetachedTopicsBottomSpinnerVisible:A,currPopoverEditor:P,isCurrPopoverEditorVisible:D,isTopicPlaceholderVisible:_,topicPlaceholderStyle:q,tooltipData:Z,handleEmptyTopicAdd:()=>{v({type:"add",parentTopicId:t.outlinerSheetModel.central.topicId,targetIndex:0,title:"",callback:async({newTopicId:e})=>{b({currFocusTopicId:e})}})},handleDragLeave:e=>{f.value.draggingType===g._p.TOPIC||e.clientX||e.clientY||B()},resetDraggingState:B,handleDrop:async e=>{e.preventDefault(),e.stopPropagation(),b({isMouseDown:!1});const{draggingTopicIds:t,draggingPos:{toTopicId:n,toTopicType:i}}=f.value,o=t[0],a=e.dataTransfer.getData("outlinerSvg");switch(f.value.draggingType){case g._p.IMAGE:if(a){const e=JSON.parse(a);await(0,g.Ww)({type:"deleteAttrs",topicId:o,image:!0}),await(0,g.Ww)({type:"update",topicId:n,image:e})}else if(e.dataTransfer.files.length>0){const t=e.dataTransfer.files[0],i=await c.Z.readFile(t.path),o=r().extname(t.name),a=await I(i,o);await(0,g.Ww)({type:"update",topicId:n,image:{src:a}})}B();break;case g._p.EQUATION:{const{equation:e,image:t}=JSON.parse(a);await(0,g.Ww)({type:"deleteAttrs",topicId:o,equation:!0,image:!0}),await(0,g.Ww)({type:"update",topicId:n,equation:e,image:t}),B();break}case g._p.ATTACHMENT:if(e.dataTransfer.files.length>0){const t=e.dataTransfer.files[0],o=await c.Z.readFile(t.path),a=r().basename(t.name),l=r().extname(t.name),d=await I(o,l);await(0,g.Ww)({type:"add",topicType:i,parentTopicId:n,targetIndex:0,title:a,attachment:d,callback:g.YH})}B()}},handleMouseWheel:e=>{if(!e.ctrlKey)return;const{updateOutlinerSheetStatus:t}=(0,h.E)();let n=Math.floor(100*f.value.outlinerScale-e.deltaY);n>300&&(n=300),n<80&&(n=80),t({id:k.value,zoomScale:n})},handleMouseUp:e=>{b({isMouseDown:!1});const t=e.target;(t.classList.contains("outliner-topics")||t.classList.contains("outliner-container-wrapper"))&&((0,g.a7)(),b({currEditingTopicId:"",startTopicId:"",selectionIds:[],selectonType:g._p.NONE}),w.value.focus())},handleClick:e=>{if(0!==e.button)return;const t=e.target;if(f.value.selectionIds.length>0&&!t.classList.contains("outliner-topic-dot")&&!t.classList.contains("outliner-topic-link-text")&&!f.value.isSelecting&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey)return e.stopPropagation(),(0,g.a7)(),void b({selectionIds:[],startTopicId:"",currEditingTopicId:""});if(!e.shiftKey)return;const n=(0,g.rH)(t);if(!n)return;const i=n.dataset.topicId,o=f.value.currEditingTopicId||f.value.startTopicId;if(!i||!o||o===i)return;let a=M.value.findIndex((({topicId:e})=>e===o)),l=M.value.findIndex((({topicId:e})=>e===i));l<a&&([a,l]=[l,a]);const r=M.value.slice(a,l+1).map((e=>e.topicId));(0,g.a7)(),b({selectionIds:r})},bindIME:H,getAttachedTopicsLoopChangeHeight:z,handleAttachedTopicsAtTopChange:({visible:e})=>{const{topicsLoopNum:n,attachedTopicsLoopStartIndex:o,attachedTopicsLoopEndIndex:a}=f.value;if(e){if(!F.value)return;if(!S.value)return;const e=S.value.scrollTop,l=Math.max(o-n,0);b({attachedTopicsLoopStartIndex:l}),(0,i.Y3)((()=>{var n;const i=z(),o=(null===(n=(0,g.Y8)(t.outlinerSheetModel.central.topicId))||void 0===n?void 0:n.clientHeight)||0;S.value.scrollTo({top:e+i+o})})),a-l>t.maxTopicsLoopNum&&b({attachedTopicsLoopEndIndex:a-n})}},handleAttachedTopicsAtBottomChange:({visible:e})=>{var n;const{topicsLoopNum:o,attachedTopicsLoopStartIndex:a,attachedTopicsLoopEndIndex:l}=f.value;if(e){if(!N.value)return;const e=l+o;if(b({attachedTopicsLoopEndIndex:e}),e-a>t.maxTopicsLoopNum){if(!S.value)return;const e=(null===(n=(0,g.Y8)(t.outlinerSheetModel.central.topicId))||void 0===n?void 0:n.clientHeight)||0,l=S.value.scrollTop-e,r=z();b({attachedTopicsLoopStartIndex:a+o}),(0,i.Y3)((()=>{S.value.scrollTo({top:l-r})}))}}},getDetachedTopicsLoopChangeHeight:W,handleDetachedTopicsAtTopChange:({visible:e})=>{const{topicsLoopNum:n,detachedTopicsLoopStartIndex:o,detachedTopicsLoopEndIndex:a}=f.value;if(e){if(!O.value)return;if(!S.value||!C.value)return;const e=S.value.scrollTop,l=Math.max(o-n,0);b({detachedTopicsLoopStartIndex:l,...a-l>t.maxTopicsLoopNum&&{detachedTopicsLoopEndIndex:a-n}}),(0,i.Y3)((()=>{const t=W(),n=C.value.clientHeight;S.value.scrollTo({top:e+t+n})}))}},handleDetachedTopicsAtBottomChange:({visible:e})=>{const{topicsLoopNum:n,detachedTopicsLoopStartIndex:o,detachedTopicsLoopEndIndex:a}=f.value;if(e){if(!A.value)return;const e=a+n;if(b({detachedTopicsLoopEndIndex:e}),e-o>t.maxTopicsLoopNum){if(!S.value||!C.value)return;const e=S.value.scrollTop,t=W(),a=C.value.clientHeight;b({detachedTopicsLoopStartIndex:o+n}),(0,i.Y3)((()=>{S.value.scrollTo({top:e-t-a})}))}}},handleScroll:R,VisibilitySensor:s.Z,OutlinerSelectionType:g._p,CentralTopic:G,Topic:$,TopicPlaceholder:ue,Tooltip:ge,Spinner:ve}}});n(46417);const fe=(0,b.Z)(me,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"outlinerEl",staticClass:"uk-overflow-auto uk-background-default",attrs:{id:"outliner"}},[t("div",{staticClass:"outline-selection-area-container"},[t("div",{staticClass:"outliner-container-wrapper",on:{dragleave:n.handleDragLeave,drop:n.handleDrop,mouseup:n.handleMouseUp,mousewheel:n.handleMouseWheel}},[t("div",{ref:"outlinerContainer",staticClass:"outliner-container uk-position-relative uk-text-select-none uk-flex uk-flex-column",style:{transform:`scale(${n.outlinerState.outlinerScale})`},attrs:{tabindex:"-1"}},[n.isCentralTopicVisible?t(n.CentralTopic,e._b({attrs:{"label-sort-order":e.outlinerSheetModel.labelSortOrder,"is-editable":n.outlinerState.isEditable,"is-image-selected":n.outlinerState.currEditingTopicId===e.outlinerSheetModel.central.topicId&&n.outlinerState.selectonType===n.OutlinerSelectionType.IMAGE,"is-equation-selected":n.outlinerState.currEditingTopicId===e.outlinerSheetModel.central.topicId&&n.outlinerState.selectonType===n.OutlinerSelectionType.EQUATION},nativeOn:{mousedown:function(e){return e.stopPropagation(),n.handleClick.apply(null,arguments)}}},"central-topic",e.outlinerSheetModel.central,!1)):e._e(),e._v(" "),n.attachedTopics.length>0||e.outlinerSheetModel.detached.length>0?t("div",{staticClass:"outliner-topics uk-flex-1 uk-clearfix",on:{mousedown:n.handleClick}},[t("div",{ref:"attachedTopicContainer",staticClass:"outliner-attached-topics"},[t(n.Spinner,{directives:[{name:"show",rawName:"v-show",value:n.isAttachedTopicsTopSpinnerVisible,expression:"isAttachedTopicsTopSpinnerVisible"}],staticStyle:{margin:"16px 24px"}}),e._v(" "),t(n.VisibilitySensor,{on:{change:n.handleAttachedTopicsAtTopChange}}),e._v(" "),e._l(n.attachedTopics,(function(i){return t(n.Topic,e._b({key:i.topicId,attrs:{"label-sort-order":e.outlinerSheetModel.labelSortOrder,"is-editable":n.outlinerState.isEditable,"is-selected":n.outlinerState.selectionIds.includes(i.topicId),"is-image-selected":n.outlinerState.currEditingTopicId===i.topicId&&n.outlinerState.selectonType===n.OutlinerSelectionType.IMAGE,"is-equation-selected":n.outlinerState.currEditingTopicId===i.topicId&&n.outlinerState.selectonType===n.OutlinerSelectionType.EQUATION,"is-dragging":n.outlinerState.draggingTopicIds.includes(i.topicId)&&n.outlinerState.draggingType===n.OutlinerSelectionType.TOPIC}},"topic",i,!1))})),e._v(" "),t(n.VisibilitySensor,{on:{change:n.handleAttachedTopicsAtBottomChange}}),e._v(" "),t(n.Spinner,{directives:[{name:"show",rawName:"v-show",value:n.isAttachedTopicsBottomSpinnerVisible,expression:"isAttachedTopicsBottomSpinnerVisible"}],staticStyle:{margin:"16px 24px"}})],2),e._v(" "),t("div",{staticClass:"outliner-detached-topics"},[e.outlinerSheetModel.detached.length>0?t("hr",{staticClass:"outliner-detached-topics-separator"}):e._e(),e._v(" "),t(n.Spinner,{directives:[{name:"show",rawName:"v-show",value:n.isDetachedTopicsTopSpinnerVisible,expression:"isDetachedTopicsTopSpinnerVisible"}],staticStyle:{margin:"16px 24px"}}),e._v(" "),t(n.VisibilitySensor,{on:{change:n.handleDetachedTopicsAtTopChange}}),e._v(" "),e._l(n.detachedTopics,(function(i){return t(n.Topic,e._b({key:i.topicId,attrs:{"label-sort-order":e.outlinerSheetModel.labelSortOrder,"is-editable":n.outlinerState.isEditable,"is-selected":n.outlinerState.selectionIds.includes(i.topicId),"is-image-selected":n.outlinerState.currEditingTopicId===i.topicId&&n.outlinerState.selectonType===n.OutlinerSelectionType.IMAGE,"is-equation-selected":n.outlinerState.currEditingTopicId===i.topicId&&n.outlinerState.selectonType===n.OutlinerSelectionType.EQUATION,"is-dragging":n.outlinerState.draggingTopicIds.includes(i.topicId)&&n.outlinerState.draggingType===n.OutlinerSelectionType.TOPIC}},"topic",i,!1))})),e._v(" "),t(n.VisibilitySensor,{on:{change:n.handleDetachedTopicsAtBottomChange}}),e._v(" "),t(n.Spinner,{directives:[{name:"show",rawName:"v-show",value:n.isDetachedTopicsBottomSpinnerVisible,expression:"isDetachedTopicsBottomSpinnerVisible"}],staticStyle:{margin:"16px 24px"}})],2)]):t("div",{staticClass:"outliner-topic-placeholder uk-height-large uk-text-meta uk-width-1-1",on:{click:n.handleEmptyTopicAdd}},[e._v("\n          "+e._s(n.$T("Type your mind here..."))+"\n        ")]),e._v(" "),t(n.TopicPlaceholder,{style:n.topicPlaceholderStyle,attrs:{"is-visible":n.isTopicPlaceholderVisible}})],1),e._v(" "),n.isCurrPopoverEditorVisible?t(n.currPopoverEditor,{tag:"component"}):e._e(),e._v(" "),n.tooltipData?t(n.Tooltip,{attrs:{content:n.tooltipData?.content,location:n.tooltipData?.location}}):e._e()],1)])])}),[],!1,null,"ebbfae50",null).exports},51e3:(e,t,n)=>{var i=n(62154);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("3c7501c2",i,!0,{})},15274:(e,t,n)=>{var i=n(55601);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("314aae86",i,!0,{})},46417:(e,t,n)=>{var i=n(47889);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("5ed7aa0a",i,!0,{})},85042:(e,t,n)=>{var i=n(31841);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("3225105a",i,!0,{})},86461:(e,t,n)=>{var i=n(24425);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("263b6588",i,!0,{})},13920:(e,t,n)=>{var i=n(38618);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("fe022650",i,!0,{})},51008:(e,t,n)=>{var i=n(99452);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("88afb302",i,!0,{})},51819:(e,t,n)=>{var i=n(60757);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("2d84316c",i,!0,{})},94783:(e,t,n)=>{var i=n(75542);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("368d77bc",i,!0,{})},85273:(e,t,n)=>{var i=n(73107);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("058b98d6",i,!0,{})},76466:(e,t,n)=>{var i=n(25113);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("fedc2674",i,!0,{})},85093:(e,t,n)=>{var i=n(8264);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("6b52d128",i,!0,{})},14433:(e,t,n)=>{var i=n(80203);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("aaa74984",i,!0,{})},91717:(e,t,n)=>{var i=n(8725);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("2ce0497d",i,!0,{})},60281:(e,t,n)=>{var i=n(44162);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("73d01076",i,!0,{})},64571:(e,t,n)=>{var i=n(88438);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("75a2047c",i,!0,{})},16401:(e,t,n)=>{var i=n(52354);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("4199a8cd",i,!0,{})},45137:(e,t,n)=>{var i=n(62353);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("45bf102e",i,!0,{})},9720:(e,t,n)=>{var i=n(94112);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("739c43a1",i,!0,{})}}]);