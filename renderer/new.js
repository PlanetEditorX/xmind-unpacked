(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[5536],{99580:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,".skeleton {\n  padding: 8px;\n  height: 24px;\n}\n.skeleton-content {\n  height: 100%;\n  background: var(--color-mask-overlay-s, rgba(28, 40, 52, 0.05));\n}\n.skeleton-left-bar {\n  border-radius: 4px;\n  width: 22px;\n  height: 22px;\n}\n.skeleton-right-bar {\n  border-radius: 2px;\n}\n",""]);const o=i},83064:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,".uk-darwin .launch-window-title-bar[data-v-843291a0] {\n  height: 28px !important;\n}\n.uk-darwin .launch-window-body[data-v-843291a0] {\n  padding-top: 28px !important;\n}\n.title-bar-icon[data-v-843291a0] {\n  width: 64px;\n  height: 16px;\n}\n.launch-window-panel[data-v-843291a0] {\n  background: var(--color-fill-surface);\n  border-radius: 12px;\n  overflow: hidden;\n  border: 1px solid var(--color-border-panel);\n  box-shadow: var(--effect-g);\n}\n.launch-window-panel.left-panel[data-v-843291a0] {\n  width: 220px;\n  margin-right: 12px;\n  padding: 16px 12px 20px;\n}\n.right-panel-motion-fade-in[data-v-843291a0] {\n  animation-name: fade-in-843291a0;\n  animation-timing-function: var(--motion-easing-productive-standard);\n  animation-duration: var(--motion-duration-medium-1);\n}\n.right-panel-motion-fade-out[data-v-843291a0] {\n  animation-name: fade-out-843291a0;\n  animation-timing-function: var(--motion-easing-productive-standard);\n  animation-duration: var(--motion-duration-medium-1);\n}\n@keyframes fade-in-843291a0 {\n0% {\n    opacity: 0;\n}\n100% {\n    opacity: 1;\n}\n}\n@keyframes fade-out-843291a0 {\n0% {\n    opacity: 1;\n}\n100% {\n    opacity: 0;\n}\n}\n",""]);const o=i},24631:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,".team-tag[data-v-666dbc6a] {\n  display: flex;\n  align-items: center;\n  height: 16px;\n  padding: 2px 4px;\n  border-radius: 3px;\n  text-transform: uppercase;\n  box-sizing: border-box;\n  word-break: keep-all;\n}\n.team-tag-primary[data-v-666dbc6a] {\n  color: var(--color-text-accent);\n  background: rgba(250, 74, 30, 0.15);\n}\n.team-tag-primary.is-free[data-v-666dbc6a] {\n  color: var(--color-text-tertiary);\n  background: var(--color-mask-overlay-m);\n}\n.team-tag-secondary[data-v-666dbc6a] {\n  color: var(--color-text-tertiary);\n  border: 1px solid var(--color-sidebar-border-tag);\n}\n",""]);const o=i},83776:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,".navigate-item {\n  height: 32px !important;\n  justify-content: left !important;\n  padding: 0 8px;\n  color: var(--color-tab-content-inactive-normal);\n}\n.uk-active .navigate-item {\n  background-color: var(--color-sidebar-bg-active) !important;\n}\n.navigate-item-text-color {\n  color: var(--color-sidebar-text-title);\n}\n.navigate-img-icon {\n  width: 20px;\n  height: 20px;\n  margin-right: 10px !important;\n  margin-left: 3px;\n}\n.navigate-icon {\n  box-sizing: content-box;\n  color: var(--color-sidebar-icon-features);\n  margin-right: 8px;\n}\n",""]);const o=i},41753:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,".avatar {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  margin-right: 12px;\n}\n.email {\n  color: var(--color-text-tertiary);\n}\n#profile-button {\n  display: none;\n}\n#profile:hover #profile-button {\n  display: block;\n}\n",""]);const o=i},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=e(t);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(i[r]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&i[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),t.push(l))}},t}},32391:(e,t,a)=>{"use strict";a.r(t);var n=a(59042),i=a(2954),o=a(67657),r=a(54856),s=a(90435),l=a(69931),d=a(79409),c=a(23352),u=a(87141),v=a(7710),m=a(63111),f=a(67159),p=a(57507);const h=(0,i.aZ)({__name:"profile",setup(e){const t=(0,u.JE)().T,a=(0,c.ZP)("profile"),n=(0,i.iH)(""),o=(0,i.Fl)((()=>(0,u.c7)().fullname)),d=(0,i.Fl)((()=>(0,u.c7)().user)),v=(0,i.Fl)((()=>(0,u.c7)().primaryEmail)),m=(0,i.Fl)((()=>!!(0,u.c7)().user)),f=(0,l.ju)("static/assets/images/new/avatar.svg"),h=(0,i.Fl)((()=>n.value||f));(0,i.bv)((async()=>{w()}));const w=async()=>{if(m.value)try{const e=await s.ZP.fetch(r.lf.GET_PROFILE);if(!(null==e?void 0:e.avatarUrl))return;n.value=e.avatarUrl}catch(e){return void a.error("Failed to get user profile")}},g=()=>{n.value=""};return(0,i.YP)(m,(async e=>{e?w():g()})),{__sfc:!0,$T:t,logger:a,avatarUrl:n,fullname:o,user:d,primaryEmail:v,hasLogin:m,defaultAvatar:f,computedAvatarURL:h,handleSignIn:()=>(0,u.JX)().handleCommand("signIn"),showProfileMenu:()=>{const e=[{label:t("My Account"),click:()=>(0,u.JX)().handleCommand("profile")},{label:t("My Submissions"),click:()=>(0,u.JX)().handleCommand("submittedMaps")},{label:t("Sign Out"),click:()=>(0,u.JX)().handleCommand("signOut")}];(0,p.k)(e)},refreshProfile:w,clearProfile:g}}});a(97245);var w=a(51900);const g=(0,w.Z)(h,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-flex uk-flex-middle uk-flex-between",staticStyle:{padding:"2px"},attrs:{id:"profile"}},[t("div",{staticClass:"uk-flex uk-flex-middle uk-width-expand"},[t("img",{staticClass:"avatar",attrs:{src:a.computedAvatarURL,draggable:"false"}}),e._v(" "),t("div",{staticClass:"uk-flex uk-flex-column uk-width-expand uk-flex-top"},[a.hasLogin?[t("span",{staticClass:"name uk-text-truncate typography-subhead-mini"},[e._v(e._s(a.fullname||a.user))]),e._v(" "),t("span",{staticClass:"email uk-text-truncate typography-caption-caption"},[e._v(e._s(a.primaryEmail))])]:[t("button",{staticClass:"vk-button-tile",on:{click:a.handleSignIn}},[e._v("\n          "+e._s(a.$T("Sign In"))+"\n        ")])]],2)]),e._v(" "),a.hasLogin?t("button",{staticClass:"vk-button-tile",attrs:{id:"profile-button"},on:{click:a.showProfileMenu}},[t("span",{attrs:{"uk-icon":"icon: chevron-downward; ratio: 0.6"}})]):e._e()])}),[],!1,null,null,null).exports;var I=a(1031),y=a(18621),b=a(6188);const T=(0,i.aZ)({__name:"navigation",props:{navigations:null,activeTabId:null},setup:e=>({__sfc:!0,TeamTag:b.Z})});a(93935);var E=(0,w.Z)(T,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("ul",{staticClass:"uk-tab vk-tab-capsule uk-flex-column uk-flex"},e._l(e.navigations,(function(n,i){return t("li",{key:n.id,staticClass:"uk-width-1-1",class:{"uk-active":n.id===e.activeTabId,"uk-disabled":n.divider,"uk-margin-xsmall-bottom":i!==e.navigations.length-1&&!n.divider},attrs:{tabindex:"-1",title:n.name}},[n.divider?t("hr",{staticClass:"vk-divider-on-surface",staticStyle:{margin:"8px 0 12px"}}):n?.isButton?t("button",{staticClass:"vk-button vk-button-tile uk-flex uk-flex-middle uk-flex uk-width-1-1 navigate-item",staticStyle:{"font-size":"13px"},attrs:{tabindex:"-1"},on:{click:n.click}},[n.icon?t("div",{staticClass:"navigate-icon",attrs:{"uk-icon":`icon: ${n.icon}; ratio: 1.3`}}):t("div",{staticClass:"uk-margin-xsmall-right",staticStyle:{width:"20px",height:"20px"},attrs:{"data-src":n.svg,"uk-svg":""}}),e._v(" "),t("span",{staticClass:"uk-text-truncate typography-body-large navigate-item-text-color uk-margin-xsmall-left"},[e._v(e._s(n.name))])]):t("a",{staticClass:"uk-flex uk-flex-middle navigate-item",attrs:{tabindex:"-1",draggable:"false",href:"#"},on:{click:n.click}},[n.img?t("img",{staticClass:"navigate-img-icon",attrs:{src:n.img,draggable:"false"}}):n.icon?t("div",{staticClass:"navigate-icon",attrs:{"uk-icon":`icon: ${n.icon}; ratio: 1.3`}}):t("div",{staticClass:"navigate-icon",attrs:{"uk-svg":"",draggable:"false","data-src":n.svg}}),e._v(" "),t("span",{staticClass:"uk-text-left uk-text-truncate typography-body-large navigate-item-text-color uk-margin-xsmall-left"},[e._v(e._s(n.name))]),e._v(" "),n.tag?t(a.TeamTag,{staticStyle:{"margin-left":"8px"},attrs:{plan:n.tag,type:"secondary"}}):e._e()],1)])})),0)}),[],!1,null,null,null);const F=E.exports;var k=a(30858);const x=(0,i.aZ)({__name:"sidebar",props:{activeTabId:null},emits:["navigate"],setup(e,{emit:t}){const a=e,{teams:n,createTeam:o,myWorks:l,isTeamMetaRequesting:d}=(0,f.t7)(),c=(0,u.JE)().T,v=(0,i.Fl)((()=>a.activeTabId)),p=(0,i.Fl)((()=>(0,u.c7)().user)),h=(0,i.Fl)((()=>"cn"===(0,u.qr)().serviceRegion)),w=(0,i.Fl)((()=>!!(0,u.c7)().fireflyToken)),{isActivationValid:g}=(0,I.g)({planType:u.k9.PERSONAL}),b=(0,i.Fl)((()=>!m.zr&&(!m.sv||g.value))),T=e=>e.teamId!==p.value,E=(0,i.Fl)((()=>{if(!n.value)return[];return n.value.filter(T).map((e=>{const a=`team-${e.teamId}`;return{id:a,name:e.name,isAvailable:w.value,img:e.avatar,tag:!(0,u.Yh)().checkActivationValid({planType:u.k9.TEAM,teamId:e.teamId})&&u.kc.FREE,click:n=>{t("navigate",a),n.target.classList.contains("team-tag")&&s.ZP.fetch(r.Gy,{name:"action.upgrade",payload:{planType:u.k9.TEAM,teamId:e.teamId,isTeamOwner:"owner"===e.role}})}}})).filter((e=>e.isAvailable||e.divider))})),x=(0,i.Fl)((()=>[{id:"newTeam",name:c("New Team"),isButton:!0,isAvailable:w.value&&!h.value,click:o,icon:"add"}].filter((e=>e.isAvailable)))),P=(0,i.Fl)((()=>S([{id:"recent",name:c("Recents"),isAvailable:!0,icon:"recent",click:()=>t("navigate","recent")},{id:"locaLFile",name:c("Open Local File"),isButton:!0,isAvailable:!0,click:()=>M(),icon:"new-file"},{divider:!0}].filter((e=>e.isAvailable||e.divider))))),_=(0,i.Fl)((()=>S([{id:"shared",name:c("Shared Maps"),isAvailable:w.value,click:()=>t("navigate","shared"),icon:"file-share"},{id:"trash",name:c("Trash"),isAvailable:w.value,click:()=>t("navigate","trash"),icon:"trash-outline"},{divider:!0,isAvailable:w.value},{id:`team-${l.value.teamId}`,name:l.value.name,isAvailable:w.value,icon:"file-text",click:()=>{t("navigate",`team-${l.value.teamId}`)}},{divider:!0,isAvailable:w.value&&!h.value}].filter((e=>e.isAvailable))))),A=(0,i.Fl)((()=>[{id:"library",name:c("Library"),isAvailable:b.value,click:()=>t("navigate","library"),icon:"book"},{id:"preferences",name:c("Preferences"),isAvailable:!0,isButton:!0,icon:"setting",click:R}].filter((e=>e.isAvailable)))),L=(0,i.Fl)((()=>P.value.concat(E.value).concat(_.value).concat(A.value).concat(x.value).map((e=>e.id)))),S=e=>{const t=e.map(((e,t,a)=>{var n;const i=null===(n=a[t-1])||void 0===n?void 0:n.divider,o=e.divider;return i&&o?null:e})).filter(Boolean);return t.every((e=>e.divider))?[]:t},C=(e,t)=>{if(!e||!t)return!1;const a=new Date(e),n=new Date(t);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()&&a.getDate()===n.getDate()};function M(){(0,u.JX)().handleCommand("open",{reopenLaunchWindow:!0}),(0,y.L9)({eventAction:"newLaunch",eventName:"openLocalFile"})}function R(){(0,u.JX)().handleCommand("preferences")}return(0,i.bv)((()=>{if(!v.value){const e=(0,u.qr)().launchRecordOfNew,{lastLaunchTime:a,lastViewTab:n}=e,i=C(a,Date.now()),o=P.value.some((e=>e.id===n))||_.value.some((e=>e.id===n))||A.value.some((e=>e.id===n));t("navigate",i&&o?n:"recent")}})),(0,i.YP)(L,(e=>{e.includes(v.value)||t("navigate","recent")})),{__sfc:!0,props:a,emit:t,teams:n,createTeam:o,myWorks:l,isTeamMetaRequesting:d,$T:c,activeTabId:v,user:p,isCN:h,isCollaborationAvailable:w,isActivationValid:g,isLibaryAvailable:b,notMyWorks:T,teamNavigations:E,createTeamNavigation:x,mainNavigations:P,secondaryNavigations:_,bottomNavigations:A,allNavigationIds:L,combineDivider:S,getIsSameDay:C,openLocalFile:M,openPreferences:R,navigation:F,SpinnerSkeletonLinear:k.Z}}});const P=(0,w.Z)(x,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-flex uk-flex-column uk-flex-between"},[t(a.navigation,{attrs:{"active-tab-id":a.activeTabId,navigations:a.mainNavigations}}),e._v(" "),t("div",{staticClass:"uk-height-expand uk-overflow-overlay uk-margin-bottom",staticStyle:{display:"block"}},[t(a.navigation,{attrs:{"active-tab-id":a.activeTabId,navigations:a.secondaryNavigations}}),e._v(" "),a.isTeamMetaRequesting&&a.isCollaborationAvailable?t(a.SpinnerSkeletonLinear,{attrs:{row:2,"left-bar":!0}}):t(a.navigation,{staticClass:"uk-margin-xsmall-bottom",attrs:{navigations:a.teamNavigations,"active-tab-id":a.activeTabId}}),e._v(" "),t(a.navigation,{attrs:{"active-tab-id":a.activeTabId,navigations:a.createTeamNavigation}})],1),e._v(" "),t(a.navigation,{attrs:{"active-tab-id":a.activeTabId,navigations:a.bottomNavigations}})],1)}),[],!1,null,null,null).exports,_=(0,i.aZ)({__name:"app",setup(e){const t=(0,c.ZP)("home"),n=(0,i.RC)((()=>a.e(1293).then(a.bind(a,58310)))),p=(0,i.RC)((()=>a.e(8252).then(a.bind(a,48252)))),h=(0,i.RC)((()=>a.e(9050).then(a.bind(a,29050)))),w=(0,i.RC)((()=>a.e(5118).then(a.bind(a,15118)))),I=(0,i.RC)((()=>a.e(4549).then(a.bind(a,44549)))),y=(0,v.l)().query.tab,b=(0,u.JE)().T,{teamFolderHistory:T,goFolder:E,cleanDriveState:F}=(0,f.nu)(),{myWorks:k,teams:x,currentViewTeamId:_,setCurrentViewTeam:A,refreshJoinedTeams:L,clearTeamsAndMyWorks:S}=(0,f.t7)(),{refreshCloudRecentItems:C}=(0,f.Xb)(),{showUnableConnectToast:M,showConnectionOfflineToast:R,showConnectionRestoredToast:N}=(0,f.pm)(),{setLaunchRecordOfNew:Z}=(0,u.qr)(),O=(0,i.iH)(y),D=(0,i.Fl)((()=>!!(0,u.c7)().user)),$=(0,d.Z)("version").includes("beta"),B=$?"beta-":"",U=(0,i.Fl)((()=>J.value?(0,l.ju)(`static/assets/images/new/${B}titlebar-logo-dark.svg`):(0,l.ju)(`static/assets/images/new/${B}titlebar-logo-light.svg`))),q=(0,i.Fl)((()=>[k.value,...x.value])),H=(0,i.Fl)((()=>!!(0,u.c7)().fireflyToken)),J=(0,i.Fl)((()=>"dark"===(0,u.S)().appearance)),W=e=>{O.value=e,o.BrowserWindow.fromId(window.id).focus()};let z=!1;window.onbeforeunload=e=>{if((0,f.MP)().isUploading.value&&!z)return o.dialog.showMessageBox((0,o.getCurrentWindow)(),{type:"question",title:b("Upload in Progress"),message:b("You have ongoing uploads. Are you sure you want to close the window?"),buttons:[b("Cancel"),b("Close")],defaultId:1,cancelId:0}).then((({response:e})=>{1===e&&(z=!0,window.close())})),e.preventDefault(),""},(0,i.bv)((async()=>{Z({lastLaunchTime:Date.now()}),m.sv||m.zr||(window.addEventListener("online",(()=>{D.value&&N()})),window.addEventListener("offline",(()=>{D.value&&R()})))}));const V=(0,i.Fl)((()=>J.value?(0,l.ju)("static/assets/images/new/home-menu-dark.svg"):(0,l.ju)("static/assets/images/new/home-menu-light.svg"))),j=async()=>{try{await Promise.all([L(),C()])}catch(e){M()}},G=async()=>{try{const e=await s.ZP.fetch(r.rM.GET_TEAM_PROFILES);(0,u.c7)().updateAccount({rawTeamSubscriptionData:e})}catch(e){t.error("Failed to fetch team sub data",e)}};return(0,i.YP)(H,(e=>{e?(G(),j()):(S(),F())}),{immediate:!0}),(0,i.YP)((()=>(0,v.l)().query),(e=>{var t;if((null===(t=e.tab)||void 0===t?void 0:t.startsWith("team-"))&&e.folderId){const t=e.tab.replace("team-","");E({teamId:t,folderId:e.folderId,...e.folderName&&{folderName:e.folderName}})}e.tab&&W(e.tab)}),{immediate:!0}),(0,i.YP)((()=>O.value),(e=>{if(!e)return;(0,u.qr)().setLaunchRecordOfNew({lastViewTab:e});if(e.startsWith("team-")){const t=e.replace("team-","");A(t)}else A("")}),{immediate:!0}),{__sfc:!0,logger:t,RecentPage:n,LibraryPage:p,SharedMapsPage:h,TeamPage:w,TrashPage:I,queryTabId:y,$T:b,teamFolderHistory:T,goFolder:E,cleanDriveState:F,myWorks:k,teams:x,currentViewTeamId:_,setCurrentViewTeam:A,refreshJoinedTeams:L,clearTeamsAndMyWorks:S,refreshCloudRecentItems:C,showUnableConnectToast:M,showConnectionOfflineToast:R,showConnectionRestoredToast:N,setLaunchRecordOfNew:Z,activeTabId:O,hasLogin:D,isBetaVersion:$,betaSuffix:B,iconURL:U,teamItems:q,isCollaborationAvailable:H,isMac:!1,isDark:J,switchTab:W,handleNavigate:e=>{O.value=e;if(e.startsWith("team-")){const t=e.replace("team-","");E({teamId:t,folderId:T.value[t]||t})}},confirmClose:z,homeMenuImageURL:V,openHomeMenu:async e=>{await s.ZP.fetch(r.bz,{x:e.pageX,y:e.pageY})},refreshTeamsAndRecent:j,fetchTeamSubData:G,isSME:m.sv,isVLE:m.zr,Profile:g,Sidebar:P}}}),A=_;a(31993);const L=(0,w.Z)(A,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"vk-window-dialog",attrs:{id:"app"}},[t("div",{staticClass:"vk-window-title-bar vk-window-title-bar-floating launch-window-title-bar",staticStyle:{height:"32px"}},[t("window-control-button-group",{staticClass:"uk-height-1-1"})],1),e._v(" "),t("div",{staticClass:"vk-window-body uk-flex uk-width-1-1 uk-height-1-1 uk-overflow-hidden launch-window-body",staticStyle:{padding:"32px 12px 12px"}},[t("div",{staticClass:"uk-workbench-left uk-panel uk-position-relative uk-height-1-1 uk-flex uk-flex-column launch-window-panel left-panel"},[a.isMac?e._e():t("div",{staticClass:"uk-flex uk-flex-middle uk-flex-between uk-margin-small-bottom",staticStyle:{height:"16px",padding:"0 8px 12px"}},[t("div",{staticClass:"title-bar-icon",attrs:{"uk-img":"","data-src":a.iconURL}}),e._v(" "),t("button",{staticClass:"vk-button-tile uk-padding-remove",staticStyle:{"-webkit-app-region":"none"},on:{click:a.openHomeMenu}},[t("img",{attrs:{draggable:"false","uk-svg":"",src:a.homeMenuImageURL}})])]),e._v(" "),t("div",{staticClass:"uk-flex-1 uk-flex uk-flex-column",style:{marginTop:a.isMac?null:"8px"}},[a.isVLE||a.isSME?e._e():t(a.Profile,{staticStyle:{"margin-bottom":"12px"}}),e._v(" "),t(a.Sidebar,{staticClass:"uk-flex uk-flex-1",attrs:{"active-tab-id":a.activeTabId},on:{navigate:a.handleNavigate}})],1)]),e._v(" "),t("div",{staticClass:"uk-position-relative uk-width-expand launch-window-panel"},[t("KeepAlive",[t("transition",{attrs:{"enter-active-class":"right-panel-motion-fade-in","leave-active-class":"right-panel-motion-fade-out"}},[t(a.RecentPage,{directives:[{name:"show",rawName:"v-show",value:"recent"===a.activeTabId,expression:"activeTabId === 'recent'"}],attrs:{"is-active":"recent"===a.activeTabId}})],1)],1),e._v(" "),t("KeepAlive",[t("transition",{attrs:{"enter-active-class":"right-panel-motion-fade-in","leave-active-class":"right-panel-motion-fade-out"}},[t(a.LibraryPage,{directives:[{name:"show",rawName:"v-show",value:"library"===a.activeTabId,expression:"activeTabId === 'library'"}],attrs:{"is-active":"library"===a.activeTabId}})],1)],1),e._v(" "),t("KeepAlive",[t("transition",{attrs:{"enter-active-class":"right-panel-motion-fade-in","leave-active-class":"right-panel-motion-fade-out"}},[t(a.SharedMapsPage,{directives:[{name:"show",rawName:"v-show",value:"shared"===a.activeTabId,expression:"activeTabId === 'shared'"}],attrs:{"is-active":"shared"===a.activeTabId}})],1)],1),e._v(" "),t("KeepAlive",[t("transition",{attrs:{"enter-active-class":"right-panel-motion-fade-in","leave-active-class":"right-panel-motion-fade-out"}},[t(a.TrashPage,{directives:[{name:"show",rawName:"v-show",value:"trash"===a.activeTabId,expression:"activeTabId === 'trash'"}],attrs:{"is-active":"trash"===a.activeTabId}})],1)],1),e._v(" "),t("KeepAlive",[t("transition-group",{attrs:{"enter-active-class":"right-panel-motion-fade-in","leave-active-class":"right-panel-motion-fade-out"}},e._l(a.teamItems,(function(e){return t(a.TeamPage,{directives:[{name:"show",rawName:"v-show",value:a.currentViewTeamId===e.teamId,expression:"currentViewTeamId === team.teamId"}],key:e.teamId,attrs:{"team-id":e.teamId,"team-name":e.name,"is-team-owner":"owner"===e.role}})})),1)],1)],1)]),e._v(" "),t("div",{attrs:{id:"launch-window-popover-container"}})])}),[],!1,null,"843291a0",null).exports;(0,n.Z)(L,{name:"new"})},59042:(e,t,a)=>{"use strict";a.d(t,{Z:()=>he});var n=a(47311),i=a(23352),o=a(90435);const r=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",s=(0,i.ZP)(`error:${r}`),l=new n.q(s,{ipc:o.ZP});window.addEventListener("error",(function(e){const t=e.error;t&&l.handle(t)})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason;t&&l.handle(t)}));const d=l;var c=a(2954),u=a(63477),v=a.n(u),m=a(72298),f=a(67657),p=a(13780),h=a.n(p),w=a(30266),g=a(86396),I=a(31945),y=a(54856),b=a(73884),T=a(28914),E=a(56222),F=a(79409),k=a(65114),x=a(77412);const P={install(e){const t="vana-ref";e.directive(t,{bind:function(e,t,a){t.value(a.componentInstance||e,a.key)},update:function(e,a,n,i){if(i.data&&i.data.directives){var o=i.data.directives.find((function(e){return e.name===t}));if(o&&o.value!==a.value)return o&&o.value(null,i.key),void a.value(n.componentInstance||e,n.key)}n.componentInstance===i.componentInstance&&n.elm===i.elm||a.value(n.componentInstance||e,n.key)},unbind:function(e,t,a){t.value(null,a.key)}})}};var _=a(87141);const A={install(e){e.prototype.$T=function(e,...t){return(0,_.JE)().T(e,...t)}}};var L=a(96829);const S=(0,i.ZP)("safe-runner");const C=class{constructor(e){this.errorHandler=e}_handleError(e){"function"==typeof this.errorHandler?this.errorHandler(e):S.error((0,L.SC)(e))}install(e){const t=this;e.prototype.$safeRun=function(e){try{let a=e();return a&&a.then&&a.catch?a.then((e=>e)).catch((e=>t._handleError(e))):a}catch(e){t._handleError(e)}}}};var M=a(69931);const R={install(e){e.prototype.$toResourceURL=(...e)=>(0,M.ju)(...e).replace("(","%28").replace(")","%29"),e.prototype.$loadResource=M.zD}};var N=a(53775),Z=a(59474);var O=a(30247),D=a(2563),$=a(65428);const B=(0,i.ZP)("font");var U=a(22037),q=a.n(U),H=a(38629);const J=(0,i.ZP)("performance");function W(e){e?document.body.style.setProperty("--uk-system-accent-color",e):document.body.style.removeProperty("--uk-system-accent-color")}var z=a(63111),V=a(18621),j=a(69297),G=a(20993);const Y={start:()=>{const e=(0,Z.i)();e.startJob();const t=(0,c.YP)((()=>e.pendingJobs),(a=>{a>0||(t(),e.markReady())}));setTimeout((()=>e.endJob()),0)}},X=(()=>{const e=[],t=new Map;return{start:()=>{const e=(0,Z.i)();e.startJob(),o.ZP.fetch(y.de).then((t=>{Object.keys(t).forEach((e=>{var a;const n=(0,_.F_)(e);null===(a=null==n?void 0:n())||void 0===a||a.$patch(t[e])})),b.Z.on(k.Md,(e=>{e.forEach((({id:e,state:t})=>{var a;const n=(0,_.F_)(e);null===(a=null==n?void 0:n())||void 0===a||a.$patch((0,c.qj)(t))}))})),e.endJob()}))},plugin:a=>{(0,_.W$)(a.store.$id)&&a.store.$subscribe(((n,i)=>{if(a.store.$id!==n.storeId)return;const r=t.get(n.storeId);t.set(n.storeId,!0),(null===window||void 0===window?void 0:window.isEditorFrame)||r&&n.type!==x.x1.patchObject&&(0,_.W$)(n.storeId)&&(e.push({id:n.storeId,state:JSON.parse(JSON.stringify(i))}),Promise.resolve().then((()=>{o.ZP.fetch(y.w6,{states:e}),e.length=0})))}))}}})(),K={start:()=>{(0,$.r)();const e=(0,M.ju)("/static/snowbird/resource/"),t=function(){const e={};return O.Fy(((t,a)=>{e[t]=a.map((e=>({...e,family:t})))})),e}(),a=Object.values(t).flat().map((t=>function({family:e,src:t,italic:a,weight:n,"unicode-range":i},o){const r=new URL(t,o).href;let s={family:e,source:`url("${r}")`,url:r};return void 0!==a&&(s={...s,style:a?"italic":"normal"}),void 0!==n&&(s={...s,weight:n.toString()}),void 0!==i&&(s={...s,unicodeRange:i}),s}(t,e)));!function(e){Promise.all(e.map((({family:e,source:t,...a})=>{const n=new FontFace(e,t,a);return n.load().then((()=>{document.fonts.add(n)})).catch((()=>{B.error("Failed to load css font from",t)}))})))}(a),function(){const e=document.createElement("style"),t=O.Hn();e.innerHTML=t,document.head.appendChild(e),document.body.style.setProperty("--info-button-font",O.o6)}(),(0,D.O)().updateBuiltinFontFamilies(Array.from(new Set(Object.keys(t))))}},Q={start:()=>{const e=(0,Z.i)(),{_apr:t,_acc:a}=v().parse(location.search.slice(1));t&&(e.startJob(),J.debug("About to load CSS using _apr query parameter:",t),(0,H.Z)(t,(()=>{J.debug("Loaded CSS using _apr query parameter:",t),setTimeout((()=>{e.endJob()}),10)}))),a&&W(a),"darwin"===q().platform()&&parseFloat(q().release())>=20&&document.body.classList.add("uk-darwin-bigsur"),(0,c.YP)((()=>(0,_.S)().language),((e,t)=>{t&&document.body.classList.remove(`uk-lang-${t}`),e&&document.body.classList.add(`uk-lang-${e}`)}));const n=(0,c.YP)((()=>(0,Z.i)().ready),(e=>{e&&(n(),(0,c.YP)((()=>[(0,_.S)().appearance,(0,D.O)().ignoreAppearanceChanged]),(([e,t])=>{t||(0,H.Z)(e)})),(0,c.YP)((()=>(0,_.qr)().systemAccentColor),(e=>W(e))),(0,c.YP)((()=>(0,_.S)().systemScrollbarSetting),(e=>function(e){const t="vk-scrollbar";document.body.classList.forEach((e=>{e.startsWith(t)&&document.body.classList.remove(e)})),document.body.classList.add(`${t}-${(e||"always").toLowerCase()}`)}(e)),{immediate:!0}))}))}},ee={start:()=>{z.nd&&z.qu.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>(async()=>(await o.ZP.fetch(y.QN),"interruption"))()))})),Object.keys(z.JN).concat(Object.keys(z.oF)).forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{const t=(0,_.JX)().commandById(e);return(null==t?void 0:t.provider)?(async(e,t)=>{if(!await o.ZP.fetch(y.Gy,{name:e,channel:(0,y.gk)(t)}))return"interruption"})(e,t.provider):"interruption"}))})),z.ZK.forEach((e=>{(0,_.JX)().appendAfterHandler(e,(()=>{const t=e.split(".")[1];(0,V.L9)({eventCategory:"Edit",eventAction:t,eventValue:1})}))})),z.ff.forEach((e=>{(0,_.JX)().appendAfterHandler(e,(()=>{(0,V.L9)({eventCategory:"Share",eventAction:e,eventValue:1})}))})),z.y_.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{(0,j.Kl)()}))})),z.xk.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{(0,j.fv)()}))})),z.wp.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{(0,j.nz)()}))})),(0,_.JX)().appendAfterHandler("editor.addTodo",G.l5),(0,_.JX)().appendAfterHandler("editor.cancelTask",G.DY),(0,_.JX)().appendAfterHandler("editor.checkTodo",(()=>{(0,G.fR)("checkTask")})),(0,_.JX)().appendAfterHandler("editor.uncheckTodo",(()=>{(0,G.fR)("uncheckTask")})),z.QL.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{if((0,_.si)().contexts["collaboration.isReadOnly"])return"interruption"}))})),z.gY.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{if((0,_.si)().contexts["collaboration.isFromCloud"])return"interruption"}))}))}},te={start:()=>{const e=(0,Z.i)();e.startJob(),(0,_.JX)().injectDoHandleCommand((async(e,t)=>o.ZP.fetch(y.hR,{commandId:e,handlerArgs:t}))),e.endJob()}},ae=[X.plugin];var ne=a(7710);const ie=v().parse(window.location.search.slice(1)),oe=!0,re=!!ie.isBrowserView,se=!!ie.isEditorFrame;let le=f.getCurrentWindow;re&&(le=function(){const e=T.Z.sendSync("get-current-window-id");return f.BrowserWindow.fromId(parseInt(e))});const de=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",ce=(0,i.ZP)("performance"),ue=(0,i.ZP)("sentry");ce.debug("Initializing page:",de),m.webFrame.setVisualZoomLevelLimits(1,1),document.body.classList.add("uk-win32"),Object.defineProperty(window,"id",{get:()=>le().id}),window.getWindowIdAsync=async()=>await(0,E.A)("get-current-window-id");window.getCurrentWindowAsync=async()=>{const e=await window.getWindowIdAsync();return f.BrowserWindow.fromId(parseInt(e))},window.isEditorFrame=se;const ve=c.ZP.observable({isBeingDestroyed:!1,isDestroyed:!1,isShown:!1});["isBeingDestroyed","isDestroyed","isShown"].forEach((e=>{Object.defineProperty(window,e,{get:()=>ve[e],set(t){ve[e]=t}})})),window.show=()=>{le().show()},window.hide=()=>{le().hide()},window.close=()=>{le().close()},window.minimize=()=>{le().minimize()},window.maximize=()=>{le().maximize()},window.restore=()=>{le().unmaximize()},window.isMinimized=()=>le().isMinimized(),window.isMaximized=()=>le().isMaximized(),window.isFullScreen=()=>le().isFullScreen(),window.resizeTo=(e,t)=>{le().setContentSize(e,t)},window.resizeBy=(e,t)=>{let[a,n]=le().getContentSize();le().setContentSize(a+e,n+t)},window.moveTo=(e,t)=>{le().setPosition(e,t)},window.moveBy=(e,t)=>{let[a,n]=le().getPosition();le().setPosition(a+e,n+t)},b.Z.on("window-maximize",(()=>{document.body.classList.add("uk-window-maximized"),window.dispatchEvent(new Event("maximize"))})),b.Z.on("window-unmaximize",(()=>{document.body.classList.remove("uk-window-maximized"),window.dispatchEvent(new Event("restore"))})),b.Z.on("window-minimize",(()=>{window.dispatchEvent(new Event("minimize"))})),b.Z.on("window-unminimize",(()=>{window.dispatchEvent(new Event("unminimize"))})),b.Z.on("window-focus",(()=>{document.body.classList.remove("uk-window-inactive")})),b.Z.on("window-blur",(()=>{document.body.classList.add("uk-window-inactive")})),b.Z.on("window-enter-full-screen",(()=>{document.body.classList.add("uk-window-full-screen"),window.dispatchEvent(new Event("enter-full-screen"))})),b.Z.on("window-leave-full-screen",(()=>{document.body.classList.remove("uk-window-full-screen"),window.dispatchEvent(new Event("leave-full-screen"))})),b.Z.on("window-sheet-begin",(()=>{document.body.classList.add("uk-disabled"),window.dispatchEvent(new Event("sheet-begin"))})),b.Z.on("window-sheet-end",(()=>{document.body.classList.remove("uk-disabled"),window.dispatchEvent(new Event("sheet-end"))})),b.Z.on("window-show",(()=>{window.dispatchEvent(new Event("window-show"))})),b.Z.on(k.$r,(e=>{(0,ne.l)().setQuery(e)}));const me=le&&le();if(me&&me.isMaximized()&&document.body.classList.add("uk-window-maximized"),me&&me.isFullScreen()&&document.body.classList.add("uk-window-full-screen"),me&&!me.isFocused()&&document.body.classList.add("uk-window-inactive"),document.addEventListener("keydown",(e=>{27===e.keyCode&&document.body.querySelector(".uk-window-dialog")&&setTimeout((()=>{if(e.defaultPrevented)return;const t=new Event("close");window.dispatchEvent(t)&&window.close()}),0)})),me&&me.isMaximizable&&me.isMaximizable()){const e=["a","button","select","input"];document.addEventListener("dblclick",(t=>{const{target:a,defaultPrevented:n}=t;if(n)return;let i=a;for(;i&&"function"==typeof i.matches;){if(e.some((e=>i.matches(e))))return;i=i.parentNode}let o=document.querySelector(".vk-window-title-bar-expanded")||document.querySelector(".vk-window-title-bar");o&&o.contains(a)&&(window.isMaximized()?window.restore():window.maximize())}))}c.ZP.use(x.og),c.ZP.use(new C((e=>d.handle(e)))),c.ZP.use(h()),c.ZP.use(A),c.ZP.use(R),c.ZP.use(P),c.ZP.use(w.ZP.Plugin),ce.debug("Initialized page:",de);const fe=(0,x.WB)();(0,x.uX)(fe),ae.forEach((e=>fe.use(e))),Object.values(_.rx).forEach((e=>e())),Y.start(),X.start(),K.start(),Q.start(),ee.start(),te.start();const pe=(0,F.Z)("version").includes("beta");if(process.env.SENTRY_DSN_OF_BROWSER&&pe){const e=(0,c.YP)((()=>(0,_.qr)().sentryConfig),(t=>{e();try{const e=t[process.env.SENTRY_PROJECT_OF_BROWSER]||{};g.S({Vue:c.ZP,dsn:process.env.SENTRY_DSN_OF_BROWSER,environment:"production",...e}),ue.info("init",e)}catch(e){ue.error("Failed to init sentry",e)}}),{immediate:!1})}async function he(e,{mountTarget:t="#app",name:a=null,plugins:n=[],runAfterPiniaPlugin:i,editorId:r=null,autoShow:s=!0}={}){ce.debug("Bootstrapping:",de);for(let e of n)c.ZP.use(e);let l;return(0,_._t)((0,I.b3)(window.id)),"dialog-err"===a&&(0,_.VE)((0,I.zN)("dialog-err",window.id)),"dialog-problem"===a&&(0,_.ym)((0,I.zN)("dialog-problem",window.id)),r&&(0,_.OD)((0,I.aJ)(r)),await new Promise((a=>{let n=(0,c.YP)((()=>(0,Z.i)().ready),(r=>{r&&(n(),document.body.classList.add(`uk-lang-${(0,_.S)().language}`),i?.(fe),ce.debug("About to create Vue instance:",de),l=new c.ZP({...e,pinia:fe}),ce.debug("Created Vue instance:",de),window.addEventListener("unload",(()=>{window.isBeingDestroyed=!0,l.$destroy(),window.isDestroyed=!0})),ce.debug("About to mount Vue instance:",de),l.$mount(t||"#app"),ce.debug("Mounted Vue instance:",de),(0,N.qJ)().then((async()=>{if(!s)return;const e=await window.getWindowIdAsync();!oe&&await o.ZP.fetch((0,y.EV)(e),"show"),oe&&await o.ZP.fetch((0,y.EV)(e),"moveToShow"),window.isShown=!0})),a(l))}))})),l}},94593:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(81296),i=a.n(n);const o=(0,a(23352).ZP)("ipc:proxy:"),r=new Proxy(i(),{get(e,t){let a=Reflect.get(e,t);return"function"==typeof a?(...n)=>{if(!window.isDestroyed)return a.apply(e,n);o.error(`window has been destroyed, we should not invoke fsp.${t})`)}:a}})},56222:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(72298);let i=0;function o(e,t){return new Promise((a=>{const o=i++;n.ipcRenderer.once(`internal-ipc-api-reply:${e}:${o}`,((e,{data:t=null})=>{a(t)})),n.ipcRenderer.send(`internal-ipc-api:${e}`,{payload:t,seq:o})}))}},28914:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(72298);const i=(0,a(23352).ZP)("ipc:proxy:"),o=new Proxy(n.ipcRenderer,{get(e,t){let a=Reflect.get(e,t);return"function"==typeof a?(...n)=>{if(!window.isDestroyed)return a.apply(e,n);i.error(`window has been destroyed, we should not invoke ipcRenderer.${t} with args (${JSON.stringify(n)})`)}:a}})},90435:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>l,he:()=>s});var n=a(96829),i=a(28914);const o=new Map;let r=0;function s(e,t){const a=o.get(e);return a?Promise.resolve().then((()=>a(t))):new Promise(((a,o)=>{const s=r++;i.Z.once(`ipc-api-reply:${e}:${s}`,((e,{error:t=null,data:i=null})=>{t?o((0,n.aq)(t)):a(i)})),i.Z.send(`ipc-api:${e}`,{payload:t,seq:s})}))}const l={fetch:s,route:function(e,t){if("function"!=typeof t)throw new Error(`IPC API "${e}" is routed to invalid handler: ${typeof t}`);if(o.has(e))throw new Error(`IPC API "${e}" is routed twice`);const a=`ipc-api:${e}`;if(i.Z.eventNames().includes(a))throw new Error(`IPC API "${e}" is routed twice`);const r=(a,{payload:o=null,seq:r=0}={})=>{const s=`ipc-api-reply:${e}:${r}`;Promise.resolve().then((()=>t(o))).then((e=>{i.Z.send(s,{data:e})})).catch((e=>{i.Z.send(s,{error:(0,n.SC)(e)})}))};return o.set(e,t),i.Z.on(a,r),i.Z.send("ipc-api-register",{apiName:e}),()=>{i.Z.send("ipc-api-unregister",{apiName:e}),i.Z.removeListener(a,r),o.delete(e)}}}},23352:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>d});var n=a(82134),i=a(96829),o=a(79409),r=a(72298);const s=new n.Jq(global.console,{colorful:!1}),l=new n.Yd({isDebugging:(0,o.Z)("version").indexOf("-alpha")>=0||(0,o.Z)("version").indexOf("-dev")>=0||i.x,handle(e){s.handle(e),function(e){r.ipcRenderer.send("logger:handleLogEvent",e)}(e)}}),d=(e=null)=>l.logger(e)},79409:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n=a(71017),i=a.n(n),o=a(57147),r=a.n(o),s=a(7104);let l=null;function d(e=null){return l||(l=JSON.parse(r().readFileSync(i().join((0,s.bY)(),"package.json")))),e?l[e]:l}},69931:(e,t,a)=>{"use strict";a.d(t,{Al:()=>u,ju:()=>l,pP:()=>d,zD:()=>c});var n=a(71017),i=a.n(n),o=a(94593),r=a(7104),s=a(5893);function l(e){return(0,s.u3)(i().join((0,r.bY)(),e))}function d(e){return(0,s.u3)(i().join((0,r.D8)(),e))}function c(e){return o.Z.readFile(i().join((0,r.bY)(),e))}const u=(...e)=>l(...e).replace("(","%28").replace(")","%29")},73884:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(82361),i=a.n(n),o=a(28914);const r=new(i()),s=r.emit;r.emit=function(e,...t){s.call(r,e,...t),d(e)&&o.Z.send("revents:broadcast",[e,...t])},r.on("newListener",(e=>{if(d(e)){0===r.eventNames().filter(d).length&&o.Z.send("revents:register")}})),r.on("removeListener",(e=>{if(d(e)){0===r.eventNames().filter(d).length&&o.Z.send("revents:unregister")}}));const l=r.removeAllListeners;function d(e){return"newListener"!==e&&"removeListener"!==e}r.removeAllListeners=function(e){if(!e)throw new Error("revents's removeAllListeners is forbidden!");if("newListener"===e||"removeListener"===e)throw new Error('revents\'s "newListener" and "removeListener" handler should not be removed');l.call(r,e)},o.Z.on("revents:broadcast",((e,t)=>{let a=JSON.parse(t);s.apply(r,a)})),window.addEventListener("unload",(()=>{o.Z.send("revents:unregister")}));const c=r},69297:(e,t,a)=>{"use strict";a.d(t,{Do:()=>o,Kl:()=>r,N1:()=>i,fv:()=>s,nz:()=>l});var n=a(28914);function i(){return n.Z.sendSync("usage-stats:data")}function o(){n.Z.send("usage-stats:increase",{type:"dwellTimeInZenMode",value:1e3})}function r(e=1){n.Z.send("usage-stats:increase",{type:"topicsAdded",value:e})}function s(e=1){n.Z.send("usage-stats:increase",{type:"sheetsAdded",value:e})}function l(e=1){n.Z.send("usage-stats:increase",{type:"eventsTriggered",value:e})}},18621:(e,t,a)=>{"use strict";a.d(t,{Fk:()=>o,L9:()=>i});var n=a(28914);function i(e){n.Z.send("usage-tracker:track-event",{event:e})}function o(e){n.Z.send("usage-tracker:track-view",{view:e})}},7104:(e,t,a)=>{"use strict";a.d(t,{D8:()=>c,Im:()=>f,L2:()=>v,N8:()=>u,O1:()=>p,Xl:()=>g,bY:()=>d,d6:()=>w,tM:()=>h,tY:()=>m});var n=a(71017),i=a.n(n),o=a(72298),r=a(56222);let s=null;let l=null;function d(){return l||(l=o.ipcRenderer.sendSync("workspace:appPath")),l}function c(){return i().join((s||(s=o.ipcRenderer.sendSync("workspace:userData")),s),"vana")}function u(){return i().join(c(),"workbooks")}function v(){return i().join(c(),"file-cache")}function m(){return i().join(c(),"theme")}function f(){return i().join(c(),"smart-color")}function p(){return i().join(c(),"illustrations")}function h(){return i().join(c(),"templates")}function w(){return i().join(d(),"static/snowbird/resource/")}async function g(){return s||(s=await(0,r.A)("workspace:userData")),i().join(s,"vana","workbooks")}},38629:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(69931);function i(e,t=null){document.documentElement.setAttribute("color-scheme","default"===e?"light":"dark");if(document.querySelector("#appearance_link"))return void("function"==typeof t&&t());const a=(0,n.ju)("static/vanakit/themes/vana.css"),i=document.createElement("link");i.type="text/css",i.id="appearance_link",i.rel="stylesheet",i.href=a,i.setAttribute("data-appearance",e),"function"==typeof t&&(i.onload=()=>t()),document.head.appendChild(i)}},20993:(e,t,a)=>{"use strict";a.d(t,{AZ:()=>$,Ao:()=>N,Bv:()=>w,C3:()=>F,CI:()=>B,CN:()=>x,DY:()=>s,I1:()=>p,JC:()=>i,NK:()=>c,Pr:()=>v,TJ:()=>I,Vs:()=>P,Wr:()=>Z,Xz:()=>C,Yj:()=>b,Zk:()=>u,_5:()=>S,_6:()=>k,cZ:()=>y,cx:()=>M,dx:()=>f,fR:()=>r,jB:()=>m,kI:()=>l,l5:()=>o,p3:()=>d,sF:()=>A,sG:()=>E,t0:()=>D,wH:()=>O,wp:()=>g,xG:()=>_,xg:()=>T,xy:()=>h,yo:()=>R,zH:()=>L});var n=a(18621);const i=e=>(0,n.L9)({eventName:"Gallery",eventAction:e}),o=()=>(0,n.L9)({eventAction:"insertTask",eventName:"insertTask"}),r=e=>(0,n.L9)({eventAction:"editTask",eventName:e}),s=()=>(0,n.L9)({eventAction:"cancelTask",eventName:"cancelTask"}),l=e=>(0,n.L9)({eventAction:"highlightTask",eventName:e}),d=e=>(0,n.L9)({eventAction:"insertIllustration",eventName:e}),c=e=>(0,n.L9)({eventAction:"searchIllustration",eventName:e}),u=e=>(0,n.L9)({eventAction:"insertIllustrationPro",eventName:e}),v=(e,t,a)=>(0,n.L9)({eventAction:"openTemplateType",eventName:`${e}_${t}_${a}`}),m=e=>(0,n.L9)({eventAction:"popPW",eventName:e}),f=e=>(0,n.L9)({eventAction:"clickPW",eventName:e}),p=()=>{(0,n.L9)({eventAction:"cancelOverlap"})},h=()=>(0,n.L9)({eventAction:"paymentPage"}),w=()=>(0,n.L9)({eventAction:"paymentPageCN"}),g=()=>(0,n.L9)({eventAction:"paymentSuccessful"}),I=()=>(0,n.L9)({eventAction:"paymentSuccessfulCN"}),y=e=>(0,n.L9)({eventName:"PWD-sp35-240515",eventAction:e}),b=()=>(0,n.L9)({eventAction:"sharetoCollaboration"}),T=()=>(0,n.L9)({eventAction:"sharetoEvernote"}),E=e=>(0,n.L9)({eventAction:"pweDisplay",eventName:e}),F=e=>(0,n.L9)({eventAction:"pweContinue",eventName:e}),k=e=>(0,n.L9)({eventAction:"closePwe",eventName:e}),x=e=>(0,n.L9)({eventAction:"pweOrder",eventName:e}),P=e=>(0,n.L9)({eventAction:"purchaseSource",eventName:e}),_=e=>(0,n.L9)({eventAction:"purchaseWindow",eventName:e}),A=({region:e,productId:t})=>(0,n.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButton"+e.toLowerCase(),eventName:t}),L=({region:e,productId:t})=>(0,n.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButtonMAS"+e.toLowerCase(),eventName:t}),S=()=>(0,n.L9)({eventAction:"autoDisconnect"}),C=()=>(0,n.L9)({eventAction:"disableSmartGuideline",eventName:"disableSmartGuideline"}),M=()=>(0,n.L9)({eventAction:"enableSmartGuideline",eventName:"enableSmartGuideline"}),R=()=>(0,n.L9)({eventAction:"clickSearchMaps",eventName:"clickSearchMaps"}),N=()=>(0,n.L9)({eventAction:"insertTaskInfo",eventName:"insertTaskInfo"}),Z=()=>(0,n.L9)({eventAction:"removeTaskInfo",eventName:"removeTaskInfo"}),O=()=>(0,n.L9)({eventAction:"enableAutoCalculate",eventName:"enableAutoCalculate"}),D=()=>(0,n.L9)({eventAction:"disableAutoCalculate",eventName:"disableAutoCalculate"}),$=()=>(0,n.L9)({eventAction:"disableDisplayinTopic",eventName:"disableDisplayinTopic"}),B=()=>(0,n.L9)({eventAction:"enableDisplayinTopic",eventName:"enableDisplayinTopic"})},1031:(e,t,a)=>{"use strict";a.d(t,{g:()=>o});var n=a(2954),i=a(87141);const o=e=>{let t=e||{planType:i.k9.PERSONAL};const a=(0,n.iH)(!1),o=e=>{a.value=(0,i.Yh)().checkActivationValid(e)};return(0,n.YP)((()=>(0,i.Yh)().subscriptionPlan),(()=>{o(t)}),{immediate:!0}),{isActivationValid:a,updatePlanPayload:e=>{t=e,o(e)}}}},67159:(e,t,a)=>{"use strict";a.d(t,{Dm:()=>b,MP:()=>R,nu:()=>Z,Xb:()=>f,t7:()=>$,pm:()=>O,tc:()=>g});var n=a(54856),i=a(90435),o=a(87141),r=a(2954),s=a(5893),l=a(94593),d=a(7104),c=a(23352),u=a(71017),v=a.n(u),m=a(69931);const f=()=>{const e=(0,c.ZP)("launch-window-recent"),t=(0,r.Fl)((()=>(0,o.km)().recentlyOpenedItems)),a=(0,r.Fl)((()=>(0,o.km)().recentlyOpenedItemsFromCloud)),{setRecentlyOpenedItemsFromCloud:u,removeRecentlyOpenedItemFromCloud:f}=(0,o.km)(),{showNormalFailureToast:p}=O(),h=(0,r.iH)(!1),w=(0,r.Fl)((()=>{var e;return h.value&&!(null===(e=a.value)||void 0===e?void 0:e.length)})),g=(0,m.ju)("static/assets/images/new/thumbnail.svg"),I=(0,m.ju)("static/assets/images/new/cloud.svg");return{recentItems:(0,r.Fl)((()=>{var e,n;return[...(0,o.c7)().fireflyToken&&(0,o.c7)().user&&(null===(e=a.value)||void 0===e?void 0:e.map((e=>({name:e.name,id:e.id,parentFolderId:e.parentFolderId,teamId:e.teamId,modifiedTime:e.lastModifiedTime,sortTime:e.updatedTime||e.lastModifiedTime||e.createdTime,fileIcon:I,fromCloud:!0,type:"file",xmindId:e.xmindId}))))||[],...(null===(n=t.value)||void 0===n?void 0:n.map((({source:e,timestamp:t,previewUrl:a})=>{const n=(0,s.ab)(e).slice(0,-6),i=v().join((0,d.D8)(),a||"");return{id:e,name:n,previewURL:(null==a?void 0:a.endsWith("png"))&&l.Z.existsSync(i)?(0,m.pP)(a):g,fromCloud:!1,modifiedTime:t,sortTime:t,type:"file"}})))||[]].sort(((e,t)=>new Date(t.sortTime).getTime()-new Date(e.sortTime).getTime()))})),isCloudRecordIniting:w,refreshCloudRecentItems:async()=>{var t;h.value=!0;try{const e=await i.ZP.fetch(n.rM.LIST_RECENT_FILES);if(!(null==e?void 0:e.files)||!e.files.length)return;const a=null===(t=null==e?void 0:e.files)||void 0===t?void 0:t.filter((e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.extension)||void 0===t?void 0:t.data)||void 0===a?void 0:a.accessMode})).map((e=>{var t,a,n,i,o,r;return{id:e.id,name:e.name,parentFolderId:null===(a=null===(t=e.extension)||void 0===t?void 0:t.data)||void 0===a?void 0:a.parentFolderId,teamId:null===(i=null===(n=e.extension)||void 0===n?void 0:n.data)||void 0===i?void 0:i.teamId,createdTime:e.createdTime,lastModifiedTime:e.lastModifiedTime,updatedTime:e.updatedTime,xmindId:null===(r=null===(o=e.extension)||void 0===o?void 0:o.data)||void 0===r?void 0:r.xmindId}}));u(a)}catch(t){e.error("Failed to get recent files")}finally{h.value=!1}},removeRecentlyItemFromCloud:async e=>{try{await i.ZP.fetch(n.rM.DELETE_RECENT_FILES,{fileIds:[e]}),f(e)}catch(e){p()}}}};var p=a(67657),h=a(68769),w=a(31945);const g=(()=>{const e=Symbol("trash"),t=new Map;return()=>{if(t.has(e))return t.get(e);const a=(()=>{const e=(0,o.JE)().T,{showNormalFailureToast:t,showUnableConnectToast:a}=O(),s=(0,o._t)((0,w.b3)(window.id)),l=(0,r.iH)({}),d=(0,r.iH)(["root"]),c=(0,r.iH)({}),u=(0,r.Fl)((()=>c.value[v.value]&&!m.value)),v=(0,r.Fl)((()=>{const e=d.value.length-1;return d.value[e]})),m=(0,r.Fl)((()=>l.value[v.value])),f=(0,r.Fl)((()=>{var t;const a=d.value.length-1;if(a<0)return"";const n=d.value[a-1],i=l.value[n];return(null===(t=null==i?void 0:i.folderItems.find((e=>(null==e?void 0:e.folderId)===v.value)))||void 0===t?void 0:t.name)||e("Trash")})),g=async e=>{var t,o,r;try{if(c.value[e])return;c.value={...c.value,[e]:!0};const{items:a,parents:s}=null!==(t=await i.ZP.fetch("root"!==e?n.rM.LIST_TRASH:n.rM.LIST_ROOT_TRASH,{folderId:"root"===e?null:e}))&&void 0!==t?t:{};if(!a||!s)return;c.value={...c.value,[e]:!1};const d=s[s.length-1],u=null==d?void 0:d.folderId,v=null==d?void 0:d.name,m=null===(o=null==a?void 0:a.filter((e=>{var t;return"folder"===(null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.type)})))||void 0===o?void 0:o.map((e=>({...e.metadata,trashedDate:e.trashedDate}))),f=null===(r=null==a?void 0:a.filter((e=>{var t;return"file"===(null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.type)})))||void 0===r?void 0:r.map((e=>({...e.metadata,trashedDate:e.trashedDate})));l.value={...l.value,[e]:{folderItems:m,fileItems:f,parentFolderId:u,parentFolderName:v}}}catch(e){a()}finally{c.value={...c.value,[e]:!1}}};return{trash:l,currentTrashFolderName:f,currentTrashFolder:m,currentTrashFolderId:v,trashFolderPathHistory:d,isCurrentFolderInit:u,intoTrashFolder:e=>{d.value.push(e)},backTrashFolder:()=>{d.value.length<=1||d.value.pop()},emptyTrash:async()=>{s().updateContexts({"launchWindow.isBusy":!0});const a=await p.dialog.showMessageBox((0,p.getCurrentWindow)(),{type:"question",message:e("Empty Trash?"),detail:e("Are you sure you want to proceed? This action cannot be undone."),buttons:[e("Cancel"),e("Empty")],defaultId:1,cancelId:0});if(s().updateContexts({"launchWindow.isBusy":!1}),1===a.response)try{await i.ZP.fetch(n.rM.EMPTY_TRASH),l.value={}}catch(e){t()}},refreshTrash:g,restoreFromTrash:async({fileIds:e,folderIds:a,teamId:o,isTeamOwner:r})=>{try{await i.ZP.fetch(n.rM.MOVE_FROM_TRASH,{fileIds:e,folderIds:a,teamId:o,isTeamOwner:r}),await g(v.value)}catch(e){(null==e?void 0:e.code)===h.R.EXCEED_FILES_LIMIT?await i.ZP.fetch(n.Gy,{name:"action.createMapOfCloud",payload:JSON.parse(e.message)}):t()}},deleteFromTrash:async({fileIds:a,folderIds:o})=>{s().updateContexts({"launchWindow.isBusy":!0});const r=await p.dialog.showMessageBox((0,p.getCurrentWindow)(),{type:"question",message:e("Delete This File?"),detail:e("Are you sure you want to proceed? This action cannot be undone."),buttons:[e("Cancel"),e("Delete")],defaultId:1,cancelId:0});if(s().updateContexts({"launchWindow.isBusy":!1}),1===r.response)try{await i.ZP.fetch(n.rM.DRIVE_REMOVE,{fileIds:a,folderIds:o}),await g(v.value)}catch(e){t()}}}})();return t.set(e,a),a}})();var I=a(96829);const y=require("fs/promises");var b,T=a.n(y),E=a(55733),F=a.n(E),k=a(6712),x=a(63902),P=a(47306),_=a(62004),A=a(6113),L=a.n(A),S=a(52517);function C(){const e=(0,c.ZP)("launch-window-drive-file"),t=(0,o.JE)().T,{showNormalFailureToast:a,showStorageLimitFailureToast:s,openSendInvitationByEmailToast:l,openSendInvitationByEmailOfCNToast:d,openInviteLinkCopiedToast:u}=O(),m=(0,r.iH)([]),f=(0,r.iH)(!1),w=(0,r.Fl)((()=>m.value.map((e=>({id:e.id,status:e.status,fileName:v().basename(e.filePath,v().extname(e.filePath)),statusMessage:e.statusMessage}))))),g=(0,r.Fl)((()=>m.value.findIndex((e=>e.status===b.UPLOADING))>-1)),y=(0,r.Fl)((()=>m.value.findIndex((e=>e.status===b.FAILED))>-1)),E=e=>{const t=m.value.findIndex((t=>t.id===e));t>-1&&m.value.splice(t,1)},A=(e,t,a)=>{const n=m.value.findIndex((t=>t.id===e));n>-1&&(m.value[n].status=t,m.value[n].statusMessage=a)},C=async(t,a)=>{const o=await T().readFile(t),r=await F().loadAsync(o),{encrypted:s,passwordHint:l}=await(0,x.n4)(r);if(!s)return o;const{result:d}=await i.ZP.fetch(n.Fx,{name:"dialog-enterpassword",parentId:window.id,wait:!0,query:{errEncryptCount:a,filename:v().basename(t),hint:l||""}}),c=null==d?void 0:d.password;if(!c)return;let u;try{u=await(0,P.Zp)(o,{password:c,decrypt:(t,a,n)=>function(t,a,n){if(!t||!a||!n)return a;if(!t.encrypted)return a;const{password:i}=n;if(!i)return a;const{keyDerivationIterationCount:o,keyDerivationSalt:r,keyDerivationSize:s,keyDerivationIV:l}=t;if(!(o&&r&&s&&l))return a;const d=Buffer.from(r,"base64"),c=Buffer.from(l,"base64"),u=o,v=s/8,m=L().pbkdf2Sync(i,d,u,v,"sha512");return function(t,a,n,i){try{const e=L().createDecipheriv(a,n,i),o=Buffer.from(t);return Buffer.from(e.update(o,void 0,"hex")+e.final("hex"),"hex")}catch(a){return e.info("Failed to decrypt",a),t}}(a,"aes-128-cbc",m,c)}(a,t,{password:n.password})})}catch(e){return C(t,(a||0)+1)}if(!u)return;const m=await F().loadAsync(u);return m.files["Thumbnails/"]&&m.remove("Thumbnails/"),await m.generateAsync({type:"nodebuffer",compression:"STORE"})},M=async()=>{const e=await p.dialog.showOpenDialog((0,p.getCurrentWindow)(),{properties:["openFile","multiSelections"],filters:[{name:t("Xmind Workbook"),extensions:["xmind"]}]});if(e.canceled)return;const a=[],n=[];for(const t of e.filePaths){const e=await T().readFile(t),i=await F().loadAsync(e),{encrypted:o}=await(0,x.n4)(i);o?n.push(t):a.push(t)}return{encryptFiles:a,decryptFiles:n}},R=new Map,N=async({uploadId:e,filePath:r,teamId:l,folderId:d,accessMode:c,fileContent:u,fileName:p})=>{((e,t)=>{t=t||(0,I.hb)(),m.value.push({id:t,filePath:e,status:b.UPLOADING})})(r,e),p=null!=p?p:v().basename(r,v().extname(r));const w=null!=u?u:await T().readFile(r),g=await F().loadAsync(w),y=await(0,S.u)((async({path:e})=>await g.file(e).async("string")),(async()=>{})),E=l===(0,o.c7)().user,{teammatePayload:k}=await i.ZP.fetch(n.rM.TEAMMATE_PAYLOAD,{teamId:l}).catch((e=>({teammatePayload:null}))),x="owner"===(null==k?void 0:k.role);if(!await i.ZP.fetch(n.Gy,{name:"action.uploadMultipleSheet",payload:{planType:E?o.k9.PERSONAL:o.k9.TEAM,teamId:l,isTeamOwner:x,sheetNum:y.sheets.length}}))return A(e,b.FAILED,t("Maps limited to 3 sheets"));const P=new AbortController,L=P.signal;R.set(e,P);const C=new File([w],p);try{const{listFolder:t}=Z();await(0,_.Y)().uploadFile({accessMode:c,fileName:p,file:C,parentFolderId:d,teamId:l,isTeamOwner:x,signal:L}),A(e,b.SUCCESS),f.value=!1,await t({folderId:d})}catch(o){if(L.aborted)return;let r=o.message;switch(o.code){case h.R.EXCEED_FILES_LIMIT:await i.ZP.fetch(n.Gy,{name:"action.createMapOfCloud",payload:JSON.parse(o.message)}),D(),r=t("File limit reached");break;case h.R.FILE_CORRUPTED_FAILURE:r=t("File Broken");break;case h.R.STORAGE_LIMIT_FAILURE:r=t("Storage Limit Reached"),f.value=!0,D(),s();break;case h.R.NO_PERMISSION_FAILURE:r=t("Unsupported Access Mode");break;case h.R.FILE_ATTACHMENT_TOO_LARGE:r=t("Attachment size limit: 10MB");break;case h.R.FILE_IMAGE_TOO_LARGE:r=t("Image size limit: 10MB");break;case h.R.FILE_MAP_CONTENT_TOO_LARGE:r=t("Map content size limit: 20MB");break;default:a()}A(e,b.FAILED,r)}},D=()=>{for(const[e,t]of R)t.abort(),E(e);R.clear(),$()},$=()=>{m.value=[]};return{creatFromCloudMap:e=>{const t=`cloud://host.xmind.app/${e}`;i.ZP.fetch(n.NF,{source:t}),window.close()},uploadFiles:async(t,a)=>{try{const e=await M();null==e||e.encryptFiles.forEach((async e=>{const n=(0,I.hb)();await N({uploadId:n,filePath:e,teamId:t,folderId:a,accessMode:k.bjY.Private})})),null==e||e.decryptFiles.forEach((async e=>{const n=(0,I.hb)(),i=await C(e);i?await N({uploadId:n,filePath:e,teamId:t,folderId:a,accessMode:k.bjY.Private,fileContent:i}):A(n,b.FAILED)}))}catch(t){e.error("Failed to upload files")}},renameFile:async(e,t)=>{var o;const{result:r}=await i.ZP.fetch(n.Fx,{name:"dialog-launch-window-input-box",parentId:(0,p.getCurrentWindow)().id,wait:!0,query:{type:"renameFile",value:t}}),s=null==r?void 0:r.value;if(s)try{const{currFolder:t,listFolder:a}=Z();await i.ZP.fetch(n.rM.RENAME_FILE,{fileId:e,fileName:s}),(null===(o=t.value)||void 0===o?void 0:o.folderId)&&await a({folderId:t.value.folderId})}catch(e){a()}},cancelUploadFiles:e=>{const t=R.get(e);t&&(t.abort(),R.delete(e)),E(e)},clearUploadTasks:$,cancelAllUploadFiles:D,isStorageLimitReached:f,uploadFileTasks:w,isUploading:g,hasUploadFailed:y,shareFile:async function(e){const t="cn"===(0,o.qr)().serviceRegion,{result:a}=await i.ZP.fetch(n.Fx,{name:"dialog-invite-collaborators",parentId:window.id,wait:!0,query:{...e,fromHome:!0}});(null==a?void 0:a.inviteSuccessByEmail)&&(t?d():l()),(null==a?void 0:a.inviteFailedByEmail)&&(null==a?void 0:a.invalidInvites)&&(await i.ZP.fetch(n.Fx,{name:"dialog-confirm",parentId:window.id,wait:!0,query:{type:"invite-failed-by-email-of-cn",invalidInvites:a.invalidInvites}}),u())}}}function M(){const{showNormalFailureToast:e}=O();return{createFolder:async t=>{try{const{listFolder:e}=Z(),{parentFolderId:a,folderName:o}=t;await i.ZP.fetch(n.rM.CREATE_FOLDER,{parentFolderId:a,folderName:o}),await e({folderId:a})}catch(t){e()}},renameFolder:async(t,a)=>{var o;try{const{listFolder:e,currFolder:r}=Z(),{result:s}=await i.ZP.fetch(n.Fx,{name:"dialog-launch-window-input-box",parentId:(0,p.getCurrentWindow)().id,wait:!0,query:{type:"renameFolder",value:a}}),l=null==s?void 0:s.value;if(!l)return;await i.ZP.fetch(n.rM.RENAME_FOLDER,{folderId:t,folderName:l}),(null===(o=r.value)||void 0===o?void 0:o.folderId)&&await e({folderId:r.value.folderId})}catch(t){e()}}}}!function(e){e.UPLOADING="uploading",e.FAILED="failed",e.SUCCESS="success"}(b||(b={}));const R=(()=>{const e=Symbol("drive"),t=new Map;return()=>{if(t.has(e))return t.get(e);const a=(()=>{const e=(0,c.ZP)("launch-window-drive"),t=(0,o.JE)().T,{showMapNotFoundToast:a,showNormalFailureToast:s,showStorageLimitFailureToast:l,showNoPermissionToast:d,showUnableConnectToast:u,showToast:v}=O(),{teams:m,canEditTeam:f,currentViewTeamId:p}=$(),w=(0,r.iH)({}),g=(0,r.iH)({}),I=(0,r.Fl)((()=>{var e;const t=g.value[p.value];return t&&null!==(e=null==t?void 0:t.viewFolderPath)&&void 0!==e?e:[]})),y=(0,r.Fl)((()=>{if(0===I.value.length)return"";const e=I.value.length-1;return I.value[e]})),b=(0,r.Fl)((()=>1===I.value.length)),T=(0,r.Fl)((()=>w.value[y.value])),E=(0,r.Fl)((()=>{var e;if(!y.value)return;const t=I.value.findIndex((e=>e===y.value));if(t<1)return;const a=t-1,n=I.value[a],i=w.value[n],o=null===(e=null==i?void 0:i.folderItems)||void 0===e?void 0:e.find((e=>(null==e?void 0:e.folderId)===y.value));return null==o?void 0:o.name})),F=new Map,k=(0,r.iH)({}),x=(e,t)=>{const a=k.value[e];k.value={...k.value,[e]:{...a,...t}}},P=async(t,o)=>{var r;try{if(!t)return;const a=k.value[t];if(null==a?void 0:a.loading)return;let s="";if(o){if(s=F.get(t),!s)return}else F.delete(t);const l=null===(r=g.value[p.value])||void 0===r?void 0:r.toShowItemId;x(t,{loading:!0,isContinueLoad:o});const[d,c]=await Promise.all([i.ZP.fetch(n.rM.LIST_DRIVE_WITH_PAGINATION,{folderId:t,type:"folder"}),i.ZP.fetch(n.rM.LIST_DRIVE_WITH_PAGINATION,{folderId:t,type:"file",lastKey:s,itemIdToFind:l})]);if(x(t,{loading:!1,isContinueLoad:!1}),!d||!c)return void e.error("Failed to list drive");F.set(t,c.lastKey);const u=w.value[t];w.value=u&&o?{...w.value,[t]:{folderItems:u.folderItems,fileItems:u.fileItems.concat(c.items)}}:{...w.value,[t]:{folderItems:d.items,fileItems:c.items}}}catch(e){e.code===h.R.NOT_FOUND?a():u()}},_=({teamId:e,viewFolderPath:t,toShowItemId:a})=>{g.value={...g.value,[e]:{viewFolderPath:t,toShowItemId:a}}},A=async e=>{if(!e)return;const t=L(e);if(!t)return;const a=t.parentFolderId,n=w.value[a];if(!n)return;const i="folder"===t.type?n.folderItems.findIndex((t=>t.folderId===e)):n.fileItems.findIndex((t=>t.fileId===e));-1!==i&&("folder"===t.type?n.folderItems.splice(i,1):n.fileItems.splice(i,1))},L=(e,t)=>{if(t){const a=w.value[t];if(!a)return;const n=a.folderItems.find((t=>t.folderId===e));if(n)return n;const i=a.fileItems.find((t=>t.fileId===e));if(i)return i;for(const t of a.folderItems){const a=L(e,t.folderId);if(a)return a}}else for(const t in w.value){const a=L(e,t);if(a)return a}};return{listDriveItem:P,duplicateDriveItem:async({folderIds:e,fileIds:a,toParentFolderId:o,teamId:r,isTeamOwner:c})=>{try{await i.ZP.fetch(n.rM.DRIVE_DUPLICATE,{folderIds:e,fileIds:a,toParentFolderId:o,teamId:r,isTeamOwner:c}),await P(o),e.length>0?v({message:t("Folder duplicated."),type:"success"}):v({message:t("File duplicated."),type:"success"})}catch(e){switch(null==e?void 0:e.code){case h.R.EXCEED_FILES_LIMIT:await i.ZP.fetch(n.Gy,{name:"action.createMapOfCloud",payload:JSON.parse(e.message)});break;case h.R.STORAGE_LIMIT_FAILURE:l();break;case h.R.NO_PERMISSION_FAILURE:d();break;default:s()}}},moveDriveItemToTrash:async({fileIds:e,folderIds:t})=>{try{if(!e&&!t)return;await i.ZP.fetch(n.rM.MOVE_TO_TRASH,{fileIds:e,folderIds:t}),null==e||e.forEach((e=>{A(e)})),null==t||t.forEach((e=>{A(e)}))}catch(e){s()}},moveDriveItem:async({folderIds:e,fileIds:t,originTeamId:a,originTeamName:r,parentFolderId:c,isOriginTeamOwner:u})=>{var v;try{const s=u?f.value:[{teamId:a,name:r}],l=e,d=[...I.value,...e],p=await Promise.all(s.map((async({teamId:e,name:t})=>({teamId:e,teamName:t,folder:await i.ZP.fetch(n.rM.LIST_ALL_FOLDERS,{teamId:e})})))),h={},w=(e,t,a)=>!e||e.length<1?[]:(a&&(e=e.filter((e=>!a.includes(e.metadata.folderId)))),e.map((e=>{var n,i,o;return h[null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.folderId]=t,{value:null===(i=null==e?void 0:e.metadata)||void 0===i?void 0:i.folderId,text:null===(o=null==e?void 0:e.metadata)||void 0===o?void 0:o.name,expanded:d.includes(e.metadata.folderId),items:w(null==e?void 0:e.children,t,a)}}))),g=p.map((({teamId:e,teamName:t,folder:a})=>(h[e]=e,{value:e,text:t,expanded:d.includes(e),items:w(a,e,l)}))),{result:y}=await i.ZP.fetch(n.Fx,{name:"dialog-team-drive-move",wait:!0,parentId:window.id,query:{folderTree:JSON.stringify(g),selectedItemId:[c]}}),b=null==y?void 0:y.value;if(!b)return;const T=h[b],E=T===(0,o.c7)().user;let F=E;E||(F="owner"===(null===(v=m.value.find((e=>e.teamId===T)))||void 0===v?void 0:v.role)),await i.ZP.fetch(n.rM.DRIVE_MOVE,{folderIds:e,fileIds:t,toParentFolderId:b,teamId:T,isTeamOwner:F}),null==e||e.forEach((e=>{A(e)})),null==t||t.forEach((e=>{A(e)})),P(b)}catch(e){switch(null==e?void 0:e.code){case h.R.EXCEED_FILES_LIMIT:await i.ZP.fetch(n.Gy,{name:"action.createMapOfCloud",payload:JSON.parse(e.message)});break;case h.R.STORAGE_LIMIT_FAILURE:l();break;case h.R.NO_PERMISSION_FAILURE:d();break;default:s()}}},showFileInTeamDrive:async({fileId:e,folderId:t,teamId:a})=>{var o;if(e&&t&&a)try{const[r,s]=await Promise.all([i.ZP.fetch(n.rM.GET_FOLDER_PATHS,{folderId:t}),P(t)]),l=null===(o=null==r?void 0:r.parents)||void 0===o?void 0:o.map((e=>e.folderId));_({teamId:a,viewFolderPath:[a,...l],selectedItemId:e,toShowItemId:e}),await i.ZP.fetch(n.Fx,{name:"new",query:{tab:`team-${a}`}})}catch(e){s()}},clearToShowItem:e=>{const t=g.value[e];t&&_({teamId:e,viewFolderPath:t.viewFolderPath,toShowItemId:""})},removeDriveItem:A,appendDriveItem:async(e,t,a)=>{var n,i;if(!e)return;const o=w.value[e];o&&("file"===t?null===(n=o.fileItems)||void 0===n||n.unshift(a):null===(i=o.folderItems)||void 0===i||i.unshift(a))},updateDriveItem:async(e,{name:t})=>{if(!e)return;const a=L(e);if(!a)return;const n=a.parentFolderId,i=w.value[n];if(!i)return;const o="folder"===a.type?i.folderItems.findIndex((t=>t.folderId===e)):i.fileItems.findIndex((t=>t.fileId===e));if(-1!==o){const e={...a,name:t};"folder"===a.type?i.folderItems.splice(o,1,e):i.fileItems.splice(o,1,e)}},intoFolder:({folderId:e,teamId:t})=>{var a;if(!e)return;const n=g.value[t];_({teamId:t,viewFolderPath:[...null!==(a=null==n?void 0:n.viewFolderPath)&&void 0!==a?a:[],e]})},backFolder:({teamId:e})=>{const t=g.value[e],a=null==t?void 0:t.viewFolderPath;!a||a.length<1||a[a.length-1]&&_({teamId:e,viewFolderPath:a.slice(0,-1)})},setFolderStatus:x,drives:w,currentFolder:T,requestStatusMap:k,teamDrivesViewRecord:g,currentFolderId:y,currentFolderName:E,folderPathHistory:I,isCurrentDriveRoot:b,...C(),...M()}})();return t.set(e,a),a}})(),N=(0,c.ZP)("collaboration"),Z=(()=>{const e=Symbol("drive-v2"),t=new Map;return()=>{if(t.has(e))return t.get(e);const a=(()=>{const e=(0,o.JE)().T,{showToast:t,showUnableConnectToast:a,showStorageLimitFailureToast:s,showNoPermissionToast:l,showNormalFailureToast:d,openSearchTooManyRequestsToast:c}=O(),{myWorks:u,teams:v}=$(),m=(0,r.iH)(""),f=(0,r.iH)({}),p=(0,r.iH)({}),w=(0,r.iH)(!1),g=(0,r.Fl)((()=>f.value[m.value])),y=e=>{f.value={...f.value,[e.folderId]:{...e}}},b=async({folderId:e,fileId:t,loadMore:o})=>{var r,s,l,d,c;try{const a=null===(r=f.value[e])||void 0===r?void 0:r.lastKey;let u=null===(s=f.value[e])||void 0===s?void 0:s.lastFileId;if(o&&!a)return;if(o&&w.value)return;w.value=!!o;const[v,m,p]=await Promise.all([i.ZP.fetch(n.rM.GET_FOLDER_PATHS,{folderId:e}),i.ZP.fetch(n.rM.LIST_DRIVE_WITH_PAGINATION,{folderId:e,type:"folder"}),i.ZP.fetch(n.rM.LIST_DRIVE_WITH_PAGINATION,{folderId:e,type:"file",...!o&&!!u&&{itemIdToFind:u},...!!t&&{itemIdToFind:t},...!!o&&{lastKey:a}})]),h=v.parents.find((t=>t.folderId===e)),g=null===(l=v.parents.find((e=>e.folderId===(null==h?void 0:h.parentFolderId))))||void 0===l?void 0:l.name,I=v.parents.map((e=>({folderName:e.name,folderId:e.folderId})));let b=p.items;const T=null===(d=f.value[e])||void 0===d?void 0:d.fileItems;if(o&&T){const e=p.items.map((e=>e.fileId));b=T.filter((t=>!e.includes(t.fileId))).concat(p.items),u=null===(c=b[b.length-1])||void 0===c?void 0:c.fileId}y({folderId:e,folderName:null==h?void 0:h.name,parentFolderId:null==h?void 0:h.parentFolderId,parentFolderName:g,folderPaths:I,folderItems:m.items,fileItems:b,lastKey:p.lastKey,...u&&{lastFileId:u}})}catch(e){N.error("Failed to listFolder",e),e.code===h.R.NOT_FOUND?i.ZP.fetch(n.Fx,{name:"new",query:{tab:"recent"}}):a()}finally{o&&(w.value=!1)}},T=async e=>{var t;m.value=e.folderId,p.value={...p.value,[e.teamId]:e.folderId};const a=f.value[e.folderId]||{};y({...a,folderId:e.folderId,...e.folderName&&{folderName:e.folderName}}),await b({folderId:e.folderId,fileId:e.fileId}),(null===(t=g.value)||void 0===t?void 0:t.folderItems)&&Promise.all(g.value.folderItems.map((e=>b({folderId:e.folderId}))))};return{isDriveLoadingMore:w,folderMap:f,currFolder:g,teamFolderHistory:p,cleanDriveState:()=>{m.value="",f.value={},p.value={},w.value=!1},listFolder:b,goFolder:T,refreshFolder:async()=>{if(!g.value)return;const{folderId:e,folderName:t}=g.value;y({folderId:e,folderName:t}),await b({folderId:e})},loadMoreDrive:async()=>{var e,t,a,n;((null===(e=g.value)||void 0===e?void 0:e.folderItems)||(null===(t=g.value)||void 0===t?void 0:t.fileItems))&&(null===(a=g.value)||void 0===a?void 0:a.lastKey)&&(null===(n=g.value)||void 0===n?void 0:n.folderId)&&await b({folderId:g.value.folderId,loadMore:!0})},duplicateDrive:async a=>{try{await i.ZP.fetch(n.rM.DRIVE_DUPLICATE,a),await b({folderId:a.toParentFolderId}),a.folderIds.length>0?t({message:e("Folder duplicated."),type:"success"}):t({message:e("File duplicated."),type:"success"})}catch(e){switch(N.error("Failed to duplicateDrive",e),null==e?void 0:e.code){case h.R.EXCEED_FILES_LIMIT:await i.ZP.fetch(n.Gy,{name:"action.createMapOfCloud",payload:JSON.parse(e.message)});break;case h.R.STORAGE_LIMIT_FAILURE:s();break;case h.R.NO_PERMISSION_FAILURE:l();break;default:d()}}},moveDrive:async e=>{var t,a,r,c,m;try{const s=[u.value,...v.value].filter((t=>e.isTeamOwner?"viewer"!==t.role:t.teamId===e.teamId)).map((e=>({teamId:e.teamId,teamName:e.name}))),l=[e.teamId,...null===(a=null===(t=g.value)||void 0===t?void 0:t.folderPaths)||void 0===a?void 0:a.map((e=>e.folderId))],d=await Promise.all(s.map((e=>i.ZP.fetch(n.rM.LIST_ALL_FOLDERS,{teamId:e.teamId})))),f=t=>{let a=t;return e.folderId&&(a=t.filter((t=>t.metadata.folderId!==e.folderId))),a.map((e=>({value:`${e.metadata.teamId}-${e.metadata.folderId}`,text:e.metadata.name,expanded:l.includes(e.metadata.folderId),items:f(e.children)})))},p=s.map((({teamId:e,teamName:t})=>{const a=d.find((([t])=>(null==t?void 0:t.metadata.teamId)===e))||[];return{value:`${e}-${e}`,text:t,expanded:l.includes(e),items:f(a)}})),h=`drive-list:move-${e.fileId||e.folderId}-${(0,I.hb)()}`,w=i.ZP.route(h,(()=>p)),y=`${e.teamId}-${(null===(r=g.value)||void 0===r?void 0:r.folderId)||e.teamId}`,{result:T}=await i.ZP.fetch(n.Fx,{name:"dialog-team-drive-move",wait:!0,parentId:window.id,query:{defaultDrive:y,requestDriveListChannel:h}});if(w(),"string"!=typeof(null==T?void 0:T.value))return;const[E,F]=T.value.split("-"),k=E===(0,o.c7)().user;let x=k;k||(x="owner"===(null===(c=v.value.find((e=>e.teamId===E)))||void 0===c?void 0:c.role)),await i.ZP.fetch(n.rM.DRIVE_MOVE,{...e.folderId&&{folderIds:[e.folderId]},...e.fileId&&{fileIds:[e.fileId]},toParentFolderId:F,teamId:E,isTeamOwner:x}),(null===(m=g.value)||void 0===m?void 0:m.folderId)&&await b({folderId:g.value.folderId}),await b({folderId:F})}catch(e){switch(N.error("Failed to moveDrive",e),null==e?void 0:e.code){case h.R.EXCEED_FILES_LIMIT:await i.ZP.fetch(n.Gy,{name:"action.createMapOfCloud",payload:JSON.parse(e.message)});break;case h.R.STORAGE_LIMIT_FAILURE:s();break;case h.R.NO_PERMISSION_FAILURE:l();break;default:d()}}},moveDriveToTrash:async e=>{var t;try{if(!e.fileId&&!e.folderId)return;await i.ZP.fetch(n.rM.MOVE_TO_TRASH,{...e.fileId&&{fileIds:[e.fileId]},...e.folderId&&{folderIds:[e.folderId]}}),(null===(t=g.value)||void 0===t?void 0:t.folderId)&&await b({folderId:g.value.folderId})}catch(e){N.error("Failed to moveDriveToTrash",e),d()}},showMapLocation:async e=>{await i.ZP.fetch(n.Fx,{name:"new",query:{tab:`team-${e.teamId}`,fileId:e.fileId}}),await T(e),setTimeout((()=>{const t=`drive-${e.teamId}-${e.fileId}`,a=document.getElementById(t);a&&a.scrollIntoView()}))},searchFolder:async e=>{var t;const a=((null===(t=f.value[e.folderId])||void 0===t?void 0:t.folderItems)||[]).filter((t=>t.name.includes(e.searchPhrase)));try{return{folderItems:a,fileItems:(await i.ZP.fetch(n.rM.SEARCH_IN_FOLDER,e)).items}}catch(e){return N.error("Failed to searchFolder",e),e.code===h.R.TOO_MANY_REQUESTS&&c(),{folderItems:a,fileItems:[]}}}}})();return t.set(e,a),a}})(),O=(()=>{const e=Symbol("toast"),t=new Map;return()=>{if(t.has(e))return t.get(e);const a=(()=>{var e,t;const a=null===(t=null===(e=(0,r.FN)())||void 0===e?void 0:e.proxy)||void 0===t?void 0:t.$withUIKit,n=(0,o.JE)().T,i=e=>{const t=Object.assign({pos:"bottom-center",timeout:3e3,style:{marginBottom:"40px"}},e);a((e=>{e.toast.clearAll(),e.toast(t)}))},s=()=>a((e=>e.toast.closeAll()));return{showToast:i,showNormalFailureToast:()=>i({message:n("Operation failed, please try again later."),type:"error"}),showStorageLimitFailureToast:()=>i({message:n("Your storage limit has been reached."),type:"error"}),showNoPermissionToast:()=>i({message:n("You have left/been removed from the team."),type:"error"}),showUnableConnectToast:()=>i({message:n("Unable to connect to the server. Please try again later."),type:"error"}),showCopySuccessToast:()=>i({message:n("Copied to clipboard"),type:"success"}),showMapNotFoundToast:()=>i({message:n("This folder can't be opened. It may have been deleted."),type:"error"}),showConnectionOfflineToast:()=>i({message:n("You're offline. Reconnecting..."),type:"loading",timeout:null}),showConnectionRestoredToast:()=>{s(),i({message:n("Connection restored."),type:"success"})},openSendInvitationByEmailToast:()=>i({type:"success",message:n("Invitation sent")}),openSendInvitationByEmailOfCNToast:()=>i({type:"success",message:n("Invitation sent, and the link has been copied. Share it to start collaborating!")}),openInviteLinkCopiedToast:()=>{i({type:"success",message:n("Invite link copied.")})},openSearchTooManyRequestsToast:()=>{i({type:"error",message:n("Search too frequent!")})}}})();return t.set(e,a),a}})();var D=a(82937);const $=(()=>{const e=Symbol("default-team"),t=new Map;return()=>{if(t.has(e))return t.get(e);const a=(()=>{const e=(0,o.JE)().T,{showNormalFailureToast:t}=O(),a=(0,o._t)((0,w.b3)(window.id)),s=(0,r.Fl)((()=>(0,o.c7)().user)),l=(0,r.Fl)((()=>(0,o.c7)().primaryEmail)),d=(0,r.iH)([]),c=(0,r.iH)(!1),u=(0,r.Fl)((()=>({teamId:s.value,name:e("My Works"),role:"owner",creator:s.value,type:"team",avatar:(0,m.ju)("static/assets/images/new/tab-bar/my-works.svg")}))),v=(0,r.iH)(""),f=(0,r.Fl)((()=>[...d.value,u.value].find((e=>e.teamId===v.value)))),h=(0,r.Fl)((()=>{const e=d.value.find((e=>e.teamId===v.value));return null==e?void 0:e.name})),g=(0,r.Fl)((()=>{var e;return null===(e=[...d.value,u.value])||void 0===e?void 0:e.filter((e=>"viewer"!==(null==e?void 0:e.role)))})),I=e=>e.teamId!==s.value,y=async()=>{var e;c.value=!0;const t=await i.ZP.fetch(n.rM.LIST_JOINED_TEAMS);(0,o.c7)().updateAccount({joinedTeams:t.teams}),(null==t?void 0:t.teams)&&(d.value=[...null===(e=t.teams)||void 0===e?void 0:e.filter(I).map((e=>{var t;return{...e,avatar:null!==(t=e.imageUrl)&&void 0!==t?t:(0,D._)({name:e.name,xmindId:e.teamId,style:{fontSize:"14",fontWeight:"600",width:20,height:20}})}}))],c.value=!1)};return{canEditTeam:g,currentTeam:f,currentViewTeamId:v,currentTeamName:h,myWorks:u,teams:d,isTeamMetaRequesting:c,leaveTeam:async o=>{try{a().updateContexts({"launchWindow.isBusy":!0});const t=await p.dialog.showMessageBox((0,p.getCurrentWindow)(),{type:"question",message:e("Leave This Team?"),detail:e("You will permanently lose all access to the space and maps in this teams. This action cannot be undone."),buttons:[e("Cancel"),e("Leave")],defaultId:1,cancelId:0});if(a().updateContexts({"launchWindow.isBusy":!1}),1!==t.response)return;await i.ZP.fetch(n.rM.REMOVE_TEAMMATE,{teamId:o,xmindId:s.value,email:l.value}),await y()}catch(e){t()}},createTeam:async()=>{try{const{result:e}=await i.ZP.fetch(n.Fx,{name:"dialog-launch-window-input-box",wait:!0,parentId:window.id,query:{type:"createTeam"}}),t=null==e?void 0:e.value;if(!t)return;await i.ZP.fetch(n.rM.CREATE_TEAM,{name:t}),await y();const{rawData:a,license:r}=await i.ZP.fetch(n.lf.DEVICE_BIND),s=await i.ZP.fetch(n.rM.GET_TEAM_PROFILES,{ignoreCache:!1});(0,o.c7)().updateAccount({isHaveSubEver:null==r?void 0:r.hasSubId,monthOfPro:null==r?void 0:r.month,rawSubscriptionData:a,rawTeamSubscriptionData:s})}catch(e){t()}},deleteTeam:async o=>{try{a().updateContexts({"launchWindow.isBusy":!0});const t=await p.dialog.showMessageBox((0,p.getCurrentWindow)(),{type:"question",message:e("Delete This Team?"),detail:e("Delete team will permanently delete all resource within. This action cannot be undone."),buttons:[e("Cancel"),e("Delete")],defaultId:1,cancelId:0});if(a().updateContexts({"launchWindow.isBusy":!1}),1!==t.response)return;await i.ZP.fetch(n.rM.DELETE_TEAM,{teamId:o}),await y()}catch(e){t()}},renameTeam:async(e,a)=>{try{const{result:t}=await i.ZP.fetch(n.Fx,{name:"dialog-launch-window-input-box",wait:!0,parentId:window.id,query:{type:"renameTeam",value:a}}),o=null==t?void 0:t.value;if(!o)return;await i.ZP.fetch(n.rM.UPDATE_TEAM_NAME,{teamId:e,name:o}),await y()}catch(e){t()}},setCurrentViewTeam:e=>{v.value=e},refreshJoinedTeams:y,clearTeamsAndMyWorks:()=>{d.value=[]},goTeamMates:e=>i.ZP.fetch(n.rM.TEAMMATES_URL,{teamId:e}).then((e=>{p.shell.openExternal(null==e?void 0:e.url)})).catch((()=>t())),goTeamSettings:e=>i.ZP.fetch(n.rM.TEAM_SETTINGS_URL,{teamId:e}).then((e=>{p.shell.openExternal(null==e?void 0:e.url)})).catch((()=>t()))}})();return t.set(e,a),a}})()},62004:(e,t,a)=>{"use strict";a.d(t,{Y:()=>d});var n=a(6712),i=a(87141),o=a(68769),r=a(23352);class s extends Error{constructor(e,t){super(t),this.name="FireflyClientError",this.code=e}}const l=(0,r.ZP)("firefly-client"),d=(()=>{const e=Symbol("default-firefly-client"),t=new Map;return()=>{if(t.has(e))return t.get(e);const a=(()=>{const e=[{pre:async({init:e,url:t})=>{l.info(`[STARTED] ${e.method} ${t}`)},post:async({response:e,init:t,url:a})=>{if(e.status>=400){const n=await e.text();throw l.error(`[FAILED] ${t.method} ${a} ${e.status} ${n}`),new s(e.status,n)}l.info(`[DONE] ${t.method} ${a} ${e.status}`)}}],t=()=>{const t="cn"===(0,i.qr)().serviceRegion?"https://ai.xmind.cn":"https://xmind.ai";return new n.VKt({basePath:t,middleware:e,apiKey:()=>(0,i.c7)().fireflyToken})};return{uploadXapResource:({fileId:e,fileName:a,file:i})=>new n.iy8(t()).uploadXapResource({fileId:e,filename:a,file:new Blob([i])}),downloadXapResource:({fileId:e,fileName:a})=>new n.iy8(t()).downloadXapResource({fileId:e,filename:a}).then((e=>e.arrayBuffer())),uploadThumbnail:({fileId:e,file:a})=>new n.iy8(t()).uploadThumbnail({fileId:e,file:new Blob([a])}),getThumbnail:({fileId:e})=>new n.iy8(t()).getThumbnail({fileId:e}).then((e=>e.arrayBuffer())),uploadFile:async({file:e,fileName:a,parentFolderId:r,teamId:l,isTeamOwner:d,accessMode:c,signal:u})=>{try{return await new n.iy8(t()).uploadFile({file:e,parentFolderId:r,teamId:l,accessMode:c},(async e=>{const t=e.init.body;return t.set("file",t.get("file"),a),{...e.init,body:t,signal:u}})).catch((e=>{throw e}))}catch(e){if(402===e.code){const{message:t,limit:a}=JSON.parse(e.message);if(t===n.INE.ExceedFilesLimit){const e=l===(0,i.c7)().user;throw new s(o.R.EXCEED_FILES_LIMIT,JSON.stringify({planType:e?i.k9.PERSONAL:i.k9.TEAM,teamId:l,isTeamOwner:d,limitMapNumOfCloud:a}))}}switch(null==e?void 0:e.message){case n.ikF.InsufficientSpace:throw new s(o.R.STORAGE_LIMIT_FAILURE,"Insufficient space");case n.ikF.UnsupportedAccessMode:throw new s(o.R.NO_PERMISSION_FAILURE,"Unsupported access mode");case n.ikF.FileCorrupted:throw new s(o.R.FILE_CORRUPTED_FAILURE,"File corrupted");case n.ikF.ImageFileTooLarge:throw new s(o.R.FILE_IMAGE_TOO_LARGE,"Image size limit: 10MB");case n.ikF.FileAttachmentTooLarge:throw new s(o.R.FILE_ATTACHMENT_TOO_LARGE,"Attachment size limit: 10MB");case n.ikF.FileMapContentTooLarge:throw new s(o.R.FILE_MAP_CONTENT_TOO_LARGE,"Map content size limit: 20MB");default:throw new s(o.R.NETWORK_FAILURE,"Network failure")}}},getHocuspocusServerURL:({type:e,fileId:t})=>"cn"===(0,i.qr)().serviceRegion?`wss://ai.xmind.cn/api/drive/connection/${e}/${t}`:`wss://xmind.ai/api/drive/connection/${e}/${t}`,getShareLink:({fileId:e,fileName:t})=>"cn"===(0,i.qr)().serviceRegion?`Xmind${t} https://ai.xmind.cn/share/${e}`:`https://xmind.ai/share/${e}`,getThumbnailURL:({fileId:e,version:t})=>"cn"===(0,i.qr)().serviceRegion?`https://ai.xmind.cn/api/drive/file/${e}/Thumbnails/thumbnail.png?version=${t}`:`https://xmind.ai/api/drive/file/${e}/Thumbnails/thumbnail.png?version=${t}`}})();return t.set(e,a),a}})()},59474:(e,t,a)=>{"use strict";a.d(t,{i:()=>o});var n=a(77412),i=a(2954);const o=(0,n.Q_)("bootstrap",(()=>{const e=(0,i.iH)(!1),t=(0,i.iH)(0);return{ready:e,markReady:()=>e.value=!0,pendingJobs:t,startJob:()=>t.value+=1,endJob:()=>t.value-=1}}))},65428:(e,t,a)=>{"use strict";a.d(t,{r:()=>s});var n=a(54856),i=a(77412),o=a(2954),r=a(90435);const s=(0,i.Q_)("fonts",(()=>{const e=(0,o.iH)(!1),t=(0,o.iH)({systemFonts:{},vanaFonts:{}});return{loaded:e,markLoaded:()=>e.value=!0,getLoadedFonts:async()=>{if(!t.value||Object.keys(t.value.systemFonts).length<=0&&Object.keys(t.value.vanaFonts).length<=0){const e=await(0,r.he)(n.qz);t.value=e}return t.value}}}))},7710:(e,t,a)=>{"use strict";a.d(t,{l:()=>o});var n=a(77412),i=a(2954);const o=(0,n.Q_)("query",(()=>{const e=(0,i.iH)({});return{query:e,setQuery:t=>{e.value=t}}}))},2563:(e,t,a)=>{"use strict";a.d(t,{O:()=>o});var n=a(77412),i=a(2954);const o=(0,n.Q_)("renderer-app",(()=>{const e=(0,i.iH)(!1),t=(0,i.XI)([]),a=(0,i.XI)({}),n=(0,i.XI)([]);return{ignoreAppearanceChanged:e,updateIgnoreAppearance:t=>{e.value=t},builtinFontFamilies:t,updateBuiltinFontFamilies:e=>t.value=e,allFonts:a,updateAllFonts:e=>a.value=e,fontsForMindMap:n,updateFontsForMindMap:e=>n.value=e}}))},82937:(e,t,a)=>{"use strict";a.d(t,{_:()=>s,h:()=>r});var n=a(68214),i=a.n(n);const o=["#E65244","#FF9326","#EED346","#4CAF4E","#4F69F6","#4C49B7","#8A38DC"],r=({xmindId:e})=>{const t=parseInt(i()(e).toString(),16)%7;return{foregroundColor:"#fff",backgroundColor:o[t]}},s=({xmindId:e,name:t,style:a={}})=>{const n=r({xmindId:e}),i=((null==t?void 0:t[0])||"A").replace(/&/g,"").replace(/</g,"").replace(/>/g,"").replace(/"/g,"").replace(/'/g,"")||"A",o=(({backgroundColor:e,foregroundColor:t,avatarAbbreviation:a,width:n=24,height:i=24,fontSize:o="11",fontWeight:r="600"})=>{var s,l;const d=/(?<size>\d+)(?<unit>\w+)/.exec(o),c=Number((null===(s=null==d?void 0:d.groups)||void 0===s?void 0:s.size)||"12");return`\n<svg width="${n}" height="${i}" viewBox="0 0 ${n} ${i}" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="${n}" height="${i}" x="0"  y="0" rx="4" fill="${e}" fill-opacity="1" />\n  <text x="${n/2}" y="${(i-c)/2}" fill="${t}" text-anchor="middle" dominant-baseline="central" font-weight="${r}" font-size="${c}${(null===(l=null==d?void 0:d.groups)||void 0===l?void 0:l.unit)||""}" font-family="system-ui, sans-serif">\n     ${a.toUpperCase()}\n  </text>\n</svg>\n`})({backgroundColor:n.backgroundColor,foregroundColor:n.foregroundColor,avatarAbbreviation:i,width:a.width,height:a.height,fontSize:a.fontSize,fontWeight:a.fontWeight});return`data:image/svg+xml;utf8,${encodeURIComponent(o)}`}},57507:(e,t,a)=>{"use strict";a.d(t,{I:()=>r,k:()=>o});var n=a(67657);const{Menu:i}=n,o=(e,t={})=>{if(!e||!e.length)return;const a=i.buildFromTemplate(e);return a.popup({window:n.getCurrentWindow(),...t}),a},r=()=>{const e=i.getApplicationMenu();return e&&e.items||[]}},53775:(e,t,a)=>{"use strict";async function n(){await new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)}))))}async function i(e){return Promise.race([new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)})))),new Promise((t=>setTimeout(t,null!=e?e:200)))])}function o(e,t=300,a=!1){let n;function i(...t){n=void 0,a||e.apply(this,t)}const o=function(...o){void 0!==n&&clearTimeout(n),a&&!n&&e.apply(this,o),n=setTimeout(i.bind(this,...o),t)};return o.cancel=function(){void 0!==n&&(clearTimeout(n),n=void 0)},o}function r(e,t=300,a=!1){let n,i,o,r=!1;function s(){i=Date.now(),e.apply(this,o),void 0!==n&&(clearTimeout(n),n=void 0)}const l=function(...e){if(r)return;if(o=e,a&&!i)return void s.apply(this);const l=Date.now(),d=l-(null!=i?i:l);d>=t?s.apply(this):void 0===n&&(n=setTimeout(s.bind(this),t-d))};return l.cancel=function(e=!0){void 0!==n&&(clearTimeout(n),n=void 0),i=void 0,r=e},l}a.d(t,{Ds:()=>o,P2:()=>r,SX:()=>n,gH:()=>s,qJ:()=>i});const s=(e,t)=>{let a=e,n="";if("object"==typeof t){const e=new URLSearchParams;for(const a in t)e.append(a,t[a]);n=e.toString()}return a=a.includes("?")?a+"&"+n:a+"?"+n,a}},30858:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});const n=(0,a(2954).aZ)({__name:"spinner-skeleton-linear",props:{row:{default:2},leftBar:{type:Boolean}},setup:e=>({__sfc:!0})});a(2038);const i=(0,a(51900).Z)(n,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",e._l(e.row,(function(a){return t("div",{key:a,staticClass:"uk-flex uk-flex-middle skeleton"},[e.leftBar?t("div",{staticClass:"uk-margin-small-right skeleton-left-bar skeleton-content"}):e._e(),e._v(" "),t("div",{staticClass:"uk-width-expand skeleton-right-bar skeleton-content"})])})),0)}),[],!1,null,null,null).exports},6188:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(2954),i=a(87141);const o=(0,n.aZ)({__name:"team-tag",props:{plan:null,type:{default:"primary"}},setup(e){const t=e,a=(0,n.Fl)((()=>!t.plan||t.plan===i.kc.FREE)),o=(0,n.Fl)((()=>({[i.kc.FREE]:"Free",[i.kc.PRO]:"Pro",[i.kc.PROPLUS]:"Pro+",[i.kc.PREMIUM]:"Premium",[i.kc.DEPRECATED_TEAM]:"Team",[i.kc.DEPRECATED_PERSONAL]:"Personal",[i.pK.BUSINESS]:"Business",[i.pK.ENTERPRISE]:"Enterprise",[i.pK.DEPRECATED_ESSENTIAL]:"Essential",[i.pK.UN_SUPPORTED]:"Free",[i.pK.UN_KNOWN]:"Free"}[t.plan]||"Free")));return{__sfc:!0,props:t,isPlanFree:a,teamTagLabel:o}}});a(32164);const r=(0,a(51900).Z)(o,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"team-tag typography-caption-caption",class:{"team-tag-primary":"primary"===e.type,"team-tag-secondary":"secondary"===e.type,"is-free":a.isPlanFree}},[e._v("\n  "+e._s(a.teamTagLabel)+"\n")])}),[],!1,null,"666dbc6a",null).exports},2038:(e,t,a)=>{var n=a(99580);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("2b96f79c",n,!0,{})},31993:(e,t,a)=>{var n=a(83064);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("76f524b0",n,!0,{})},32164:(e,t,a)=>{var n=a(24631);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("f3273c32",n,!0,{})},93935:(e,t,a)=>{var n=a(83776);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("09c11687",n,!0,{})},97245:(e,t,a)=>{var n=a(41753);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("6ec303aa",n,!0,{})},45346:(e,t,a)=>{"use strict";function n(e,t){for(var a=[],n={},i=0;i<t.length;i++){var o=t[i],r=o[0],s={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};n[r]?n[r].parts.push(s):a.push(n[r]={id:r,parts:[s]})}return a}a.d(t,{Z:()=>f});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},r=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,d=!1,c=function(){},u=null,v="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,a,i){d=a,u=i||{};var r=n(e,t);return p(r),function(t){for(var a=[],i=0;i<r.length;i++){var s=r[i];(l=o[s.id]).refs--,a.push(l)}t?p(r=n(e,t)):r=[];for(i=0;i<a.length;i++){var l;if(0===(l=a[i]).refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete o[l.id]}}}}function p(e){for(var t=0;t<e.length;t++){var a=e[t],n=o[a.id];if(n){n.refs++;for(var i=0;i<n.parts.length;i++)n.parts[i](a.parts[i]);for(;i<a.parts.length;i++)n.parts.push(w(a.parts[i]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{var r=[];for(i=0;i<a.parts.length;i++)r.push(w(a.parts[i]));o[a.id]={id:a.id,refs:1,parts:r}}}}function h(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function w(e){var t,a,n=document.querySelector("style["+v+'~="'+e.id+'"]');if(n){if(d)return c;n.parentNode.removeChild(n)}if(m){var i=l++;n=s||(s=h()),t=y.bind(null,n,i,!1),a=y.bind(null,n,i,!0)}else n=h(),t=b.bind(null,n),a=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else a()}}var g,I=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function y(e,t,a,n){var i=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=I(t,i);else{var o=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function b(e,t){var a=t.css,n=t.media,i=t.sourceMap;if(n&&e.setAttribute("media",n),u.ssrId&&e.setAttribute(v,t.id),i&&(a+="\n/*# sourceURL="+i.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}},6113:e=>{"use strict";e.exports=require("crypto")},72298:e=>{"use strict";e.exports=require("electron")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")}},e=>{e.O(0,[8592,8970,8495,2517,4245],(()=>{return t=32391,e(e.s=t);var t}));var t=e.O();module.exports=t}]);