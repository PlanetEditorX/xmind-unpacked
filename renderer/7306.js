(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[7306],{29932:e=>{e.exports=function(e,t){for(var a=-1,i=null==e?0:e.length,r=Array(i);++a<i;)r[a]=t(e[a],a,e);return r}},89465:(e,t,a)=>{var i=a(38777);e.exports=function(e,t,a){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}},89881:(e,t,a)=>{var i=a(47816),r=a(99291)(i);e.exports=r},28483:(e,t,a)=>{var i=a(25063)();e.exports=i},47816:(e,t,a)=>{var i=a(28483),r=a(3674);e.exports=function(e,t){return e&&i(e,t,r)}},97786:(e,t,a)=>{var i=a(71811),r=a(40327);e.exports=function(e,t){for(var a=0,n=(t=i(t,e)).length;null!=e&&a<n;)e=e[r(t[a++])];return a&&a==n?e:void 0}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},2958:(e,t,a)=>{var i=a(46384),r=a(90939);e.exports=function(e,t,a,n){var o=a.length,l=o,s=!n;if(null==e)return!l;for(e=Object(e);o--;){var d=a[o];if(s&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++o<l;){var u=(d=a[o])[0],c=e[u],g=d[1];if(s&&d[2]){if(void 0===c&&!(u in e))return!1}else{var m=new i;if(n)var h=n(c,g,u,e,t,m);if(!(void 0===h?r(g,c,3,n,m):h))return!1}}return!0}},67206:(e,t,a)=>{var i=a(91573),r=a(16432),n=a(6557),o=a(1469),l=a(39601);e.exports=function(e){return"function"==typeof e?e:null==e?n:"object"==typeof e?o(e)?r(e[0],e[1]):i(e):l(e)}},69199:(e,t,a)=>{var i=a(89881),r=a(98612);e.exports=function(e,t){var a=-1,n=r(e)?Array(e.length):[];return i(e,(function(e,i,r){n[++a]=t(e,i,r)})),n}},91573:(e,t,a)=>{var i=a(2958),r=a(1499),n=a(42634);e.exports=function(e){var t=r(e);return 1==t.length&&t[0][2]?n(t[0][0],t[0][1]):function(a){return a===e||i(a,e,t)}}},16432:(e,t,a)=>{var i=a(90939),r=a(27361),n=a(79095),o=a(15403),l=a(89162),s=a(42634),d=a(40327);e.exports=function(e,t){return o(e)&&l(t)?s(d(e),t):function(a){var o=r(a,e);return void 0===o&&o===t?n(a,e):i(t,o,3)}}},82689:(e,t,a)=>{var i=a(29932),r=a(97786),n=a(67206),o=a(69199),l=a(71131),s=a(7518),d=a(85022),u=a(6557),c=a(1469);e.exports=function(e,t,a){t=t.length?i(t,(function(e){return c(e)?function(t){return r(t,1===e.length?e[0]:e)}:e})):[u];var g=-1;t=i(t,s(n));var m=o(e,(function(e,a,r){return{criteria:i(t,(function(t){return t(e)})),index:++g,value:e}}));return l(m,(function(e,t){return d(e,t,a)}))}},40371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:(e,t,a)=>{var i=a(97786);e.exports=function(e){return function(t){return i(t,e)}}},71131:e=>{e.exports=function(e,t){var a=e.length;for(e.sort(t);a--;)e[a]=e[a].value;return e}},80531:(e,t,a)=>{var i=a(62705),r=a(29932),n=a(1469),o=a(33448),l=i?i.prototype:void 0,s=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(n(t))return r(t,e)+"";if(o(t))return s?s.call(t):"";var a=t+"";return"0"==a&&1/t==-Infinity?"-0":a}},71811:(e,t,a)=>{var i=a(1469),r=a(15403),n=a(55514),o=a(79833);e.exports=function(e,t){return i(e)?e:r(e,t)?[e]:n(o(e))}},26393:(e,t,a)=>{var i=a(33448);e.exports=function(e,t){if(e!==t){var a=void 0!==e,r=null===e,n=e==e,o=i(e),l=void 0!==t,s=null===t,d=t==t,u=i(t);if(!s&&!u&&!o&&e>t||o&&l&&d&&!s&&!u||r&&l&&d||!a&&d||!n)return 1;if(!r&&!o&&!u&&e<t||u&&a&&n&&!r&&!o||s&&a&&n||!l&&n||!d)return-1}return 0}},85022:(e,t,a)=>{var i=a(26393);e.exports=function(e,t,a){for(var r=-1,n=e.criteria,o=t.criteria,l=n.length,s=a.length;++r<l;){var d=i(n[r],o[r]);if(d)return r>=s?d:d*("desc"==a[r]?-1:1)}return e.index-t.index}},99291:(e,t,a)=>{var i=a(98612);e.exports=function(e,t){return function(a,r){if(null==a)return a;if(!i(a))return e(a,r);for(var n=a.length,o=t?n:-1,l=Object(a);(t?o--:++o<n)&&!1!==r(l[o],o,l););return a}}},25063:e=>{e.exports=function(e){return function(t,a,i){for(var r=-1,n=Object(t),o=i(t),l=o.length;l--;){var s=o[e?l:++r];if(!1===a(n[s],s,n))break}return t}}},38777:(e,t,a)=>{var i=a(10852),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},1499:(e,t,a)=>{var i=a(89162),r=a(3674);e.exports=function(e){for(var t=r(e),a=t.length;a--;){var n=t[a],o=e[n];t[a]=[n,o,i(o)]}return t}},222:(e,t,a)=>{var i=a(71811),r=a(35694),n=a(1469),o=a(65776),l=a(41780),s=a(40327);e.exports=function(e,t,a){for(var d=-1,u=(t=i(t,e)).length,c=!1;++d<u;){var g=s(t[d]);if(!(c=null!=e&&a(e,g)))break;e=e[g]}return c||++d!=u?c:!!(u=null==e?0:e.length)&&l(u)&&o(g,u)&&(n(e)||r(e))}},15403:(e,t,a)=>{var i=a(1469),r=a(33448),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(i(e))return!1;var a=typeof e;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!r(e))||(o.test(e)||!n.test(e)||null!=t&&e in Object(t))}},89162:(e,t,a)=>{var i=a(13218);e.exports=function(e){return e==e&&!i(e)}},42634:e=>{e.exports=function(e,t){return function(a){return null!=a&&(a[e]===t&&(void 0!==t||e in Object(a)))}}},24523:(e,t,a)=>{var i=a(88306);e.exports=function(e){var t=i(e,(function(e){return 500===a.size&&a.clear(),e})),a=t.cache;return t}},55514:(e,t,a)=>{var i=a(24523),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,o=i((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,a,i,r){t.push(i?r.replace(n,"$1"):a||e)})),t}));e.exports=o},40327:(e,t,a)=>{var i=a(33448);e.exports=function(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},27361:(e,t,a)=>{var i=a(97786);e.exports=function(e,t,a){var r=null==e?void 0:i(e,t);return void 0===r?a:r}},79095:(e,t,a)=>{var i=a(13),r=a(222);e.exports=function(e,t){return null!=e&&r(e,t,i)}},6557:e=>{e.exports=function(e){return e}},66604:(e,t,a)=>{var i=a(89465),r=a(47816),n=a(67206);e.exports=function(e,t){var a={};return t=n(t,3),r(e,(function(e,r,n){i(a,r,t(e,r,n))})),a}},88306:(e,t,a)=>{var i=a(83369);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var a=function(){var i=arguments,r=t?t.apply(this,i):i[0],n=a.cache;if(n.has(r))return n.get(r);var o=e.apply(this,i);return a.cache=n.set(r,o)||n,o};return a.cache=new(r.Cache||i),a}r.Cache=i,e.exports=r},75472:(e,t,a)=>{var i=a(82689),r=a(1469);e.exports=function(e,t,a,n){return null==e?[]:(r(t)||(t=null==t?[]:[t]),r(a=n?void 0:a)||(a=null==a?[]:[a]),i(e,t,a))}},39601:(e,t,a)=>{var i=a(40371),r=a(79152),n=a(15403),o=a(40327);e.exports=function(e){return n(e)?i(o(e)):r(e)}},79833:(e,t,a)=>{var i=a(80531);e.exports=function(e){return null==e?"":i(e)}},87722:(e,t,a)=>{"use strict";a.d(t,{z:()=>i,Z:()=>I});var i,r=a(52517),n=a(41809),o=a(40623),l=a(60746),s=a(67463);!function(e){e.NONE="NONE",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE"}(i||(i={}));const d=462,u=64,c=[64,32,16,8,4,2];var g=a(69931);function m(e,t){return{baseP:e,top:t[0]||0,right:t[1]||0,bottom:t[2]||0,left:t[3]||0,style:{paddingTop:`${t[0]||0}px`,paddingRight:`${t[1]||0}px`,paddingBottom:`${t[2]||0}px`,paddingLeft:`${t[3]||0}px`}}}function h(e){return{radius:e,style:{borderRadius:`${e}px`}}}function p([e,t,a,i]){return{width:e,height:t,left:a,top:i,style:{position:"absolute",width:`${e}px`,height:`${t}px`,left:`${a}px`,top:`${i}px`}}}function v([e,t,a,i,r]){return{width:e,left:t,top:a,color:i,font:r,style:{position:"absolute",left:`${t}px`,top:`${a}px`,color:i,font:r}}}function b(e){return(0,l.sF)(e)>127.5}function x(e){return e?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.3)"}function f(e){return e?(0,g.ju)("static/images/map-shot/watermark-light.svg"):(0,g.ju)("static/images/map-shot/watermark-dark.svg")}function w(e){return Math.floor(100*e)/100}function S(e,t,a,i,r,n){e.beginPath(),e.moveTo(t+n,a),e.arcTo(t+i,a,t+i,a+r,n),e.arcTo(t+i,a+r,t,a+r,n),e.arcTo(t,a+r,t,a,n),e.arcTo(t,a,t+i,a,n),e.closePath()}const I=()=>{const e=(e,t)=>[1,2].includes(t.layout)?m(e,[e,e,e,e]):3===t.layout?m(e,[3*e,e,3*e,e]):4===t.layout?m(e,[e,e,3*e,e]):5===t.layout?m(e,[0,0,4*e,0]):6===t.layout?m(e,[e,0,3*e,0]):void 0,t=(e,t)=>{if(!e.width||!e.height)return 0;const a=(e.width+e.height)/2,i=Math.min(Math.max(Math.floor(a/50),1),60),r=Math.min(Math.max(2*i,2),120),n=r*t.watermarkScaleRatio<u;return e.height>d||n?Math.max(r,n?16:u):r},a=(t,a)=>{if(!t.width||!t.height||a.padding===i.NONE)return m(0,[0,0,0,0]);const r=(t.width+t.height)/2,n=Math.min(Math.max(Math.floor(r/50),1),60);if(a.padding===i.SMALL)return e(n,a);if(a.padding===i.MEDIUM){const t=Math.min(Math.max(2*n,2),120);return e(t,a)}if(a.padding===i.LARGE){const t=Math.min(Math.max(4*n,4),240);return e(t,a)}},g=(e,t)=>{if(!e.width||!e.height||t.radius===i.NONE)return h(0);const a=Math.min(e.width,e.height),r=Math.min(Math.max(Math.floor(a/35),1),120);if(t.radius===i.SMALL)return h(r);if(t.radius===i.MEDIUM){return h(Math.min(Math.max(2*r,2),240))}if(t.radius===i.LARGE){return h(Math.min(Math.max(4*r,4),480))}},I=e=>[e/1.5/1.5/1.5/1.5,e/1.5/1.5/1.5,e/1.5/1.5,e/1.5,e].map(w),y=(e,t)=>{if(!e.width||!e.height||t.padding===i.NONE||t.shadow===i.NONE)return{shadowOffsetX:[],shadowOffsetY:[],shadowBlur:[],shadowColor:[],style:{boxShadow:""}};const n=a(e,t),o=.8*Math.min(n.top,n.right,n.bottom,n.left),l=o/16,s=o/8,d=o/4,u=o/2,c=[l,s,d,u,o],g=[.8*l,.8*s,.8*d,.8*u,.8*o].map(w);let m=[];t.shadow===i.SMALL&&(m=I(.05)),t.shadow===i.MEDIUM&&(m=I(.1)),t.shadow===i.LARGE&&(m=I(.2));const h=(({h:e,s:t,l:a},i)=>i.map((i=>`hsl(${e}deg ${t}% ${a/4}% / ${i})`)))(r.s.hexStringToHSLObject(t.background),m);return{shadowOffsetX:[0,0,0,0,0],shadowOffsetY:(p=[c,g,h])[0],shadowBlur:p[1],shadowColor:p[2],style:{boxShadow:Array.from({length:5},((e,t)=>t)).map((e=>`0px ${p[0][e]}px ${p[1][e]}px ${p[2][e]}`)).join(", ")}};var p},Z=(e,r)=>{if(!r.isBrandingVisible)return p([0,0,0,0]);const n=a(e,r),o=t(e,r),l=n.bottom*r.watermarkScaleRatio<u||n.bottom<u&&e.height>d,s=Math.min((r.padding===i.NONE||l?o:n.bottom)/4,128),g=s/r.watermarkRatio*(r.isDateVisible?2:1)>e.width?c.filter((t=>t/r.watermarkRatio*(r.isDateVisible?2:1)+16<e.width))[0]:s,m=g/r.watermarkRatio,h=r.padding===i.NONE?e.height-o+(o-g)/2:l?n.top+e.height-(o+g)/2:n.top+e.height+(n.bottom-g)/2;return r.isDateVisible?p([m,g,r.padding===i.NONE?1.5*g:[5,6].includes(r.layout)?l?n.baseP+1.5*g:n.baseP:l?n.left+1.5*g:n.left,h]):p([m,g,r.padding===i.NONE?(e.width-m)/2:(n.left+n.right+e.width-m)/2,h])},W=()=>{const e=new Date;return`${e.getFullYear()} / ${e.getMonth()+1} / ${e.getDate()}`},T=(e,r)=>{if(!r.isDateVisible)return v([0,0,0,"",""]);const n=a(e,r),o=t(e,r),l=n.bottom*r.watermarkScaleRatio<u||n.bottom<u&&e.height>d,s=Math.min((r.padding===i.NONE||l?o:n.bottom)/4,128),g=s/r.watermarkRatio*(r.isBrandingVisible?2:1)>e.width?c.filter((t=>t/r.watermarkRatio*(r.isBrandingVisible?2:1)+16<e.width))[0]:s,m=`500 ${.83*g}px Nevermind`,h=function(e,t){const a=document.createElement("canvas").getContext("2d");a.font=t;const i=a.measureText(e);return{width:i.width,height:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent}}(W(),m),p=r.padding===i.NONE?e.height-o+(o-h.height)/2:l?n.top+e.height-(o+h.height)/2:n.top+e.height+(n.bottom-h.height)/2,f=b(r.background),w=b(r.mapBackground),S=x(f),I=x(w),y=l?I:S;return r.isBrandingVisible?v([h.width,r.padding===i.NONE?e.width-h.width-1.5*g:[5,6].includes(r.layout)?l?n.left+e.width-h.width-n.baseP-1.5*g:n.left+e.width-h.width-n.baseP:l?n.left+e.width-h.width-1.5*g:n.left+e.width-h.width,p,y,m]):v([h.width,r.padding===i.NONE?(e.width-h.height)/2:(n.left+n.right+e.width-h.height)/2,p,y,m])},L=(e,t)=>{const i=b(t.background),r=b(t.mapBackground),n=f(i),o=f(r),l=a(e,t);if(l.bottom<u&&e.height>d)return o;if(e.forPreview){if(l.bottom*t.watermarkScaleRatio<u)return o}return n};return{getImageEffectPreviewSize:e=>{let t=e.width,a=e.height;if(0===t||0===a)return{width:t,height:a};const i=t/a;return i>184/295&&(t=184,a=t/i),a>295&&(a=295,t=a*i),{width:t,height:a}},getImageEffectPadding:a,getImageEffectRadius:g,getImageEffectShadow:y,getImageEffectBranding:Z,getImageEffectDateStr:W,getImageEffectDate:T,getImageEffectInsidePaddingBottom:t,getImageEffectBrandingURL:L,buildImageEffect:async(e,t,r)=>{const c=await(0,s.p)(e);let m={width:c.width,height:c.height};const h=a(m,r),p=g(m,r),v=y(m,r),b=h.bottom<u&&m.height>d,x=(0,l.JX)(),f=document.createElement("canvas");f.width=c.width+h.left+h.right,f.height=c.height+h.top+h.bottom;const w=(0,l.yB)(f.width*x,f.height*x);w||(f.width=c.width/x+h.left+h.right,f.height=c.height/x+h.top+h.bottom,m={width:c.width/x,height:c.height/x});const I=f.getContext("2d");I.fillStyle="none"===r.background?"transparent":r.background,I.fillRect(0,0,f.width,f.height);const B=async()=>{const e=Z(m,r),t=T(m,r),a=L(m,r),i=await(0,s.p)(a);r.isBrandingVisible&&(I.imageSmoothingEnabled=!1,I.drawImage(i,e.left,e.top,e.width,e.height)),r.isDateVisible&&(I.fillStyle=t.color,I.font=t.font,I.fillText(W(),t.left,t.top))};!r.isBrandingVisible&&!r.isDateVisible||r.padding===i.NONE||b||await B(),r.shadow!==i.NONE&&(I.fillStyle=r.isTransparent?"transparent":r.mapBackground,Array.from({length:5},((e,t)=>t)).map((e=>{I.shadowOffsetX=v.shadowOffsetX[e],I.shadowOffsetY=v.shadowOffsetY[e],I.shadowBlur=v.shadowBlur[e],I.shadowColor=v.shadowColor[e],S(I,h.left,h.top,m.width,m.height,p.radius),I.fill()}))),r.radius!==i.NONE&&(S(I,h.left,h.top,m.width,m.height,p.radius),I.clip()),I.imageSmoothingEnabled=!1,I.drawImage(c,h.left,h.top,m.width,m.height),!r.isBrandingVisible&&!r.isDateVisible||r.padding!==i.NONE&&!b||await B();let P=f.toDataURL(o.zF[t]);return x>1&&w&&(P=(0,n.Hv)(P,72*x)),P}}}},37306:(e,t,a)=>{"use strict";a.r(t),a.d(t,{exportBranchAsPNG:()=>P,exportBranchAsSVG:()=>A,exportImage:()=>H});var i=a(54856),r=a(96829),n=a(90435),o=a(69931),l=a(18621),s=a(67463),d=a(84374),u=a(53364),c=a(71017),g=a.n(c),m=a(72298),h=a(41809),p=a(87141),v=a(5893),b=a(89411),x=a(87722),f=a(69361),w=a(94593),S=a(23352),I=a(13382),y=a(60746),Z=a(12455);const W=(0,S.ZP)("export:bitmap"),T={png:{name:"PNG",extensions:["png"]},jpeg:{name:"JPEG",extensions:["jpg","jpeg"]}},L={png:".png",jpeg:".jpg"},B={png:"data:image/png;base64,",jpeg:"data:image/jpeg;base64,"},P=async()=>{await(0,f.Ae)("png");const{activeSheetId:e,selection:t,document:a}=(0,d.nZ)(),i=(0,Z.A)().contexts["activation.isValid"],r=t.value.modelIds;if(0===r.length)return;const n=(0,f.nv)(r),o=new f.Y8,l=await Promise.all(n.map((async t=>{const r=a.value.query({id:t}).asTopic().title;return{fileName:o.makeSafeName(r),fileData:await C(e.value,{isBrandingInside:!i,transparent:!1},"png",t)}})));if(await(0,f.Gm)(),1===l.length){const{fileData:e,fileName:t}=l[0];F(e,t,"png")}else l.length>1&&D(l,"png")},C=async(e,{isBrandingInside:t=!1,transparent:a=!1,scale:i=1,aspectRatio:r=0,insidePaddingBottom:n=0},o,l)=>{const{getSheetViewer:s}=(0,d.nZ)(),u=s(e),c=await(0,f.J2)((()=>u.exportSVGElement({padding:{top:50,left:50,right:50,bottom:t?n+50:50},opaqueBackground:!a,aspectRatio:r,scopeTopicId:l})),W);if(!c)return;const g={data:c,scale:i,width:Number(c.getAttribute("width"))*i,height:Number(c.getAttribute("height"))*i};return await E(g,o)},F=async(e,t,a)=>{const i=await(0,I.ZZ)({title:"Export",properties:["createDirectory"],suggestPath:{suggestedName:t},filters:[T[a]]});i&&(await w.Z.writeFile(i,Buffer.from(e.slice(B[a].length),"base64")),(0,p.Rg)().addRateMasValue(10),m.shell.openPath(i))},D=async(e,t)=>{const{T:a}=(0,p.JE)(),i=await(0,I.eq)({folderName:null,dialogOptions:{buttonLabel:a("Save"),properties:["openDirectory","createDirectory"]}});if(!i)return;const r=(0,b.FU)().title||"",n=g().join(i,r);w.Z.ensureDirSync(n),await Promise.all(e.map((e=>{const{fileData:a,fileName:i}=e,r=g().join(n,i+L[t]);return(0,f.yS)(r,Buffer.from(a.slice(B[t].length),"base64"))}))),m.shell.openPath(n)},E=async(e,t)=>{const a=(0,y.gP)(),i=25.4/a.x,n=25.4/a.y,o=e.width,l=e.height,s={orientation:o>l?"landscape":"portrait",pageSize:{x:Math.max(Math.round(Math.min(o,l)*i)+1,21),y:Math.round(Math.max(o,l)*n)+1}},d=s.pageSize,u=s.orientation,c="portrait"===u?d.x:d.y,g="portrait"===u?d.y:d.x,m={x:Math.round(c*a.x/25.4),y:Math.round(g*a.y/25.4)},p="print_"+(0,r.hb)(),v=e.data;v.setAttribute("width",m.x.toString()),v.setAttribute("height",m.y.toString()),v.setAttribute("id",p),v.style.display="",v.classList.add("print-el"),v.setAttribute("width",e.width.toString()),v.setAttribute("height",e.height.toString());const b=(new XMLSerializer).serializeToString(v),x=new Blob([b],{type:"image/svg+xml"}),w=await new Promise((e=>{const t=new FileReader;t.onload=()=>{e(t.result)},t.readAsDataURL(x)})),S=(0,y.JX)();let I=await(0,f.sA)(w,S,"string",t);return S>1&&(I=(0,h.Hv)(I,72*S)),I};var R=a(67657);const A=async()=>{const{T:e}=(0,p.JE)(),{selection:t,document:a,activeSheet:i}=(0,d.nZ)(),{title:r,id:n}=i.value,o=t.value.modelIds;if(0===o.length)return;const l=(0,f.nv)(o),s=new f.Y8,u=await Promise.all(l.map((async e=>{var t;const i=await k(n,!1,e),o=a.value.query({id:e}).asTopic().title;return{fileName:null!==(t=s.makeSafeName(o))&&void 0!==t?t:r,fileData:i}})));if(1===u.length){const e=u[0],{fileData:t,fileName:a}=e,i=await(0,I.ZZ)({title:"Export",suggestPath:{suggestedName:a},properties:["createDirectory"],filters:[{name:"SVG",extensions:["svg"]}]});if(!i)return;await(0,f.yS)(i,t),(0,p.Rg)().addRateMasValue(10),m.shell.showItemInFolder(i)}else if(u.length>1){const t=await(0,I.eq)({folderName:r,dialogOptions:{buttonLabel:e("Save"),properties:["openDirectory","createDirectory"]}});if(!t)return;w.Z.existsSync(t)||w.Z.ensureDir(t),Promise.all(u.map((({fileData:e,fileName:a})=>{const i=g().join(t,a+".svg");return(0,f.yS)(i,e)}))).then((()=>m.shell.openPath(t)))}},k=async(e,t,a)=>{const{sheets:i,getSheetViewer:r}=(0,d.nZ)(),n=r(i.value.find((t=>t.id===e)).id),o=Date.now();(0,l.L9)({eventCategory:"export",eventAction:"durationExportSvg",eventValue:Date.now()-o});return(await n.exportSVGImage({padding:{left:50,right:50,top:50,bottom:50},opaqueBackground:!t,scopeTopicId:a})).svg};var N=a(40623);const M=async({sheetId:e,opaqueBackground:t,disableEmbedFonts:a,aspectRatio:i})=>{const r=[],{getSheetViewer:n,sheets:o}=(0,d.nZ)(),l=o.value.find((t=>t.id===e)),s=n(e),{exportSVGElementForLevelTwo:u,exportSVGElementWithSize:c}=s;await u({padding:{left:80,top:80,right:80,bottom:80},opaqueBackground:t,aspectRatio:i,disableEmbedFonts:a}).then((({svg:t,size:a})=>{const i=(new XMLSerializer).serializeToString(t);r.push({sheetId:e,topicId:l.rootTopic.id,data:i,width:a.width,height:a.height})}));const g=[...l.rootTopic.children,...l.rootTopic.detachedChildren].filter((({id:e})=>V(e))).map((n=>c({padding:{left:80,top:80,right:80,bottom:80},scopeTopicId:n.id,opaqueBackground:t,aspectRatio:i,disableEmbedFonts:a}).then((({svg:t,size:a})=>{const i=(new XMLSerializer).serializeToString(t);r.push({sheetId:e,topicId:n.id,data:i,width:a.width,height:a.height})}))));return await Promise.all(g),r},$={png:"data:image/png;base64,",jpeg:"data:image/jpeg;base64,"},j=async(e,t,a,i,r)=>{const{document:n,sheets:o}=(0,d.nZ)(),l=new f.Y8,s=(await Promise.all(e.map((e=>M({sheetId:e,opaqueBackground:a,aspectRatio:i}))))).flat().map((e=>{const{topicId:t,sheetId:a}=e,i=o.value.find((({id:e})=>e===a)).title,r=n.value.query({id:t}).asTopic(),s=l.makeSafeName(`${i}_${r.title||""}`);return{...e,basename:s}}));if("svg"===t)return s.map((({basename:e,data:t})=>({data:t,filename:e+".svg"})));if("png"===t){const e=s.map((({data:e,width:t,height:a,basename:i})=>O({data:e,width:t,height:a,scale:r},"png").then((e=>({data:Buffer.from(e.slice(22),"base64"),filename:i+".png"})))));return await Promise.all(e)}if("jpeg"===t){const e=s.map((({data:e,width:t,height:a,basename:i})=>O({data:e,width:t,height:a,scale:r},"jpeg").then((e=>({data:Buffer.from(e.slice(23),"base64"),filename:i+".jpg"})))));return await Promise.all(e)}},O=async(e,t)=>{const{data:a,width:i,height:r,scale:n}=e,o=(new DOMParser).parseFromString(a,"image/svg+xml").firstChild;return await E({width:i*n,height:r*n,scale:n,data:o},t)},G=async(e,t)=>{const a=e.map((({data:e,filename:a})=>{const i=g().join(t,a);(0,f.yS)(i,e)}));await Promise.all(a)},V=e=>{const{document:t}=(0,d.nZ)(),a=t.value.query({id:e}).asTopic(),i=a.children.length>0,r="folded"===a.branchState;return i&&!r},H=async(e="png",t={})=>{const a=await async function(){var e,t;const{styles:a}=(0,d.nZ)(),{mapBackgroundColorString:i}=(0,u.wB)(),r=i.value,n=((null===(t=null===(e=a.value)||void 0===e?void 0:e.mapCandidateColors)||void 0===t?void 0:t.value)||[]).filter((e=>e!==r)),l=n[0],c=(0,o.ju)("static/images/map-shot/watermark-light.svg"),g=await(0,s.p)(c),m=g.height/g.width;return{mapBackground:r,background:l,layoutBackground:n,watermarkRatio:m}}(),i=await z(e,a);if(i){if(i.isSmartSplit)return(async e=>{const{sheetSelection:t,type:a,transparent:i,aspectRatio:r,scale:n}=e,{T:o}=(0,p.JE)(),{title:l}=(0,b.FU)(),{buildImageEffect:s}=(0,x.Z)(),d=await(0,I.eq)({folderName:null,dialogOptions:{buttonLabel:o("Save"),properties:["openDirectory","createDirectory"],securityScopedBookmarks:!0}});if(!d)return;const u=g().join(d,l);w.Z.existsSync(u)||w.Z.ensureDir(u),await(0,f.Ae)(a);const c=await j(t,a,!i,r,n),m=await Promise.all(c.map((async({data:t,filename:a})=>{if("png"===e.type||"jpeg"===e.type){const i=$[e.type],r=`${i}${t.toString("base64")}`,n=await s(r,e.type,e.imageEffectSetting);return{data:Buffer.from(n.slice(i.length),"base64"),filename:a}}return{data:t,filename:a}})));await G(m,u),await(0,f.Gm)(),R.shell.openPath(u)})(i);if("png"===i.type||"jpeg"===i.type)if("current-map"===i.contentScope){const e=Date.now();await(async e=>{var t;const{isBrandingInside:a,insidePaddingBottom:i,transparent:r,scale:n,aspectRatio:o,type:l}=e;if("jpeg"!==l&&"png"!==l)return;const{activeSheet:s,activeSheetId:u}=(0,d.nZ)(),{buildImageEffect:c}=(0,x.Z)();await(0,f.Ae)(l);const g=await C(u.value,{isBrandingInside:a,insidePaddingBottom:i,transparent:r,scale:n,aspectRatio:o},l),m=await c(g,l,e.imageEffectSetting),h=s.value.title,p=s.value.rootTopic.title,b=(0,v.N6)(null!==(t=null!=p?p:h)&&void 0!==t?t:"");await(0,f.Gm)(),await F(m,b,l)})(i),(0,l.L9)({eventCategory:"export",eventAction:"durationExportPng",eventValue:Date.now()-e})}else await(async e=>{const{isBrandingInside:t,insidePaddingBottom:a,transparent:i,scale:r,aspectRatio:n,type:o}=e;if("jpeg"!==o&&"png"!==o)return;const{sheets:l}=(0,d.nZ)(),{buildImageEffect:s}=(0,x.Z)(),u=l.value.filter((t=>e.sheetSelection.includes(t.id)));await(0,f.Ae)(o);const c=new f.Y8,g=await Promise.all(u.map((async l=>{const d=await C(l.id,{isBrandingInside:t,insidePaddingBottom:a,transparent:i,scale:r,aspectRatio:n},o),u=await s(d,o,e.imageEffectSetting),g=l.title;return{fileData:u,fileName:c.makeSafeName(g)}})));await(0,f.Gm)(),await D(g,o)})(i);else"svg"===i.type&&("current-map"===i.contentScope?await(async e=>{var t;const{activeSheetId:a,activeSheet:i}=(0,d.nZ)();await(0,f.Ae)("svg");const r=await k(a.value,e),n=i.value.title,o=i.value.rootTopic.title,l=(0,v.N6)(null!==(t=null!=o?o:n)&&void 0!==t?t:"");await(0,f.Gm)();const s=await(0,I.ZZ)({title:"Export",suggestPath:{suggestedName:l},properties:["createDirectory"],filters:[{name:"SVG",extensions:["svg"]}]});s&&(await(0,f.yS)(s,r),(0,p.Rg)().addRateMasValue(10),m.shell.showItemInFolder(s))})(i.transparent):await(async e=>{await(0,f.Ae)("svg"),await(0,f.C7)();const{sheetSelection:t,transparent:a}=e,i=(0,p.JE)().T,{sheets:r}=(0,d.nZ)(),{title:n}=(0,b.FU)(),o=(0,I.am)({});await(0,f.Gm)();const{canceled:l,filePaths:s}=await R.dialog.showOpenDialog((0,R.getCurrentWindow)(),{buttonLabel:i("Save"),properties:["openDirectory","createDirectory"],defaultPath:o,securityScopedBookmarks:!0});if(l||!s||!s.length)return;const u=g().join(s[0],n);w.Z.existsSync(u)||w.Z.ensureDir(u);const c=r.value.filter((e=>t.includes(e.id))),h=new f.Y8;Promise.all(c.map((async e=>{const t=await k(e.id,a),i=e.title,r=h.makeSafeName(i),n=g().join(u,r+".svg");return(0,f.yS)(n,t)}))).then((()=>{m.shell.openPath(u)}))})(i),(0,l.L9)({eventCategory:"export",eventAction:"exportSvg"}))}},z=async(e="png",t)=>{var a;const{sheets:o,activeSheetFigure:l,activeSheetId:s,getSheetViewer:u}=(0,d.nZ)(),c=(0,r.hb)(),g=n.ZP.route((0,i.vN)(c),(async({sheetId:e,opaqueBackground:t,isBrandingInside:a,aspectRatio:i,insidePaddingBottom:r})=>{const n=u(e),o=await n.exportSVGElement({opaqueBackground:t,disableEmbedFonts:!0,padding:{top:50,left:50,right:50,bottom:a?r+50:50},aspectRatio:i});return{data:o.outerHTML,width:o.getAttribute("width"),height:o.getAttribute("height")}})),m=n.ZP.route((0,i.Yo)(c,"export"),M),h=n.ZP.route((0,i.Ub)(c),(()=>t)),p=null===(a=l.value)||void 0===a?void 0:a.bounds,v=o.value.map((e=>e.id)),b=v.filter((e=>(e=>{const{sheets:t}=(0,d.nZ)(),a=t.value.find((t=>t.id===e)).rootTopic,i=a.structureClass;return![N.vP.SPREADSHEET,N.vP.COLUMNSPREADSHEET,N.vP.TREETABLE,N.vP.TOPTITLETREETABLE].includes(i)&&[...a.children,...a.detachedChildren].some((e=>V(e.id)))})(e))),x=o.value.map((e=>e.title)),{result:f}=await n.ZP.fetch(i.Fx,{name:"dialog-export-to-image",parentId:window.id,wait:!0,query:{type:e,bound:[(null==p?void 0:p.width)||0,(null==p?void 0:p.height)||0],editorId:window.editorId,currentSheetId:s.value,routeId:c,sheetIds:v,sheetTitles:x,splitAbleSheetIds:b}});return g&&g(),m&&m(),h&&h(),f}},19593:(e,t,a)=>{"use strict";a.d(t,{M:()=>p});var i=a(2954),r=a(87141),n=a(54856),o=a(94593),l=a(90435),s=a(91878),d=a(84374),u=a(88495),c=a(69931),g=a(18621),m=a(10042),h=a(12455);const p=()=>{const{T:e}=(0,r.JE)(),t=(0,d.nZ)(),{addSmartColorTheme:a,removeSmartColorTheme:p,removeFavoriteColorTheme:v,changeLastUsedColorThemeId:b}=(0,r.fl)(),{colorThemeById:x,getSmartColorThemeGroups:f,getClassicColorThemeGroups:w,getColorThemePreviewDataUrl:S}=t.themeModule,I=(0,i.Fl)((()=>(0,r.fl)().favoriteColorThemeIds)),y=(0,i.Fl)((()=>({normal:(0,c.ju)("static/assets/images/color-theme-panel/favorite-normal.svg"),active:(0,c.ju)("static/assets/images/color-theme-panel/favorite-active.svg")}))),Z=(0,i.iH)(!1);d.h0.initThemePreviewModule().then((()=>{Z.value=!0}));const W=(0,i.Fl)((()=>(0,h.A)().contexts["activation.isValid"])),T=(0,i.Fl)((()=>(0,r.S)().language)),L=(0,i.Fl)((()=>{const{activeSheet:e,allTopicsWithin:a}=t;return e.value?Array.from(a([e.value.rootTopic])).length:0})),B=(0,i.Fl)((()=>f(G(T.value)))),P=(0,i.Fl)((()=>w(G(T.value)))),C=e=>{const t=F.value.find((t=>t.idList.includes(e)));if(!t)return!1;return"pro"===t.license},F=(0,i.Fl)((()=>[B.value,P.value,D.value].flat())),D=(0,i.Fl)((()=>(0,r.fl)().smartColorThemes.map((e=>({license:"free",idList:e.idList,colorList:e.colorList,themeName:e.name,uiName:e.name,customThemeGroupId:e.id}))))),E=(0,i.Fl)((()=>{Z.value;const e=I.value.map((e=>{const a=D.value.find((({idList:t})=>t&&t.includes(e))),i=a&&a.customThemeGroupId,r=i?O(i,e):S(e,t.currentSkeletonId.value);return{id:e,previewURL:r,isLimited:!W.value&&C(e)}})),a=F.value.reduce(((e,t)=>e.concat(t.idList)),[]),i=e.filter((e=>a.includes(e.id)));return i.length>0?[{label:"favorite",items:i}]:[]})),R=(0,i.Fl)((()=>!!E.value.length)),A=(0,i.Fl)((()=>!!D.value.length)),k=(0,i.iH)("smart"),N=(0,i.Fl)((()=>t.currentColorThemeId.value||"")),M=(0,i.Fl)((()=>{Z.value;const e=[B.value,P.value,D.value].flat().find((({idList:e})=>e.includes(N.value)));if(!e)return null;const{themeName:a,uiName:i,colorList:r,idList:n,license:o}=e;let l=!1,s="";return"customThemeGroupId"in e&&(l=!0,s=e.customThemeGroupId),{label:a,uiName:i,colorLists:r,items:n.map((e=>({id:e,previewURL:l?O(s,e):S(e,t.currentSkeletonId.value),isLimited:"pro"===o}))),customThemeGroupId:s}})),$=(0,i.Fl)((()=>{const t=[{id:"smart",label:e("Colorful")},{id:"classic",label:e("Classic")}],a=[{id:"favorite",label:e("Favorite")}],i=[{id:"custom",label:e("My Color")}];return[...R.value?a:[],...A.value?i:[],...t]})),j=(0,i.Fl)((()=>B.value.find((e=>"Rainbow"===e.themeName)).idList.map((e=>x(e).theme.map.multiLineColors.split(" "))))),O=(e,a)=>{const i=(0,s.B6)(e,a);return(0,s.jS)(i,t.currentSkeletonId.value||s.s9)||""};function G(e){switch(e){case"zh-CN":return u.SQ.ZH_CN;case"en-US":default:return u.SQ.EN_US;case"zh-HK":return u.SQ.ZH_HK;case"zh-TW":return u.SQ.ZH_TW;case"ja-JP":return u.SQ.JA_JP;case"de-DE":return u.SQ.DE_DE;case"fr-FR":return u.SQ.FR_FR;case"es":return u.SQ.ES_ES;case"id":return u.SQ.ID_ID;case"it-IT":return u.SQ.IT_IT;case"ko":return u.SQ.KR_KR;case"pt-PT":return u.SQ.PT_PT;case"ru-RU":return u.SQ.RU_RU;case"th":return u.SQ.TH_TH}}return{tabs:$,topicCount:L,currentTabId:k,currentThemeId:N,currentThemePreview:M,favoriteThemeList:E,smartColorThemeList:B,customColorThemeList:D,classicColorThemeList:P,rainbowColorLists:j,duplicateCustomSCT:async e=>{if(!await l.ZP.fetch(n.Gy,{name:"action.duplicateColorTheme",channel:(0,n.gk)(window.editorId)}))return;const{themeName:t,colorList:i}=(0,s.CC)(e);(0,s.PV)({themeName:t,colorList:i},(({themeName:e,colorList:t,customSCTId:i,idList:r})=>{a({id:i,name:e,colorList:t,idList:r})}))},changeColorTheme:e=>{b(e);const t=(e=>{const t=D.value.find((({idList:t})=>t&&t.includes(e))),a=t&&t.customThemeGroupId;let i=null;return i=t?(0,s.B6)(a,e):x(e),i})(e),a={name:"mutate:changeColorTheme",inputValue:e,payload:{colorThemeById:()=>t}};(0,d.nZ)().executeMutationAction(a)},getFavoriteIcon:e=>I.value.includes(e)?y.value.active:y.value.normal,handleFavorite:e=>{I.value.includes(e)?(0,r.fl)().removeFavoriteColorTheme(e):((0,g.L9)({eventAction:"favoriteColor",eventName:(0,m.XO)(e)?`${e} (colored)`:e}),(0,r.fl)().addFavoriteColorTheme(e))},deleteCustomSCT:(e,t)=>(0,s.LN)(e,(()=>{p(e),t.forEach((e=>v(e)))})),renameCustomSCT:(e,t)=>{const{colorList:i,idList:r,colorThemeList:n}=(0,s.CC)(e);let l;try{l=JSON.stringify({themeName:t,colorList:i,idList:r,colorThemeList:n})}catch(e){return}(0,s.uv)(e,(async e=>await o.Z.writeFile(e,l)),(()=>{p(e),a({id:e,name:t,colorList:i,idList:r})}))},isProThemeById:C}}},83669:(e,t,a)=>{"use strict";a.d(t,{Y:()=>w,u:()=>S});var i=a(71017),r=a.n(i),n=a(2954),o=a(66604),l=a.n(o),s=a(53775),d=a(96829),u=a(63111),c=a(54856),g=a(87141),m=a(90435),h=a(94593),p=a(7104),v=a(69931),b=a(10042),x=a(40623),f=a(84374);function w(){u.nd?m.ZP.fetch(c.QN):(0,g.JX)().handleCommand("customizeTheme")}const S=()=>{const{activeSheet:e,activeSheetFigure:t,changeDoc:a,exportThemeStyles:i}=(0,f.nZ)(),{handleCommand:o}=(0,g.JX)(),u=(0,n.iH)(),w=(0,n.Fl)((()=>{var t;return null===(t=e.value)||void 0===t?void 0:t.skeletonThemeId})),S=(0,n.Fl)((()=>(0,g.EJ)().customThemes)),y={cache:{},fetch:async function(e){if(void 0===this.cache[e]){let t={};if(e.startsWith("CUSTOM-")){const a=(0,b.jp)(e);t=a.content?a:{content:a}}else t=JSON.parse(await(0,v.zD)(`static/styles/themes/${e}.json`));this.cache[e]=t}return this.cache[e]},get:function(e){return this.cache[e]}},Z=()=>{if(!e.value)return{};const t=l()(i(),(e=>({properties:f.HG.serializeStylePropertiesToJSON(e)})));return t.sheet&&(t.map=t.sheet,delete t.sheet),t},W=(0,n.Fl)((()=>S.value.map((e=>{const t=T(e.id);return Object.assign(e,{previewURL:t})})).sort(((e,t)=>t.createdAt-e.createdAt)))),T=e=>{const t=x.wZ[u.value]||"map-unbalance",a=S.value.find((({id:t})=>t===e)),i=a&&a.createdAt;return h.Z.existsSync(r().join((0,p.tY)(),e,"previews",`${t}.svg`))?(0,v.pP)(`theme/${e}/previews/${t}.svg`)+`?t=${i}`:I(w.value)},L=async(e,t)=>{o("themeEditor",{id:e,editorId:window.editorId,parentId:window.id,centralTopicStructureClass:u.value,openType:t})},B=(0,s.Ds)((async()=>{const e="CUSTOM-"+(0,d.hb)();L(e,"create-theme")}),200);let P=null,C=null;return(0,n.bv)((()=>{var i,r,n,o;u.value=null!==(o=null===(n=null===(i=t.value)||void 0===i?void 0:i.topicFigureByTopicId[null===(r=t.value)||void 0===r?void 0:r.modelAttributes.centralTopicId])||void 0===n?void 0:n.modelAttributes.structureClass)&&void 0!==o?o:x.vP.MAPCLOCKWISE,P=m.ZP.route((0,c.Tg)(window.editorId),(()=>({content:Z(),id:"CUSTOM-"+(0,d.hb)()}))),C=m.ZP.route((0,c._L)(window.editorId),(t=>{if(!t)return;const i=Object.keys(t).reduce(((e,a)=>{var i;const r=f.HG.deserializeStyleElementFromJSON(t[a].properties);return e=null!==(i=e.styleFor(a,r))&&void 0!==i?i:e}),e.value.asMutable());a(i.commit().ownerDocument)}))})),(0,n.Jd)((()=>{P&&P(),C&&C()})),{customThemes:S,computedThemes:W,handleAddNewCustomTheme:B,findTheme:async e=>{e.startsWith("CUSTOM-")&&(delete y.cache[e],await y.fetch(e));return{...W.value.find((({id:t})=>t===e)),...await y.fetch(e)}},openThemeEditor:L}},I=(e,t)=>{const a=(0,b.Li)(t);let i=f.h0.getColorThemePreviewById(e||b.s9,a);return i||(i=f.h0.getColorThemePreviewById(b.s9,a)),i?`data:image/svg+xml,${encodeURIComponent(i)}`:""}},53364:(e,t,a)=>{"use strict";a.d(t,{Y_:()=>O.Y,lo:()=>De,WY:()=>Tt,TV:()=>ge,rm:()=>ee,OP:()=>se,aN:()=>ue,QM:()=>K,gd:()=>oe,Hh:()=>U,vF:()=>Je,V3:()=>qe,Bm:()=>ze,C2:()=>Ne,Hf:()=>lt,Mt:()=>j.M,P:()=>Lt,_3:()=>Zt,DF:()=>ve,_X:()=>xt,sM:()=>bt,m2:()=>ke,np:()=>Ae,NT:()=>It,Y1:()=>yt,c0:()=>St,vG:()=>wt,py:()=>ft,Sc:()=>we,wB:()=>_e,gC:()=>ot,ol:()=>st,vr:()=>ut,kD:()=>dt,wz:()=>ct,_0:()=>gt,j4:()=>mt,s2:()=>Ue,di:()=>Ge,aP:()=>je,Vi:()=>V,YD:()=>Te,iz:()=>w,$0:()=>Z,sf:()=>k,Lr:()=>at,JX:()=>tt,zA:()=>it,RZ:()=>nt,an:()=>et,CS:()=>Ke,E6:()=>Xe,PM:()=>Ye,NW:()=>rt,bK:()=>de,RK:()=>X,Dm:()=>ne,nn:()=>z,MW:()=>Qe,$O:()=>ce,ez:()=>ae,dV:()=>le,Rd:()=>Pt,RE:()=>Ct,Wb:()=>Dt,kA:()=>Ft,WB:()=>Bt,oD:()=>G,oM:()=>p,ES:()=>Ze,y9:()=>We,Rl:()=>f,bG:()=>y,VU:()=>ht,K9:()=>pt,RY:()=>Pe,pq:()=>Fe,rx:()=>Ce,xo:()=>Wt,xc:()=>Ve,LH:()=>He,o:()=>vt,fs:()=>q,Z_:()=>Oe});var i=a(2954),r=a(84374),n=a(18446),o=a.n(n);const l=(e,t)=>()=>{const{styles:a,actionStates:n,executeStyleAction:l}=(0,r.nZ)(),s=(0,i.Fl)((()=>{var t,i;return null===(i=null===(t=a.value)||void 0===t?void 0:t[e])||void 0===i?void 0:i.value})),d=(0,i.Fl)((()=>{var i,r;const n=(null===(r=null===(i=a.value)||void 0===i?void 0:i[e])||void 0===r?void 0:r.options)||[];return t?t(n):n})),u=(0,i.XI)([]);(0,i.YP)((()=>d.value),((e,t)=>{o()(e,t)||(u.value=e)}),{immediate:!0});const c=(0,i.Fl)((()=>{var t;return!!(null===(t=n.value[`mutateProperty:${e}`])||void 0===t?void 0:t.disabled)})),g=(0,i.Fl)((()=>{var t,i;return(null===(i=null===(t=a.value)||void 0===t?void 0:t[e])||void 0===i?void 0:i.values.length)>1})),m=e=>e.charAt(0).toUpperCase()+e.slice(1);return{[`${e}`]:s,[`${e}Options`]:u,[`is${m(e)}Disabled`]:c,[`is${m(e)}Multiple`]:g,[`change${m(e)}`]:t=>{l({name:`mutateProperty:${e}`,inputValue:t})}}};var s=a(69931),d=a(96829);const u=e=>e.filter((({value:e})=>!!c[String(e)])).map((({value:e})=>{const t=c[String(e)];return{value:e,label:(null==t?void 0:t.label)||e,...(null==t?void 0:t.img)&&{img:(0,s.ju)(`static/assets/images/fill/normal/${t.img}.svg`),activeImg:(0,s.ju)(`static/assets/images/fill/small/${t.img}.svg`)}}})).sort(((e,t)=>c[e.value].sortIndex-c[t.value].sortIndex))||[],c={solid:{label:(0,d.WZ)("Solid"),img:"solid",sortIndex:1},"solid-hand-drawn":{label:(0,d.WZ)("Solid (Hand-Drawn)"),img:"solid-hand-drawn",sortIndex:2},hachure:{label:(0,d.WZ)("Diagonal (Hand-Drawn)"),img:"diagonal-hand-drawn",sortIndex:3},"hachure-thin":{label:(0,d.WZ)("Diagonal Thin (Hand-Drawn)"),img:"diagonal-thin-hand-drawn",sortIndex:4},crossing:{label:(0,d.WZ)("Horizontal (Hand-Drawn)"),img:"horizontal-hand-drawn",sortIndex:5},"crossing-thin":{label:(0,d.WZ)("Horizontal Thin (Hand-Drawn)"),img:"horizontal-thin-hand-drawn",sortIndex:6}},g={100:{label:"Thin",sortIndex:1},200:{label:"ExtraLight",sortIndex:2},300:{label:"Light",sortIndex:3},400:{label:"Regular",sortIndex:4},500:{label:"Medium",sortIndex:5},600:{label:"Demibold",sortIndex:6},700:{label:"Bold",sortIndex:7},800:{label:"ExtraBold",sortIndex:8},900:{label:"Black",sortIndex:9}},m=e=>e.filter((({value:e})=>!!h[String(e)])).map((({value:e})=>{const t=h[e];return{value:e,label:(null==t?void 0:t.label)||e,...(null==t?void 0:t.img)&&{img:(0,s.ju)(`static/assets/images/shapes/arrow-shape/normal/${t.img}.svg`),activeImg:(0,s.ju)(`static/assets/images/shapes/arrow-shape/small/${t.img}.svg`)}}})).sort(((e,t)=>h[e.value].sortIndex-h[t.value].sortIndex))||[],h={"org.xmind.arrowShape.none":{label:(0,d.WZ)("None"),img:"arrow-none",sortIndex:1},"org.xmind.arrowShape.spearhead":{label:(0,d.WZ)("Spearhead"),img:"arrow-end-spearhead",sortIndex:4},"org.xmind.arrowShape.dot":{label:(0,d.WZ)("Dot"),img:"arrow-end-dot",sortIndex:2},"org.xmind.arrowShape.triangle":{label:(0,d.WZ)("Triangle"),img:"arrow-end-triangle",sortIndex:3},"org.xmind.arrowShape.square":{label:(0,d.WZ)("Square"),img:"arrow-end-square",sortIndex:5},"org.xmind.arrowShape.diamond":{label:(0,d.WZ)("Diamond"),img:"arrow-end-diamond",sortIndex:6},"org.xmind.arrowShape.herringbone":{label:(0,d.WZ)("Herringbone"),img:"arrow-end-herringbone",sortIndex:7},"org.xmind.arrowShape.doublearrow":{label:(0,d.WZ)("Double Arrow"),img:"arrow-end-double-arrow",sortIndex:8},"org.xmind.arrowShape.antiTriangle":{label:(0,d.WZ)("Anti-Triangle"),img:"arrow-end-anti-triangle",sortIndex:9},"org.xmind.arrowShape.attached":{label:(0,d.WZ)("Attached"),img:"arrow-end-attached",sortIndex:10},"org.xmind.arrowShape.hook":{label:(0,d.WZ)("Hook"),img:"arrow-end-hook",sortIndex:11}},p=()=>{const{isTopicLineArrowEndClassDisabled:e,...t}=l("topicLineArrowEndClass",m)();return{...t,isTopicLineArrowEndClassDisabled:(0,i.Fl)((()=>e.value||"none"===l("topicLinePattern")().topicLinePattern.value))}},v=e=>t=>t.filter((({value:e})=>!!b[String(e)])).map((({value:t})=>{const a=b[t];return{value:t,...(null==a?void 0:a.img)?{img:(0,s.ju)(`${x[e].normal}/${a.img}.svg`),activeImg:(0,s.ju)(`${x[e].active}/${a.img}.svg`)}:{label:t}}})).sort(((t,a)=>{const i="topic"===e?"sortByTopic":"sortByRelationship";return b[t.value][i]-b[a.value][i]}))||[],b={solid:{img:"solid",sortByTopic:1,sortByRelationship:1},dash:{img:"dash",sortByTopic:2,sortByRelationship:2},"handdrawn-solid":{img:"hand-drawn-solid",sortByTopic:3,sortByRelationship:6},"handdrawn-dash":{img:"hand-drawn-dash",sortByTopic:4,sortByRelationship:7},dot:{img:"dot",sortByRelationship:3},"dash-dot":{img:"dash-dot",sortByRelationship:4},"dash-dot-dot":{img:"dash-dot-dot",sortByRelationship:5}},x={topic:{normal:"static/assets/images/line-pattern/branch/normal",active:"static/assets/images/line-pattern/branch/normal"},relationship:{normal:"static/assets/images/shapes/line-pattern/normal",active:"static/assets/images/shapes/line-pattern/small"}},f=()=>({...l("topicLinePattern",v("topic"))(),changeTopicLinePattern:e=>{const{executeAction:t}=(0,r.nZ)(),{topicLineWidth:a}=l("topicLineWidth")();t({name:"mutatePropertyBatch",payload:[{name:"mutateProperty:topicLinePattern",inputValue:e},{name:"mutateProperty:topicLineWidth",inputValue:"none"===e?0:0===a.value?2:a.value}]})}}),w=()=>({...l("summaryLinePattern",v("topic"))(),changeSummaryLinePattern:e=>{const{executeAction:t}=(0,r.nZ)(),{summaryLineWidth:a}=l("summaryLineWidth")();t({name:"mutatePropertyBatch",payload:[{name:"mutateProperty:summaryLinePattern",inputValue:e},{name:"mutateProperty:summaryLineWidth",inputValue:"none"===e?0:0===a.value?2:a.value}]})}}),S=e=>e.filter((({value:e})=>!!I[Number(e)])).map((({value:e})=>{const t=I[e];return{value:String(e),label:(null==t?void 0:t.label)||String(e)}})).sort(((e,t)=>I[e.value].sortIndex-I[t.value].sortIndex))||[],I={1:{label:(0,d.WZ)("Extra Thin"),sortIndex:1},2:{label:(0,d.WZ)("Thin"),sortIndex:2},3:{label:(0,d.WZ)("Medium"),sortIndex:3},5:{label:(0,d.WZ)("Bold(line-width)"),sortIndex:4},8:{label:(0,d.WZ)("Extra Bold"),sortIndex:5}},y=()=>{const{isTopicLineWidthDisabled:e,...t}=l("topicLineWidth",S)();return{...t,isTopicLineWidthDisabled:(0,i.Fl)((()=>e.value||"none"===l("topicLinePattern")().topicLinePattern.value))}},Z=()=>{const{isSummaryLineWidthDisabled:e,...t}=l("summaryLineWidth",S)();return{...t,isSummaryLineWidthDisabled:(0,i.Fl)((()=>e.value||"none"===w().summaryLinePattern.value))}},W={"org.xmind.ui.logic.right":{label:(0,d.WZ)("Left to Right"),sortIndex:1},"org.xmind.ui.logic.left":{label:(0,d.WZ)("Right to Left"),sortIndex:1},"org.xmind.ui.org-chart.down":{label:(0,d.WZ)("Up to Down"),sortIndex:1},"org.xmind.ui.org-chart.up":{label:(0,d.WZ)("Down to Up"),sortIndex:2},"org.xmind.ui.fishbone.leftHeaded":{label:(0,d.WZ)("Left to Right"),sortIndex:1},"org.xmind.ui.fishbone.rightHeaded":{label:(0,d.WZ)("Right to Left"),sortIndex:1},"org.xmind.ui.treetable.toptitle":{label:(0,d.WZ)("Title on Top"),sortIndex:1},"org.xmind.ui.treetable":{label:(0,d.WZ)("Title on Left"),sortIndex:2},"org.xmind.ui.map.unbalanced":{label:(0,d.WZ)("Unbalanced"),sortIndex:1},"org.xmind.ui.map.clockwise":{label:(0,d.WZ)("Clockwise"),sortIndex:2},"org.xmind.ui.brace.right":{label:(0,d.WZ)("Left to Right"),sortIndex:1},"org.xmind.ui.brace.left":{label:(0,d.WZ)("Right to Left"),sortIndex:2},"org.xmind.ui.tree.right":{label:(0,d.WZ)("Left to Right"),sortIndex:1},"org.xmind.ui.tree.left":{label:(0,d.WZ)("Right to Left"),sortIndex:2},"org.xmind.ui.timeline.vertical":{label:(0,d.WZ)("Balanced"),sortIndex:3},"org.xmind.ui.tree.branch-aligned.left":{label:(0,d.WZ)("Left-aligned Branch"),sortIndex:4},"org.xmind.ui.tree.branch-aligned.right":{label:(0,d.WZ)("Right-aligned Branch"),sortIndex:5},"org.xmind.ui.spreadsheet":{label:(0,d.WZ)("Row"),sortIndex:1},"org.xmind.ui.spreadsheet.column":{label:(0,d.WZ)("Column"),sortIndex:2},"org.xmind.ui.timeline.horizontal":{label:(0,d.WZ)("Horizontal"),sortIndex:1},"org.xmind.ui.timeline.through.vertical":{label:(0,d.WZ)("Vertical"),sortIndex:2},"org.xmind.ui.timeline.sided.horizontal":{label:(0,d.WZ)("Horizontal (Off-Axis)"),sortIndex:3}},T={merged:{label:(0,d.WZ)("Fewer Borders")},unmerged:{label:(0,d.WZ)("More Borders")}},L={"org.xmind.arrowShape.none":{label:(0,d.WZ)("None"),img:"arrow-none",sortIndex:1},"org.xmind.arrowShape.spearhead":{label:(0,d.WZ)("Spearhead"),img:"arrow-begin-spearhead",sortIndex:4},"org.xmind.arrowShape.dot":{label:(0,d.WZ)("Dot"),img:"arrow-begin-dot",sortIndex:2},"org.xmind.arrowShape.triangle":{label:(0,d.WZ)("Triangle"),img:"arrow-begin-triangle",sortIndex:3},"org.xmind.arrowShape.square":{label:(0,d.WZ)("Square"),img:"arrow-begin-square",sortIndex:5},"org.xmind.arrowShape.diamond":{label:(0,d.WZ)("Diamond"),img:"arrow-begin-diamond",sortIndex:6},"org.xmind.arrowShape.herringbone":{label:(0,d.WZ)("Herringbone"),img:"arrow-begin-herringbone",sortIndex:7},"org.xmind.arrowShape.doublearrow":{label:(0,d.WZ)("Double Arrow"),img:"arrow-begin-double-arrow",sortIndex:8},"org.xmind.arrowShape.antiTriangle":{label:(0,d.WZ)("Anti-Triangle"),img:"arrow-begin-anti-triangle",sortIndex:9},"org.xmind.arrowShape.attached":{label:(0,d.WZ)("Attached"),img:"arrow-begin-attached",sortIndex:10},"org.xmind.arrowShape.hook":{label:(0,d.WZ)("Hook"),img:"arrow-begin-hook",sortIndex:11}},B=e=>t=>t.filter((({value:e})=>!!R[String(e)])).map((({value:t})=>{let a=R[t];return"callout"===e&&(a=E[t]),{value:t,label:(null==a?void 0:a.label)||t,...(null==a?void 0:a.img)&&{img:(0,s.ju)(`${A[e]}/normal/${a.img}.svg`),activeImg:(0,s.ju)(`${A[e]}/small/${a.img}.svg`)}}})).sort(((e,t)=>R[e.value].sortIndex-R[t.value].sortIndex))||[],P={"org.xmind.internal.topicShape.matrix-cell":{label:(0,d.WZ)("Rectangle"),img:"shape-rectangle",sortIndex:2},"org.xmind.internal.topicShape.treeTableCell":{label:(0,d.WZ)("Rectangle"),img:"shape-rectangle",sortIndex:2},"org.xmind.topicShape.rect":{label:(0,d.WZ)("Rectangle"),img:"shape-rectangle",sortIndex:2},"org.xmind.topicShape.roundedRect":{label:(0,d.WZ)("Rounded Rect"),img:"shape-round-rectangle",sortIndex:1},"org.xmind.topicShape.underline":{label:(0,d.WZ)("Underline"),img:"shape-underline",sortIndex:5},"org.xmind.topicShape.circle":{label:(0,d.WZ)("Circle"),img:"shape-circle",sortIndex:7},"org.xmind.topicShape.waterdrop":{label:(0,d.WZ)("Drop"),img:"shape-drop",sortIndex:18},"org.xmind.topicShape.ellipse":{label:(0,d.WZ)("Ellipse"),img:"shape-ellipse",sortIndex:3},"org.xmind.topicShape.ellipserect":{label:(0,d.WZ)("Ellipse-Rect"),img:"shape-capsule",sortIndex:4},"org.xmind.topicShape.diamond":{label:(0,d.WZ)("Diamond"),img:"shape-diamond",sortIndex:6},"org.xmind.topicShape.parallelogram":{label:(0,d.WZ)("Parallelogram"),img:"shape-parallelogram",sortIndex:8},"org.xmind.topicShape.hexagon":{label:(0,d.WZ)("Horizontal Hexagon"),img:"shape-hexagon",sortIndex:9},"org.xmind.topicShape.roundedhexagon":{label:(0,d.WZ)("Vertical Hexagon"),img:"shape-vertical-hexagon",sortIndex:10},"org.xmind.topicShape.ellipticrectangle":{label:(0,d.WZ)("Rounded Hexagon"),img:"shape-vertical-hexagon-rounded",sortIndex:11},"org.xmind.topicShape.singlebreakangle":{label:(0,d.WZ)("Single-Breakangle"),img:"shape-single-breaksingle",sortIndex:12},"org.xmind.topicShape.doubleunderline":{label:(0,d.WZ)("Double-Underline"),img:"shape-double-underline",sortIndex:13},"org.xmind.topicShape.stack":{label:(0,d.WZ)("Stack"),img:"shape-stack",sortIndex:14},"org.xmind.topicShape.singleBookQuote":{label:(0,d.WZ)("Angle Brackets"),img:"shape-angle-bracket",sortIndex:25},"org.xmind.topicShape.curlyBracket":{label:(0,d.WZ)("Brace"),img:"shape-brace",sortIndex:26},"org.xmind.topicShape.doubleQuote":{label:(0,d.WZ)("Double Quotes"),img:"shape-double-quote",sortIndex:27},"org.xmind.topicShape.doubleBookQuote":{label:(0,d.WZ)("French Quotes"),img:"shape-french-quote",sortIndex:28},"org.xmind.topicShape.roundBracket":{label:(0,d.WZ)("Parentheses"),img:"shape-parenthese",sortIndex:29},"org.xmind.topicShape.squareBracket":{label:(0,d.WZ)("Square Brackets"),img:"shape-square-bracket",sortIndex:30},"org.xmind.topicShape.squareQuote":{label:(0,d.WZ)("Square Quotes"),img:"shape-square-quote",sortIndex:31},"org.xmind.topicShape.bookmark":{label:(0,d.WZ)("Bookmark"),img:"shape-bookmark",sortIndex:15},"org.xmind.topicShape.star":{label:(0,d.WZ)("Star"),img:"shape-star",sortIndex:24},"org.xmind.topicShape.shield":{label:(0,d.WZ)("Shield"),img:"shape-shield",sortIndex:23},"org.xmind.topicShape.simpleCloud":{label:(0,d.WZ)("Cloud"),img:"shape-cloud",sortIndex:16},"org.xmind.topicShape.cutdiamond":{label:(0,d.WZ)("Diamond"),img:"shape-cut-diamond",sortIndex:17},"org.xmind.topicShape.label":{label:(0,d.WZ)("Label"),img:"shape-label",sortIndex:20},"org.xmind.topicShape.heart":{label:(0,d.WZ)("Heart"),img:"shape-love",sortIndex:19},"org.xmind.topicShape.fatLeftArrow":{label:(0,d.WZ)("Left Arrow"),img:"shape-arrow-left",sortIndex:21},"org.xmind.topicShape.fatRightArrow":{label:(0,d.WZ)("Right Arrow"),img:"shape-arrow-right",sortIndex:22}},C={"org.xmind.boundaryShape.rect":{label:(0,d.WZ)("Rectangle"),img:"shape-rectangle",sortIndex:1},"org.xmind.boundaryShape.roundedRect":{label:(0,d.WZ)("Rounded Rect"),img:"shape-rounded-rect",sortIndex:2},"org.xmind.boundaryShape.polygon":{label:(0,d.WZ)("Polygon"),img:"shape-polygon",sortIndex:3},"org.xmind.boundaryShape.scallops":{label:(0,d.WZ)("Scallops"),img:"shape-scallops",sortIndex:4},"org.xmind.boundaryShape.waves":{label:(0,d.WZ)("Waves"),img:"shape-waves",sortIndex:5},"org.xmind.boundaryShape.tension":{label:(0,d.WZ)("Tension"),img:"shape-tension",sortIndex:6},"org.xmind.boundaryShape.roundedPolygon":{label:(0,d.WZ)("Rounded Polygon"),img:"shape-rounded-polygon",sortIndex:7},"org.xmind.boundaryShape.focus":{label:(0,d.WZ)("Focus"),img:"shape-focus",sortIndex:8},"org.xmind.boundaryShape.cross":{label:(0,d.WZ)("Cross"),img:"shape-cross",sortIndex:9}},F={"org.xmind.relationshipShape.curved":{label:(0,d.WZ)("Curved"),img:"relationship-curved",sortIndex:1},"org.xmind.relationshipShape.straight":{label:(0,d.WZ)("Straight"),img:"relationship-straight",sortIndex:2},"org.xmind.relationshipShape.angled":{label:(0,d.WZ)("Angled"),img:"relationship-angle",sortIndex:3},"org.xmind.relationshipShape.zigzag":{label:(0,d.WZ)("Zigzag"),img:"relationship-zigzag",sortIndex:4}},D={"org.xmind.summaryShape.angle":{label:(0,d.WZ)("Straight"),img:"summary-straight",sortIndex:1},"org.xmind.summaryShape.square":{label:(0,d.WZ)("Elbow"),img:"summary-elbow",sortIndex:2},"org.xmind.summaryShape.round":{label:(0,d.WZ)("Curve"),img:"summary-curve",sortIndex:3},"org.xmind.summaryShape.curly":{label:(0,d.WZ)("Bight"),img:"summary-bright",sortIndex:4},"org.xmind.summaryShape.straight":{label:(0,d.WZ)("Right Angle"),img:"summary-right-angle",sortIndex:5}},E={"org.xmind.topicShape.ellipse":{label:(0,d.WZ)("Ellipse"),img:"callout-ellipse",sortIndex:3},"org.xmind.topicShape.roundedRect":{label:(0,d.WZ)("Rounded Rect"),img:"callout-rounded-rectangle",sortIndex:1},"org.xmind.topicShape.rect":{label:(0,d.WZ)("Rectangle"),img:"callout-rectangle",sortIndex:2}},R={...P,...C,...F,...D},A={topic:"static/assets/images/shapes/shape",relationship:"static/assets/images/shapes/relationship-shape",boundary:"static/assets/images/shapes/boundary-shape",summary:"static/assets/images/shapes/summary-connection",callout:"static/assets/images/shapes/callout-shape"},k=()=>{const{isSummaryShapeClassDisabled:e,...t}=l("summaryShapeClass",B("summary"))();return{...t,isSummaryShapeClassDisabled:(0,i.Fl)((()=>e.value||"none"===w().summaryLinePattern.value))}},N={left:{icon:"alignment-left",title:(0,d.WZ)("Align text to the left."),sortIndex:1},center:{icon:"alignment-center",title:(0,d.WZ)("Center text."),sortIndex:2},right:{icon:"alignment-right",title:(0,d.WZ)("Align text to the right."),sortIndex:3}},M={manual:{label:(0,d.WZ)("None"),icon:"manual-style",sortIndex:1},uppercase:{label:(0,d.WZ)("UPPERCASE"),icon:"uppercase",sortIndex:2},lowercase:{label:(0,d.WZ)("lowercase"),icon:"lowercase",sortIndex:3},capitalize:{label:(0,d.WZ)("Capitalize"),icon:"capitalize",sortIndex:4}},$={$DEFAULT$:{label:(0,d.WZ)("Default"),sortIndex:4},importantTopic:{label:(0,d.WZ)("Very Important"),sortIndex:1},minorTopic:{label:(0,d.WZ)("Important"),sortIndex:2},expiredTopic:{label:(0,d.WZ)("Cross Out"),sortIndex:3}};var j=a(19593),O=a(83669);const G=()=>({topicLevel:(0,i.Fl)((()=>{const{activeSheetFigure:e,selection:t}=(0,r.nZ)();if(!e.value)return null;const a=t.value.modelIds.map((t=>{var a,i;return null===(i=null===(a=e.value.topicFigureByTopicId[t])||void 0===a?void 0:a.modelAttributes.levelClass)||void 0===i?void 0:i.slice(5)})).filter(Boolean);if(0===a.length)return null;const i=Array.from(new Set(a));return i.length>1?"multiple":Number(i[0])}))}),V=e=>{const{selectionStylePreview:t}=(0,r.nZ)(),a=(0,i.iH)(""),n=(0,i.iH)({}),o=async()=>{var e;const a=await(null===(e=t.value)||void 0===e?void 0:e.candidatePreviewGetter());a&&(n.value={importantTopic:H(a.importantTopic),minorTopic:H(a.minorTopic),expiredTopic:H(a.expiredTopic),$DEFAULT$:H(a.mainTopic||a.subTopic||a.floatingTopic)})},l=async()=>{var i;const r=await(null===(i=t.value)||void 0===i?void 0:i.effectivePreviewGetter(e));r&&(a.value=H(r))};return(0,i.YP)((()=>t.value),(()=>{l(),o()}),{immediate:!1}),setTimeout((()=>{l(),o()}),300),{effectivePreview:a,candidatePreview:n}},H=e=>{if(!e)return;const t=(new XMLSerializer).serializeToString(e);return r.ZQ.getSVGUri(t)},z=()=>{const{isTopicFillColorStringDisabled:e,...t}=l("topicFillColorString")();return{...t,isTopicFillColorStringDisabled:(0,i.Fl)((()=>e.value||"none"===Qe().topicFillPattern.value))}},U=()=>{const{isBoundaryFillColorStringDisabled:e,...t}=l("boundaryFillColorString")();return{...t,isBoundaryFillColorStringDisabled:(0,i.Fl)((()=>e.value||"none"===Je().boundaryFillPattern.value))}},q=()=>{const e=(0,i.Fl)((()=>{const{activeSheet:e,selection:t}=(0,r.nZ)();return t.value.modelIds.every((t=>{var a;const i=null===(a=e.value.query({id:t}))||void 0===a?void 0:a.asTopic();return!(null==i?void 0:i.customWidth)}))}));return{...l("topicWidth")(),isTopicWidthResetDisabled:e,resetTopicWidth:()=>{const{activeSheet:e,selection:t,changeDoc:a}=(0,r.nZ)();a(t.value.modelIds.reduce(((e,t)=>{var a;const i=null===(a=e.query({id:t}))||void 0===a?void 0:a.asTopic();return(null==i?void 0:i.customWidth)?i.asMutable().attrs({customWidth:null}).commit().ownerSheet:e}),e.value).ownerDocument)}}};var _=a(90435),Q=a(54856);const J=e=>t=>t.filter((({value:e})=>!!Y[String(e)])).map((({value:e})=>{const t=Y[e];return{value:e,label:(null==t?void 0:t.label)||e,...(null==t?void 0:t.img)&&{img:(0,s.ju)(`static/assets/images/line-pattern/border/normal/${t.img}.svg`),activeImg:(0,s.ju)(`static/assets/images/line-pattern/border/small/${t.img}.svg`)}}})).sort(((t,a)=>{const i="topic"===e?"sortByTopic":"sortByBoundary";return Y[t.value][i]-Y[a.value][i]}))||[],Y={solid:{label:(0,d.WZ)("Solid"),img:"solid",sortByTopic:1,sortByBoundary:1},dash:{label:(0,d.WZ)("Dash"),img:"dash",sortByTopic:2,sortByBoundary:2},"handdrawn-solid":{label:(0,d.WZ)("Hand-Drawn Solid"),img:"hand-drawn-solid",sortByTopic:3,sortByBoundary:6},"handdrawn-dash":{label:(0,d.WZ)("Hand-Drawn Dash"),img:"hand-drawn-dash",sortByTopic:4,sortByBoundary:7},dot:{label:(0,d.WZ)("Dot"),img:"dot",sortByBoundary:3},"dash-dot":{label:(0,d.WZ)("Dash-Dot"),img:"dash-dot",sortByBoundary:4},"dash-dot-dot":{label:(0,d.WZ)("Dash-Dot-Dot"),img:"dash-dot-dot",sortByBoundary:5}},X=()=>({...l("topicBorderLinePattern",J("topic"))(),changeTopicBorderLinePattern:e=>{const{executeAction:t}=(0,r.nZ)(),{topicBorderLineWidth:a}=l("topicBorderLineWidth")();t({name:"mutatePropertyBatch",payload:[{name:"mutateProperty:topicBorderLinePattern",inputValue:e},{name:"mutateProperty:topicBorderLineWidth",inputValue:"none"===e?0:0===a.value?2:a.value}]})}}),K=()=>({...l("boundaryBorderLinePattern",J("boundary"))(),changeBoundaryBorderLinePattern:e=>{const{executeAction:t}=(0,r.nZ)(),{boundaryBorderLineWidth:a}=l("boundaryBorderLineWidth")();t({name:"mutatePropertyBatch",payload:[{name:"mutateProperty:boundaryBorderLinePattern",inputValue:e},{name:"mutateProperty:boundaryBorderLineWidth",inputValue:"none"===e?0:0===a.value?2:a.value}]})}}),ee=()=>({...l("cellBorderLinePatternForGridStructure",J("topic"))(),changeCellBorderLinePatternForGridStructure:async e=>{if(!await _.ZP.fetch(Q.Gy,{name:"action.gridCellBorderLinePattern",channel:(0,Q.gk)(window.editorId)}))return;const{executeStyleAction:t}=(0,r.nZ)();t({name:"mutateProperty:cellBorderLinePatternForGridStructure",inputValue:e})}});var te=a(87141);const ae=()=>{const e=(0,te.JE)().T;return{topicImageBorderLinePattern:(0,i.Fl)((()=>0===l("topicImageBorderLineWidth")().topicImageBorderLineWidth.value?"none":"solid")),topicImageBorderLinePatternOptions:(0,i.Fl)((()=>[{label:e("Solid"),value:"solid",img:(0,s.ju)("static/assets/images/line-pattern/border/normal/solid.svg"),activeImg:(0,s.ju)("static/assets/images/line-pattern/border/small/solid.svg")}])),changeTopicImageBorderLinePattern:e=>{l("topicImageBorderLineWidth")().changeTopicImageBorderLineWidth("none"===e?0:2)}}},ie=e=>e.filter((({value:e})=>!!re[Number(e)])).map((({value:e})=>{const t=re[e];return{value:String(e),label:(null==t?void 0:t.label)||String(e)}})).sort(((e,t)=>re[e.value].sortIndex-re[t.value].sortIndex))||[],re={1:{label:(0,d.WZ)("Extra Thin"),sortIndex:1},2:{label:(0,d.WZ)("Thin"),sortIndex:2},3:{label:(0,d.WZ)("Medium"),sortIndex:3},5:{label:(0,d.WZ)("Bold(line-width)"),sortIndex:4},8:{label:(0,d.WZ)("Extra Bold"),sortIndex:5}},ne=()=>{const{isTopicBorderLineWidthDisabled:e,...t}=l("topicBorderLineWidth",ie)();return{...t,isTopicBorderLineWidthDisabled:(0,i.Fl)((()=>e.value||"none"===l("topicBorderLinePattern")().topicBorderLinePattern.value))}},oe=()=>{const{isBoundaryBorderLineWidthDisabled:e,...t}=l("boundaryBorderLineWidth",ie)();return{...t,isBoundaryBorderLineWidthDisabled:(0,i.Fl)((()=>e.value||"none"===l("boundaryBorderLinePattern")().boundaryBorderLinePattern.value))}},le=()=>{const{isTopicImageBorderLineWidthDisabled:e,...t}=l("topicImageBorderLineWidth",ie)();return{...t,isTopicImageBorderLineWidthDisabled:(0,i.Fl)((()=>e.value||"none"===ae().topicImageBorderLinePattern.value))}},se=()=>({...l("cellBorderLineWidthForGridStructure",ie)(),changeCellBorderLineWidthForGridStructure:async e=>{if(!await _.ZP.fetch(Q.Gy,{name:"action.gridCellBorderLineWidth",channel:(0,Q.gk)(window.editorId)}))return;const{executeStyleAction:t}=(0,r.nZ)();t({name:"mutateProperty:cellBorderLineWidthForGridStructure",inputValue:e})}}),de=()=>{const{isTopicBorderLineColorStringDisabled:e,...t}=l("topicBorderLineColorString")();return{...t,isTopicBorderLineColorStringDisabled:(0,i.Fl)((()=>e.value||"none"===l("topicBorderLinePattern")().topicBorderLinePattern.value))}},ue=()=>{const{isBoundaryBorderLineColorStringDisabled:e,...t}=l("boundaryBorderLineColorString")();return{...t,isBoundaryBorderLineColorStringDisabled:(0,i.Fl)((()=>e.value||"none"===l("boundaryBorderLinePattern")().boundaryBorderLinePattern.value))}},ce=()=>{const{isTopicImageBorderLineColorStringDisabled:e,...t}=l("topicImageBorderLineColorString")();return{...t,isTopicImageBorderLineColorStringDisabled:(0,i.Fl)((()=>e.value||"none"===ae().topicImageBorderLinePattern.value))}},ge=()=>({...l("cellBorderLineColorForGridStructure")(),changeCellBorderLineColorForGridStructure:async e=>{if(!await _.ZP.fetch(Q.Gy,{name:"action.gridCellBorderLineColor",channel:(0,Q.gk)(window.editorId)}))return;const{executeStyleAction:t}=(0,r.nZ)();t({name:"mutateProperty:cellBorderLineColorForGridStructure",inputValue:e})}});var me=a(75472),he=a.n(me),pe=a(65428);const ve=({isCjk:e=!1,styleKey:t})=>{const{getLoadedFonts:a}=(0,pe.r)(),{styles:n,actionStates:o,selection:l,executeStyleAction:s}=(0,r.nZ)(),d=(0,i.iH)([]),u=(0,i.iH)({}),c=(0,i.Fl)((()=>{var e,a;return null===(a=null===(e=n.value)||void 0===e?void 0:e[t])||void 0===a?void 0:a.value})),g=(0,i.Fl)((()=>e?d.value.filter((e=>e.isCJKFont)):d.value)),m=(0,i.Fl)((()=>{var e;return!!(null===(e=o.value[`mutateProperty:${t}`])||void 0===e?void 0:e.disabled)})),h=(0,i.Fl)((()=>{var e,a;return(null===(a=null===(e=n.value)||void 0===e?void 0:e[t])||void 0===a?void 0:a.values.length)>1})),p=(0,i.Fl)((()=>{var e,t;const a=u.value[null===(e=l.value)||void 0===e?void 0:e.modelIds[0]];return 1===(null===(t=l.value)||void 0===t?void 0:t.modelIds.length)&&a?d.value.find((e=>e.value===a)):d.value.find((e=>e.value===c.value))})),v=(0,i.Fl)((()=>(0,te.km)().recentFontFamilies)),b=(0,i.Fl)((()=>{const e=p.value&&p.value.value;return v.value.map((t=>d.value.find((a=>a.value===t&&a.value!==e)))).filter(Boolean).slice(0,6)})),x=(0,i.Fl)((()=>[...b.value,p.value].filter(Boolean)));return(0,i.bv)((async()=>{d.value=await(async()=>{const{systemFonts:e,vanaFonts:t}=await a(),i=[...Object.values(t),...Object.values(e).filter((e=>!t[e.value]))];return he()(i,["isSystemLocaleFont","value"],["desc","asc"])})()})),{fontFamily:c,fontFamilyOptions:g,fontFamilyRecommendOptions:x,isFontFamilyDisabled:m,isFontFamilyMultiple:h,changeFontFamily:e=>{var a;((null===(a=l.value)||void 0===a?void 0:a.modelIds)||[]).forEach((t=>{u.value[t]=e})),(e=>{const t=(0,te.km)().recentFontFamilies.slice();t.includes(e)&&t.splice(t.indexOf(e),1),t.unshift(e),t.length>10&&t.splice(10),(0,te.km)().setRecentFontFamilies(t)})(e);s({name:`mutateProperty:${t}`,inputValue:e})}}};var be=a(63111);const xe=e=>e.filter((({value:e})=>!!fe[String(e)])).map((({value:e})=>{const t=e,a=fe[t];return{value:t,label:(null==a?void 0:a.label)||t,isLimited:Object.keys(be.Sn).includes(t),...(null==a?void 0:a.img)&&{img:(0,s.ju)(`static/assets/images/structures/normal/${a.img}.svg`),activeImg:(0,s.ju)(`static/assets/images/structures/small/${a.img}.svg`)}}})).sort(((e,t)=>fe[e.value].sortIndex-fe[t.value].sortIndex))||[],fe={"org.xmind.ui.map.clockwise":{label:(0,d.WZ)("Mind Map"),img:"balanced-map-clockwise",sortIndex:1},"org.xmind.ui.map.unbalanced":{label:(0,d.WZ)("Mind Map"),img:"map",sortIndex:1},"org.xmind.ui.logic.left":{label:(0,d.WZ)("Logic Chart"),img:"logic-left",sortIndex:2},"org.xmind.ui.logic.right":{label:(0,d.WZ)("Logic Chart"),img:"logic-right",sortIndex:2},"org.xmind.ui.brace.right":{label:(0,d.WZ)("Brace Map"),img:"brace-right",sortIndex:3},"org.xmind.ui.brace.left":{label:(0,d.WZ)("Brace Map"),img:"brace-left",sortIndex:3},"org.xmind.ui.org-chart.down":{label:(0,d.WZ)("Org Chart"),img:"org-down",sortIndex:4},"org.xmind.ui.org-chart.up":{label:(0,d.WZ)("Org Chart"),img:"org-up",sortIndex:4},"org.xmind.ui.tree.right":{label:(0,d.WZ)("Tree Chart"),img:"tree-right",sortIndex:5},"org.xmind.ui.timeline.vertical":{label:(0,d.WZ)("Tree Chart"),img:"tree-balanced",sortIndex:5},"org.xmind.ui.tree.left":{label:(0,d.WZ)("Tree Chart"),img:"tree-left",sortIndex:5},"org.xmind.ui.tree.branch-aligned.left":{label:(0,d.WZ)("Tree Chart"),img:"tree-left-aligned",sortIndex:4},"org.xmind.ui.tree.branch-aligned.right":{label:(0,d.WZ)("Tree Chart"),img:"tree-right-aligned",sortIndex:5},"org.xmind.ui.timeline.horizontal":{label:(0,d.WZ)("Timeline"),img:"timeline-h",sortIndex:6},"org.xmind.ui.timeline.sided.horizontal":{label:(0,d.WZ)("Timeline"),img:"timeline-h-off-axis",sortIndex:6},"org.xmind.ui.timeline.through.vertical":{label:(0,d.WZ)("Timeline"),img:"timeline-v",sortIndex:6},"org.xmind.ui.fishbone.leftHeaded":{label:(0,d.WZ)("Fishbone"),img:"fishbone-r",sortIndex:7},"org.xmind.ui.fishbone.rightHeaded":{label:(0,d.WZ)("Fishbone"),img:"fishbone-l",sortIndex:7},"org.xmind.ui.treetable.toptitle":{label:(0,d.WZ)("Tree Table"),img:"tree-table-column",sortIndex:8},"org.xmind.ui.treetable":{label:(0,d.WZ)("Tree Table"),img:"tree-table-row",sortIndex:8},"org.xmind.ui.spreadsheet":{label:(0,d.WZ)("Matrix"),img:"matrix-row",sortIndex:9},"org.xmind.ui.spreadsheet.column":{label:(0,d.WZ)("Matrix"),img:"matrix-column",sortIndex:9},"org.xmind.ui.grid":{label:(0,d.WZ)("Grid"),img:"grid",sortIndex:10}},we=()=>{const{...e}=l("majorStructureClass",xe)();return{...e,isResetTopicStructureDisabled:(0,i.Fl)((()=>{var e;const{actionStates:t}=(0,r.nZ)();return!!(null===(e=t.value["mutate:resetTopicStructure"])||void 0===e?void 0:e.disabled)})),resetTopicStructure:()=>{const{executeMutationAction:e}=(0,r.nZ)();e({name:"mutate:resetTopicStructure"})}}},Se=e=>t=>t.filter((({value:e})=>!!Ie[String(e)])).map((({value:t})=>{const a=Ie[t];return{value:t,label:(null==a?void 0:a.label)||t,...(null==a?void 0:a.img)&&{img:(0,s.ju)(`${ye[e].imgPrefix}/${a.img}.svg`),activeImg:(0,s.ju)(`${ye[e].activeImgPrefix}/${a.img}.svg`)}}})).sort(((e,t)=>Ie[e.value].sortIndex-Ie[t.value].sortIndex))||[],Ie={"org.xmind.branchConnection.elbow":{label:(0,d.WZ)("Elbow"),img:"line-elbow",sortIndex:2},"org.xmind.branchConnection.roundedElbow":{label:(0,d.WZ)("Rounded Elbow"),img:"line-rounded-elbow",sortIndex:1},"org.xmind.branchConnection.straight":{label:(0,d.WZ)("Straight"),img:"line-straight",sortIndex:3},"org.xmind.branchConnection.curve":{label:(0,d.WZ)("Curve"),img:"line-curve",sortIndex:4},"org.xmind.branchConnection.fold":{label:(0,d.WZ)("Fold"),img:"line-fold",sortIndex:6},"org.xmind.branchConnection.roundedfold":{label:(0,d.WZ)("Rounded Fold"),img:"line-rounded-fold",sortIndex:7},"org.xmind.branchConnection.bight":{label:(0,d.WZ)("Bight"),img:"line-bight",sortIndex:5}},ye={topic:{imgPrefix:"static/assets/images/shapes/branch-connection/normal",activeImgPrefix:"static/assets/images/shapes/branch-connection/small"},tree:{imgPrefix:"static/assets/images/shapes/branch-connection/tree-chart/small",activeImgPrefix:"static/assets/images/shapes/branch-connection/tree-chart/normal"}},Ze=()=>{const{topicLineClassOptions:e,...t}=l("topicLineClass")();return{...t,topicLineClassOptions:(0,i.Fl)((()=>{const{majorStructureClass:t}=we();return["org.xmind.ui.tree.left","org.xmind.ui.tree.right","org.xmind.ui.tree.branch-aligned.left","org.xmind.ui.tree.branch-aligned.right"].includes(String(t.value))?Se("tree")(e.value):Se("topic")(e.value)})),structureClassDirection:{"org.xmind.ui.logic.right":"right","org.xmind.ui.logic.left":"left","org.xmind.ui.tree.right":"right","org.xmind.ui.tree.left":"left","org.xmind.ui.org-chart.down":"down","org.xmind.ui.org-chart.up":"up"}}},We=()=>{const{isTopicLineColorStringDisabled:e,...t}=l("topicLineColorString")();return{...t,isTopicLineColorStringDisabled:(0,i.Fl)((()=>e.value||"none"===l("topicLinePattern")().topicLinePattern.value))}},Te=()=>{const{isSummaryLineColorStringDisabled:e,...t}=l("summaryLineColorString")();return{...t,isSummaryLineColorStringDisabled:(0,i.Fl)((()=>e.value||"none"===w().summaryLinePattern.value))}},Le={"numeral-arabic":{label:(0,d.WZ)("1.2.3."),sortIndex:1},"alphabet-uppercase":{label:(0,d.WZ)("A.B.C."),sortIndex:2},"alphabet-lowercase":{label:(0,d.WZ)("a.b.c."),sortIndex:3},"numeral-roman":{label:(0,d.WZ)("I.II.III."),sortIndex:4}},Be=e=>e.filter((({value:e})=>!!Le[String(e)])).map((({value:e})=>({value:e,label:Le[e].label}))).sort(((e,t)=>Le[e.value].sortIndex-Le[t.value].sortIndex)),Pe=()=>({...l("topicNumberingPattern",Be)(),changeTopicNumberingPattern:async e=>{if("none"!==e){if(!await _.ZP.fetch(Q.Gy,{name:"action.changeNumbering",channel:(0,Q.gk)(window.editorId)}))return}const{executeAction:t}=(0,r.nZ)();let a=[{name:"mutateProperty:topicNumberingPattern",inputValue:e}];"none"===e&&(a=a.concat([{name:"mutateProperty:topicNumberingTieredEnabled",inputValue:!1},{name:"mutateProperty:topicNumberingStartsHereEnabled",inputValue:!1}])),t({name:"mutatePropertyBatch",payload:a})}}),Ce=()=>({...l("topicNumberingTieredEnabled")(),changeTopicNumberingTieredEnabled:async e=>{if(!await _.ZP.fetch(Q.Gy,{name:"action.changeNumbering",channel:(0,Q.gk)(window.editorId)}))return;const{executeStyleAction:t}=(0,r.nZ)();t({name:"mutateProperty:topicNumberingTieredEnabled",inputValue:e})}}),Fe=()=>({...l("topicNumberingStartsHereEnabled")(),changeTopicNumberingStartsHereEnabled:async e=>{if(!await _.ZP.fetch(Q.Gy,{name:"action.changeNumbering",channel:(0,Q.gk)(window.editorId)}))return;const{executeStyleAction:t}=(0,r.nZ)();t({name:"mutateProperty:topicNumberingStartsHereEnabled",inputValue:e})}}),De=()=>({applyingNumberingAttributesToSiblings:async()=>{if(!await _.ZP.fetch(Q.Gy,{name:"editor.applyingNumberingAttributesToSiblings",channel:(0,Q.gk)(window.editorId)}))return;const{executeMutationAction:e}=(0,r.nZ)();e({name:"mutate:applyingNumberingAttributesToSiblings"})}}),Ee=e=>{const t=(0,te.S)().appearance;return e.filter((({value:e})=>!!$e[String(e)])).map((({value:e})=>{const a=$e[e];return{value:e,...a,...(null==a?void 0:a.img)&&{img:(0,s.ju)(`static/assets/images/grid-cell-align/${t}/${a.img}.svg`)}}})).sort(((e,t)=>$e[e.value].sortIndex-$e[t.value].sortIndex))||[]},Re=e=>e.filter((({value:e})=>!!Me[String(e)])).map((({value:e})=>{const t=Me[e];return{value:e,label:t.label,...(null==t?void 0:t.img)&&{img:(0,s.ju)(`static/assets/images/fill/normal/${t.img}.svg`),activeImg:(0,s.ju)(`static/assets/images/fill/small/${t.img}.svg`)}}}))||[],Ae=()=>({...l("gridCellFillPattern",Re)(),changeGridCellFillPattern:async e=>{if(!await _.ZP.fetch(Q.Gy,{name:"action.changeGridCell",channel:(0,Q.gk)(window.editorId)}))return;const{executeStyleAction:t}=(0,r.nZ)();t({name:"mutateProperty:gridCellFillPattern",inputValue:e})}}),ke=()=>({...l("gridCellBackgroundColor")(),changeGridCellBackgroundColor:async e=>{if(!await _.ZP.fetch(Q.Gy,{name:"action.changeGridCell",channel:(0,Q.gk)(window.editorId)}))return;const{executeStyleAction:t}=(0,r.nZ)();t({name:"mutateProperty:gridCellBackgroundColor",inputValue:e})}}),Ne=()=>({...l("cellAlignForGrid",Ee)(),changeCellAlignForGrid:async e=>{if(!await _.ZP.fetch(Q.Gy,{name:"action.changeGridCell",channel:(0,Q.gk)(window.editorId)}))return;const{executeStyleAction:t}=(0,r.nZ)();t({name:"mutateProperty:cellAlignForGrid",inputValue:e})}}),Me={solid:{img:"solid",label:(0,d.WZ)("Solid"),sortIndex:1},"solid-hand-drawn":{label:(0,d.WZ)("Solid (Hand-Drawn)"),img:"solid-hand-drawn",sortIndex:2},hachure:{label:(0,d.WZ)("Diagonal (Hand-Drawn)"),img:"diagonal-hand-drawn",sortIndex:3},"hachure-thin":{label:(0,d.WZ)("Diagonal Thin (Hand-Drawn)"),img:"diagonal-thin-hand-drawn",sortIndex:4},crossing:{label:(0,d.WZ)("Horizontal (Hand-Drawn)"),img:"horizontal-hand-drawn",sortIndex:5},"crossing-thin":{label:(0,d.WZ)("Horizontal Thin (Hand-Drawn)"),img:"horizontal-thin-hand-drawn",sortIndex:6}},$e={"top-left":{img:"top-left",label:(0,d.WZ)("Top Left"),sortIndex:1},top:{img:"top",label:(0,d.WZ)("Top"),sortIndex:2},"top-right":{img:"top-right",label:(0,d.WZ)("Top Right"),sortIndex:3},left:{img:"left",label:(0,d.WZ)("Left"),sortIndex:4},center:{img:"center",label:(0,d.WZ)("Center"),sortIndex:5},right:{img:"right",label:(0,d.WZ)("Right"),sortIndex:6},"bottom-left":{img:"bottom-left",label:(0,d.WZ)("Bottom Left"),sortIndex:7},bottom:{img:"bottom",label:(0,d.WZ)("Bottom"),sortIndex:8},"bottom-right":{img:"bottom-right",label:(0,d.WZ)("Bottom Right"),sortIndex:9}},je=()=>({isResetImageSizeDisabled:(0,i.Fl)((()=>{var e;const{actionStates:t}=(0,r.nZ)();return!!(null===(e=t.value["mutate:resetStyle"])||void 0===e?void 0:e.disabled)})),resetImageSize:()=>{const{executeAction:e}=(0,r.nZ)();e({name:"mutate:resetTopicImageSize"})}}),Oe=()=>({isUpdateStyleDisabled:(0,i.Fl)((()=>{var e;const{actionStates:t}=(0,r.nZ)();return!!(null===(e=t.value["mutate:updateStyle"])||void 0===e?void 0:e.disabled)})),isUpdateStyleToSameLevelDisabled:(0,i.Fl)((()=>{var e;const{actionStates:t}=(0,r.nZ)();return!!(null===(e=t.value["mutate:updateStyleToSameLevel"])||void 0===e?void 0:e.disabled)})),updateStyle:()=>{const{executeAction:e}=(0,r.nZ)();e({name:"mutate:updateStyle"})},updateStyleToSameLevel:()=>{const{executeAction:e}=(0,r.nZ)();e({name:"mutate:updateStyleToSameLevel"})}}),Ge=()=>({isResetStyleDisabled:(0,i.Fl)((()=>{var e;const{actionStates:t}=(0,r.nZ)();return!!(null===(e=t.value["mutate:resetStyle"])||void 0===e?void 0:e.disabled)})),resetStyle:()=>{const{executeAction:e}=(0,r.nZ)();e({name:"mutate:resetStyle"})}}),Ve=l("topicQuickStyle",(e=>e.filter((({value:e})=>!!$[String(e)])).map((({value:e})=>{const t=e,a=$[t];return{value:t,label:(null==a?void 0:a.label)||t}})).sort(((e,t)=>$[e.value].sortIndex-$[t.value].sortIndex))||[])),He=l("topicShapeClass",B("topic")),ze=l("topicShapeClass",B("callout")),Ue=l("relationshipShapeClass",B("relationship")),qe=l("boundaryShapeClass",B("boundary")),_e=l("mapBackgroundColorString"),Qe=l("topicFillPattern",u),Je=l("boundaryFillPattern",u),Ye=l("textFontStyle",(e=>e.filter((({value:e})=>{const[t,a]=String(e).split("|");return!!g[a]})).map((({value:e})=>{const[t,a,i]=String(e).split("|"),r="true"===i,n=g[a];return{value:e,label:r?`${n.label} Italic`:n.label,style:`font-weight: ${a}; font-style: ${r?"italic":"normal"}`}})).sort(((e,t)=>{const a=String(e.value).split("|")[1],i=String(t.value).split("|")[1],r=g[a],n=g[i];return r.sortIndex-n.sortIndex}))||[])),Xe=l("textFontSize"),Ke=l("textFontItalic"),et=l("textFontBold"),tt=l("textColorString"),at=l("textAlign",(e=>e.filter((({value:e})=>!!N[String(e)])).map((({value:e})=>({value:e,...N[e]}))).sort(((e,t)=>N[e.value].sortIndex-N[t.value].sortIndex))||[])),it=l("textDecorationLineThrough"),rt=l("textTransform",(e=>e.filter((({value:e})=>!!M[String(e)])).map((({value:e})=>({value:e,...M[e]||{label:e}}))).sort(((e,t)=>M[e.value].sortIndex-M[t.value].sortIndex))||[])),nt=l("textDecorationUnderLine"),ot=l("minorStructureClass",(e=>e.filter((({value:e})=>!!W[String(e)])).map((({value:e})=>{const t=W[e];return{value:e,label:(null==t?void 0:t.label)||e}})).sort(((e,t)=>W[e.value].sortIndex-W[t.value].sortIndex))||[])),lt=l("cellMergingForMatrix",(e=>e.filter((({value:e})=>!!T[String(e)])).map((({value:e})=>{const t=T[e];return{value:e,label:(null==t?void 0:t.label)||e}}))||[])),st=l("numberOfColumnsForGridStructure"),dt=l("relationshipLineArrowEndClass",m),ut=l("relationshipBeginArrowClass",(e=>e.filter((({value:e})=>!!L[String(e)])).map((({value:e})=>{const t=L[e];return{value:e,label:(null==t?void 0:t.label)||e,...(null==t?void 0:t.img)&&{img:(0,s.ju)(`static/assets/images/shapes/arrow-shape/normal/${t.img}.svg`),activeImg:(0,s.ju)(`static/assets/images/shapes/arrow-shape/small/${t.img}.svg`)}}})).sort(((e,t)=>L[e.value].sortIndex-L[t.value].sortIndex))||[])),ct=l("relationshipLineColorString"),gt=l("relationshipLinePattern",v("relationship")),mt=l("relationshipLineWidth",S),ht=l("topicMultiBranchColorSet",(e=>e.map(((t,a)=>({...t,trialRequest:a>=e.length-6?"action.switchColorBranch":null}))))),pt=l("topicMultiBranchColoringEnabled"),vt=l("topicTaperedLineEnabled"),bt=l("globalLineWidth",S),xt=l("globalLineColorString"),ft=l("mainBranchTaperedLineEnabled"),wt=l("mainBranchMultiLineColoringEnabled"),St=l("mainBranchMultiLineColorSet",(e=>e.map(((t,a)=>({...t,trialRequest:a>=e.length-6?"action.switchColorBranch":null}))))),It=l("justifyTopicAlignmentEnabled"),yt=l("mainBranchFreePositioningEnabled"),Zt=l("floatingTopicFreePositioningEnabled"),Wt=l("topicOverlappingEnabled"),Tt=l("autoBalancedMapEnabled"),Lt=l("compactLayoutEnabled"),Bt=l("topicImageWidth"),Pt=l("topicImageHeight"),Ct=l("topicImageLockRatio"),Ft=l("topicImageShadowVisible"),Dt=l("topicImageOpacity")},67463:(e,t,a)=>{"use strict";function i(e){return new Promise(((t,a)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=e=>{a(e)},i.src=e}))}a.d(t,{p:()=>i})}}]);