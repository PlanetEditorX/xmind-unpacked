(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[371],{21896:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o(23645),r=o.n(n)()((function(t){return t[1]}));r.push([t.id,".uk-textarea[data-v-923cbfb8] {\n  height: 134px;\n  background-color: transparent;\n  border: none;\n}\n.uk-textarea[data-v-923cbfb8]:focus {\n  background-color: transparent;\n}\n.preview-container[data-v-923cbfb8] {\n  box-sizing: border-box;\n  margin-top: 10px;\n  height: 76px;\n  width: 362px;\n  padding: 6px;\n  min-width: 100%;\n}\n.equation-help[data-v-923cbfb8] {\n  opacity: 0.3;\n}\n.equation-help[data-v-923cbfb8]:hover {\n  opacity: 0.6;\n}\n",""]);const a=r},48123:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o(23645),r=o.n(n)()((function(t){return t[1]}));r.push([t.id,".topic-popover-overlay {\n  display: block;\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1010;\n  background-color: transparent;\n  border: none;\n}\n",""]);const a=r},96874:t=>{t.exports=function(t,e,o){switch(o.length){case 0:return t.call(e);case 1:return t.call(e,o[0]);case 2:return t.call(e,o[0],o[1]);case 3:return t.call(e,o[0],o[1],o[2])}return t.apply(e,o)}},29932:t=>{t.exports=function(t,e){for(var o=-1,n=null==t?0:t.length,r=Array(n);++o<n;)r[o]=e(t[o],o,t);return r}},34865:(t,e,o)=>{var n=o(89465),r=o(77813),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,o){var i=t[e];a.call(t,e)&&r(i,o)&&(void 0!==o||e in t)||n(t,e,o)}},89465:(t,e,o)=>{var n=o(38777);t.exports=function(t,e,o){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[e]=o}},21078:(t,e,o)=>{var n=o(62488),r=o(37285);t.exports=function t(e,o,a,i,u){var l=-1,p=e.length;for(a||(a=r),u||(u=[]);++l<p;){var s=e[l];o>0&&a(s)?o>1?t(s,o-1,a,i,u):n(u,s):i||(u[u.length]=s)}return u}},97786:(t,e,o)=>{var n=o(71811),r=o(40327);t.exports=function(t,e){for(var o=0,a=(e=n(e,t)).length;null!=t&&o<a;)t=t[r(e[o++])];return o&&o==a?t:void 0}},13:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},25970:(t,e,o)=>{var n=o(63012),r=o(79095);t.exports=function(t,e){return n(t,e,(function(e,o){return r(t,o)}))}},63012:(t,e,o)=>{var n=o(97786),r=o(10611),a=o(71811);t.exports=function(t,e,o){for(var i=-1,u=e.length,l={};++i<u;){var p=e[i],s=n(t,p);o(s,p)&&r(l,a(p,t),s)}return l}},10611:(t,e,o)=>{var n=o(34865),r=o(71811),a=o(65776),i=o(13218),u=o(40327);t.exports=function(t,e,o,l){if(!i(t))return t;for(var p=-1,s=(e=r(e,t)).length,c=s-1,v=t;null!=v&&++p<s;){var d=u(e[p]),f=o;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(p!=c){var h=v[d];void 0===(f=l?l(h,d,v):void 0)&&(f=i(h)?h:a(e[p+1])?[]:{})}n(v,d,f),v=v[d]}return t}},56560:(t,e,o)=>{var n=o(75703),r=o(38777),a=o(6557),i=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:a;t.exports=i},80531:(t,e,o)=>{var n=o(62705),r=o(29932),a=o(1469),i=o(33448),u=n?n.prototype:void 0,l=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return r(e,t)+"";if(i(e))return l?l.call(e):"";var o=e+"";return"0"==o&&1/e==-Infinity?"-0":o}},71811:(t,e,o)=>{var n=o(1469),r=o(15403),a=o(55514),i=o(79833);t.exports=function(t,e){return n(t)?t:r(t,e)?[t]:a(i(t))}},38777:(t,e,o)=>{var n=o(10852),r=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},99021:(t,e,o)=>{var n=o(85564),r=o(45357),a=o(30061);t.exports=function(t){return a(r(t,void 0,n),t+"")}},222:(t,e,o)=>{var n=o(71811),r=o(35694),a=o(1469),i=o(65776),u=o(41780),l=o(40327);t.exports=function(t,e,o){for(var p=-1,s=(e=n(e,t)).length,c=!1;++p<s;){var v=l(e[p]);if(!(c=null!=t&&o(t,v)))break;t=t[v]}return c||++p!=s?c:!!(s=null==t?0:t.length)&&u(s)&&i(v,s)&&(a(t)||r(t))}},37285:(t,e,o)=>{var n=o(62705),r=o(35694),a=o(1469),i=n?n.isConcatSpreadable:void 0;t.exports=function(t){return a(t)||r(t)||!!(i&&t&&t[i])}},15403:(t,e,o)=>{var n=o(1469),r=o(33448),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var o=typeof t;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=t&&!r(t))||(i.test(t)||!a.test(t)||null!=e&&t in Object(e))}},24523:(t,e,o)=>{var n=o(88306);t.exports=function(t){var e=n(t,(function(t){return 500===o.size&&o.clear(),t})),o=e.cache;return e}},45357:(t,e,o)=>{var n=o(96874),r=Math.max;t.exports=function(t,e,o){return e=r(void 0===e?t.length-1:e,0),function(){for(var a=arguments,i=-1,u=r(a.length-e,0),l=Array(u);++i<u;)l[i]=a[e+i];i=-1;for(var p=Array(e+1);++i<e;)p[i]=a[i];return p[e]=o(l),n(t,this,p)}}},30061:(t,e,o)=>{var n=o(56560),r=o(21275)(n);t.exports=r},21275:t=>{var e=Date.now;t.exports=function(t){var o=0,n=0;return function(){var r=e(),a=16-(r-n);if(n=r,a>0){if(++o>=800)return arguments[0]}else o=0;return t.apply(void 0,arguments)}}},55514:(t,e,o)=>{var n=o(24523),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,o,n,r){e.push(n?r.replace(a,"$1"):o||t)})),e}));t.exports=i},40327:(t,e,o)=>{var n=o(33448);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},75703:t=>{t.exports=function(t){return function(){return t}}},85564:(t,e,o)=>{var n=o(21078);t.exports=function(t){return(null==t?0:t.length)?n(t,1):[]}},79095:(t,e,o)=>{var n=o(13),r=o(222);t.exports=function(t,e){return null!=t&&r(t,e,n)}},6557:t=>{t.exports=function(t){return t}},88306:(t,e,o)=>{var n=o(83369);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var o=function(){var n=arguments,r=e?e.apply(this,n):n[0],a=o.cache;if(a.has(r))return a.get(r);var i=t.apply(this,n);return o.cache=a.set(r,i)||a,i};return o.cache=new(r.Cache||n),o}r.Cache=n,t.exports=r},78718:(t,e,o)=>{var n=o(25970),r=o(99021)((function(t,e){return null==t?{}:n(t,e)}));t.exports=r},79833:(t,e,o)=>{var n=o(80531);t.exports=function(t){return null==t?"":n(t)}},60371:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>h});var n=o(2954),r=o(87141),a=o(46016),i=o(84374),u=o(18621),l=o(90435),p=o(54856),s=o(69361),c=o(67214);var v=o(23168),d=o(53775);const f=(0,n.aZ)({__name:"equation-editor",setup(t){const{topicRect:e,equationValue:o,saveEquation:f,openEquationHelp:h,generateEquaitonPreview:g}=(()=>{var t;const{createXapUrlByArrayBuffer:e,generateMathJaxSVG:o,executeAction:r,domRectForSelection:a,properties:v,selection:d}=(0,i.nZ)(),f=null===(t=d.value)||void 0===t?void 0:t.modelIds,h=(0,n.Fl)((()=>{var t,e;return null===(e=null===(t=v.value)||void 0===t?void 0:t.equation.value)||void 0===e?void 0:e.text}));return{topicRect:(0,n.Fl)((()=>{const{height:t,width:e,x:o,y:n}=a.value||{};return{height:t,width:e,left:o,top:n}})),equationValue:h,saveEquation:async t=>{if("string"!=typeof t)return;if(0===t.length)return void r({name:"mutateTarget:equation",payload:{topicIds:f,equation:null}});if(t===h.value)return;const n=await o(t),a=i.ZQ.getSVGUri(n),u=await(0,s.sA)(a,1,"blob","png");if(!u)return void r({name:"mutateTarget:equation",payload:{topicIds:f,equation:null}});const l=await u.arrayBuffer(),p=await e(l,".png"),v=URL.createObjectURL(u),{width:d}=await(0,c.N8)(v);URL.revokeObjectURL(v);const g={text:t,fallbackImageResourcePath:null==p?void 0:p.slice(4),width:d};r({name:"mutateTarget:equation",payload:{topicIds:f,equation:g}})},openEquationHelp:()=>{(0,u.L9)({eventCategory:"Equation",eventAction:"clickEquationHelp"}),l.ZP.fetch(p.lf.GO_EQUATION_HELP,{})},generateEquaitonPreview:async t=>{if(!t)return;const e=await o(t);return(new DOMParser).parseFromString(e,"image/svg+xml").firstChild}}})(),{T:x}=(0,r.JE)(),{setPopoverEditorVisible:w}=(0,a.$)(),y=(0,n.iH)(""),b=(0,n.iH)(),m=(0,n.Fl)((()=>(0,a.$)().zenMode?(0,a.$)().zenModeNightMode:"dark"===(0,r.S)().appearance)),k=(0,d.Ds)((async t=>{if(b.value&&"string"==typeof t){for(;b.value.hasChildNodes();)b.value.removeChild(b.value.lastChild);if(t=t.trim()){const e=window.getComputedStyle(b.value),o=parseFloat(e.height)-12,n=parseFloat(e.width)-12,r=await g(t);let a=0,i=0;if(r){b.value.append(r);const t=window.getComputedStyle(r);a=parseFloat(t.height),i=parseFloat(t.width),b.value.removeChild(r)}const u=Math.min(o/a,n/i,1);r.style.height=a*u+"px",r.style.width=i*u+"px",b.value.append(r)}else{const t=document.createElement("span");t.classList.add("uk-text-bold"),t.style.opacity="0.3",t.style.fontSize="13px",t.innerText=x("Equation Preview"),b.value.append(t)}}}),0);return(0,n.bv)((()=>{var t;y.value=null!==(t=o.value)&&void 0!==t?t:"",k(y.value),(0,u.L9)({eventCategory:"Equation",eventAction:""===y.value?"newEquation":"editEquation"})})),(0,n.Jd)((async()=>{var t;await f(y.value);""===(null!==(t=o.value)&&void 0!==t?t:"")&&(0,u.L9)({eventCategory:"Equation",eventAction:"saveEmptyEquation"})})),(0,n.YP)((()=>(0,r.S)().language),(()=>k(y.value))),(0,n.YP)((()=>y.value),(()=>k(y.value))),{__sfc:!0,topicRect:e,equationValue:o,saveEquation:f,openEquationHelp:h,generateEquaitonPreview:g,$T:x,setPopoverEditorVisible:w,equation:y,previewContainer:b,EQUATION_PREVIEW_PADDING:6,isDarkMode:m,handleUpdatePreview:k,handleKeydown:t=>{"Tab"===t.code&&(t.preventDefault(),t.stopPropagation())},close:async()=>{"equation"===(0,a.$)().popoverEditorVisible&&w("")},TopicPopoverContainer:v.Z}}});o(85760);const h=(0,o(51900).Z)(f,(function(){var t=this,e=t._self._c,o=t._self._setupProxy;return e(o.TopicPopoverContainer,{attrs:{"popover-width":394,"popover-height":280,"topic-height":o.topicRect.height,"topic-width":o.topicRect.width,"topic-left":o.topicRect.left,"topic-top":o.topicRect.top},on:{"popover-close":o.close}},[e("div",{staticClass:"uk-padding uk-flex uk-flex-column uk-flex-middle uk-height-1-1"},[e("div",{staticClass:"uk-flex uk-flex-between uk-width-1-1 uk-flex-middle",staticStyle:{"margin-bottom":"12px"}},[e("span",{staticClass:"uk-text-bold uk-margin-remove-bottom",staticStyle:{"font-size":"14px","line-height":"14px"}},[t._v("\n        "+t._s(o.$T("Equation"))+"\n      ")]),t._v(" "),e("span",{staticClass:"equation-help uk-flex-no-shrink uk-flex-no-grow",staticStyle:{outline:"none"},attrs:{tabindex:"-1","uk-icon":"icon: question; ratio: 1.1"},on:{click:o.openEquationHelp}})]),t._v(" "),e("div",{staticClass:"uk-height-expand uk-width-1-1"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:o.equation,expression:"equation"}],staticClass:"uk-box-shadow-none uk-textarea uk-width-1-1 uk-height-1-1 uk-padding-remove",attrs:{autofocus:"",spellcheck:"false",placeholder:o.$T("Type or paste LaTeX")},domProps:{value:o.equation},on:{keydown:o.handleKeydown,input:function(t){t.target.composing||(o.equation=t.target.value)}}}),t._v(" "),e("div",{ref:"previewContainer",staticClass:"preview-container uk-flex uk-flex-center uk-flex-middle",style:{"background-color":o.isDarkMode?"rgba(255,255,255, .1)":"rgba(0,0,0, .02)",fill:o.isDarkMode?"white":"black"}})])])])}),[],!1,null,"923cbfb8",null).exports},23168:(t,e,o)=>{"use strict";o.d(e,{Z:()=>l});var n=o(2954),r=o(78718),a=o.n(r),i=o(84374);const u=(0,n.aZ)({__name:"topic-popover-container",props:{topicHeight:null,topicWidth:null,topicLeft:null,topicTop:null,popoverWidth:null,popoverHeight:{default:0},viewPortPadding:null,autoShowOnMounted:{type:Boolean,default:!0}},emits:["popover-close"],setup(t,{emit:e}){const o=t,r=(0,n.FN)(),u=(0,n.iH)(null),l=(0,n.Fl)((()=>{const{viewPortPadding:t}=o;return void 0===t?16:t})),p=(0,n.Fl)((()=>{const{autoShowOnMounted:t}=o;return void 0===t||t})),s=(0,n.Fl)((()=>({top:o.topicTop+"px",left:o.topicLeft+"px",width:o.topicWidth+"px",height:o.topicHeight+"px"}))),c=t=>{const e=t.getBoundingClientRect();return Object.assign({},a()(e,"top","left","right","bottom","width","height"),{offsetTop:t.offsetTop,offsetLeft:t.offsetLeft})},v=()=>{const t=document.querySelector("#editor-container");return t?c(t):null},d=()=>{const t=v();if(!t)return!1;const{popoverHeight:e,popoverWidth:n,topicTop:r,topicLeft:a,topicWidth:u,topicHeight:p}=o,s=a+v().left,c=r+v().top,d=t.offsetTop>c,f=t.offsetTop+t.height<p+c+e,h=s-(t.left+t.offsetLeft)<n/2-u/2,g=t.left+t.offsetLeft+t.width<s+u/2+n/2,x=p+e>t.height,w=u>t.width;let y=t.offsetLeft,b=t.offsetTop;d&&(b=c-l.value),f&&(b=c+p+o.popoverHeight-t.height+l.value),x&&(b=Math.max(p-t.height,0)+c+o.popoverHeight);const m=Math.max((o.popoverWidth-u)/2,0);if(h&&(y=s-t.left-l.value-m),g&&(y=s-t.left+u-t.width+m+l.value),w&&(y=s+m),d||f||h||g||x||w){const{moveViewport:t}=(0,i.nZ)();return t(y,b),!0}return!0},f=async()=>{if(!await d())return h(!1);h(!0)},h=t=>{setTimeout((()=>{r.proxy.$withUIKit((e=>{const o=e.pop(u.value);o&&(t?o.show():o.hide())}))}),50)};return(0,n.bv)((()=>{p.value&&f(),(0,n.Y3)((()=>{r.proxy.$withUIKit((t=>{t.util.on(u.value,"hidden",(()=>{e("popover-close")}))}))}))})),{__sfc:!0,props:o,emits:e,vm:r,popoverEl:u,viewPortPadding:l,isAutoShowOnMounted:p,topicRectStyle:s,getElementRect:c,getWindowBounds:v,moveViewport:d,showPopover:f,_togglePopover:h}}});o(53193);const l=(0,o(51900).Z)(u,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}]},[e("div",{staticClass:"uk-position-absolute",style:t._self._setupProxy.topicRectStyle}),t._v(" "),e("div",{ref:"popoverEl",style:{width:t.popoverWidth+"px",height:t.popoverHeight?t.popoverHeight+"px":"auto"},attrs:{"uk-popover":"","data-cls-overlay":"topic-popover-overlay","data-sel-close":".topic-popover-close-trigger"}},[t._t("default")],2)])}),[],!1,null,null,null).exports},85760:(t,e,o)=>{var n=o(21896);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);(0,o(45346).Z)("53276064",n,!0,{})},53193:(t,e,o)=>{var n=o(48123);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);(0,o(45346).Z)("915f5348",n,!0,{})}}]);