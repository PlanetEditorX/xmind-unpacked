(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[6263],{54639:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,".vk-window-title-bar-expanded[data-v-6e0fe023] {\n  border-bottom: none;\n  background: var(--color-fill-container);\n  -webkit-app-region: none;\n}\n.uk-darwin .vk-window-title-bar-expanded[data-v-6e0fe023] {\n  -webkit-app-region: drag;\n}\n.app-region-enabled[data-v-6e0fe023] {\n  -webkit-app-region: drag;\n}\n.uk-win32 .top-bar[data-v-6e0fe023],\n.uk-linux .top-bar[data-v-6e0fe023] {\n  padding-right: 132px;\n}\n.top-bar-title-bar[data-v-6e0fe023] {\n  min-width: 216px;\n  max-width: 416px;\n}\n.top-bar-title-bar-container[data-v-6e0fe023] {\n  max-width: 320px;\n  min-width: 120px;\n  margin-left: 96px;\n}\n.uk-win32 .top-bar-title-bar-container[data-v-6e0fe023],\n.uk-linux .top-bar-title-bar-container[data-v-6e0fe023] {\n  margin-left: 0px;\n}\n.top-bar-title-bar-title[data-v-6e0fe023] {\n  min-width: 52px;\n  max-width: 252px;\n  color: var(--color-navigation-text-title);\n}\n.top-bar-title-bar-subtitle[data-v-6e0fe023] {\n  margin-top: 2px;\n  min-width: 80px;\n  max-width: 280px;\n  color: var(--color-navigation-text-subtitle);\n}\n.top-bar-icon-item-img[data-v-6e0fe023] {\n  height: 22px;\n  width: 32px;\n}\n.top-bar-placeholder[data-v-6e0fe023] {\n  min-width: 16px;\n}\n.top-bar-placeholder-2[data-v-6e0fe023] {\n  width: 14%;\n  max-width: 14%;\n}\n.top-bar-placeholder-3[data-v-6e0fe023] {\n  width: 7%;\n  max-width: 7%;\n}\n.top-bar-placeholder-outline[data-v-6e0fe023] {\n  width: 20%;\n  max-width: 20%;\n}\n.top-bar-evaluation-btn[data-v-6e0fe023] {\n  margin-left: 20px;\n  margin-right: 12px;\n}\n.top-bar-paywall-d-trigger[data-v-6e0fe023] {\n  width: 132px;\n  margin-left: 20px;\n  margin-right: 12px;\n}\n.top-bar-evaluation-placeholder[data-v-6e0fe023] {\n  width: 24px;\n}\n.top-bar-tool-bar-item-placeholder[data-v-6e0fe023] {\n  min-width: 10px;\n  max-width: 16px;\n}\n.toolbar-divider-vertical[data-v-6e0fe023] {\n  width: 1px;\n  height: 16px;\n  background: var(--color-toolbar-divider);\n}\n.shrink-1 .top-bar-tool-bar-item-placeholder[data-v-6e0fe023] {\n  width: 16px;\n}\n.shrink-2 .top-bar-placeholder[data-v-6e0fe023]:not(.top-bar-placeholder-1) {\n  flex: none;\n  width: 16px;\n}\n.shrink-2 .top-bar-tool-bar-item-placeholder[data-v-6e0fe023] {\n  flex: auto;\n}\n.shrink-4 .top-bar-title-bar[data-v-6e0fe023],\n.shrink-5 .top-bar-title-bar[data-v-6e0fe023] {\n  width: 216px;\n}\n.shrink-4 .top-bar-title-bar-title[data-v-6e0fe023],\n.shrink-5 .top-bar-title-bar-title[data-v-6e0fe023] {\n  width: 52px;\n}\n.shrink-4 .top-bar-title-bar-subtitle[data-v-6e0fe023],\n.shrink-5 .top-bar-title-bar-subtitle[data-v-6e0fe023] {\n  width: 80px;\n}\n.shrink-4 .top-bar-evaluation-btn[data-v-6e0fe023],\n.shrink-5 .top-bar-evaluation-btn[data-v-6e0fe023],\n.shrink-6 .top-bar-evaluation-btn[data-v-6e0fe023],\n.shrink-4 .top-bar-paywall-d-trigger[data-v-6e0fe023],\n.shrink-5 .top-bar-paywall-d-trigger[data-v-6e0fe023],\n.shrink-6 .top-bar-paywall-d-trigger[data-v-6e0fe023] {\n  display: none;\n}\n.shrink-4.evaluation-top-bar .top-bar-evaluation-bar[data-v-6e0fe023],\n.shrink-5.evaluation-top-bar .top-bar-evaluation-bar[data-v-6e0fe023],\n.shrink-6.evaluation-top-bar .top-bar-evaluation-bar[data-v-6e0fe023],\n.shrink-4.paywall-d-top-bar .top-bar-evaluation-bar[data-v-6e0fe023],\n.shrink-5.paywall-d-top-bar .top-bar-evaluation-bar[data-v-6e0fe023],\n.shrink-6.paywall-d-top-bar .top-bar-evaluation-bar[data-v-6e0fe023] {\n  margin-left: 24px;\n}\n.shrink-6 .top-bar-feature-item[data-v-6e0fe023] {\n  display: none;\n}\n",""]);const i=o},14590:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,".main-menu-btn[data-v-4af4a6b6] {\n  margin-right: 16px;\n  margin-left: 12px;\n  height: 22px;\n  width: 32px;\n}\n",""]);const i=o},21249:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,".paywall-d-trigger[data-v-21c3ea66] {\n  position: relative;\n  height: 20px;\n  padding: 0 4px 0 6px;\n  font-size: 10px;\n  font-weight: 600;\n  line-height: 14px;\n  color: #fff;\n  background: #000;\n  border-radius: 4px;\n  overflow: hidden;\n}\n.paywall-d-trigger-timer[data-v-21c3ea66] {\n  font-weight: 700;\n  letter-spacing: 0.374px;\n}\n.paywall-d-trigger-timer .paywall-d-trigger-timer-item[data-v-21c3ea66] {\n  width: 13px;\n  height: 14px;\n}\n.paywall-d-trigger-timer .paywall-d-trigger-timer-divider[data-v-21c3ea66] {\n  margin: 2px;\n  color: rgba(255, 255, 255, 0.4);\n}\n",""]);const i=o},88047:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,".share-tutorial-popover[data-v-281a81d4] {\n  padding: 20px;\n  width: 356px;\n  height: 381px;\n  box-sizing: border-box;\n}\n.share-tutorial-popover-title[data-v-281a81d4] {\n  margin: 0;\n  padding-bottom: var(--spacing-padding-l);\n  color: var(--color-text-primary);\n}\n.share-tutorial-popover-resource[data-v-281a81d4] {\n  padding-bottom: var(--spacing-padding-l);\n}\n.share-tutorial-popover-desc[data-v-281a81d4] {\n  margin: 0;\n  padding-bottom: var(--spacing-padding-l);\n  color: var(--color-text-primary);\n}\n",""]);const i=o},69289:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,".top-bar-tool-bar-item[data-v-28cb2910] {\n  height: 44px;\n  padding: 2px 0;\n  box-sizing: border-box;\n}\n.top-bar-tool-bar-item-btn[data-v-28cb2910] {\n  display: inline-flex;\n  height: 24px;\n  width: 32px;\n}\n.top-bar-tool-bar-item-btn.is-icon-only[data-v-28cb2910] {\n  height: 32px;\n}\n.top-bar-tool-bar-item-label[data-v-28cb2910] {\n  color: var(--color-toolbar-text-normal);\n}\n.top-bar-tool-bar-item-label.is-disabled[data-v-28cb2910] {\n  color: var(--color-toolbar-text-disable);\n}\n",""]);const i=o},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=e(t);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(o[r]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);n&&o[s[0]]||(a&&(s[2]?s[2]="".concat(a," and ").concat(s[2]):s[2]=a),t.push(s))}},t}},79887:(e,t,a)=>{"use strict";a.d(t,{AF:()=>d,GX:()=>r,PI:()=>m,dm:()=>s,eJ:()=>u,eb:()=>l,n0:()=>i,tU:()=>p});var n=a(96829);var o;!function(e){e.EDIT="EDIT",e.FEATURE="FEATURE",e.PANEL="PANEL"}(o||(o={}));const i={prefix:["topic","subtopic"],dynamic:["relationship","summary","boundary","marker"],postfix:["insert"]},r={prefix:["indent","outdent"],dynamic:[],postfix:["insert"]},l=["zen","presentation"],s=["format"],d=["icon"],c={insert:{type:o.EDIT,label:(0,n.WZ)("Insert"),tooltip:(0,n.WZ)("Add other elements to selected topics."),commandId:"editor.toggleInsertMenu",icon:"add"}},u={...c,topic:{type:o.EDIT,label:(0,n.WZ)("Topic"),tooltip:(0,n.WZ)("Add a topic after the selected topic."),commandId:"editor.addTopic",icon:"new-topic"},subtopic:{type:o.EDIT,label:(0,n.WZ)("Subtopic"),tooltip:(0,n.WZ)("Add a child topic to the selected topic."),commandId:"editor.addSubTopic",icon:"new-subtopic"},relationship:{type:o.EDIT,label:(0,n.WZ)("Relationship"),tooltip:(0,n.WZ)("Create relationship between 2 topics."),commandId:"editor.addRelationship",icon:"relationship"},summary:{type:o.EDIT,label:(0,n.WZ)("Summary"),tooltip:(0,n.WZ)("Add a summary to the selected topics."),commandId:"editor.addSummary",icon:"summary"},boundary:{type:o.EDIT,label:(0,n.WZ)("Boundary"),tooltip:(0,n.WZ)("Group the selected topics with boundary."),commandId:"editor.addBoundary",icon:"boundary"},marker:{type:o.EDIT,label:(0,n.WZ)("Marker"),tooltip:(0,n.WZ)("Add a marker to selected topics."),commandId:"workbench.toggleMarkerPanel",icon:"marker"},zen:{type:o.FEATURE,label:(0,n.WZ)("ZEN"),tooltip:(0,n.WZ)("Access into ZEN Mode to focus on your ideas."),commandId:"workbench.toggleZenMode",icon:"zen-mode"},presentation:{type:o.FEATURE,label:(0,n.WZ)("Pitch"),tooltip:(0,n.WZ)("Access into Pitch Mode to present your ideas."),commandId:"editor.enterPitchMode",icon:"pitch"},format:{type:o.PANEL,label:(0,n.WZ)("Format"),tooltip:(0,n.WZ)("Show or hide style and format options."),commandId:"workbench.toggleRightPanel",icon:"right-panel"}},p={...c,indent:{type:o.EDIT,label:(0,n.WZ)("Indent"),tooltip:(0,n.WZ)("Indent the selected topic to next level."),commandId:"outliner.indent",icon:"indent"},outdent:{type:o.EDIT,label:(0,n.WZ)("Outdent"),tooltip:(0,n.WZ)("Outdent the selected topic to previous level."),commandId:"outliner.outdent",icon:"outdent"},icon:{type:o.PANEL,label:(0,n.WZ)("Marker"),tooltip:(0,n.WZ)("Add a marker to selected topics."),commandId:"workbench.toggleRightPanel",icon:"marker"}},m=[{label:(0,n.WZ)("Note"),commandId:"editor.showNotesEditor",icon:"notes"},{label:(0,n.WZ)("Label"),commandId:"editor.showLabelEditor",icon:"label"},{label:(0,n.WZ)("Task"),icon:"todo",commandId:"editor.addTodo"},{label:(0,n.WZ)("Link(noun)"),submenu:[{icon:"link-webpage",label:(0,n.WZ)("Webpage"),commandId:"editor.showHyperlinkEditor"},{icon:"link-topic",label:(0,n.WZ)("Topic"),commandId:"editor.showTopiclinkEditor"},{icon:"link-local-file",label:(0,n.WZ)("Local File"),commandId:"editor.addFileLink"},{icon:"link-local-folder",label:(0,n.WZ)("Local Folder"),commandId:"editor.addFolderLink"}].filter((e=>Boolean(e))),icon:"link"},"---",{label:(0,n.WZ)("Attachment"),commandId:"editor.addAttachmentOnNewTopic",icon:"attachment"},{label:(0,n.WZ)("Audio Note"),commandId:"editor.addAudioOnNewTopic",icon:"audionote"},"---",{label:(0,n.WZ)("Sticker"),commandId:"workbench.toggleStickerPanel",icon:"sticker"},{label:(0,n.WZ)("Illustration"),commandId:"workbench.toggleIllustrationPanel",icon:"illustration"},{label:(0,n.WZ)("Local Image"),commandId:"editor.addLocalImage",icon:"localimage"},{label:(0,n.WZ)("Equation"),commandId:"editor.showEquationEditor",icon:"equation"}]},14448:(e,t,a)=>{"use strict";a.d(t,{T:()=>o,V:()=>n});const n=(e,t)=>{const a=new Date(t).getTime()-new Date(e).getTime(),n=a%36e5,o=n%6e4;return{hour:String(Math.floor(a/36e5)).padStart(2,"0"),minute:String(Math.floor(n/6e4)).padStart(2,"0"),second:String(Math.floor(o/1e3)).padStart(2,"0")}},o=(e,t)=>{const a=(Date.now()-new Date(e).getTime())/1e3,n=Math.floor(a/60/60/24);if(isNaN(n))return"";if(0===n)switch(!0){case a<60:return t("Just now");case a<120:return t("1 minute ago");case a<3600:return t("$1 minutes ago",`${Math.floor(a/60)}`);case a<7200:return t("1 hour ago");case a<86400:return t("$1 hours ago",`${Math.floor(a/60/60)}`)}switch(!0){case 1===n:return t("Yesterday");case n<7:return t("$1 days ago",`${n}`);case n<31:return t("$1 weeks ago",`${Math.ceil(n/7)}`);case n<62:return t("1 month ago");case n<372:return t("$1 months ago",`${Math.ceil(n/31)}`);case n<744:return t("1 year ago");default:return t("$1 years ago",`${Math.ceil(n/372)}`)}}},57507:(e,t,a)=>{"use strict";a.d(t,{I:()=>r,k:()=>i});var n=a(67657);const{Menu:o}=n,i=(e,t={})=>{if(!e||!e.length)return;const a=o.buildFromTemplate(e);return a.popup({window:n.getCurrentWindow(),...t}),a},r=()=>{const e=o.getApplicationMenu();return e&&e.items||[]}},5973:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(2954),o=a(87141),i=a(54856),r=a(90435);const l=(0,n.aZ)({__name:"evaluation-mode",setup(e){const t=(0,o.JE)().T,a=(0,n.Fl)((()=>t("Upgrade Now")));return{__sfc:!0,$T:t,evaluationModeLabel:a,handleUpgrade:async()=>{await r.ZP.fetch(i.Gy,{name:"action.upgrade",channel:(0,i.gk)(window.editorId)})}}}});const s=(0,a(51900).Z)(l,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-button-primary vk-size-small uk-text-truncate",attrs:{type:"button"},on:{click:a.handleUpgrade}},[e._v("\n  "+e._s(a.evaluationModeLabel)+"\n")])}),[],!1,null,"be75ee3a",null).exports},66263:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var n=a(2954),o=a(71017),i=a.n(o),r=a(7104),l=a(57507),s=a(87141),d=a(63111),c=a(5893),u=a(54856),p=a(90435),m=a(46016),v=a(53775),h=a(79887),b=a(5973),f=a(88385),g=a(58905),y=a(27724),w=a(89014);const k=(0,n.aZ)({__name:"index",props:{title:{default:""},isDirty:{type:Boolean,default:!1},isSaving:{type:Boolean,default:!1},language:null,systemAppearance:null,isOutlineMode:{type:Boolean},isActivationValid:{type:Boolean},isPDVisible:{type:Boolean},isRightbarVisible:{type:Boolean},isIconOnly:{type:Boolean},canHandleCommand:null,isRegisterAppRegionEvent:{type:Boolean,default:!1},isEditorTabChange:{type:Boolean,default:!1},isActivateEditor:{type:Boolean,default:!1},isShareTutorialVisible:{type:Boolean,default:!1}},emits:["on-insert-menu-item-click","on-icon-only-change","on-commands-register","on-toolbar-item-click"],setup(e,{emit:t}){const a=e,o=!1,k=(0,s.JE)().T,x=(0,n.iH)("shrink-1"),_=(0,n.iH)(null),I=(0,n.iH)(null),T=(0,n.iH)(null),C=(0,n.iH)(null),M=(0,n.iH)(null),A=(0,n.iH)(null),E=(0,n.iH)(null),S=(0,n.iH)(new Map),B=(0,n.iH)(new Map),Z=(0,n.iH)({}),$=(0,n.iH)([]),W=(0,n.iH)(!1),D=(0,n.iH)(d.Uv),F=(0,n.Fl)((()=>!!(0,s.c7)().fireflyToken)),N=(0,n.Fl)((()=>a.isOutlineMode?h.tU:h.eJ)),O=(0,n.Fl)((()=>{const e=a.isOutlineMode?h.GX:h.n0,t=$.value.length,n=[...e.prefix,...t?e.dynamic.slice(0,-t):e.dynamic,...e.postfix];return q(n)})),P=(0,n.Fl)((()=>O.value.slice(0,h.n0.prefix.length))),L=(0,n.Fl)((()=>O.value.slice(h.n0.prefix.length))),R=(0,n.Fl)((()=>a.isOutlineMode?[]:q(h.eb))),H=(0,n.Fl)((()=>{const e=a.isOutlineMode?h.AF:h.dm;return q(e)})),U=(0,n.Fl)((()=>a.isOutlineMode?h.GX.dynamic:h.n0.dynamic)),V=(0,n.Fl)((()=>U.value.reduce(((e,t)=>{const a=N.value[t];return{...e,[t]:{label:k("$$",a.label),commandId:a.commandId,icon:a.icon}}}),{}))),z=(0,n.Fl)((()=>{const e=[ae("topic"),ae("subtopic"),"---",ae("relationship"),ae("summary"),ae("boundary"),ae("marker"),"---",...h.PI],t=e.findIndex((e=>e&&"---"!==e));return e.slice(t,e.length)})),j=(0,n.Fl)((()=>(0,m.$)().pitchMode)),q=e=>e.map((e=>{const t=N.value[e];return{...t,id:e,label:k("$$",t.label),tooltip:k("$$",t.tooltip),disabled:!a.canHandleCommand(t.commandId)}})),J=e=>`${e}-${a.language}-${a.isOutlineMode?"outline":"map"}-${a.isPDVisible?"paywall-d":a.isActivationValid?"activated":"evaluation"}`,K=()=>{var e;const t=J("tool-bar");if(S.value.has(t))return S.value.get(t);const a="shrink-5"===x.value;a&&($.value=[]);const n=Array.from(T.value.children),{toolBarItemsWMap:o,toolBarItemsW:i,toolBarPlaceholderNum:r,topBarPlaceholderNum:l}=n.reduce(((e,t)=>{switch(t.dataset.type){case"tool-bar-item":e.toolBarItemsW+=t.offsetWidth,e.toolBarItemsWMap[t.dataset.id]=t.offsetWidth;break;case"tool-bar-placeholder":e.toolBarPlaceholderNum+=1;break;case"top-bar-placeholder":e.topBarPlaceholderNum+=1}return e}),{toolBarItemsWMap:{},toolBarItemsW:0,toolBarPlaceholderNum:0,topBarPlaceholderNum:0}),s=(null===(e=M.value)||void 0===e?void 0:e.offsetWidth)||(F.value?54:0),d=16*l,[c,u]=[10,16],p=[i+s+r*c+d,i+s+r*u+d];return a||(S.value.set(t,p),B.value.set(t,o)),Z.value=o,p},G=e=>{x.value=e},Y=(0,v.P2)(G,300),X=e=>{for(;$.value.length;){if(!(e>$.value[$.value.length-1].width))break;$.value.pop()}},Q=(e,t)=>{const a=J("tool-bar"),n=B.value.get(a)||Z.value,o=[];let i=t-e;for(let t=U.value.length-1;t>=0;t--){const a=U.value[t];if(!(i>0))break;o.push({id:a,width:e}),i-=n[a]}$.value=o},ee=(0,v.Ds)(((e,t)=>{X(e),Q(e,t);const a=$.value.length===h.n0.dynamic.length;G(a?"shrink-6":"shrink-5")}),150),te=(e=window.innerWidth)=>{var t,n;const o=e,[i,r]=[216,416],[l,s]=K(),[d,c,u]=[(null===(t=A.value)||void 0===t?void 0:t.offsetWidth)||132,(null===(n=E.value)||void 0===n?void 0:n.offsetWidth)||110,24],p=a.isActivationValid?u:a.isPDVisible?d:c,m=r+s+16+p,v=r+l+16+p,h=i+l+16+p,b=i+l+16+u;return o>=b&&$.value.length>0&&X(o),o>=m?Y("shrink-1"):v<=o&&o<m?Y("shrink-2"):h<=o&&o<v?Y("shrink-3"):b<=o&&o<h?Y("shrink-4"):void(o<b&&ee(o,b))},ae=e=>{if($.value.some((t=>t.id===e))){const t=V.value[e];if(!t)return null;const a=i().basename(t.icon,i().extname(t.icon));return{...t,icon:a}}return null},ne=e=>"---"===e||e&&"separator"===e.type,oe=e=>d.TK.includes(e.commandId)&&!d.WK.includes(e.commandId),ie=e=>e.submenu&&e.submenu.filter((e=>!ne(e))).every(oe),re=({item:e,isDisabled:t,ignorePro:n})=>{const o="dark"===(0,s.S)().appearance;if(!a.isActivationValid&&!n&&(oe(e)||ie(e)))return i().join((0,r.bY)(),`static/images/toolbar-insert/${e.icon}-pro${o?"-dark":""}@2x.png`);let l=`static/images/toolbar-insert/${e.icon}`;return t&&(l+="-disable"),"dark"===a.systemAppearance&&(l+="-dark"),i().join((0,r.bY)(),l+".png")},le=(e,n=!1)=>e.map((e=>{if("---"===e)return{type:"separator"};const o=!!e.submenu||a.canHandleCommand(e.commandId);return{label:k("$$",e.label),enabled:o,click:()=>t("on-insert-menu-item-click",e.commandId),...e.icon&&{icon:re({item:e,isDisabled:!o,ignorePro:n})},...e.submenu&&{submenu:le(e.submenu,ie(e))}}})),se=()=>{const e=le(z.value),t=Array.from(T.value.children).find((e=>"insert"===e.dataset.id)).getBoundingClientRect(),a={x:parseInt(String(t.x)),y:parseInt(String(t.bottom+6))},n=(0,l.k)(e,a);n.addListener("menu-will-show",(()=>{W.value=!0})),n.addListener("menu-will-close",(()=>{W.value=!1}))},de=()=>{D.value=!0},ce=()=>{D.value=!1},ue=()=>{I.value&&(I.value.addEventListener("mousedown",de),I.value.addEventListener("mouseup",ce),I.value.addEventListener("mousemove",de))},pe=()=>{I.value&&(I.value.removeEventListener("mousedown",de),I.value.removeEventListener("mouseup",ce),I.value.removeEventListener("mousemove",de))};return(0,n.bv)((()=>{_.value=new ResizeObserver((([e])=>{if(!(0,m.$)().mapshotMode){const t=e.contentRect.width;t&&te(t)}})),_.value.observe(T.value),t("on-commands-register",[{id:"editor.toggleInsertMenu",provider:`editor/${window.editorId}`,enabledFn:()=>!0,handler:se}]),a.isRegisterAppRegionEvent&&!d.Uv&&ue()})),(0,n.Jd)((()=>{_.value&&_.value.disconnect(),a.isRegisterAppRegionEvent&&!d.Uv&&pe()})),(0,n.YP)((()=>a.isEditorTabChange),(()=>{D.value=!1}),{immediate:!1}),{__sfc:!0,props:a,emit:t,isMac:o,DO_SHRINK_THROTTLE_WAIT_TIME:300,$T:k,shrinkLevel:x,resizeObserver:_,topBarContainer:I,topBar:T,titleBar:C,shareEl:M,paywallDEl:A,evaluationEl:E,toolBarWidthMap:S,toolBarItemsWidthMap:B,tempToolBarItemsWidthMap:Z,dynamicShrinkItems:$,isInsertMenuShow:W,isAppRegionEnabled:D,isCollaborationAvailable:F,toolBarItemMap:N,editToolBarItems:O,leftEditToolBarItems:P,rightEditToolBarItems:L,featureToolBarItems:R,panelToolBarItems:H,toolBarDynamicItems:U,dynamicInsertMenuItemMap:V,insertMenuItems:z,isHideTopBar:j,formatToolBarItems:q,getShrinkKey:J,getToolBarWidth:K,doShrink:G,throttleDoShrink:Y,tryShowDynamicItems:X,tryHideDynamicItems:Q,toggleDynamicItemsAndDoShrink:ee,shrinkTopBarInOrder:te,getDynamicInsertMenuItem:ae,isSeparator:ne,isLimitedFeature:oe,isSubMenuAllLimitedFeature:ie,getInsertMenuIconUrl:re,getInsertMenuItems:le,toggleInsertMenu:se,openTopBarCtxMenu:()=>{const e=[{label:k("Icon Only"),type:"radio",checked:a.isIconOnly,click:()=>{t("on-icon-only-change","workbench.iconOnly")}},{label:k("Icon and Text"),type:"radio",checked:!a.isIconOnly,click:()=>{t("on-icon-only-change","workbench.iconAndText")}}];(0,l.k)(e)},enabledAppRegion:de,disabledAppRegion:ce,addAppRegionEventListener:ue,removeAppRegionEventListener:pe,backToHome:()=>{p.ZP.fetch(u.Fx,{name:"new"})},getFileNameDisplay:c.Uy,EvaluationMode:b.Z,ToolBarItem:f.Z,MainMenu:g.Z,PaywallDTrigger:y.Z,ShareTrigger:w.Z}}});a(25426);const x=(0,a(51900).Z)(k,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"show",rawName:"v-show",value:!a.isHideTopBar,expression:"!isHideTopBar"}],ref:"topBarContainer",staticClass:"vk-window-title-bar-expanded",class:{"app-region-enabled":!a.isMac&&a.isAppRegionEnabled}},[t("div",{ref:"topBar",staticClass:"vk-window-topbar top-bar uk-workbench-top-bar uk-flex uk-width-1-1 uk-flex-middle",class:{[a.shrinkLevel]:!0,"evaluation-top-bar":!e.isActivationValid,"paywall-d-top-bar":e.isPDVisible},on:{contextmenu:a.openTopBarCtxMenu}},[a.isMac?e._e():t("window-control-button-group",{staticClass:"top-bar-window-control"}),e._v(" "),t("div",{ref:"titleBar",staticClass:"uk-flex uk-flex-middle top-bar-title-bar"},[t(a.MainMenu),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isActivateEditor,expression:"isActivateEditor"}],staticClass:"top-bar-title-bar-container uk-flex uk-flex-middle"},[t("button",{staticClass:"vk-button-tile",attrs:{title:a.$T("Open Home.")},on:{click:a.backToHome}},[t("span",{attrs:{"uk-icon":"house"}})]),e._v(" "),t("div",{staticClass:"uk-height-1-1 uk-flex uk-flex-column uk-flex-center uk-overflow-hidden",staticStyle:{"margin-left":"var(--spacing-navigation-margin)"}},[t("div",{staticClass:"uk-text-truncate uk-tool-bar-title-bar-title top-bar-title-bar-title typography-subhead-small"},[e._v("\n            "+e._s(a.getFileNameDisplay(e.title))+"\n          ")]),e._v(" "),e.isDirty?t("div",{staticClass:"uk-tool-bar-title-bar-subtitle top-bar-title-bar-subtitle"},[e.isSaving?t("span",{staticClass:"typography-body-small"},[e._v("\n              "+e._s(a.$T("Saving")+"...")+"\n            ")]):e.isDirty?t("span",{staticClass:"typography-body-small"},[e._v("\n              "+e._s(a.$T("Edited"))+"\n            ")]):e._e()]):e._e()])])],1),e._v(" "),t("div",{staticClass:"uk-flex-1 top-bar-placeholder top-bar-placeholder-1"}),e._v(" "),e._l(a.leftEditToolBarItems,(function(n){return[t(a.ToolBarItem,{key:n.id,attrs:{data:n,"is-icon-only":e.isIconOnly},on:{"on-item-click":function(t){return e.$emit("on-toolbar-item-click",n.commandId)}}}),e._v(" "),t("div",{key:`placeholder-${n.id}`,staticClass:"top-bar-tool-bar-item-placeholder",attrs:{"data-type":"tool-bar-placeholder"}})]})),e._v(" "),t("div",{staticClass:"toolbar-divider-vertical"}),e._v(" "),t("div",{key:"placeholder-divider",staticClass:"top-bar-tool-bar-item-placeholder",attrs:{"data-type":"tool-bar-placeholder"}}),e._v(" "),e._l(a.rightEditToolBarItems,(function(n,o){return[t(a.ToolBarItem,{key:n.id,attrs:{data:n,"is-active":"insert"===n.id&&a.isInsertMenuShow,"btn-style":{width:"insert"===n.id?"40px":"32px"},"is-icon-only":e.isIconOnly},on:{"on-item-click":function(t){return e.$emit("on-toolbar-item-click",n.commandId)}}},["insert"===n.id?t("span",{staticClass:"uk-icon",staticStyle:{transform:"translate(-2px, 1px)"},attrs:{"uk-icon":"icon: chevron-down"}}):e._e()]),e._v(" "),o!==a.rightEditToolBarItems.length-1?t("div",{key:`placeholder-${n.id}`,staticClass:"top-bar-tool-bar-item-placeholder",attrs:{"data-type":"tool-bar-placeholder"}}):e._e()]})),e._v(" "),e.isOutlineMode?t("div",{staticClass:"uk-flex-1 top-bar-placeholder top-bar-placeholder-outline",attrs:{"data-type":"top-bar-placeholder"}}):[t("div",{staticClass:"uk-flex-1 top-bar-placeholder top-bar-placeholder-2",attrs:{"data-type":"top-bar-placeholder"}}),e._v(" "),t(a.ShareTrigger,{directives:[{name:"show",rawName:"v-show",value:a.isCollaborationAvailable,expression:"isCollaborationAvailable"}],ref:"shareEl",attrs:{title:a.$T("Please upload this file to the team before inviting collaborators."),disabled:!e.canHandleCommand("collaboration.uploadLocalFile"),"is-share-tutorial-visible":e.isShareTutorialVisible},on:{share:function(t){return e.$emit("on-toolbar-item-click","collaboration.uploadLocalFile")}}}),e._v(" "),t("div",{key:"placeholder-share",staticClass:"top-bar-tool-bar-item-placeholder",attrs:{"data-type":"tool-bar-placeholder"}}),e._v(" "),e._l(a.featureToolBarItems,(function(n,o){return[t(a.ToolBarItem,{key:n.id,staticClass:"top-bar-feature-item",attrs:{data:n,"is-icon-only":e.isIconOnly},on:{"on-item-click":function(t){return e.$emit("on-toolbar-item-click",n.commandId)}}}),e._v(" "),o!==a.featureToolBarItems.length-1?t("div",{key:`placeholder-${n.id}`,staticClass:"top-bar-tool-bar-item-placeholder",attrs:{"data-type":"tool-bar-placeholder"}}):e._e()]})),e._v(" "),t("div",{staticClass:"uk-flex-1 top-bar-placeholder top-bar-placeholder-3",attrs:{"data-type":"top-bar-placeholder"}})],e._v(" "),e._l(a.panelToolBarItems,(function(n,o){return[t(a.ToolBarItem,{key:n.id,attrs:{data:n,"is-active":e.isRightbarVisible,"is-icon-only":e.isIconOnly},on:{"on-item-click":function(t){return e.$emit("on-toolbar-item-click",n.commandId)}}}),e._v(" "),o!==a.panelToolBarItems.length-1?t("div",{key:`placeholder-${n.id}`,staticClass:"top-bar-tool-bar-item-placeholder",attrs:{"data-type":"tool-bar-placeholder"}}):e._e()]})),e._v(" "),t("div",{staticClass:"top-bar-evaluation-bar"},[e.isPDVisible?t(a.PaywallDTrigger,{ref:"paywallDEl",staticClass:"uk-preserve-interactive top-bar-paywall-d-trigger"}):e.isActivationValid?t("div",{staticClass:"top-bar-evaluation-placeholder"}):t("div",{ref:"evaluationEl"},[t(a.EvaluationMode,{staticClass:"uk-preserve-interactive top-bar-evaluation-btn"})],1)],1)],2)])}),[],!1,null,"6e0fe023",null).exports},58905:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(2954),o=a(69931),i=a(57507);const r=(0,n.aZ)({setup(e){const t=(0,n.iH)(null),a=(0,n.iH)(!1);return{isMac:false,mainMenuBtn:t,mainMenuImageURL:(0,n.Fl)((()=>(0,o.ju)("static/assets/images/windows-menu.svg"))),isMainMenuShow:a,toggleMainMenu:e=>{const t=(0,i.I)(),n=(0,i.k)(t,{x:e.pageX,y:e.pageY});n.addListener("menu-will-show",(()=>{a.value=!0})),n.addListener("menu-will-close",(()=>{a.value=!1}))}}}});a(65618);const l=(0,a(51900).Z)(r,(function(){var e=this,t=e._self._c;e._self._setupProxy;return e.isMac?e._e():t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],ref:"mainMenuBtn",staticClass:"vk-button-tile main-menu-btn",class:{"uk-active":e.isMainMenuShow},on:{click:e.toggleMainMenu}},[t("img",{attrs:{draggable:"false","uk-svg":"",src:e.mainMenuImageURL}})])}),[],!1,null,"4af4a6b6",null).exports},27724:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(2954),o=a(87141),i=a(63111),r=a(54856),l=a(90435),s=a(14448),d=a(20993);const c=(0,n.aZ)({__name:"paywall-d-trigger",setup(e){const t=(0,n.Fl)((()=>(0,o.S)().language)),a=(0,n.Fl)((()=>(0,o.IW)().pdOffers)),c=(0,n.Fl)((()=>"zh-CN"===t.value||"zh-TW"===t.value?`低至 ${(100-a.value.discount)/10} 折`:`${a.value.discount}% OFF`)),u=(0,n.Fl)((()=>(0,s.V)((0,o.IW)().pdCurrTime||(new Date).getTime(),(0,o.IW)().pdStartTime+i.Tm)));return(0,n.bv)((()=>{l.ZP.fetch(r.NW,{action:"start"})})),{__sfc:!0,language:t,pdOffers:a,paywallDDescription:c,paywallDCountdown:u,openPaywallDDialog:async()=>{(0,d.cZ)("pwdTBDisplay");const e=await l.ZP.fetch((0,r.gk)(window.editorId)),{result:t}=await l.ZP.fetch(r.Fx,{name:"dialog-paywall-d",parentId:window.id,wait:!0,query:{...e}});t&&"open-window"===t.action&&t.name&&await l.ZP.fetch(r.Fx,{name:t.name,query:t.query})}}}});a(51799);const u=(0,a(51900).Z)(c,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"paywall-d-trigger uk-flex uk-flex-middle uk-flex-between uk-width-1-1",on:{click:a.openPaywallDDialog}},[t("span",[e._v("\n    "+e._s(a.paywallDDescription)+"\n  ")]),e._v(" "),t("div",{staticClass:"paywall-d-trigger-timer uk-flex uk-flex-middle"},[t("span",{staticClass:"paywall-d-trigger-timer-item"},[e._v("\n      "+e._s(a.paywallDCountdown.hour)+"\n    ")]),e._v(" "),t("span",{staticClass:"paywall-d-trigger-timer-divider"},[e._v(":")]),e._v(" "),t("span",{staticClass:"paywall-d-trigger-timer-item"},[e._v("\n      "+e._s(a.paywallDCountdown.minute)+"\n    ")]),e._v(" "),t("span",{staticClass:"paywall-d-trigger-timer-divider"},[e._v(":")]),e._v(" "),t("span",{staticClass:"paywall-d-trigger-timer-item"},[e._v("\n      "+e._s(a.paywallDCountdown.second)+"\n    ")])])])}),[],!1,null,"21c3ea66",null).exports},89014:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(2954),o=a(7836),i=a(11248),r=a.n(i),l=a(87141),s=a(96829),d=a(69931);const c=(0,n.aZ)({__name:"share-trigger",props:{disabled:{type:Boolean},title:null,isShareTutorialVisible:{type:Boolean,default:!1},popoverContainerId:{default:"body"}},emits:["share"],setup(e,{emit:t}){const a=e,i=(0,n.FN)().proxy,c=(0,n.iH)(null),u=(0,n.iH)(`popover-${(0,s.hb)()}`),p=(0,n.iH)(null),m=(0,n.iH)(!1),v=(0,n.Fl)((()=>!!(0,l.c7)().fireflyToken)),h=()=>{i.$withUIKit((e=>{e.pop(c.value).show()})),m.value=!0};return(0,n.bv)((()=>{const e=(0,n.YP)((()=>[v.value,a.disabled]),(([t,n])=>{t&&!n&&(e&&e(),a.isShareTutorialVisible&&h())}),{immediate:!1});i.$withUIKit((e=>{e.util.on(c.value,"show",(async()=>{await(0,s._v)(200),r().loadAnimation({container:p.value,renderer:"svg",loop:!0,autoplay:!0,path:(0,d.ju)("static/lottie/collaboration/share.json")})})),e.util.on(c.value,"hidden",(()=>{(0,l.km)().setHasShownShareTutorial(!0)}))}))})),(0,n.Jd)((()=>{m.value&&(0,l.km)().setHasShownShareTutorial(!0)})),(0,n.YP)((()=>v.value),(e=>{!e&&m.value&&(0,l.km)().setHasShownShareTutorial(!0)}),{immediate:!1}),{__sfc:!0,props:a,emit:t,vm:i,popover:c,popoverTargetId:u,animationContainer:p,hasShareTutorialShown:m,isCollaborationAvailable:v,openShareTutorialPopover:h,Vue2Teleport:o.Z}}});a(10194);const u=(0,a(51900).Z)(c,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",[t("button",{staticClass:"vk-button-default vk-size-small uk-text-truncate",attrs:{id:a.popoverTargetId,title:e.title,disabled:e.disabled},on:{click:function(e){return a.emit("share")}}},[e._v("\n    "+e._s(e.$T("Share"))+"\n  ")]),e._v(" "),t(a.Vue2Teleport,{attrs:{to:e.popoverContainerId}},[e.isShareTutorialVisible?t("div",{ref:"popover",attrs:{"uk-popover":"","data-pos":"bottom-center","data-target":`#${a.popoverTargetId}`,"data-toggle":`#${a.popoverTargetId}`,"data-sel-close":".share-tutorial-popover-footer button"}},[t("div",{staticClass:"share-tutorial-popover uk-flex uk-flex-column uk-flex-1 uk-flex-between"},[t("div",{staticClass:"uk-flex uk-flex-column"},[t("h1",{staticClass:"share-tutorial-popover-title typography-headline-small"},[e._v("\n            "+e._s(e.$T("Share&Collaborate"))+"\n          ")]),e._v(" "),t("div",{ref:"animationContainer",staticClass:"share-tutorial-popover-resource"}),e._v(" "),t("p",{staticClass:"share-tutorial-popover-desc typography-body-large"},[e._v("\n            "+e._s(e.$T("Easily share your mind maps and collaborate in real time with your partner."))+"\n          ")])]),e._v(" "),t("div",{staticClass:"share-tutorial-popover-footer uk-flex uk-flex-right"},[t("button",{staticClass:"vk-button-default vk-size-small"},[e._v("\n            "+e._s(e.$T("Skip"))+"\n          ")]),e._v(" "),t("button",{staticClass:"vk-button-secondary vk-size-small",staticStyle:{"margin-left":"8px"},on:{click:function(e){return a.emit("share")}}},[e._v("\n            "+e._s(e.$T("Try it now"))+"\n          ")])])])]):e._e()])],1)}),[],!1,null,"281a81d4",null).exports},88385:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(2954),o=a(60746);const i=(0,n.aZ)({__name:"tool-bar-item",props:{data:null,isActive:{type:Boolean,default:!1},btnStyle:{default:()=>({})},isIconOnly:{type:Boolean}},setup(e){const t=e,a=(0,n.Fl)((()=>["insert","marker","format"].includes(t.data.id)));return{__sfc:!0,props:t,isKeepEditSession:a,wrappedTooltipWithKeybinding:o.RL}}});a(3672);const r=(0,a(51900).Z)(i,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-flex uk-flex-column uk-flex-center uk-flex-middle uk-preserve-interactive top-bar-tool-bar-item",attrs:{"data-type":"tool-bar-item","data-id":e.data.id}},[t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-button-tile uk-padding-remove top-bar-tool-bar-item-btn",class:{"is-icon-only":e.isIconOnly,"is-active":e.isActive,"keep-edit-session":a.isKeepEditSession},style:e.btnStyle,attrs:{title:a.wrappedTooltipWithKeybinding(e.data.tooltip,e.data.commandId),disabled:e.data.disabled},on:{click:function(t){return e.$emit("on-item-click")}}},[t("span",{attrs:{"uk-icon":`icon: ${e.data.icon}; ratio: 1.2`}}),e._v(" "),e._t("default")],2),e._v(" "),e.isIconOnly?e._e():t("div",{staticClass:"uk-text-nowrap top-bar-tool-bar-item-label typography-caption-caption",class:{"is-disabled":e.data.disabled}},[e._v("\n    "+e._s(e.data.label)+"\n  ")])])}),[],!1,null,"28cb2910",null).exports},25426:(e,t,a)=>{var n=a(54639);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("34108b34",n,!0,{})},65618:(e,t,a)=>{var n=a(14590);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("71f19363",n,!0,{})},51799:(e,t,a)=>{var n=a(21249);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("2894df7e",n,!0,{})},10194:(e,t,a)=>{var n=a(88047);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("9dd02dd4",n,!0,{})},3672:(e,t,a)=>{var n=a(69289);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("06a9f01a",n,!0,{})},45346:(e,t,a)=>{"use strict";function n(e,t){for(var a=[],n={},o=0;o<t.length;o++){var i=t[o],r=i[0],l={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};n[r]?n[r].parts.push(l):a.push(n[r]={id:r,parts:[l]})}return a}a.d(t,{Z:()=>v});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},r=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,s=0,d=!1,c=function(){},u=null,p="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(e,t,a,o){d=a,u=o||{};var r=n(e,t);return h(r),function(t){for(var a=[],o=0;o<r.length;o++){var l=r[o];(s=i[l.id]).refs--,a.push(s)}t?h(r=n(e,t)):r=[];for(o=0;o<a.length;o++){var s;if(0===(s=a[o]).refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete i[s.id]}}}}function h(e){for(var t=0;t<e.length;t++){var a=e[t],n=i[a.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](a.parts[o]);for(;o<a.parts.length;o++)n.parts.push(f(a.parts[o]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{var r=[];for(o=0;o<a.parts.length;o++)r.push(f(a.parts[o]));i[a.id]={id:a.id,refs:1,parts:r}}}}function b(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function f(e){var t,a,n=document.querySelector("style["+p+'~="'+e.id+'"]');if(n){if(d)return c;n.parentNode.removeChild(n)}if(m){var o=s++;n=l||(l=b()),t=w.bind(null,n,o,!1),a=w.bind(null,n,o,!0)}else n=b(),t=k.bind(null,n),a=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else a()}}var g,y=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function w(e,t,a,n){var o=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var i=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function k(e,t){var a=t.css,n=t.media,o=t.sourceMap;if(n&&e.setAttribute("media",n),u.ssrId&&e.setAttribute(p,t.id),o&&(a+="\n/*# sourceURL="+o.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}},7836:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var n={name:"teleport",props:{to:{type:String,required:!0},where:{type:String,default:"after"},disabled:Boolean},data:function(){return{nodes:[],waiting:!1,observer:null,parent:null}},watch:{to:"maybeMove",where:"maybeMove",disabled:function(e){e?(this.disable(),this.teardownObserver()):(this.bootObserver(),this.move())}},mounted:function(){this.nodes=Array.from(this.$el.childNodes),this.disabled||this.bootObserver(),this.maybeMove()},beforeDestroy:function(){this.disable(),this.teardownObserver()},computed:{classes:function(){return this.disabled?["teleporter"]:["teleporter","hidden"]}},methods:{maybeMove:function(){this.disabled||this.move()},move:function(){if(this.waiting=!1,this.parent=document.querySelector(this.to),!this.parent)return this.disable(),void(this.waiting=!0);"before"===this.where?this.parent.prepend(this.getFragment()):this.parent.appendChild(this.getFragment())},disable:function(){this.$el.appendChild(this.getFragment()),this.parent=null},getFragment:function(){var e=document.createDocumentFragment();return this.nodes.forEach((function(t){return e.appendChild(t)})),e},onMutations:function(e){for(var t=this,a=!1,n=0;n<e.length;n++){var o=e[n],i=Array.from(o.addedNodes).filter((function(e){return!t.nodes.includes(e)}));Array.from(o.removedNodes).includes(this.parent)?(this.disable(),this.waiting=!this.disabled):this.waiting&&i.length>0&&(a=!0)}a&&this.move()},bootObserver:function(){var e=this;this.observer||(this.observer=new MutationObserver((function(t){return e.onMutations(t)})),this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}))},teardownObserver:function(){this.observer&&(this.observer.disconnect(),this.observer=null)}}};function o(e,t,a,n,o,i,r,l,s,d){"boolean"!=typeof r&&(s=l,l=r,r=!1);var c,u="function"==typeof a?a.options:a;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),n&&(u._scopeId=n),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,s(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=c):t&&(c=r?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),c)if(u.functional){var p=u.render;u.render=function(e,t){return c.call(t),p(e,t)}}else{var m=u.beforeCreate;u.beforeCreate=m?[].concat(m,c):[c]}return a}var i,r="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function l(e){return function(e,t){return function(e,t){var a=r?t.media||"default":e,n=s[a]||(s[a]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);var o=t.source;if(t.map&&(o+="\n/*# sourceURL="+t.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),void 0===i&&(i=document.head||document.getElementsByTagName("head")[0]),i.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(o),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{var l=n.ids.size-1,d=document.createTextNode(o),c=n.element.childNodes;c[l]&&n.element.removeChild(c[l]),c.length?n.element.insertBefore(d,c[l]):n.element.appendChild(d)}}}(e,t)}}var s={};var d=n,c=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.classes},[e._t("default")],2)};c._withStripped=!0;var u=o({render:c,staticRenderFns:[]},(function(e){e&&e("data-v-d4e6e290_0",{source:".hidden[data-v-d4e6e290] {\n  visibility: hidden;\n  display: none;\n}\n\n/*# sourceMappingURL=Teleport.vue.map */",map:{version:3,sources:["/Users/shodan/Projects/vue2-teleport/src/Teleport.vue","Teleport.vue"],names:[],mappings:"AAuJA;EACA,kBAAA;EACA,aAAA;ACtJA;;AAEA,uCAAuC",file:"Teleport.vue",sourcesContent:["<template>\n  <div :class=\"classes\">\n    <slot/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'teleport',\n  props: {\n    to: {\n      type: String,\n      required: true,\n    },\n    where: {\n      type: String,\n      default: 'after',\n    },\n    disabled: Boolean,\n  },\n  data() {\n    return {\n      nodes: [],\n      waiting: false,\n      observer: null,\n      parent: null,\n    };\n  },\n  watch: {\n    to: 'maybeMove',\n    where: 'maybeMove',\n    disabled(value) {\n      if (value) {\n        this.disable();\n        this.teardownObserver();\n      } else {\n        this.bootObserver();\n        this.move();\n      }\n    },\n  },\n  mounted() {\n    // Store a reference to the nodes\n    this.nodes = Array.from(this.$el.childNodes);\n\n    if (!this.disabled) {\n      this.bootObserver();\n    }\n\n    // Move slot content to target\n    this.maybeMove();\n  },\n  beforeDestroy() {\n    // Move back\n    this.disable();\n\n    // Stop observing\n    this.teardownObserver();\n  },\n  computed: {\n    classes() {\n      if (this.disabled) {\n        return ['teleporter'];\n      }\n\n      return ['teleporter', 'hidden'];\n    },\n  },\n  methods: {\n    maybeMove() {\n      if (!this.disabled) {\n        this.move();\n      }\n    },\n    move() {\n      this.waiting = false;\n\n      this.parent = document.querySelector(this.to);\n\n      if (!this.parent) {\n        this.disable();\n\n        this.waiting = true;\n\n        return;\n      }\n\n      if (this.where === 'before') {\n        this.parent.prepend(this.getFragment());\n      } else {\n        this.parent.appendChild(this.getFragment());\n      }\n    },\n    disable() {\n      this.$el.appendChild(this.getFragment());\n      this.parent = null;\n    },\n    // Using a fragment is faster because it'll trigger only a single reflow\n    // See https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\n    getFragment() {\n      const fragment = document.createDocumentFragment();\n\n      this.nodes.forEach(node => fragment.appendChild(node));\n\n      return fragment;\n    },\n    onMutations(mutations) {\n      // Makes sure the move operation is only done once\n      let shouldMove = false;\n\n      for (let i = 0; i < mutations.length; i++) {\n        const mutation = mutations[i];\n        const filteredAddedNodes = Array.from(mutation.addedNodes).filter(node => !this.nodes.includes(node));\n\n        if (Array.from(mutation.removedNodes).includes(this.parent)) {\n          this.disable();\n          this.waiting = !this.disabled;\n        } else if (this.waiting && filteredAddedNodes.length > 0) {\n          shouldMove = true;\n        }\n      }\n\n      if (shouldMove) {\n        this.move();\n      }\n    },\n    bootObserver() {\n      if (this.observer) {\n        return;\n      }\n\n      this.observer = new MutationObserver(mutations => this.onMutations(mutations));\n\n      this.observer.observe(document.body, {\n        childList: true,\n        subtree: true,\n        attributes: false,\n        characterData: false,\n      });\n    },\n    teardownObserver() {\n      if (this.observer) {\n        this.observer.disconnect();\n        this.observer = null;\n      }\n    },\n  },\n};\n<\/script>\n\n<style scoped lang=\"scss\">\n.hidden {\n  visibility: hidden;\n  display: none;\n}\n</style>\n",".hidden {\n  visibility: hidden;\n  display: none;\n}\n\n/*# sourceMappingURL=Teleport.vue.map */"]},media:void 0})}),d,"data-v-d4e6e290",false,undefined,!1,l,void 0,void 0);var p={install:function e(t){e.installed||(e.installed=!0,t.component("Teleport",u))}},m=null;"undefined"!=typeof window?m=window.Vue:"undefined"!=typeof global&&(m=global.Vue),m&&m.use(p);const v=u}}]);