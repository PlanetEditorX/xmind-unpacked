(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[1592],{32796:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(23645),r=n.n(o)()((function(e){return e[1]}));r.push([e.id,".card-text {\n  max-height: 44px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n#delete-icon {\n  display: none;\n}\n#inforrmation-button:hover #delete-icon {\n  display: block;\n}\n",""]);const i=r},48123:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(23645),r=n.n(o)()((function(e){return e[1]}));r.push([e.id,".topic-popover-overlay {\n  display: block;\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1010;\n  background-color: transparent;\n  border: none;\n}\n",""]);const i=r},96874:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},29932:e=>{e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}},34865:(e,t,n)=>{var o=n(89465),r=n(77813),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&r(a,n)&&(void 0!==n||t in e)||o(e,t,n)}},89465:(e,t,n)=>{var o=n(38777);e.exports=function(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},21078:(e,t,n)=>{var o=n(62488),r=n(37285);e.exports=function e(t,n,i,a,l){var u=-1,c=t.length;for(i||(i=r),l||(l=[]);++u<c;){var s=t[u];n>0&&i(s)?n>1?e(s,n-1,i,a,l):o(l,s):a||(l[l.length]=s)}return l}},97786:(e,t,n)=>{var o=n(71811),r=n(40327);e.exports=function(e,t){for(var n=0,i=(t=o(t,e)).length;null!=e&&n<i;)e=e[r(t[n++])];return n&&n==i?e:void 0}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},25970:(e,t,n)=>{var o=n(63012),r=n(79095);e.exports=function(e,t){return o(e,t,(function(t,n){return r(e,n)}))}},63012:(e,t,n)=>{var o=n(97786),r=n(10611),i=n(71811);e.exports=function(e,t,n){for(var a=-1,l=t.length,u={};++a<l;){var c=t[a],s=o(e,c);n(s,c)&&r(u,i(c,e),s)}return u}},10611:(e,t,n)=>{var o=n(34865),r=n(71811),i=n(65776),a=n(13218),l=n(40327);e.exports=function(e,t,n,u){if(!a(e))return e;for(var c=-1,s=(t=r(t,e)).length,p=s-1,d=e;null!=d&&++c<s;){var v=l(t[c]),f=n;if("__proto__"===v||"constructor"===v||"prototype"===v)return e;if(c!=p){var h=d[v];void 0===(f=u?u(h,v,d):void 0)&&(f=a(h)?h:i(t[c+1])?[]:{})}o(d,v,f),d=d[v]}return e}},56560:(e,t,n)=>{var o=n(75703),r=n(38777),i=n(6557),a=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:o(t),writable:!0})}:i;e.exports=a},80531:(e,t,n)=>{var o=n(62705),r=n(29932),i=n(1469),a=n(33448),l=o?o.prototype:void 0,u=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return r(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},71811:(e,t,n)=>{var o=n(1469),r=n(15403),i=n(55514),a=n(79833);e.exports=function(e,t){return o(e)?e:r(e,t)?[e]:i(a(e))}},38777:(e,t,n)=>{var o=n(10852),r=function(){try{var e=o(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},99021:(e,t,n)=>{var o=n(85564),r=n(45357),i=n(30061);e.exports=function(e){return i(r(e,void 0,o),e+"")}},222:(e,t,n)=>{var o=n(71811),r=n(35694),i=n(1469),a=n(65776),l=n(41780),u=n(40327);e.exports=function(e,t,n){for(var c=-1,s=(t=o(t,e)).length,p=!1;++c<s;){var d=u(t[c]);if(!(p=null!=e&&n(e,d)))break;e=e[d]}return p||++c!=s?p:!!(s=null==e?0:e.length)&&l(s)&&a(d,s)&&(i(e)||r(e))}},37285:(e,t,n)=>{var o=n(62705),r=n(35694),i=n(1469),a=o?o.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||r(e)||!!(a&&e&&e[a])}},15403:(e,t,n)=>{var o=n(1469),r=n(33448),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||(a.test(e)||!i.test(e)||null!=t&&e in Object(t))}},24523:(e,t,n)=>{var o=n(88306);e.exports=function(e){var t=o(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},45357:(e,t,n)=>{var o=n(96874),r=Math.max;e.exports=function(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,l=r(i.length-t,0),u=Array(l);++a<l;)u[a]=i[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=i[a];return c[t]=n(u),o(e,this,c)}}},30061:(e,t,n)=>{var o=n(56560),r=n(21275)(o);e.exports=r},21275:e=>{var t=Date.now;e.exports=function(e){var n=0,o=0;return function(){var r=t(),i=16-(r-o);if(o=r,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},55514:(e,t,n)=>{var o=n(24523),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=o((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,n,o,r){t.push(o?r.replace(i,"$1"):n||e)})),t}));e.exports=a},40327:(e,t,n)=>{var o=n(33448);e.exports=function(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},75703:e=>{e.exports=function(e){return function(){return e}}},85564:(e,t,n)=>{var o=n(21078);e.exports=function(e){return(null==e?0:e.length)?o(e,1):[]}},79095:(e,t,n)=>{var o=n(13),r=n(222);e.exports=function(e,t){return null!=e&&r(e,t,o)}},6557:e=>{e.exports=function(e){return e}},88306:(e,t,n)=>{var o=n(83369);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],i=n.cache;if(i.has(r))return i.get(r);var a=e.apply(this,o);return n.cache=i.set(r,a)||i,a};return n.cache=new(r.Cache||o),n}r.Cache=o,e.exports=r},78718:(e,t,n)=>{var o=n(25970),r=n(99021)((function(e,t){return null==e?{}:o(e,t)}));e.exports=r},79833:(e,t,n)=>{var o=n(80531);e.exports=function(e){return null==e?"":o(e)}},91592:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C});var o=n(2954),r=n(84374),i=n(46016);const a=(0,o.aZ)({__name:"card-template",props:{cardLeftIconSrc:null,cardContent:null},emits:["handleCardClick","handleDeleteIconClick","handleCardContextmenu","handleCardContentClick"],setup:(e,{emit:t})=>({__sfc:!0,props:e,emits:t})});n(47039);var l=n(51900);const u=(0,l.Z)(a,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("button",{staticClass:"vk-button-tile uk-position-relative uk-flex uk-flex-row uk-flex-left uk-flex-between",staticStyle:{"padding-left":"var(--spacing-padding-m)","padding-right":"var(--spacing-padding-m)"},attrs:{id:"inforrmation-button"},on:{click:function(e){return n.emits("handleCardClick")},contextmenu:function(e){return n.emits("handleCardContextmenu")}}},[t("div",{staticClass:"uk-flex uk-flex-middle uk-width-expand"},[t("img",{staticClass:"uk-margin-xsmall-right uk-margin-small-left uk-preserve uk-background-norepeat",staticStyle:{width:"14px",height:"14px"},attrs:{"uk-svg":"",draggable:"false",src:e.$toResourceURL(n.props.cardLeftIconSrc)}}),e._v(" "),n.props.cardContent.length>0?t("div",e._l(n.props.cardContent,(function(o){return t("span",{staticClass:"uk-text-left uk-overflow-hidden uk-text-break card-text",on:{click:function(e){return e.stopPropagation(),n.emits("handleCardContentClick")}}},[e._v("\n        "+e._s(o)+"\n      ")])})),0):e._e()]),e._v(" "),t("span",{staticClass:"vk-button-tile uk-margin-small-right uk-position-center-right",attrs:{id:"delete-icon","uk-icon":"icon: trash"},on:{click:function(e){return e.stopPropagation(),n.emits("handleDeleteIconClick")}}})])}),[],!1,null,null,null).exports;var c=n(23168),s=n(67657),p=n(87141),d=n(27049);var v=n(63111),f=n(54856),h=n(5893),m=n(31621),k=n(90435),g=n(94593),x=n(85786);var y=n(83063);const w=(0,o.aZ)({__name:"informationcard",setup(e){const{domRectForSelection:t}=(0,r.nZ)(),{setPopoverEditorVisible:n}=(0,i.$)(),{hyperlink:a,openHyperlink:l,deleteHyperlink:w,showHyperlinkMenu:C,showHyperlinkEditor:b}=(()=>{const{T:e}=(0,p.JE)(),{handleCommand:t}=(0,p.JX)(),{setPopoverEditorVisible:n}=(0,i.$)(),{document:a,selection:l,properties:u,executePropertyAction:c}=(0,r.nZ)(),d=(0,o.Fl)((()=>{var e,t;return null===(t=null===(e=u.value.webLink)||void 0===e?void 0:e.value)||void 0===t?void 0:t.href})),y=(0,o.Fl)((()=>{var e;return null===(e=u.value.topicLink)||void 0===e?void 0:e.value})),w=(0,o.Fl)((()=>{var e,t;if(y.value){const n=a.value.query({id:y.value});return n?`${n.asTopic().title} (${null!==(t=null===(e=n.asTopic().ownerSheet)||void 0===e?void 0:e.title)&&void 0!==t?t:""})`:" "}})),C=(0,o.Fl)((()=>{var e;const t=null===(e=u.value.fileLink)||void 0===e?void 0:e.value;if(!t||t.startsWith("xap:"))return;let n;const o=t;if(o.startsWith("file://"))try{n=(0,h.iZ)(o)}catch(e){n=t.slice(7)}else n=o.startsWith("file:")?o.slice(5):o;return n})),b=(0,o.Fl)((()=>{var e,t;return null!==(t=null!==(e=d.value)&&void 0!==e?e:w.value)&&void 0!==t?t:C.value})),_=()=>{c({name:"mutateProperty:webLink"}),c({name:"mutateProperty:topicLink"}),c({name:"mutateProperty:fileLink"})},E=(0,o.Fl)((()=>{let e;if(y.value){const t=y.value.replace("xmind:#",""),n=a.value.query({id:t}).asTopic();e=`${n.title} (${n.ownerSheet.title})`}else e=b.value;return e}));return{hyperlink:b,formatHyperlink:E,openHyperlink:()=>{if(v.nd)k.ZP.fetch(f.QN);else{const t=l.value.modelIds[0];if(y.value)(0,m.S)(y.value,t);else if(d.value)(0,x.DL)(d.value,e);else if(C.value){const e=C.value;(0,m.U)(e)}}n("")},deleteHyperlink:_,showHyperlinkMenu:()=>{const o=b.value&&!b.value.startsWith("xap:")&&(!!y.value||!!d.value||!!C.value),r=new s.Menu;[{label:e("Edit"),enabled:o,click:()=>{y.value?t("editor.showTopiclinkEditor"):d.value?t("editor.showHyperlinkEditor"):C.value&&(g.Z.isDirectorySync(C.value)?t("editor.addFolderLink"):t("editor.addFileLink")),n("")}},{type:"separator"},{label:e("Delete"),click:_}].forEach((e=>r.append(new s.MenuItem(e)))),r.popup({window:(0,s.getCurrentWindow)()})},showHyperlinkEditor:()=>{d.value?t("editor.showHyperlinkEditor",!0):y.value?t("editor.showTopiclinkEditor"):C.value&&(g.Z.isDirectorySync(C.value)?t("editor.addFolderLink"):t("editor.addFileLink"))}}})(),{attachmentFileName:_,openAttachment:E,deleteAttachment:P,showAttachmentMenu:M}=(()=>{const{T:e}=(0,p.JE)(),{setPopoverEditorVisible:t}=(0,i.$)(),{properties:n,executeMutationAction:a}=(0,r.nZ)(),l=(0,o.Fl)((()=>{var e,t;return null===(t=null===(e=n.value.attachmentFile)||void 0===e?void 0:e.value)||void 0===t?void 0:t.fileName})),u=(0,o.Fl)((()=>{var e,t;const o=null===(t=null===(e=n.value.attachmentFile)||void 0===e?void 0:e.value)||void 0===t?void 0:t.resourcePath;return o&&"xap:"+o})),c=()=>{a({name:"mutate:removeAttachment"})};return{attachmentFileName:l,openAttachment:()=>{(0,y.F)(l.value,u.value),t("")},deleteAttachment:c,showAttachmentMenu:()=>{const t=new s.Menu;[{label:e("Edit"),enabled:!1},{type:"separator"},{label:e("Delete"),click:c}].forEach((e=>t.append(new s.MenuItem(e)))),t.popup({window:(0,s.getCurrentWindow)()})}}})(),{audioName:A,openAudio:L,showAudioMenu:F,deleteAudio:T}=(()=>{const{T:e}=(0,p.JE)(),{updateAudioBarMode:t}=(0,d.E)(),{setPopoverEditorVisible:n}=(0,i.$)(),{selection:a,properties:l,executeMutationAction:u}=(0,r.nZ)(),c=(0,o.Fl)((()=>l.value.audioNotes.value)),v=(0,o.Fl)((()=>c.value&&c.value.title)),f=()=>{u({name:"mutate:removeAudioNotes"})};return{audioName:v,openAudio:()=>{if(n(""),!c.value||!c.value.resourcePath||(0,d.E)().audioRecording)return;const e="open_new_audio_play"===(0,d.E)().audioBarMode?"audio_play":"open_new_audio_play";t({audioBarMode:e,audioTopicId:a.value.modelIds[0],audioAutoplay:!0})},deleteAudio:f,showAudioMenu:()=>{const t=new s.Menu;[{label:e("Edit"),enabled:!1},{type:"separator"},{label:e("Delete"),click:f}].forEach((e=>t.append(new s.MenuItem(e)))),t.popup({window:(0,s.getCurrentWindow)()})}}})(),{notesText:I,showNotesEditor:H,showNotesMenu:S,deleteNotes:N}=(()=>{const{T:e}=(0,p.JE)(),{setPopoverEditorVisible:t}=(0,i.$)(),{properties:n,executePropertyAction:a}=(0,r.nZ)(),l=(0,o.Fl)((()=>{var e,t,o;return null===(o=null===(t=null===(e=n.value)||void 0===e?void 0:e.notes)||void 0===t?void 0:t.value)||void 0===o?void 0:o.text})),u=()=>{t("notes")},c=()=>{a({name:"mutateProperty:notes",inputValue:null})},d=()=>{const{executePropertyAction:e}=(0,r.nZ)();e({name:"mutateProperty:topicNotesDisplay",inputValue:"block"}),t("")};return{notesText:l,deleteNotes:c,showNotesMenu:()=>{const t=new s.Menu;[{label:e("Edit"),click:u},{type:"separator"},{label:e("Delete"),click:c},{type:"separator"},{label:e("Display"),click:d}].forEach((e=>t.append(new s.MenuItem(e)))),t.popup({window:(0,s.getCurrentWindow)()})},showNotesEditor:u}})(),Z=(0,o.Fl)((()=>Boolean(!(a.value||I.value||A.value||_.value)))),D=(0,o.Fl)((()=>[{content:I.value?[I.value]:[],cardLeftIconSrc:"static/images/information-icon/info_notes.svg",handleCardClick:H,handleCardContentClick:H,handleCardContextmenu:S,handleDeleteIconClick:N},{content:a.value?[a.value]:[],cardLeftIconSrc:"static/images/information-icon/info_hyperlink.svg",handleCardClick:b,handleCardContentClick:l,handleCardContextmenu:C,handleDeleteIconClick:w},{content:_.value?[_.value]:[],cardLeftIconSrc:"static/images/information-icon/info_attachment.svg",handleCardClick:E,handleCardContentClick:E,handleCardContextmenu:M,handleDeleteIconClick:P},{content:A.value?[A.value]:[],cardLeftIconSrc:"static/images/information-icon/info_audionotes.svg",handleCardClick:L,handleCardContentClick:L,handleCardContextmenu:F,handleDeleteIconClick:T}].filter((e=>e.content.length>0)))),W=()=>n("");return(0,o.YP)((()=>Z.value),(e=>{!0===e&&W()}),{immediate:!0}),{__sfc:!0,topicRect:t,setPopoverEditorVisible:n,hyperlink:a,openHyperlink:l,deleteHyperlink:w,showHyperlinkMenu:C,showHyperlinkEditor:b,attachmentFileName:_,openAttachment:E,deleteAttachment:P,showAttachmentMenu:M,audioName:A,openAudio:L,showAudioMenu:F,deleteAudio:T,notesText:I,showNotesEditor:H,showNotesMenu:S,deleteNotes:N,isEmpty:Z,cardLists:D,close:W,CardTemplate:u,TopicPopoverContainer:c.Z}}});const C=(0,l.Z)(w,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.TopicPopoverContainer,{attrs:{"topic-height":n.topicRect.height,"topic-width":n.topicRect.width,"topic-top":n.topicRect.y,"topic-left":n.topicRect.x,"popover-width":280},on:{"popover-close":n.close}},[t("div",{staticClass:"uk-flex uk-flex-column uk-padding-small uk-padding-remove-horizontal"},e._l(n.cardLists,(function(e,o){return t(n.CardTemplate,{key:o,attrs:{"card-content":e.content,"card-left-icon-src":e.cardLeftIconSrc},on:{handleCardClick:e.handleCardClick,handleDeleteIconClick:e.handleDeleteIconClick,handleCardContextmenu:e.handleCardContextmenu,handleCardContentClick:e.handleCardContentClick}})})),1)])}),[],!1,null,null,null).exports},23168:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var o=n(2954),r=n(78718),i=n.n(r),a=n(84374);const l=(0,o.aZ)({__name:"topic-popover-container",props:{topicHeight:null,topicWidth:null,topicLeft:null,topicTop:null,popoverWidth:null,popoverHeight:{default:0},viewPortPadding:null,autoShowOnMounted:{type:Boolean,default:!0}},emits:["popover-close"],setup(e,{emit:t}){const n=e,r=(0,o.FN)(),l=(0,o.iH)(null),u=(0,o.Fl)((()=>{const{viewPortPadding:e}=n;return void 0===e?16:e})),c=(0,o.Fl)((()=>{const{autoShowOnMounted:e}=n;return void 0===e||e})),s=(0,o.Fl)((()=>({top:n.topicTop+"px",left:n.topicLeft+"px",width:n.topicWidth+"px",height:n.topicHeight+"px"}))),p=e=>{const t=e.getBoundingClientRect();return Object.assign({},i()(t,"top","left","right","bottom","width","height"),{offsetTop:e.offsetTop,offsetLeft:e.offsetLeft})},d=()=>{const e=document.querySelector("#editor-container");return e?p(e):null},v=()=>{const e=d();if(!e)return!1;const{popoverHeight:t,popoverWidth:o,topicTop:r,topicLeft:i,topicWidth:l,topicHeight:c}=n,s=i+d().left,p=r+d().top,v=e.offsetTop>p,f=e.offsetTop+e.height<c+p+t,h=s-(e.left+e.offsetLeft)<o/2-l/2,m=e.left+e.offsetLeft+e.width<s+l/2+o/2,k=c+t>e.height,g=l>e.width;let x=e.offsetLeft,y=e.offsetTop;v&&(y=p-u.value),f&&(y=p+c+n.popoverHeight-e.height+u.value),k&&(y=Math.max(c-e.height,0)+p+n.popoverHeight);const w=Math.max((n.popoverWidth-l)/2,0);if(h&&(x=s-e.left-u.value-w),m&&(x=s-e.left+l-e.width+w+u.value),g&&(x=s+w),v||f||h||m||k||g){const{moveViewport:e}=(0,a.nZ)();return e(x,y),!0}return!0},f=async()=>{if(!await v())return h(!1);h(!0)},h=e=>{setTimeout((()=>{r.proxy.$withUIKit((t=>{const n=t.pop(l.value);n&&(e?n.show():n.hide())}))}),50)};return(0,o.bv)((()=>{c.value&&f(),(0,o.Y3)((()=>{r.proxy.$withUIKit((e=>{e.util.on(l.value,"hidden",(()=>{t("popover-close")}))}))}))})),{__sfc:!0,props:n,emits:t,vm:r,popoverEl:l,viewPortPadding:u,isAutoShowOnMounted:c,topicRectStyle:s,getElementRect:p,getWindowBounds:d,moveViewport:v,showPopover:f,_togglePopover:h}}});n(53193);const u=(0,n(51900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}]},[t("div",{staticClass:"uk-position-absolute",style:e._self._setupProxy.topicRectStyle}),e._v(" "),t("div",{ref:"popoverEl",style:{width:e.popoverWidth+"px",height:e.popoverHeight?e.popoverHeight+"px":"auto"},attrs:{"uk-popover":"","data-cls-overlay":"topic-popover-overlay","data-sel-close":".topic-popover-close-trigger"}},[e._t("default")],2)])}),[],!1,null,null,null).exports},47039:(e,t,n)=>{var o=n(32796);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,n(45346).Z)("fd64ffa2",o,!0,{})},53193:(e,t,n)=>{var o=n(48123);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,n(45346).Z)("915f5348",o,!0,{})}}]);