(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[1293],{43240:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".spinner-grid-content {\n  background: var(--color-mask-overlay-s, rgba(28, 40, 52, 0.05));\n}\n",""]);const a=o},99858:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".preview-item[data-v-f3dfad82] {\n  border: 1px dashed var(--color-border-quaternary);\n  background: var(--color-fill-surface-dim);\n  background-size: contain;\n  background-position: 50% 50%;\n  border-radius: 4px;\n}\n.preview-item.loaded[data-v-f3dfad82] {\n  display: block;\n  box-shadow: 0px 2.129px 7.984px 0px rgba(0, 0, 0, 0.1), 0px 0.532px 2.129px 0px rgba(0, 0, 0, 0.05);\n  border: none;\n}\n.folder-container[data-v-f3dfad82] {\n  background: var(--color-fill-surface-dim);\n  padding: 6px;\n}\n.folder-container .preview-item-1[data-v-f3dfad82] {\n  width: 99px;\n  height: 62px;\n  top: 14px;\n  left: 24px;\n  z-index: 3;\n}\n.folder-container .preview-item-2[data-v-f3dfad82] {\n  width: 84px;\n  height: 52px;\n  transform: rotate(-8deg);\n  top: 20px;\n  left: 6px;\n  z-index: 2;\n}\n.folder-container .preview-item-3[data-v-f3dfad82] {\n  width: 84px;\n  height: 52px;\n  transform: rotate(8deg);\n  top: 20px;\n  right: 6px;\n  z-index: 1;\n}\n.middle-file-motion-enter[data-v-f3dfad82] {\n  scale: 1.1 !important;\n  transform: rotate(3deg) !important;\n  transition-property: scale transform !important;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.middle-file-motion-leave[data-v-f3dfad82] {\n  scale: 1;\n  transform: rotate(0deg);\n  transition-property: scale transform;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n.left-file-motion-move-left[data-v-f3dfad82] {\n  left: -4px !important;\n  transition-property: left !important;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.left-file-motion-move-back[data-v-f3dfad82] {\n  left: 6px;\n  transition-property: left;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n.right-file-motion-move-right[data-v-f3dfad82] {\n  right: -4px !important;\n  transition-property: right !important;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.right-file-motion-move-back[data-v-f3dfad82] {\n  right: 6px;\n  transition-property: right;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n",""]);const a=o},71683:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".cloud-file-motion-zoom-in[data-v-3a9f531f] {\n  scale: 1.1 !important;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.cloud-file-motion-zoom-out[data-v-3a9f531f] {\n  scale: 1;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n",""]);const a=o},52212:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".form-container .theme-category-name[data-v-3cd57d21] {\n  margin-top: 32px;\n  margin-bottom: 20px;\n  font-weight: bold;\n  font-size: 20px;\n  line-height: 25px;\n}\n.form-container .theme-category-name[data-v-3cd57d21]:first-of-type {\n  margin-top: 0;\n}\n.preview-map-list[data-v-3cd57d21] {\n  list-style: none;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-column-gap: 16px;\n  grid-row-gap: 16px;\n}\n.uk-border-rounded[data-v-3cd57d21] {\n  border-radius: 10px;\n}\n.uk-win32 .uk-border-rounded[data-v-3cd57d21] {\n  border-radius: 4px;\n}\n.title-bar[data-v-3cd57d21] {\n  height: 26px;\n  padding: 20px 26px 0;\n  top: 0;\n  z-index: 1030;\n  background: var(--color-fill-surface);\n}\n.title-bar-sticky[data-v-3cd57d21] {\n  height: 44px;\n  padding: 0 26px;\n  position: sticky;\n  border-bottom: var(--color-border-muted) 1px solid;\n  align-items: center;\n}\n.title-bar-sticky h1[data-v-3cd57d21] {\n  font-size: 15px !important;\n}\n.preview-item-desc[data-v-3cd57d21] {\n  color: var(--color-sidebar-text-subtitle);\n}\n",""]);const a=o},82863:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".local-file-motion-zoom-in[data-v-59f236d3] {\n  scale: 1.1 !important;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.local-file-motion-zoom-out[data-v-59f236d3] {\n  scale: 1;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n",""]);const a=o},88476:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".recent-item-loading-skeleton {\n  width: 155px;\n  height: 130px;\n  padding-top: 4px;\n  box-sizing: border-box;\n}\n",""]);const a=o},62705:(e,t,n)=>{var i=n(55639).Symbol;e.exports=i},44239:(e,t,n)=>{var i=n(62705),o=n(89607),a=n(2333),r=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?o(e):a(e)}},27561:(e,t,n)=>{var i=n(67990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(o,""):e}},31957:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},89607:(e,t,n)=>{var i=n(62705),o=Object.prototype,a=o.hasOwnProperty,r=o.toString,s=i?i.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var i=!0}catch(e){}var o=r.call(e);return i&&(t?e[s]=n:delete e[s]),o}},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:(e,t,n)=>{var i=n(31957),o="object"==typeof self&&self&&self.Object===Object&&self,a=i||o||Function("return this")();e.exports=a},67990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:(e,t,n)=>{var i=n(13218),o=n(7771),a=n(14841),r=Math.max,s=Math.min;e.exports=function(e,t,n){var l,d,c,u,p,f,m=0,v=!1,h=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=l,i=d;return l=d=void 0,m=t,u=e.apply(i,n)}function x(e){var n=e-f;return void 0===f||n>=t||n<0||h&&e-m>=c}function b(){var e=o();if(x(e))return k(e);p=setTimeout(b,function(e){var n=t-(e-f);return h?s(n,c-(e-m)):n}(e))}function k(e){return p=void 0,g&&l?y(e):(l=d=void 0,u)}function w(){var e=o(),n=x(e);if(l=arguments,d=this,f=e,n){if(void 0===p)return function(e){return m=e,p=setTimeout(b,t),v?y(e):u}(f);if(h)return clearTimeout(p),p=setTimeout(b,t),y(f)}return void 0===p&&(p=setTimeout(b,t)),u}return t=a(t)||0,i(n)&&(v=!!n.leading,c=(h="maxWait"in n)?r(a(n.maxWait)||0,t):c,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==p&&clearTimeout(p),m=0,l=f=d=p=void 0},w.flush=function(){return void 0===p?u:k(o())},w}},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},33448:(e,t,n)=>{var i=n(44239),o=n(37005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==i(e)}},7771:(e,t,n)=>{var i=n(55639);e.exports=function(){return i.Date.now()}},14841:(e,t,n)=>{var i=n(27561),o=n(13218),a=n(33448),r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=s.test(e);return n||l.test(e)?d(e.slice(2),n?2:8):r.test(e)?NaN:+e}},13382:(e,t,n)=>{"use strict";n.d(t,{G$:()=>_,N0:()=>h,Pg:()=>S,R2:()=>w,W5:()=>k,ZZ:()=>y,am:()=>b,eq:()=>x,yr:()=>I});var i=n(71017),o=n.n(i),a=n(67657),r=n(7104),s=n(23352),l=n(33394),d=n(94593),c=n(90435),u=n(54856),p=n(5893),f=n(87141),m=n(63111);const v=(0,s.ZP)("dialog");async function h(e){(e=Object.assign({},e||{})).icon&&"string"==typeof e.icon&&(e.icon=o().join((0,r.bY)(),e.icon));const t=a.BrowserWindow.fromId(window.id);return[a.dialog.showMessageBoxSync(t,e)]}async function g(e){(e=Object.assign({},e||{})).icon&&"string"==typeof e.icon&&(e.icon=o().join((0,r.bY)(),e.icon));const t=a.BrowserWindow.fromId(window.id),{response:n,checkboxChecked:i}=await a.dialog.showMessageBox(t,e);return[n,i]}async function y(e){(e=Object.assign({securityScopedBookmarks:!0},e||{})).suggestPath&&!e.defaultPath&&(e.defaultPath=b(e.suggestPath,e.filters),delete e.suggestPath);const{canceled:t,filePath:n,bookmark:i}=await a.dialog.showSaveDialog(a.getCurrentWindow(),e);return t?null:(n&&i&&await l.Z.bindBookmark({fp:n,bookmark:i}),n&&(0,f.km)().setLastSaveDirectory(o().dirname(n)),n)}async function x({folderName:e,dialogOptions:t}){let n="";(t=Object.assign({securityScopedBookmarks:!0},t||{})).defaultPath||(t.defaultPath=b({}));const{canceled:i,filePaths:r,bookmark:s}=await a.dialog.showOpenDialog(a.getCurrentWindow(),t);if(i)return null;if(n=r[0],r.length>0&&s&&await l.Z.bindBookmark({fp:n,bookmark:s}),"string"==typeof e){let t=e.replace(/[\\/]/g,"");t=(0,p.N6)(t).replace(/\.+$/g,"").trim(),n=o().join(n,t)}return d.Z.existsSync(n)||d.Z.ensureDir(n),n&&(0,f.km)().setLastSaveDirectory(n),n}function b({doc:e=null,oldDoc:t=null,suggestedName:n=null},i=null){let r,s;if(!r&&n&&(r=(0,p.N6)(n.toString())),!r&&e&&e.title&&e.source&&!e.source.startsWith("new://")&&(r=(0,p.N6)(e.title.toString())),!r&&t&&t.title&&t.source&&!t.source.startsWith("new://")&&(r=(0,p.N6)(t.title.toString())),r&&Array.isArray(i)){const e=i[0]&&i[0].extensions;Array.isArray(e)&&e.length>0&&(r=`${r}.${e[0]}`)}if(!s&&t&&t.source&&t.source.startsWith("file://")){let e=t.source.slice(7);e=e.substring(1),s=o().dirname(e)}if(!s&&(0,f.km)().lastSaveDirectory&&(s=(0,f.km)().lastSaveDirectory),!s)try{s=a.app.getPath("documents")}catch(e){v.info(e)}return s&&r?o().join(s,r):s||r}async function k(e){e.$withUIKit((t=>{const n=`\n        <button\n        class="vk-button-text vk-size-small uk-text-nowrap"\n        style="word-break: keep-all;"\n        focustrigger="cannotGetFocusByMouse">\n          ${e.$T("OK")}\n        </button>\n        </div>`;t.toast({message:e.$T("The map style has been updated for your current version of Xmind."),pos:"bottom-center",timeout:5e3,btn:n,style:{width:"500px",height:"auto",padding:"10px 20px"},btnClick:t.toast.clearAll()})}))}async function w(e){const t=(e="function"!=typeof e?e=>e:e)("OK"),n=e("Get Latest Version"),i=[t,n],[o]=await g({title:"Xmind",message:e("The map style in this file might vary since it was created in a newer version of Xmind."),detail:e("You can continue to open the file or update to the latest version for better compatibility."),buttons:i,defaultId:i.indexOf(n),cancelId:i.indexOf(t),noLink:!0});o===i.indexOf(n)&&c.ZP.fetch(u.lf.GO_DOWNLOAD)}async function _(e){if(e="function"!=typeof e?e=>e:e,m.zr)return await g({title:"Xmind",message:e("Failed to Open File"),detail:e("The file was created with a newer version of Xmind. Please contact your corporate administrator for the latest update."),buttons:[e("Done")],defaultId:0,noLink:!0});const t=e("Cancel"),n=e("Get Latest Version"),i=[n,t],[o]=await g({title:"Xmind",message:e("Failed to Open File"),detail:e("The file was created by a newer version of Xmind. Please update Xmind and try to open it again."),buttons:i,defaultId:i.indexOf(n),cancelId:i.indexOf(t),noLink:!0});o===i.indexOf(n)&&c.ZP.fetch(u.lf.GO_DOWNLOAD)}async function I(e){const t=(e="function"!=typeof e?e=>e:e)("Save"),n=e("Save as"),i=e("Cancel"),o=[];o.push(n,t,i);let[a]=await g({type:"none",title:"Xmind",message:e("Saving file from Xmind"),detail:e("Once you save the file, it cannot be opened normally in older versions like $1.","Xmind 22.11"),buttons:o,defaultId:o.indexOf(n),cancelId:o.indexOf(i),noLink:!0});const r=a===o.indexOf(t),s=a===o.indexOf(n);return{toSave:r,toSaveAs:s,toCancel:!r&&!s}}async function S(e){const t=(e="function"!=typeof e?e=>e:e)("Fix ＆ Open"),n=e("Cancel"),i=[t,n],[o]=await g({title:"Xmind",message:e("Failed to Open File"),detail:e("The file may contain invalid data structure or have become corrupted. Xmind can try to fix the data structure to help you open it."),buttons:i,defaultId:i.indexOf(t),cancelId:i.indexOf(n),noLink:!0});return{toFix:o===i.indexOf(t),toCancel:o===i.indexOf(n)}}},33394:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(57147),o=n.n(i),a=n(71017),r=n.n(a),s=n(73837),l=n(23352),d=n(96829),c=n(56222);const u=(0,l.ZP)("renderer:fs");async function p(e){return(0,c.A)("OBTAIN_READ_WRITE_ACCESS",e)}async function f(e){return(0,c.A)("RELEASE_READ_WRITE_ACCESS",e)}const m={read:async function(e){if(!r().isAbsolute(e))throw new Error("Must be an absolute path.");const t=await async function(e){return(0,c.A)("OBTAIN_READ_LOCK",e)}(e);try{return await(0,s.promisify)(o().readFile)(e)}catch(t){u.error(`path(${e}) read error: ${(0,d.SC)(t)}`);try{if(!await p(e))throw new Error(`No access to '${e}'`);return await(0,s.promisify)(o().readFile)(e)}catch(e){throw e}finally{await f(e)}}finally{await async function(e){return(0,c.A)("RELEASE_READ_LOCK",e)}(t)}},write:async function(e,t){if(!r().isAbsolute(e))throw new Error("Must be an absolute path.");const n=await async function(e){return(0,c.A)("OBTAIN_WRITE_LOCK",e)}(e);try{return await(0,s.promisify)(o().writeFile)(e,t)}catch(n){u.error(`path(${e}) write error: ${(0,d.SC)(n)}`);try{if(!await p(e))throw new Error(`No access to '${e}'`);return await(0,s.promisify)(o().writeFile)(e,t)}catch(e){throw e}finally{await f(e)}}finally{await async function(e){return(0,c.A)("RELEASE_WRITE_LOCK",e)}(n)}},bindBookmark:async function({fp:e,bookmark:t}={}){return(0,c.A)("BIND_BOOKMARK",{fp:e,bookmark:t})},hasRWAccess:async function(e){return(0,c.A)("HAS_READ_WRITE_ACCESS",e)},obtainRWAccessFromOS:p,releaseRWAccessFromOS:f}},41265:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(4321);const i=(0,n(51900).Z)({},(function(){this._self._c;return this._m(0)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"uk-flex uk-flex-column uk-flex-center uk-flex-middle uk-height-1-1 uk-width-1-1"},[t("div",{staticClass:"uk-margin-small-bottom uk-height-1-1 uk-width-1-1 spinner-grid-content",staticStyle:{"border-radius":"8px"}}),e._v(" "),t("div",{staticClass:"uk-margin-xsmall-bottom spinner-grid-content",staticStyle:{width:"108px",height:"14px","border-radius":"2px"}}),e._v(" "),t("div",{staticClass:"spinner-grid-content",staticStyle:{width:"56px",height:"14px","border-radius":"2px"}})])}],!1,null,null,null).exports},90029:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(2954);const o=(0,i.aZ)({__name:"visibility-sensor",props:{options:{default:()=>({})}},emits:["change"],setup(e,{emit:t}){const n=e,o=(0,i.iH)(null);let a=null;return(0,i.bv)((async()=>{if(await new Promise((e=>setTimeout(e,0))),!o.value)return;let e=0,i=0,r=null;a=new IntersectionObserver((([n])=>{const o=n.isIntersecting,a=n.boundingClientRect.top;o?(e=n.boundingClientRect.top,0!==i&&(r=a>i?"top":"bottom")):(i=n.boundingClientRect.top,0!==e&&(r=a>e?"top":"bottom")),t("change",{visible:o,direction:r})}),n.options),a.observe(o.value)})),(0,i.Jd)((()=>{a&&a.disconnect()})),{__sfc:!0,props:n,emit:t,entryContainer:o,io:a}}});const a=(0,n(51900).Z)(o,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"entryContainer"},[e._t("default")],2)}),[],!1,null,null,null).exports},28534:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(2954),o=n(23279),a=n.n(o),r=n(96829),s=n(20993);const l=(0,i.aZ)({__name:"map-search",props:{disabled:{type:Boolean,default:!1}},emits:["change","active-change"],setup(e,{emit:t}){const n=(0,i.iH)(`search-input-${(0,r.hb)()}`),o=(0,i.iH)(!1),l=(0,i.iH)(""),d=(0,i.iH)(!1),c=a()((e=>{d.value||t("change",e)}),300);return{__sfc:!0,emit:t,searchInputId:n,isSearchInputVisible:o,searchContent:l,inputMethodInputting:d,debounceChangeSearchContent:c,changeSearchContent:e=>{l.value=e,c(e)},openSearchInput:()=>{(0,s.yo)(),l.value="",o.value=!0,t("active-change",!0),setTimeout((()=>{var e;null===(e=document.getElementById(n.value))||void 0===e||e.focus()}))},closeSearchInput:()=>{l.value||(o.value=!1,t("active-change",!1))}}}});const d=(0,n(51900).Z)(l,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.isSearchInputVisible?t("vk-input",{staticStyle:{width:"226px"},attrs:{id:n.searchInputId,prefix:"search",placeholder:e.$T("Search maps and folders"),disabled:e.disabled,value:n.searchContent},on:{compositionstart:function(e){n.inputMethodInputting=!0},compositionend:function(e){n.inputMethodInputting=!1},blur:n.closeSearchInput,input:n.changeSearchContent}}):t("button",{staticClass:"vk-button-tile",attrs:{disabled:e.disabled},on:{click:n.openSearchInput}},[t("span",{attrs:{"uk-icon":"search"}})])}),[],!1,null,"61a1855d",null).exports},27e3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=(0,n(51900).Z)({},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"uk-width-1-1 uk-height-1-1 uk-flex uk-flex-middle uk-flex-center"},[t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle"},[t("span",{staticStyle:{color:"var(--color-empty-text)"},attrs:{"uk-icon":"icon: note; ratio: 1.6"}}),e._v(" "),t("div",{staticClass:"typography-body-small",staticStyle:{"margin-top":"var(--spacing-margin-xxs)",color:"var(--color-empty-text)"}},[e._v("\n      "+e._s(e.$T("No xmind files found"))+"\n    ")])])])}),[],!1,null,null,null).exports},73679:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(2954),o=n(5893),a=n(90029),r=n(41265),s=n(69931),l=n(62004);const d=(0,i.aZ)({__name:"cloud-thumbnail-item",props:{fileId:null,version:{default:""}},setup(e){const t=e,n=(0,i.iH)(!1),o=(0,i.iH)(!1),a=(0,i.Fl)((()=>{const e=(0,s.ju)("static/assets/images/new/thumbnail.svg"),i=(0,l.Y)().getThumbnailURL({fileId:t.fileId,version:t.version});return n.value?e:i}));return{__sfc:!0,props:t,isError:n,isHovered:o,previewURL:a}}});n(66770);var c=n(51900);const u=(0,c.Z)(d,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("img",{staticClass:"uk-width-1-1 uk-height-1-1",class:{"cloud-file-motion-zoom-in":n.isHovered,"cloud-file-motion-zoom-out":!n.isHovered},staticStyle:{"object-fit":"cover"},attrs:{src:n.previewURL,draggable:"false"},on:{contextmenu:function(t){return e.$emit("contextmenu")},error:function(e){n.isError=!0},mouseenter:function(e){n.isHovered=!0},mouseleave:function(e){n.isHovered=!1}}})}),[],!1,null,"3a9f531f",null).exports;var p=n(67159);const f=(0,i.aZ)({__name:"cloud-folder-item",props:{folderId:null,isTrashFolder:{type:Boolean}},setup(e){const t=e,{folderMap:n}=(0,p.nu)(),{refreshTrash:o,trash:a}=(0,p.tc)(),r=(0,i.iH)(!1),s=(0,i.Fl)((()=>{var e,i;return t.isTrashFolder?(null===(e=a.value[t.folderId])||void 0===e?void 0:e.fileItems)||[]:(null===(i=n.value[t.folderId])||void 0===i?void 0:i.fileItems)||[]})),d=(0,i.Fl)((()=>s.value?s.value.slice(0,3):[])),c=(0,i.Fl)((()=>Array.from({length:3},((e,t)=>t)).map((e=>{var t,n,i;const o=d.value[e];return o?(0,l.Y)().getThumbnailURL({fileId:o.fileId,version:null!==(i=null!==(n=null===(t=o.meta)||void 0===t?void 0:t.forceUpdateKey)&&void 0!==n?n:o.modifiedTime)&&void 0!==i?i:""}):""}))));return(0,i.bv)((()=>{t.isTrashFolder&&o(t.folderId)})),{__sfc:!0,props:t,folderMap:n,refreshTrash:o,trash:a,MAX_PREVIEW_FILES:3,isHovered:r,fileItems:s,previewFiles:d,previewURLs:c,handleThumbnailLoad:e=>{e.target.classList.add("loaded")}}}});n(21462);const m=(0,c.Z)(f,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"folder-container uk-width-1-1 uk-height-1-1 uk-position-relative",on:{mouseenter:function(e){n.isHovered=!0},mouseleave:function(e){n.isHovered=!1}}},e._l(n.previewURLs,(function(e,i){return t("div",{staticClass:"uk-position-absolute preview-item",class:{[`preview-item-${i+1}`]:!0,"middle-file-motion-enter":n.isHovered&&0===i,"middle-file-motion-leave":!n.isHovered&&0===i,"left-file-motion-move-left":n.isHovered&&1===i,"left-file-motion-move-back":!n.isHovered&&1===i,"right-file-motion-move-right":n.isHovered&&2===i,"right-file-motion-move-back":!n.isHovered&&2===i},attrs:{"data-src":e,"uk-img":""},on:{load:n.handleThumbnailLoad}})})),0)}),[],!1,null,"f3dfad82",null).exports;const v=(0,i.aZ)({__name:"local-file-item",props:{src:null},setup:e=>({__sfc:!0,isHovered:(0,i.iH)(!1)})});n(22074);const h=(0,c.Z)(v,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("img",{staticClass:"uk-width-1-1 uk-height-1-1 preview-item",class:{"local-file-motion-zoom-in":n.isHovered,"local-file-motion-zoom-out":!n.isHovered},attrs:{src:e.src,tabindex:"-1",draggable:"false"},on:{mouseenter:function(e){n.isHovered=!0},mouseleave:function(e){n.isHovered=!1}}})}),[],!1,null,"59f236d3",null).exports,g=(0,i.aZ)({__name:"index",props:{itemIdPrefix:{default:""},selectItemId:{default:""},previews:null,isShowLabel:{type:Boolean,default:!1},selectFirst:{type:Boolean,default:!1},title:{default:""},isLoading:{type:Boolean,default:!1},previewContainerStyle:null},emits:["select","submit","contextmenu","contextmenu-blank","load-more","sticky"],setup(e,{emit:t}){const n=e,s=(0,i.iH)(null),l=(0,i.iH)(null),d=(0,i.iH)(!1),c=(0,i.iH)(!0),p=(0,i.Fl)((()=>!n.previews.length)),f=e=>{s.value=e,t("select",e)};return(0,i.bv)((()=>{n.selectFirst&&f(n.previews[0]&&n.previews[0].items[0])})),(0,i.YP)((()=>[n.selectItemId,n.previews]),(([e])=>{if(e){const t=n.previews.flatMap((e=>e.items)).find((t=>t.id===e));t&&f(t)}}),{immediate:!0}),{__sfc:!0,props:n,emit:t,selectedItem:s,container:l,titleBarSticky:d,atTop:c,isPreviewItemsEmpty:p,handleSelectItem:f,handleSubmit:()=>{t("submit",s.value)},handleScrollTop:({visible:e})=>{c.value=e},handleScrollBottom:({visible:e})=>{e&&t("load-more")},handleTitleBarVisible:({visible:e})=>{d.value=!e,t("sticky",!e)},getFileNameDisplay:o.Uy,VisibilitySensor:a.Z,SpinnerSkeletonGrid:r.Z,CloudThumbnailItem:u,CloudFolderItem:m,LocalFileItem:h}}});n(40868);const y=(0,c.Z)(g,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"container",staticClass:"uk-height-1-1 uk-flex uk-flex-column",on:{contextmenu:function(e){return n.emit("contextmenu-blank")}}},[t(n.VisibilitySensor,{staticClass:"uk-width-1-1",on:{change:n.handleScrollTop}}),e._v(" "),e._t("header"),e._v(" "),e.title?t("div",{staticClass:"uk-flex uk-flex-between uk-flex-bottom title-bar",class:{"title-bar-sticky":n.titleBarSticky}},[t("span",{staticClass:"uk-flex uk-width-expand uk-flex-middle"},[e._t("title-before"),e._v(" "),t("h1",{staticClass:"uk-margin-remove uk-text-truncate typography-headline-small"},[e._v("\n        "+e._s(e.title)+"\n      ")]),e._v(" "),e._t("title-after")],2),e._v(" "),e._t("title-bar-right")],2):e._e(),e._v(" "),e._t("preview-before"),e._v(" "),t("div",{staticClass:"uk-height-expand uk-overflow-overlay",staticStyle:{padding:"20px 24px 24px"},style:e.previewContainerStyle},[e._t("preview-header"),e._v(" "),t("form",{staticClass:"uk-panel form-container",class:{"uk-height-1-1":e.isLoading||n.isPreviewItemsEmpty},on:{submit:function(e){return e.preventDefault(),n.handleSubmit.apply(null,arguments)}}},[t(n.VisibilitySensor,{attrs:{options:{root:n.container}},on:{change:n.handleTitleBarVisible}}),e._v(" "),t("div",{staticClass:"uk-height-1-1",attrs:{"uk-list-select":"","uk-traverse":"","data-traverse-mode":"nearest-item","data-item":".preview-item","data-form":"true"}},[e.isLoading?t("ul",{staticClass:"uk-margin-remove uk-padding-remove uk-height-1-1 preview-map-list"},e._l(16,(function(e){return t("li",{key:`skeleton-${e}`},[t(n.SpinnerSkeletonGrid)],1)})),0):n.isPreviewItemsEmpty?[e._t("placeholder")]:e._l(e.previews,(function(i){return[e.isShowLabel&&i.label?t("h3",{key:i.label,staticClass:"theme-category-name"},[e._v("\n            "+e._s(i.label)+"\n          ")]):e._e(),e._v(" "),t("ul",{staticClass:"uk-margin-remove uk-padding-remove preview-map-list"},[e._t("list-header",null,{tabindex:"-1"}),e._v(" "),e._l(i.items,(function(i){return t("li",{key:i.id},[t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle"},[t("div",{staticClass:"vk-card vk-size-large uk-padding-remove",class:{"is-active":i.id===(n.selectedItem&&n.selectedItem.id)},style:{"--card-width":"145px","--card-height":"93px"},attrs:{id:`${e.itemIdPrefix}${i.id}`,tabindex:"-1"},on:{click:function(e){return n.handleSelectItem(i)},dblclick:function(e){return e.preventDefault(),n.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"vk-card-inner",on:{contextmenu:function(t){return t.stopPropagation(),e.$emit("contextmenu",i)}}},[i.fromCloud&&"file"===i.type?t(n.CloudThumbnailItem,{attrs:{"file-id":i.id,version:i.forceUpdateKey??i.modifiedTime??""}}):i.fromCloud&&"folder"===i.type?t(n.CloudFolderItem,{attrs:{"folder-id":i.id,"is-trash-folder":i.isTrashFolder}}):t(n.LocalFileItem,{style:{"object-fit":"file"===i.type?"cover":"none"},attrs:{src:i.previewURL}})],1)]),e._v(" "),t("div",{staticClass:"uk-text-center uk-card-selectable-text uk-text-truncate uk-margin-small-top typography-body-medium",staticStyle:{width:"150px"},attrs:{title:n.getFileNameDisplay(i.name)}},[i.fileIcon?t("span",{attrs:{"uk-svg":"","data-src":i.fileIcon}}):e._e(),e._v("\n                  "+e._s(n.getFileNameDisplay(i.name))+"\n                ")]),e._v(" "),i.description?t("div",{staticClass:"preview-item-desc typography-caption-caption"},[e._v("\n                  "+e._s(i.description)+"\n                ")]):e._e()])])})),e._v(" "),e._t("list-footer")],2)]})),e._v(" "),t(n.VisibilitySensor,{attrs:{options:{root:n.container}},on:{change:n.handleScrollBottom}})],2)],1)],2),e._v(" "),e._t("footer")],2)}),[],!1,null,"3cd57d21",null).exports},58310:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var i=n(2954),o=n(67657),a=n(71017),r=n.n(a),s=n(94593),l=n(33394),d=n(69931),c=n(13382),u=n(7104),p=n(18621),f=n(5893),m=n(73679),v=n(87141),h=n(57507),g=n(67159),y=n(90435),x=n(54856),b=n(41265),k=n(62004),w=n(28534),_=n(27e3);const I=(0,i.aZ)({__name:"recent",props:{isActive:{type:Boolean}},setup(e){const t=e,n=(e,...t)=>(0,v.JE)().T(e,...t),{recentItems:a,isCloudRecordIniting:I,refreshCloudRecentItems:S,removeRecentlyItemFromCloud:C}=(0,g.Xb)(),{creatFromCloudMap:O,renameFile:F,shareFile:R}=(0,g.MP)(),{showMapLocation:T}=(0,g.nu)(),{myWorks:Z,teams:A}=(0,g.t7)(),{showCopySuccessToast:L}=(0,g.pm)(),{user:P}=(0,v.c7)(),M=(0,i.iH)(null),E=(0,i.iH)(!1),H=(0,i.iH)(""),N=(0,i.Fl)((()=>!!(0,v.c7)().fireflyToken)),B=(0,i.Fl)((()=>(0,v.km)().recentlyOpenedItems.slice(0,20))),$=(0,i.Fl)((()=>{const e=H.value?a.value.filter((e=>e.name.includes(H.value))):a.value;if(H.value&&0===e.length)return[];return[{items:[{id:"newMap",name:n("New Map"),previewURL:(0,d.ju)("static/assets/images/new/new.svg")},...e]}]}));return(0,i.YP)((()=>t.isActive),(e=>{e&&N.value&&S()}),{immediate:!0}),{__sfc:!0,props:t,$T:n,recentItems:a,isCloudRecordIniting:I,refreshCloudRecentItems:S,removeRecentlyItemFromCloud:C,creatFromCloudMap:O,renameFile:F,shareFile:R,showMapLocation:T,myWorks:Z,teams:A,showCopySuccessToast:L,user:P,selectedFile:M,isRefreshing:E,searchContent:H,isCollaborationAvailable:N,recentlyOpenedItems:B,rencentItemsPreviews:$,handleSelect:async e=>{if(e){if("newMap"===e.id){const{result:e}=await y.ZP.fetch(x.Fx,{name:"dialog-map-templates",parentId:window.id,wait:!0,query:{planType:v.k9.PERSONAL}});(null==e?void 0:e.source)&&window.close()}M.value=e}},createFromSelectedFile:async()=>{var e;if(!M.value)return;if(null===(e=M.value)||void 0===e?void 0:e.fromCloud)return void O(M.value.id);const t=M.value.id,i=(0,f.iZ)(t);if(!await l.Z.obtainRWAccessFromOS(i))return await(0,c.N0)({type:"warning",message:n("Failed to Open"),detail:n("Xmind does not have permission to open this file."),buttons:[n("OK")]}),void(0,v.km)().removeRecentlyOpenedItem(t);await(0,v.JX)().handleCommand("openRecentFileItem",[t]),s.Z.existsSync(i)&&window.close(),(0,p.L9)({eventAction:"newLaunch",eventName:"openRecent"})},openRecentFileCtxMenu:({id:e,fromCloud:t,parentFolderId:i,teamId:a,xmindId:l,name:d})=>{var c;if("newMap"===e)return;const p=null===(c=[...A.value,Z.value])||void 0===c?void 0:c.find((e=>e.teamId===a)),m=!!p,g=l===P,y=[{label:n("Share"),click:()=>{R({fileId:e,fileName:d,teamId:a,fileOwner:l,isTeamOwner:"owner"===(null==p?void 0:p.role)})}},{label:n("Show Map Location"),click:()=>{T({teamId:a,folderId:i,fileId:e})},disabled:!m},{label:n("Rename"),click:()=>{F(e,d).then((()=>{S()}))},disabled:!g},{label:n("Copy Share Link"),click:()=>{const t=(0,k.Y)().getShareLink({fileId:e,fileName:d});o.clipboard.writeText(t),L()}},{type:"separator"},{label:n("Remove"),click:()=>C(e)}],x=[{label:n("Remove"),click:()=>{(0,v.km)().removeRecentlyOpenedItem(e)},disabled:!1},{type:"separator"},{label:n("Open File Location"),click:async()=>{const t=(0,f.iZ)(e);s.Z.existsSync(t)?o.shell.showItemInFolder(t):(o.dialog.showMessageBox({type:"error",title:"Xmind",message:n("Open Recent"),detail:n("This file does not exist. It may have been deleted or moved to another location."),buttons:[n("OK")],cancelId:0}),await(async()=>{const t=B.value.find((t=>t.source===e));if((0,v.km)().removeRecentlyOpenedItem(e),t&&t.previewUrl&&t.previewUrl.endsWith("png")){const e=r().join((0,u.D8)(),t.previewUrl);s.Z.existsSync(e)&&await s.Z.remove(e)}})())}}];(0,h.k)((t?y:x).filter((e=>!e.disabled)))},showRefreshMenu:()=>{const e=[{label:n("Refresh"),click:()=>{E.value=!0,S().finally((()=>{E.value=!1}))},enabled:N.value},{type:"separator",enabled:N.value},{label:n("Remove All"),click:()=>(0,v.JX)().handleCommand("cleanRecent"),enabled:!0}].filter((e=>e.enabled));(0,h.k)(e)},PreviewMaps:m.Z,SpinnerSkeletonGrid:b.Z,MapSearch:w.Z,PlaceholderNoFile:_.Z}}});n(86449);const S=(0,n(51900).Z)(I,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.PreviewMaps,{attrs:{title:n.$T("Recents"),previews:n.rencentItemsPreviews,"select-first":!1},on:{select:n.handleSelect,submit:n.createFromSelectedFile,contextmenu:n.openRecentFileCtxMenu,"contextmenu-blank":n.showRefreshMenu},scopedSlots:e._u([{key:"title-bar-right",fn:function(){return[t(n.MapSearch,{attrs:{disabled:n.isCloudRecordIniting||n.isRefreshing},on:{change:function(e){n.searchContent=e}}})]},proxy:!0},{key:"placeholder",fn:function(){return[t(n.PlaceholderNoFile,{staticStyle:{"margin-top":"-23px"}})]},proxy:!0},n.isCloudRecordIniting||n.isRefreshing?{key:"list-footer",fn:function(){return[t("li",{staticClass:"uk-flex uk-flex-middle uk-flex-center continue-loading-skeleton",staticStyle:{height:"130px",width:"155px"}},[t(n.SpinnerSkeletonGrid)],1)]},proxy:!0}:null],null,!0)})}),[],!1,null,null,null).exports},4321:(e,t,n)=>{var i=n(43240);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("19fa9b8f",i,!0,{})},21462:(e,t,n)=>{var i=n(99858);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("ac660d4c",i,!0,{})},66770:(e,t,n)=>{var i=n(71683);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("199cd804",i,!0,{})},40868:(e,t,n)=>{var i=n(52212);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("2c728eae",i,!0,{})},22074:(e,t,n)=>{var i=n(82863);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("8d840518",i,!0,{})},86449:(e,t,n)=>{var i=n(88476);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("72c219c4",i,!0,{})}}]);