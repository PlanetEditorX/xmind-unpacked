"use strict";(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[8577],{67244:(e,t,n)=>{n.r(t);var i=n(59042),o=n(2954),a=n(63477),r=n.n(a),s=n(54856),c=n(90435),l=n(87141),d=n(95185),u=n(60746),p=n(3004),m=n(86673),v=n(87494);const f=(0,o.aZ)({__name:"app",setup(e){const t=(0,o.iH)(),n=r().parse(location.search.substring(1)),i=(0,o.iH)([]),{T:a}=(0,l.JE)(),f=(0,o.iH)(""),w=(0,o.iH)(),h=(0,o.iH)(),y=(0,o.iH)(!0),g=(0,o.iH)(),k=(0,o.iH)([]),b=(0,o.Fl)((()=>i.value.map((e=>e.id)))),x=(0,o.Fl)((()=>[h.value?{type:"button",label:a("Remove"),click:"remove"}:null,{type:"space",size:"flexible"},{type:"button",label:a("Cancel"),click:"close"},k.value.length>0&&!b.value.includes(k.value[0])?{type:"button",label:a("Insert"),backgroundColor:"primary",click:"insertTopicLink"}:null,{type:"space",size:"flexible"}].filter(Boolean))),T=(0,o.Fl)((()=>i.value.map((e=>({value:e.id,type:"sheet",text:e.title,expanded:!0,sheetId:e.id,items:[$(e.rootTopic,(t=>({value:t.id,text:O(t),type:"topic",items:[],expanded:!0,sheetId:e.id})),((e,t)=>({...e,items:[...e.items,t]})))]}))))),L=(0,o.Fl)((()=>i.value.map((e=>({value:e.id,type:"sheet",text:e.title,expanded:!0,sheetId:e.id,items:$(e.rootTopic,(t=>[{value:t.id,text:O(t),type:"topic",items:[],expanded:!0,sheetId:e.id}]),((e,t)=>e.filter((e=>R(e.text))).concat(t.filter((e=>R(e.text)))))).map((e=>({...e,text:D(e.text)})))}))))),A=(0,o.Fl)((()=>f.value&&f.value.length>0)),E=(0,o.Fl)((()=>A.value?L.value.every((e=>e.items.length<=0)):T.value.every((e=>e.items.length<=0)))),_=(0,o.Fl)((()=>a("<Empty Text>")));async function S(e){return(0,v.CX)((async t=>"content.json"===t.path?JSON.stringify(e.content):"metadata.json"===t.path&&e.metadata?JSON.stringify(e.metadata):"{}"),(async()=>{}))}(0,o.YP)((()=>f.value),(()=>k.value=[])),(0,o.bv)((()=>{w.value=null,h.value="true"===n.hasTopicLink,g.value=n.xmindObjectId,c.ZP.fetch((0,s.zj)(n.editorId)).then((async e=>{const t=JSON.parse(e),n=await S({content:t.content,metadata:t.metadata});i.value=n.sheets,(0,o.Y3)().then((()=>{const e=window.document.querySelector(`button.uk-tree-list-item[data-value="${g.value}"]`);e&&e.classList.add("uk-checked")}))})),Z()})),(0,o.Ah)((()=>{F()}));const C=()=>window.close(),I=async e=>{e&&e.preventDefault(),await c.ZP.fetch((0,s.iM)(window.id),{action:"remove",topicId:""}),window.close()},P=async()=>{k.value.length&&(await c.ZP.fetch((0,s.iM)(window.id),{action:"set",twoWay:y.value,topicId:k.value[0]}),window.close())},O=e=>e.imageSource?`[${a("Image")}] ${e.title}`:e.title,N=e=>{"Enter"===e.code&&(e.preventDefault(),P())},Z=()=>{window.addEventListener("keydown",N)},F=()=>{window.removeEventListener("keydown",N)};function $(e,t,n){let i=t(e);for(const o of e.children)i=n(i,$(o,t,n));for(const o of e.detachedChildren)i=n(i,$(o,t,n));for(const o of e.summaries.map((e=>e.topic)))i=n(i,$(o,t,n));return e.callout&&(i=n(i,$(e.callout,t,n))),i}const R=e=>{if(!e||e.length<=0)return!1;return!(B()[Symbol.search](e)<0)},D=e=>{const t=B()[Symbol.search](e);if(t<0)return e;const n=e.substring(t-16,t+16);return t-16>0?`...${n}`:t+16<e.length?`${n}...`:n},B=()=>j(f.value,!1,!0,!1),W=e=>e.replace(/[-\\{}*+?|^$.[\]()#]/g,"\\$&"),j=(e,t,n,i)=>{if(!e)return;e=W(e),t&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let o="";return n||(o+="i"),i&&(o+="g"),new RegExp(e,o)};return(0,d.q)(x,{remove:I,close:C,insertTopicLink:P}),{__sfc:!0,containerEl:t,modalData:n,sheets:i,$T:a,searchKey:f,selectedIndex:w,hasTopicLink:h,checkedTwoWayLink:y,xmindObjectId:g,selected:k,sheetIds:b,touchBarItems:x,workbookData:T,searchResult:L,isSearchMode:A,isEmpty:E,emptyText:_,deserializeDocument:S,close:C,remove:I,insertTopicLink:P,formatTopicTitle:O,handleTreeListKeyDown:N,startKeyListener:Z,stopKeyListener:F,travelTopic:$,testTitle:R,shortenTitle:D,getRegex:B,escapeRegExpCharacters:W,createRegExp:j,handleSelect:e=>{k.value=[e.value]},showInputMenu:u.Sr,CommonNonePanel:p.Z,TreeListV2:m.Z}}});const w=(0,n(51900).Z)(f,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"vk-window-dialog"},[t("div",{staticClass:"vk-window-title-bar vk-window-title-bar-floating"},[t("window-control-button-group")],1),e._v(" "),t("div",{staticClass:"vk-window-body uk-flex uk-flex-row uk-padding uk-flex-column"},[t("div",{staticClass:"topiclink-search"},[t("p",{staticClass:"topiclink-search-title"},[e._v("\n        "+e._s(n.$T("Select a topic to insert link."))+"\n      ")]),e._v(" "),t("div",{staticClass:"uk-position-relative uk-width-1-1 uk-margin-small"},[t("vk-input",{attrs:{prefix:"search",cls:"vk-input-default vk-size-small",placeholder:n.$T("Find"),autofocus:!0,value:n.searchKey},on:{input:function(e){n.searchKey=e},contextmenu:n.showInputMenu}})],1)]),e._v(" "),n.isSearchMode&&n.isEmpty?t("div",{staticClass:"uk-flex uk-height-1-1 uk-background-default uk-panel uk-panel-scrollable"},[t(n.CommonNonePanel,{staticStyle:{height:"unset"},attrs:{type:"NO_RESULT"}})],1):t("div",{ref:"containerEl",staticClass:"uk-background-default uk-height-expand uk-overflow-auto uk-panel uk-panel-scrollable uk-padding-remove uk-text-nowrap"},[t("keep-alive",[t(n.TreeListV2,{attrs:{"high-performance-mode":!n.isSearchMode,container:n.containerEl,"model-value":n.selected,type:"radio",items:n.isSearchMode?n.searchResult:n.workbookData},on:{click:n.handleSelect},scopedSlots:e._u([{key:"item",fn:function({item:t}){return[e._v("\n            "+e._s(t.text?t.text:n.emptyText)+"\n          ")]}}])})],1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"8px"}},[t("label",[t("input",{staticClass:"vk-checkbox",attrs:{type:"checkbox"},domProps:{checked:n.checkedTwoWayLink},on:{change:function(e){n.checkedTwoWayLink=!n.checkedTwoWayLink}}}),e._v(" "),t("span",[e._v(e._s(n.$T("Add Link for Both Topics")))])])])]),e._v(" "),t("div",{staticClass:"vk-window-button-bar"},[t("div",{staticClass:"vk-button-group"},[t("button",{staticClass:"vk-button-secondary vk-size-small",attrs:{type:"button",disabled:!n.selected.length||n.sheetIds.includes(n.selected[0])},on:{click:n.insertTopicLink}},[e._v("\n        "+e._s(n.$T("Insert"))+"\n      ")]),e._v(" "),t("button",{staticClass:"vk-button-default vk-size-small",attrs:{type:"button"},on:{click:n.close}},[e._v("\n        "+e._s(n.$T("Cancel"))+"\n      ")])]),e._v(" "),n.hasTopicLink?t("button",{staticClass:"vk-button-default vk-size-small",on:{click:n.remove}},[e._v("\n      "+e._s(n.$T("Remove"))+"\n    ")]):e._e()])])}),[],!1,null,null,null).exports;(0,i.Z)(w,{name:"dialog-topiclink"})},59042:(e,t,n)=>{n.d(t,{Z:()=>we});var i=n(47311),o=n(23352),a=n(90435);const r=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",s=(0,o.ZP)(`error:${r}`),c=new i.q(s,{ipc:a.ZP});window.addEventListener("error",(function(e){const t=e.error;t&&c.handle(t)})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason;t&&c.handle(t)}));const l=c;var d=n(2954),u=n(63477),p=n.n(u),m=n(72298),v=n(67657),f=n(13780),w=n.n(f),h=n(30266),y=n(86396),g=n(31945),k=n(54856),b=n(73884),x=n(28914),T=n(56222),L=n(79409),A=n(65114),E=n(77412);const _={install(e){const t="vana-ref";e.directive(t,{bind:function(e,t,n){t.value(n.componentInstance||e,n.key)},update:function(e,n,i,o){if(o.data&&o.data.directives){var a=o.data.directives.find((function(e){return e.name===t}));if(a&&a.value!==n.value)return a&&a.value(null,o.key),void n.value(i.componentInstance||e,i.key)}i.componentInstance===o.componentInstance&&i.elm===o.elm||n.value(i.componentInstance||e,i.key)},unbind:function(e,t,n){t.value(null,n.key)}})}};var S=n(87141);const C={install(e){e.prototype.$T=function(e,...t){return(0,S.JE)().T(e,...t)}}};var I=n(96829);const P=(0,o.ZP)("safe-runner");const O=class{constructor(e){this.errorHandler=e}_handleError(e){"function"==typeof this.errorHandler?this.errorHandler(e):P.error((0,I.SC)(e))}install(e){const t=this;e.prototype.$safeRun=function(e){try{let n=e();return n&&n.then&&n.catch?n.then((e=>e)).catch((e=>t._handleError(e))):n}catch(e){t._handleError(e)}}}};var N=n(69931);const Z={install(e){e.prototype.$toResourceURL=(...e)=>(0,N.ju)(...e).replace("(","%28").replace(")","%29"),e.prototype.$loadResource=N.zD}};var F=n(53775),$=n(59474);var R=n(30247),D=n(2563),B=n(65428);const W=(0,o.ZP)("font");var j=n(22037),z=n.n(j),H=n(38629);const M=(0,o.ZP)("performance");function J(e){e?document.body.style.setProperty("--uk-system-accent-color",e):document.body.style.removeProperty("--uk-system-accent-color")}var q=n(63111),X=n(18621),V=n(69297),Y=n(20993);const K={start:()=>{const e=(0,$.i)();e.startJob();const t=(0,d.YP)((()=>e.pendingJobs),(n=>{n>0||(t(),e.markReady())}));setTimeout((()=>e.endJob()),0)}},U=(()=>{const e=[],t=new Map;return{start:()=>{const e=(0,$.i)();e.startJob(),a.ZP.fetch(k.de).then((t=>{Object.keys(t).forEach((e=>{var n;const i=(0,S.F_)(e);null===(n=null==i?void 0:i())||void 0===n||n.$patch(t[e])})),b.Z.on(A.Md,(e=>{e.forEach((({id:e,state:t})=>{var n;const i=(0,S.F_)(e);null===(n=null==i?void 0:i())||void 0===n||n.$patch((0,d.qj)(t))}))})),e.endJob()}))},plugin:n=>{(0,S.W$)(n.store.$id)&&n.store.$subscribe(((i,o)=>{if(n.store.$id!==i.storeId)return;const r=t.get(i.storeId);t.set(i.storeId,!0),(null===window||void 0===window?void 0:window.isEditorFrame)||r&&i.type!==E.x1.patchObject&&(0,S.W$)(i.storeId)&&(e.push({id:i.storeId,state:JSON.parse(JSON.stringify(o))}),Promise.resolve().then((()=>{a.ZP.fetch(k.w6,{states:e}),e.length=0})))}))}}})(),G={start:()=>{(0,B.r)();const e=(0,N.ju)("/static/snowbird/resource/"),t=function(){const e={};return R.Fy(((t,n)=>{e[t]=n.map((e=>({...e,family:t})))})),e}(),n=Object.values(t).flat().map((t=>function({family:e,src:t,italic:n,weight:i,"unicode-range":o},a){const r=new URL(t,a).href;let s={family:e,source:`url("${r}")`,url:r};return void 0!==n&&(s={...s,style:n?"italic":"normal"}),void 0!==i&&(s={...s,weight:i.toString()}),void 0!==o&&(s={...s,unicodeRange:o}),s}(t,e)));!function(e){Promise.all(e.map((({family:e,source:t,...n})=>{const i=new FontFace(e,t,n);return i.load().then((()=>{document.fonts.add(i)})).catch((()=>{W.error("Failed to load css font from",t)}))})))}(n),function(){const e=document.createElement("style"),t=R.Hn();e.innerHTML=t,document.head.appendChild(e),document.body.style.setProperty("--info-button-font",R.o6)}(),(0,D.O)().updateBuiltinFontFamilies(Array.from(new Set(Object.keys(t))))}},Q={start:()=>{const e=(0,$.i)(),{_apr:t,_acc:n}=p().parse(location.search.slice(1));t&&(e.startJob(),M.debug("About to load CSS using _apr query parameter:",t),(0,H.Z)(t,(()=>{M.debug("Loaded CSS using _apr query parameter:",t),setTimeout((()=>{e.endJob()}),10)}))),n&&J(n),"darwin"===z().platform()&&parseFloat(z().release())>=20&&document.body.classList.add("uk-darwin-bigsur"),(0,d.YP)((()=>(0,S.S)().language),((e,t)=>{t&&document.body.classList.remove(`uk-lang-${t}`),e&&document.body.classList.add(`uk-lang-${e}`)}));const i=(0,d.YP)((()=>(0,$.i)().ready),(e=>{e&&(i(),(0,d.YP)((()=>[(0,S.S)().appearance,(0,D.O)().ignoreAppearanceChanged]),(([e,t])=>{t||(0,H.Z)(e)})),(0,d.YP)((()=>(0,S.qr)().systemAccentColor),(e=>J(e))),(0,d.YP)((()=>(0,S.S)().systemScrollbarSetting),(e=>function(e){const t="vk-scrollbar";document.body.classList.forEach((e=>{e.startsWith(t)&&document.body.classList.remove(e)})),document.body.classList.add(`${t}-${(e||"always").toLowerCase()}`)}(e)),{immediate:!0}))}))}},ee={start:()=>{q.nd&&q.qu.forEach((e=>{(0,S.JX)().appendBeforeHandler(e,(()=>(async()=>(await a.ZP.fetch(k.QN),"interruption"))()))})),Object.keys(q.JN).concat(Object.keys(q.oF)).forEach((e=>{(0,S.JX)().appendBeforeHandler(e,(()=>{const t=(0,S.JX)().commandById(e);return(null==t?void 0:t.provider)?(async(e,t)=>{if(!await a.ZP.fetch(k.Gy,{name:e,channel:(0,k.gk)(t)}))return"interruption"})(e,t.provider):"interruption"}))})),q.ZK.forEach((e=>{(0,S.JX)().appendAfterHandler(e,(()=>{const t=e.split(".")[1];(0,X.L9)({eventCategory:"Edit",eventAction:t,eventValue:1})}))})),q.ff.forEach((e=>{(0,S.JX)().appendAfterHandler(e,(()=>{(0,X.L9)({eventCategory:"Share",eventAction:e,eventValue:1})}))})),q.y_.forEach((e=>{(0,S.JX)().appendBeforeHandler(e,(()=>{(0,V.Kl)()}))})),q.xk.forEach((e=>{(0,S.JX)().appendBeforeHandler(e,(()=>{(0,V.fv)()}))})),q.wp.forEach((e=>{(0,S.JX)().appendBeforeHandler(e,(()=>{(0,V.nz)()}))})),(0,S.JX)().appendAfterHandler("editor.addTodo",Y.l5),(0,S.JX)().appendAfterHandler("editor.cancelTask",Y.DY),(0,S.JX)().appendAfterHandler("editor.checkTodo",(()=>{(0,Y.fR)("checkTask")})),(0,S.JX)().appendAfterHandler("editor.uncheckTodo",(()=>{(0,Y.fR)("uncheckTask")})),q.QL.forEach((e=>{(0,S.JX)().appendBeforeHandler(e,(()=>{if((0,S.si)().contexts["collaboration.isReadOnly"])return"interruption"}))})),q.gY.forEach((e=>{(0,S.JX)().appendBeforeHandler(e,(()=>{if((0,S.si)().contexts["collaboration.isFromCloud"])return"interruption"}))}))}},te={start:()=>{const e=(0,$.i)();e.startJob(),(0,S.JX)().injectDoHandleCommand((async(e,t)=>a.ZP.fetch(k.hR,{commandId:e,handlerArgs:t}))),e.endJob()}},ne=[U.plugin];var ie=n(7710);const oe=p().parse(window.location.search.slice(1)),ae=!0,re=!!oe.isBrowserView,se=!!oe.isEditorFrame;let ce=v.getCurrentWindow;re&&(ce=function(){const e=x.Z.sendSync("get-current-window-id");return v.BrowserWindow.fromId(parseInt(e))});const le=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",de=(0,o.ZP)("performance"),ue=(0,o.ZP)("sentry");de.debug("Initializing page:",le),m.webFrame.setVisualZoomLevelLimits(1,1),document.body.classList.add("uk-win32"),Object.defineProperty(window,"id",{get:()=>ce().id}),window.getWindowIdAsync=async()=>await(0,T.A)("get-current-window-id");window.getCurrentWindowAsync=async()=>{const e=await window.getWindowIdAsync();return v.BrowserWindow.fromId(parseInt(e))},window.isEditorFrame=se;const pe=d.ZP.observable({isBeingDestroyed:!1,isDestroyed:!1,isShown:!1});["isBeingDestroyed","isDestroyed","isShown"].forEach((e=>{Object.defineProperty(window,e,{get:()=>pe[e],set(t){pe[e]=t}})})),window.show=()=>{ce().show()},window.hide=()=>{ce().hide()},window.close=()=>{ce().close()},window.minimize=()=>{ce().minimize()},window.maximize=()=>{ce().maximize()},window.restore=()=>{ce().unmaximize()},window.isMinimized=()=>ce().isMinimized(),window.isMaximized=()=>ce().isMaximized(),window.isFullScreen=()=>ce().isFullScreen(),window.resizeTo=(e,t)=>{ce().setContentSize(e,t)},window.resizeBy=(e,t)=>{let[n,i]=ce().getContentSize();ce().setContentSize(n+e,i+t)},window.moveTo=(e,t)=>{ce().setPosition(e,t)},window.moveBy=(e,t)=>{let[n,i]=ce().getPosition();ce().setPosition(n+e,i+t)},b.Z.on("window-maximize",(()=>{document.body.classList.add("uk-window-maximized"),window.dispatchEvent(new Event("maximize"))})),b.Z.on("window-unmaximize",(()=>{document.body.classList.remove("uk-window-maximized"),window.dispatchEvent(new Event("restore"))})),b.Z.on("window-minimize",(()=>{window.dispatchEvent(new Event("minimize"))})),b.Z.on("window-unminimize",(()=>{window.dispatchEvent(new Event("unminimize"))})),b.Z.on("window-focus",(()=>{document.body.classList.remove("uk-window-inactive")})),b.Z.on("window-blur",(()=>{document.body.classList.add("uk-window-inactive")})),b.Z.on("window-enter-full-screen",(()=>{document.body.classList.add("uk-window-full-screen"),window.dispatchEvent(new Event("enter-full-screen"))})),b.Z.on("window-leave-full-screen",(()=>{document.body.classList.remove("uk-window-full-screen"),window.dispatchEvent(new Event("leave-full-screen"))})),b.Z.on("window-sheet-begin",(()=>{document.body.classList.add("uk-disabled"),window.dispatchEvent(new Event("sheet-begin"))})),b.Z.on("window-sheet-end",(()=>{document.body.classList.remove("uk-disabled"),window.dispatchEvent(new Event("sheet-end"))})),b.Z.on("window-show",(()=>{window.dispatchEvent(new Event("window-show"))})),b.Z.on(A.$r,(e=>{(0,ie.l)().setQuery(e)}));const me=ce&&ce();if(me&&me.isMaximized()&&document.body.classList.add("uk-window-maximized"),me&&me.isFullScreen()&&document.body.classList.add("uk-window-full-screen"),me&&!me.isFocused()&&document.body.classList.add("uk-window-inactive"),document.addEventListener("keydown",(e=>{27===e.keyCode&&document.body.querySelector(".uk-window-dialog")&&setTimeout((()=>{if(e.defaultPrevented)return;const t=new Event("close");window.dispatchEvent(t)&&window.close()}),0)})),me&&me.isMaximizable&&me.isMaximizable()){const e=["a","button","select","input"];document.addEventListener("dblclick",(t=>{const{target:n,defaultPrevented:i}=t;if(i)return;let o=n;for(;o&&"function"==typeof o.matches;){if(e.some((e=>o.matches(e))))return;o=o.parentNode}let a=document.querySelector(".vk-window-title-bar-expanded")||document.querySelector(".vk-window-title-bar");a&&a.contains(n)&&(window.isMaximized()?window.restore():window.maximize())}))}d.ZP.use(E.og),d.ZP.use(new O((e=>l.handle(e)))),d.ZP.use(w()),d.ZP.use(C),d.ZP.use(Z),d.ZP.use(_),d.ZP.use(h.ZP.Plugin),de.debug("Initialized page:",le);const ve=(0,E.WB)();(0,E.uX)(ve),ne.forEach((e=>ve.use(e))),Object.values(S.rx).forEach((e=>e())),K.start(),U.start(),G.start(),Q.start(),ee.start(),te.start();const fe=(0,L.Z)("version").includes("beta");if(process.env.SENTRY_DSN_OF_BROWSER&&fe){const e=(0,d.YP)((()=>(0,S.qr)().sentryConfig),(t=>{e();try{const e=t[process.env.SENTRY_PROJECT_OF_BROWSER]||{};y.S({Vue:d.ZP,dsn:process.env.SENTRY_DSN_OF_BROWSER,environment:"production",...e}),ue.info("init",e)}catch(e){ue.error("Failed to init sentry",e)}}),{immediate:!1})}async function we(e,{mountTarget:t="#app",name:n=null,plugins:i=[],runAfterPiniaPlugin:o,editorId:r=null,autoShow:s=!0}={}){de.debug("Bootstrapping:",le);for(let e of i)d.ZP.use(e);let c;return(0,S._t)((0,g.b3)(window.id)),"dialog-err"===n&&(0,S.VE)((0,g.zN)("dialog-err",window.id)),"dialog-problem"===n&&(0,S.ym)((0,g.zN)("dialog-problem",window.id)),r&&(0,S.OD)((0,g.aJ)(r)),await new Promise((n=>{let i=(0,d.YP)((()=>(0,$.i)().ready),(r=>{r&&(i(),document.body.classList.add(`uk-lang-${(0,S.S)().language}`),o?.(ve),de.debug("About to create Vue instance:",le),c=new d.ZP({...e,pinia:ve}),de.debug("Created Vue instance:",le),window.addEventListener("unload",(()=>{window.isBeingDestroyed=!0,c.$destroy(),window.isDestroyed=!0})),de.debug("About to mount Vue instance:",le),c.$mount(t||"#app"),de.debug("Mounted Vue instance:",le),(0,F.qJ)().then((async()=>{if(!s)return;const e=await window.getWindowIdAsync();!ae&&await a.ZP.fetch((0,k.EV)(e),"show"),ae&&await a.ZP.fetch((0,k.EV)(e),"moveToShow"),window.isShown=!0})),n(c))}))})),c}},13382:(e,t,n)=>{n.d(t,{G$:()=>T,N0:()=>w,Pg:()=>A,R2:()=>x,W5:()=>b,ZZ:()=>y,am:()=>k,eq:()=>g,yr:()=>L});var i=n(71017),o=n.n(i),a=n(67657),r=n(7104),s=n(23352),c=n(33394),l=n(94593),d=n(90435),u=n(54856),p=n(5893),m=n(87141),v=n(63111);const f=(0,s.ZP)("dialog");async function w(e){(e=Object.assign({},e||{})).icon&&"string"==typeof e.icon&&(e.icon=o().join((0,r.bY)(),e.icon));const t=a.BrowserWindow.fromId(window.id);return[a.dialog.showMessageBoxSync(t,e)]}async function h(e){(e=Object.assign({},e||{})).icon&&"string"==typeof e.icon&&(e.icon=o().join((0,r.bY)(),e.icon));const t=a.BrowserWindow.fromId(window.id),{response:n,checkboxChecked:i}=await a.dialog.showMessageBox(t,e);return[n,i]}async function y(e){(e=Object.assign({securityScopedBookmarks:!0},e||{})).suggestPath&&!e.defaultPath&&(e.defaultPath=k(e.suggestPath,e.filters),delete e.suggestPath);const{canceled:t,filePath:n,bookmark:i}=await a.dialog.showSaveDialog(a.getCurrentWindow(),e);return t?null:(n&&i&&await c.Z.bindBookmark({fp:n,bookmark:i}),n&&(0,m.km)().setLastSaveDirectory(o().dirname(n)),n)}async function g({folderName:e,dialogOptions:t}){let n="";(t=Object.assign({securityScopedBookmarks:!0},t||{})).defaultPath||(t.defaultPath=k({}));const{canceled:i,filePaths:r,bookmark:s}=await a.dialog.showOpenDialog(a.getCurrentWindow(),t);if(i)return null;if(n=r[0],r.length>0&&s&&await c.Z.bindBookmark({fp:n,bookmark:s}),"string"==typeof e){let t=e.replace(/[\\/]/g,"");t=(0,p.N6)(t).replace(/\.+$/g,"").trim(),n=o().join(n,t)}return l.Z.existsSync(n)||l.Z.ensureDir(n),n&&(0,m.km)().setLastSaveDirectory(n),n}function k({doc:e=null,oldDoc:t=null,suggestedName:n=null},i=null){let r,s;if(!r&&n&&(r=(0,p.N6)(n.toString())),!r&&e&&e.title&&e.source&&!e.source.startsWith("new://")&&(r=(0,p.N6)(e.title.toString())),!r&&t&&t.title&&t.source&&!t.source.startsWith("new://")&&(r=(0,p.N6)(t.title.toString())),r&&Array.isArray(i)){const e=i[0]&&i[0].extensions;Array.isArray(e)&&e.length>0&&(r=`${r}.${e[0]}`)}if(!s&&t&&t.source&&t.source.startsWith("file://")){let e=t.source.slice(7);e=e.substring(1),s=o().dirname(e)}if(!s&&(0,m.km)().lastSaveDirectory&&(s=(0,m.km)().lastSaveDirectory),!s)try{s=a.app.getPath("documents")}catch(e){f.info(e)}return s&&r?o().join(s,r):s||r}async function b(e){e.$withUIKit((t=>{const n=`\n        <button\n        class="vk-button-text vk-size-small uk-text-nowrap"\n        style="word-break: keep-all;"\n        focustrigger="cannotGetFocusByMouse">\n          ${e.$T("OK")}\n        </button>\n        </div>`;t.toast({message:e.$T("The map style has been updated for your current version of Xmind."),pos:"bottom-center",timeout:5e3,btn:n,style:{width:"500px",height:"auto",padding:"10px 20px"},btnClick:t.toast.clearAll()})}))}async function x(e){const t=(e="function"!=typeof e?e=>e:e)("OK"),n=e("Get Latest Version"),i=[t,n],[o]=await h({title:"Xmind",message:e("The map style in this file might vary since it was created in a newer version of Xmind."),detail:e("You can continue to open the file or update to the latest version for better compatibility."),buttons:i,defaultId:i.indexOf(n),cancelId:i.indexOf(t),noLink:!0});o===i.indexOf(n)&&d.ZP.fetch(u.lf.GO_DOWNLOAD)}async function T(e){if(e="function"!=typeof e?e=>e:e,v.zr)return await h({title:"Xmind",message:e("Failed to Open File"),detail:e("The file was created with a newer version of Xmind. Please contact your corporate administrator for the latest update."),buttons:[e("Done")],defaultId:0,noLink:!0});const t=e("Cancel"),n=e("Get Latest Version"),i=[n,t],[o]=await h({title:"Xmind",message:e("Failed to Open File"),detail:e("The file was created by a newer version of Xmind. Please update Xmind and try to open it again."),buttons:i,defaultId:i.indexOf(n),cancelId:i.indexOf(t),noLink:!0});o===i.indexOf(n)&&d.ZP.fetch(u.lf.GO_DOWNLOAD)}async function L(e){const t=(e="function"!=typeof e?e=>e:e)("Save"),n=e("Save as"),i=e("Cancel"),o=[];o.push(n,t,i);let[a]=await h({type:"none",title:"Xmind",message:e("Saving file from Xmind"),detail:e("Once you save the file, it cannot be opened normally in older versions like $1.","Xmind 22.11"),buttons:o,defaultId:o.indexOf(n),cancelId:o.indexOf(i),noLink:!0});const r=a===o.indexOf(t),s=a===o.indexOf(n);return{toSave:r,toSaveAs:s,toCancel:!r&&!s}}async function A(e){const t=(e="function"!=typeof e?e=>e:e)("Fix ＆ Open"),n=e("Cancel"),i=[t,n],[o]=await h({title:"Xmind",message:e("Failed to Open File"),detail:e("The file may contain invalid data structure or have become corrupted. Xmind can try to fix the data structure to help you open it."),buttons:i,defaultId:i.indexOf(t),cancelId:i.indexOf(n),noLink:!0});return{toFix:o===i.indexOf(t),toCancel:o===i.indexOf(n)}}},33394:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(57147),o=n.n(i),a=n(71017),r=n.n(a),s=n(73837),c=n(23352),l=n(96829),d=n(56222);const u=(0,c.ZP)("renderer:fs");async function p(e){return(0,d.A)("OBTAIN_READ_WRITE_ACCESS",e)}async function m(e){return(0,d.A)("RELEASE_READ_WRITE_ACCESS",e)}const v={read:async function(e){if(!r().isAbsolute(e))throw new Error("Must be an absolute path.");const t=await async function(e){return(0,d.A)("OBTAIN_READ_LOCK",e)}(e);try{return await(0,s.promisify)(o().readFile)(e)}catch(t){u.error(`path(${e}) read error: ${(0,l.SC)(t)}`);try{if(!await p(e))throw new Error(`No access to '${e}'`);return await(0,s.promisify)(o().readFile)(e)}catch(e){throw e}finally{await m(e)}}finally{await async function(e){return(0,d.A)("RELEASE_READ_LOCK",e)}(t)}},write:async function(e,t){if(!r().isAbsolute(e))throw new Error("Must be an absolute path.");const n=await async function(e){return(0,d.A)("OBTAIN_WRITE_LOCK",e)}(e);try{return await(0,s.promisify)(o().writeFile)(e,t)}catch(n){u.error(`path(${e}) write error: ${(0,l.SC)(n)}`);try{if(!await p(e))throw new Error(`No access to '${e}'`);return await(0,s.promisify)(o().writeFile)(e,t)}catch(e){throw e}finally{await m(e)}}finally{await async function(e){return(0,d.A)("RELEASE_WRITE_LOCK",e)}(n)}},bindBookmark:async function({fp:e,bookmark:t}={}){return(0,d.A)("BIND_BOOKMARK",{fp:e,bookmark:t})},hasRWAccess:async function(e){return(0,d.A)("HAS_READ_WRITE_ACCESS",e)},obtainRWAccessFromOS:p,releaseRWAccessFromOS:m}},94593:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(81296),o=n.n(i);const a=(0,n(23352).ZP)("ipc:proxy:"),r=new Proxy(o(),{get(e,t){let n=Reflect.get(e,t);return"function"==typeof n?(...i)=>{if(!window.isDestroyed)return n.apply(e,i);a.error(`window has been destroyed, we should not invoke fsp.${t})`)}:n}})},56222:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(72298);let o=0;function a(e,t){return new Promise((n=>{const a=o++;i.ipcRenderer.once(`internal-ipc-api-reply:${e}:${a}`,((e,{data:t=null})=>{n(t)})),i.ipcRenderer.send(`internal-ipc-api:${e}`,{payload:t,seq:a})}))}},28914:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(72298);const o=(0,n(23352).ZP)("ipc:proxy:"),a=new Proxy(i.ipcRenderer,{get(e,t){let n=Reflect.get(e,t);return"function"==typeof n?(...i)=>{if(!window.isDestroyed)return n.apply(e,i);o.error(`window has been destroyed, we should not invoke ipcRenderer.${t} with args (${JSON.stringify(i)})`)}:n}})},90435:(e,t,n)=>{n.d(t,{ZP:()=>c,he:()=>s});var i=n(96829),o=n(28914);const a=new Map;let r=0;function s(e,t){const n=a.get(e);return n?Promise.resolve().then((()=>n(t))):new Promise(((n,a)=>{const s=r++;o.Z.once(`ipc-api-reply:${e}:${s}`,((e,{error:t=null,data:o=null})=>{t?a((0,i.aq)(t)):n(o)})),o.Z.send(`ipc-api:${e}`,{payload:t,seq:s})}))}const c={fetch:s,route:function(e,t){if("function"!=typeof t)throw new Error(`IPC API "${e}" is routed to invalid handler: ${typeof t}`);if(a.has(e))throw new Error(`IPC API "${e}" is routed twice`);const n=`ipc-api:${e}`;if(o.Z.eventNames().includes(n))throw new Error(`IPC API "${e}" is routed twice`);const r=(n,{payload:a=null,seq:r=0}={})=>{const s=`ipc-api-reply:${e}:${r}`;Promise.resolve().then((()=>t(a))).then((e=>{o.Z.send(s,{data:e})})).catch((e=>{o.Z.send(s,{error:(0,i.SC)(e)})}))};return a.set(e,t),o.Z.on(n,r),o.Z.send("ipc-api-register",{apiName:e}),()=>{o.Z.send("ipc-api-unregister",{apiName:e}),o.Z.removeListener(n,r),a.delete(e)}}}},23352:(e,t,n)=>{n.d(t,{ZP:()=>l});var i=n(82134),o=n(96829),a=n(79409),r=n(72298);const s=new i.Jq(global.console,{colorful:!1}),c=new i.Yd({isDebugging:(0,a.Z)("version").indexOf("-alpha")>=0||(0,a.Z)("version").indexOf("-dev")>=0||o.x,handle(e){s.handle(e),function(e){r.ipcRenderer.send("logger:handleLogEvent",e)}(e)}}),l=(e=null)=>c.logger(e)},79409:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(71017),o=n.n(i),a=n(57147),r=n.n(a),s=n(7104);let c=null;function l(e=null){return c||(c=JSON.parse(r().readFileSync(o().join((0,s.bY)(),"package.json")))),e?c[e]:c}},69931:(e,t,n)=>{n.d(t,{Al:()=>u,ju:()=>c,pP:()=>l,zD:()=>d});var i=n(71017),o=n.n(i),a=n(94593),r=n(7104),s=n(5893);function c(e){return(0,s.u3)(o().join((0,r.bY)(),e))}function l(e){return(0,s.u3)(o().join((0,r.D8)(),e))}function d(e){return a.Z.readFile(o().join((0,r.bY)(),e))}const u=(...e)=>c(...e).replace("(","%28").replace(")","%29")},73884:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(82361),o=n.n(i),a=n(28914);const r=new(o()),s=r.emit;r.emit=function(e,...t){s.call(r,e,...t),l(e)&&a.Z.send("revents:broadcast",[e,...t])},r.on("newListener",(e=>{if(l(e)){0===r.eventNames().filter(l).length&&a.Z.send("revents:register")}})),r.on("removeListener",(e=>{if(l(e)){0===r.eventNames().filter(l).length&&a.Z.send("revents:unregister")}}));const c=r.removeAllListeners;function l(e){return"newListener"!==e&&"removeListener"!==e}r.removeAllListeners=function(e){if(!e)throw new Error("revents's removeAllListeners is forbidden!");if("newListener"===e||"removeListener"===e)throw new Error('revents\'s "newListener" and "removeListener" handler should not be removed');c.call(r,e)},a.Z.on("revents:broadcast",((e,t)=>{let n=JSON.parse(t);s.apply(r,n)})),window.addEventListener("unload",(()=>{a.Z.send("revents:unregister")}));const d=r},69297:(e,t,n)=>{n.d(t,{Do:()=>a,Kl:()=>r,N1:()=>o,fv:()=>s,nz:()=>c});var i=n(28914);function o(){return i.Z.sendSync("usage-stats:data")}function a(){i.Z.send("usage-stats:increase",{type:"dwellTimeInZenMode",value:1e3})}function r(e=1){i.Z.send("usage-stats:increase",{type:"topicsAdded",value:e})}function s(e=1){i.Z.send("usage-stats:increase",{type:"sheetsAdded",value:e})}function c(e=1){i.Z.send("usage-stats:increase",{type:"eventsTriggered",value:e})}},18621:(e,t,n)=>{n.d(t,{Fk:()=>a,L9:()=>o});var i=n(28914);function o(e){i.Z.send("usage-tracker:track-event",{event:e})}function a(e){i.Z.send("usage-tracker:track-view",{view:e})}},7104:(e,t,n)=>{n.d(t,{D8:()=>d,Im:()=>v,L2:()=>p,N8:()=>u,O1:()=>f,Xl:()=>y,bY:()=>l,d6:()=>h,tM:()=>w,tY:()=>m});var i=n(71017),o=n.n(i),a=n(72298),r=n(56222);let s=null;let c=null;function l(){return c||(c=a.ipcRenderer.sendSync("workspace:appPath")),c}function d(){return o().join((s||(s=a.ipcRenderer.sendSync("workspace:userData")),s),"vana")}function u(){return o().join(d(),"workbooks")}function p(){return o().join(d(),"file-cache")}function m(){return o().join(d(),"theme")}function v(){return o().join(d(),"smart-color")}function f(){return o().join(d(),"illustrations")}function w(){return o().join(d(),"templates")}function h(){return o().join(l(),"static/snowbird/resource/")}async function y(){return s||(s=await(0,r.A)("workspace:userData")),o().join(s,"vana","workbooks")}},38629:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(69931);function o(e,t=null){document.documentElement.setAttribute("color-scheme","default"===e?"light":"dark");if(document.querySelector("#appearance_link"))return void("function"==typeof t&&t());const n=(0,i.ju)("static/vanakit/themes/vana.css"),o=document.createElement("link");o.type="text/css",o.id="appearance_link",o.rel="stylesheet",o.href=n,o.setAttribute("data-appearance",e),"function"==typeof t&&(o.onload=()=>t()),document.head.appendChild(o)}},60746:(e,t,n)=>{n.d(t,{GI:()=>v,JX:()=>p,Ni:()=>f,QC:()=>y,RL:()=>h,RS:()=>u,SX:()=>k,Sr:()=>g,gP:()=>w,lF:()=>m,mi:()=>x,sF:()=>d,yB:()=>b});n(13382),n(81296),n(90435),n(54856),n(71017);var i=n(72298),o=n(67657),a=(n(63111),n(41809)),r=(n(30053),n(97234)),s=n(26601),c=n(87141);const l={cache:!1},d=e=>{const t=e=>parseInt(e,16);if("string"==typeof(e=(0,r.Z)(e).toHexString())&&/^#[A-Z0-9]{6}$/.test(e.toUpperCase())){return.2126*t(e.slice(1,3))+.7152*t(e.slice(3,5))+.0722*t(e.slice(5))}return 0},u=(e={})=>{const t=Object.assign({},l,e);let n=null;const i={};return function(e="",o=""){if(t.cache&&i[e])return i[e];n||(n=document.createElement("canvas"));const a=n.getContext("2d");a.font=o;const r=a.measureText(e);return t.cache&&(i[e]=r.width),r.width}};function p(){const e=o.screen.getAllDisplays().map((e=>e.scaleFactor));return Math.max.apply(null,e)}const m=(e,t=1)=>{const n=p(),i=(0,a.Hv)(e,72*n*t);return Buffer.from(i.slice(22),"base64")};function v(e){let t=parseInt(e);return Number.isInteger(t)?t:100}function f(e){return`${parseInt(e)}%`}const w=function(){let e=null;return function(){if(!e)if(window.screen.deviceXDPI&&window.screen.deviceYDPI)e={x:window.screen.deviceXDPI,y:window.screen.deviceYDPI};else{const t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden",document.body.appendChild(t),e={x:parseInt(t.offsetWidth),y:parseInt(t.offsetHeight)},t.parentNode.removeChild(t)}return e}}();function h(e,t){let n=(0,c.f7)().keybindingByCommandIdAndGroup(t);const i=[];return"string"==typeof n&&n.split("+").forEach((e=>{let t=e;"="===t&&(t="+"),t&&i.push(t)})),i.length>0?`${e} ${i.join(" ")}`:e}const y=({width:e,height:t,animate:n=!1})=>{o.getCurrentWindow().setSize(e,t,n)},g=e=>{const t=(e,...t)=>(0,c.JE)().T(e,...t),n=o.Menu,a=o.MenuItem,r=new n;setTimeout((()=>{const n=document.getSelection().toString(),s=i.clipboard.readText();r.append(new a({label:t("Cut"),enabled:Boolean(n),click:()=>document.execCommand("cut")})),r.append(new a({label:t("Copy"),enabled:Boolean(n),click:()=>document.execCommand("copy")})),r.append(new a({label:t("Paste"),enabled:Boolean(s),click:()=>document.execCommand("paste")})),r.append(new a({type:"separator"})),r.append(new a({label:t("Select All"),enabled:Boolean(e),click:()=>document.execCommand("selectAll")})),r.popup({window:o.getCurrentWindow()})}),50)};async function k(){await new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame((()=>{requestIdleCallback(e)}))}))))}const b=(e,t)=>0===e||0===t||s.Z.test({width:e,height:t,sizes:[e,t]}),x=async(e,t,n=1)=>{if(b(e*n,t*n))return n;const i=await s.Z.maxWidth({usePromise:!0}),o=await s.Z.maxHeight({usePromise:!0}),a=await s.Z.maxArea({usePromise:!0}),r=i.width,c=o.height,l=a.width*a.height;let d=n;if(e*n>r){const t=r/e;d=Math.min(d,t)}if(t*n>c){const e=c/t;d=Math.min(d,e)}if(e*n*t*n>l){const n=Math.sqrt(l/(e*t));d=Math.min(d,n)}return d}},20993:(e,t,n)=>{n.d(t,{AZ:()=>B,Ao:()=>F,Bv:()=>h,C3:()=>L,CI:()=>W,CN:()=>E,DY:()=>s,I1:()=>f,JC:()=>o,NK:()=>d,Pr:()=>p,TJ:()=>g,Vs:()=>_,Wr:()=>$,Xz:()=>O,Yj:()=>b,Zk:()=>u,_5:()=>P,_6:()=>A,cZ:()=>k,cx:()=>N,dx:()=>v,fR:()=>r,jB:()=>m,kI:()=>c,l5:()=>a,p3:()=>l,sF:()=>C,sG:()=>T,t0:()=>D,wH:()=>R,wp:()=>y,xG:()=>S,xg:()=>x,xy:()=>w,yo:()=>Z,zH:()=>I});var i=n(18621);const o=e=>(0,i.L9)({eventName:"Gallery",eventAction:e}),a=()=>(0,i.L9)({eventAction:"insertTask",eventName:"insertTask"}),r=e=>(0,i.L9)({eventAction:"editTask",eventName:e}),s=()=>(0,i.L9)({eventAction:"cancelTask",eventName:"cancelTask"}),c=e=>(0,i.L9)({eventAction:"highlightTask",eventName:e}),l=e=>(0,i.L9)({eventAction:"insertIllustration",eventName:e}),d=e=>(0,i.L9)({eventAction:"searchIllustration",eventName:e}),u=e=>(0,i.L9)({eventAction:"insertIllustrationPro",eventName:e}),p=(e,t,n)=>(0,i.L9)({eventAction:"openTemplateType",eventName:`${e}_${t}_${n}`}),m=e=>(0,i.L9)({eventAction:"popPW",eventName:e}),v=e=>(0,i.L9)({eventAction:"clickPW",eventName:e}),f=()=>{(0,i.L9)({eventAction:"cancelOverlap"})},w=()=>(0,i.L9)({eventAction:"paymentPage"}),h=()=>(0,i.L9)({eventAction:"paymentPageCN"}),y=()=>(0,i.L9)({eventAction:"paymentSuccessful"}),g=()=>(0,i.L9)({eventAction:"paymentSuccessfulCN"}),k=e=>(0,i.L9)({eventName:"PWD-sp35-240515",eventAction:e}),b=()=>(0,i.L9)({eventAction:"sharetoCollaboration"}),x=()=>(0,i.L9)({eventAction:"sharetoEvernote"}),T=e=>(0,i.L9)({eventAction:"pweDisplay",eventName:e}),L=e=>(0,i.L9)({eventAction:"pweContinue",eventName:e}),A=e=>(0,i.L9)({eventAction:"closePwe",eventName:e}),E=e=>(0,i.L9)({eventAction:"pweOrder",eventName:e}),_=e=>(0,i.L9)({eventAction:"purchaseSource",eventName:e}),S=e=>(0,i.L9)({eventAction:"purchaseWindow",eventName:e}),C=({region:e,productId:t})=>(0,i.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButton"+e.toLowerCase(),eventName:t}),I=({region:e,productId:t})=>(0,i.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButtonMAS"+e.toLowerCase(),eventName:t}),P=()=>(0,i.L9)({eventAction:"autoDisconnect"}),O=()=>(0,i.L9)({eventAction:"disableSmartGuideline",eventName:"disableSmartGuideline"}),N=()=>(0,i.L9)({eventAction:"enableSmartGuideline",eventName:"enableSmartGuideline"}),Z=()=>(0,i.L9)({eventAction:"clickSearchMaps",eventName:"clickSearchMaps"}),F=()=>(0,i.L9)({eventAction:"insertTaskInfo",eventName:"insertTaskInfo"}),$=()=>(0,i.L9)({eventAction:"removeTaskInfo",eventName:"removeTaskInfo"}),R=()=>(0,i.L9)({eventAction:"enableAutoCalculate",eventName:"enableAutoCalculate"}),D=()=>(0,i.L9)({eventAction:"disableAutoCalculate",eventName:"disableAutoCalculate"}),B=()=>(0,i.L9)({eventAction:"disableDisplayinTopic",eventName:"disableDisplayinTopic"}),W=()=>(0,i.L9)({eventAction:"enableDisplayinTopic",eventName:"enableDisplayinTopic"})},95185:(e,t,n)=>{n.d(t,{q:()=>o});var i=n(2954);n(63111),n(54856),n(96829),n(87141),n(18446),n(90435);function o(e,t,n=!1){(0,i.iH)({});let o=()=>{};return{updateTouchBarItems:o}}},59474:(e,t,n)=>{n.d(t,{i:()=>a});var i=n(77412),o=n(2954);const a=(0,i.Q_)("bootstrap",(()=>{const e=(0,o.iH)(!1),t=(0,o.iH)(0);return{ready:e,markReady:()=>e.value=!0,pendingJobs:t,startJob:()=>t.value+=1,endJob:()=>t.value-=1}}))},65428:(e,t,n)=>{n.d(t,{r:()=>s});var i=n(54856),o=n(77412),a=n(2954),r=n(90435);const s=(0,o.Q_)("fonts",(()=>{const e=(0,a.iH)(!1),t=(0,a.iH)({systemFonts:{},vanaFonts:{}});return{loaded:e,markLoaded:()=>e.value=!0,getLoadedFonts:async()=>{if(!t.value||Object.keys(t.value.systemFonts).length<=0&&Object.keys(t.value.vanaFonts).length<=0){const e=await(0,r.he)(i.qz);t.value=e}return t.value}}}))},7710:(e,t,n)=>{n.d(t,{l:()=>a});var i=n(77412),o=n(2954);const a=(0,i.Q_)("query",(()=>{const e=(0,o.iH)({});return{query:e,setQuery:t=>{e.value=t}}}))},2563:(e,t,n)=>{n.d(t,{O:()=>a});var i=n(77412),o=n(2954);const a=(0,i.Q_)("renderer-app",(()=>{const e=(0,o.iH)(!1),t=(0,o.XI)([]),n=(0,o.XI)({}),i=(0,o.XI)([]);return{ignoreAppearanceChanged:e,updateIgnoreAppearance:t=>{e.value=t},builtinFontFamilies:t,updateBuiltinFontFamilies:e=>t.value=e,allFonts:n,updateAllFonts:e=>n.value=e,fontsForMindMap:i,updateFontsForMindMap:e=>i.value=e}}))},53775:(e,t,n)=>{async function i(){await new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)}))))}async function o(e){return Promise.race([new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)})))),new Promise((t=>setTimeout(t,null!=e?e:200)))])}function a(e,t=300,n=!1){let i;function o(...t){i=void 0,n||e.apply(this,t)}const a=function(...a){void 0!==i&&clearTimeout(i),n&&!i&&e.apply(this,a),i=setTimeout(o.bind(this,...a),t)};return a.cancel=function(){void 0!==i&&(clearTimeout(i),i=void 0)},a}function r(e,t=300,n=!1){let i,o,a,r=!1;function s(){o=Date.now(),e.apply(this,a),void 0!==i&&(clearTimeout(i),i=void 0)}const c=function(...e){if(r)return;if(a=e,n&&!o)return void s.apply(this);const c=Date.now(),l=c-(null!=o?o:c);l>=t?s.apply(this):void 0===i&&(i=setTimeout(s.bind(this),t-l))};return c.cancel=function(e=!0){void 0!==i&&(clearTimeout(i),i=void 0),o=void 0,r=e},c}n.d(t,{Ds:()=>a,P2:()=>r,SX:()=>i,gH:()=>s,qJ:()=>o});const s=(e,t)=>{let n=e,i="";if("object"==typeof t){const e=new URLSearchParams;for(const n in t)e.append(n,t[n]);i=e.toString()}return n=n.includes("?")?n+"&"+i:n+"?"+i,n}},3004:(e,t,n)=>{n.d(t,{Z:()=>c});var i,o=n(2954),a=n(87141),r=n(69931);!function(e){e.NO_RESULT="NO_RESULT",e.NO_RESULT_AS_NETWORK="NO_RESULT_AS_NETWORK",e.NO_NOTE="NO_NOTE",e.NO_TAG="NO_TAG",e.NO_SELECTION="NO_SELECTION",e.NO_FORMAT_AVAILABLE="NO_FORMAT_AVAILABLE",e.SLIDE_NO_SELECTION="SLIDE_NO_SELECTION",e.BULB="BULB"}(i||(i={}));const s=(0,o.aZ)({__name:"common-none-panel",props:{type:{default:"NO_RESULT"},sectionStyle:{default:""}},setup(e){const t=e,n=(0,a.JE)().T,s=(0,o.Fl)((()=>({[i.NO_RESULT]:{image:(0,r.ju)("static/images/empty-panel-icon/no-result.svg"),text:n("No results found."),spacing:"-1px"},[i.NO_RESULT_AS_NETWORK]:{image:(0,r.ju)("static/images/empty-panel-icon/no-result.svg"),text:n("Please check your network connection and try again later."),spacing:"-1px"},[i.NO_NOTE]:{image:(0,r.ju)("static/images/empty-panel-icon/no-note.svg"),text:n("No note exists."),spacing:"-3px"},[i.NO_TAG]:{image:(0,r.ju)("static/images/empty-panel-icon/no-tag.svg"),text:n("No marker, label or task exists."),spacing:"0px"},[i.NO_SELECTION]:{image:(0,r.ju)("static/images/empty-panel-icon/empty-selection.svg"),text:n("Select an object to format."),spacing:"-2px"},[i.NO_FORMAT_AVAILABLE]:{image:(0,r.ju)("static/images/empty-panel-icon/no-format-available.svg"),text:n("This object can't be formatted."),spacing:"5px"},[i.SLIDE_NO_SELECTION]:{image:(0,r.ju)("static/images/empty-panel-icon/slide-empty-selection.svg"),text:n("Select a topic to format."),spacing:"-2px"},[i.BULB]:{image:(0,r.ju)("static/images/empty-panel-icon/zen-mode-bulb.svg"),text:n("Please switch to original appearance to enable format options."),spacing:"5px"}}))),c=(0,o.Fl)((()=>s.value[t.type]||s.value[i.NO_RESULT]));return{__sfc:!0,NonePanelType:i,props:t,$T:n,noneTabs:s,noneTab:c}}});const c=(0,n(51900).Z)(s,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"uk-panel uk-height-expand uk-flex uk-flex-column uk-flex-center uk-width-1-1 uk-common-none-panel"},[t("div",{staticClass:"uk-panel",style:e.sectionStyle},[t("div",{staticClass:"uk-common-none-panel-icon"},[t("img",{staticStyle:{height:"60px",width:"60px"},attrs:{draggable:"false",src:n.noneTab.image,"uk-svg":""}})]),e._v(" "),n.noneTab.text?t("div",{staticClass:"uk-common-none-panel-text",style:{marginTop:n.noneTab.spacing}},[e._v("\n      "+e._s(n.noneTab.text)+"\n    ")]):e._e(),e._v(" "),e._t("none-text")],2)])}),[],!1,null,"52381148",null).exports},86673:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(2954),o=n(60746),a=n(87141);const r=(0,i.aZ)({__name:"index",props:{typeCls:{default:"vk-tree-list-outliner"},items:{default:()=>[]},type:{default:"checkbox"},modelValue:{default:()=>[]},indent:{default:0},prefix:{default:""},index:null,container:null,highPerformanceMode:{type:Boolean,default:!1},width:{default:268},textWrap:{type:Boolean,default:!1},allowDirectionKey:{type:Boolean,default:!1},isLineDashVisible:{type:Boolean,default:!0}},emits:["click","update:modelValue","toggleitem"],setup(e,{expose:t,emit:n}){const r=e,{T:s}=(0,a.JE)(),c=(0,o.RS)(),l=(e,t)=>c(e,`${t} -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, Roboto, "Helvetica Neue", Arial, sans-serif`),d=(0,i.iH)({}),u=(0,i.iH)(new Set),p=(0,i.iH)({scrollTop:0,clientHeight:100});(0,i.YP)((()=>r.modelValue),((e,t)=>{null!=e&&e!==t&&(u.value=new Set(e))}),{immediate:!0});const m=e=>{const t=e.target;p.value={scrollTop:t.scrollTop,clientHeight:t.clientHeight}},v=(e=r.container)=>{e&&(p.value={scrollTop:e.scrollTop,clientHeight:e.clientHeight})};(0,i.YP)((()=>r.container),(e=>{e&&(e.addEventListener("scroll",m),v(e))}));const f=()=>{v()};(0,i.bv)((()=>{window.addEventListener("resize",f)})),(0,i.dl)((()=>{v()})),(0,i.Jd)((()=>{window.removeEventListener("resize",f),r.container&&r.container.removeEventListener("scroll",m)}));const w=(0,i.Fl)((()=>s("<Empty Text>"))),h=(0,i.Fl)((()=>{const{items:e,indent:t}=r;if(!e||!e.length)return[];const n="$ROOT_VALUE",i=[],o=(e,t,a=[])=>{const r=e.value===n,s=e.unindent||"sheetTitle"===e.slotType?t:t+1;if(r||i.push({value:e.value,current:e,indent:s,parentValues:a.map((e=>e.value))}),e.items)for(let t=0;t<e.items.length;t++){const n=e.items[t],i=a.concat(r?[]:e);o(n,s,i)}};return o({items:e,value:n},t||-1),i.forEach((e=>{const t=4+20*e.indent,n=r.width-(t+4);let i=l(e.current.text,"sheetTitle"===e.current.slotType?"700 21px":e.current.isTitle?"700 15px":"400 14px")+40;if(e.containerWidth=n,e.textWidth=i,e.singleLineWidth=t+4+i,r.textWrap){const t=Math.ceil(i/n);e.allocatedLine=t}else e.allocatedLine=1})),i})),y=(0,i.Fl)((()=>{const{value:e}=h,t=e=>b(e)&&k(e),n={},i={},o={};for(let t=0;t<e.length;t++){const i=e[t];n[i.value]=i}for(let a=0;a<e.length;a++){const r=e[a],s=r.parentValues.join(",");s in o?i[r.value]=o[s]:o[s]=i[r.value]=r.parentValues.every((e=>t(n[e].current)))}return i})),g=(0,i.Fl)((()=>{let e=h.value.filter((e=>!!y.value[e.value]));if(!r.highPerformanceMode)return{items:e,totalHeight:0};let t=0,n=0;return e.forEach((e=>{var i,o;e.currentTop=`${t}px`,e.currentTopNumber=t;let a=10+18*e.allocatedLine;"sheetTitle"===e.current.slotType&&(a=63);const s=[],c=e.textWidth/(null!==(o=null===(i=e.current.text)||void 0===i?void 0:i.length)&&void 0!==o?o:0),l=Math.floor(e.containerWidth/c);if(r.textWrap&&"sheetTitle"!==e.current.slotType)for(let t=0;t<e.allocatedLine;t++)s.push(e.current.text.slice(t*l,(t+1)*l));else n=Math.max(e.singleLineWidth,n),s.push(e.current.text);e.textLines=s,1!==s.length||s[0]||(s[0]=w.value),t+=a})),e=e.filter((e=>!(e.currentTopNumber<p.value.scrollTop-100)&&!(e.currentTopNumber>p.value.scrollTop+p.value.clientHeight+100))),{items:e,totalHeight:t,commonWidth:n}})),k=e=>e.value in d.value?Boolean(d.value[e.value]):Boolean(e.expanded),b=e=>"items"in e&&Array.isArray(e.items)&&e.items.length>0,x=e=>u.value.has(e.value),T=e=>{n("click",e)},L=e=>{d.value={...d.value,[e.value]:!k(e)},n("toggleitem",e.value)},A=async e=>{const t=new Set([e.value]);u.value=t,n("update:modelValue",Array.from(t)),T(e)},E=async(e,t)=>{t.preventDefault(),t.stopPropagation(),L(e),await(0,i.Y3)(),t.currentTarget.parentNode.focus()},_=e=>{if(!r.allowDirectionKey)return;const t=Array.from(u.value);let n=null;if(t.length){const i=g.value.items.findIndex((e=>e.value===t[0]));n=g.value.items[i+("up"===e?-1:1)]}else g.value.items.find((e=>!e.current.slotType));if(n&&!n.current.slotType){A(n.current);const e=document.querySelector(`button[data-value="${n.value}"]`);e&&e.focus()}};return t({emptyText:w,currentItems:h,visibleItems:y,displayData:g,isItemExpandable:b,isItemExpanded:k,isItemChecked:x,onToggleClick:E,onClickButton:A,onKeydown:_}),{__sfc:!0,$T:s,getTextWidthFn:c,getTextWidth:l,props:r,emit:n,itemExpansions:d,internalValue:u,scrollInfo:p,containerScrollEventHandler:m,updateScrollInfoByPropsContainer:v,windowResizeHandler:f,emptyText:w,currentItems:h,visibleItems:y,displayData:g,isItemExpanded:k,isItemExpandable:b,getTreeListItemIcon:e=>"sheetTitle"===e.slotType?"":b(e)?k(e)?"arrow-fill-down":"arrow-fill-right":r.isLineDashVisible?"outliner-point":"",isItemChecked:x,emitClick:T,toggleItem:L,onClickButton:A,onToggleClick:E,onKeydown:_}}});const s=(0,n(51900).Z)(r,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("ul",{staticClass:"uk-tree-list",class:e.typeCls,staticStyle:{position:"relative"},style:{height:e.highPerformanceMode?`${n.displayData.totalHeight}px`:"auto","flex-shrink":0},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:n.onKeydown("up")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:n.onKeydown("down")}]}},e._l(n.displayData.items,(function(i){return t("li",{key:i.value,class:{"uk-checked":n.isItemChecked(i.current)},staticStyle:{"min-width":"100%","word-break":"break-all"},style:e.highPerformanceMode?{position:"absolute",top:i.currentTop,width:e.textWrap?"100%":`${n.displayData.commonWidth}px`,"--vk-tree-list-indent":i.indent}:{width:"100%","--vk-tree-list-indent":i.indent}},[e._t(i.current.slotType,(function(){return[t("button",{staticClass:"uk-tree-list-item",class:{"uk-checked":n.isItemChecked(i.current),"uk-focus":n.isItemChecked(i.current),"is-title":i.current.isTitle},attrs:{type:"button","data-value":i.value,"data-indent":i.indent},on:{click:function(e){return n.onClickButton(i.current)}}},[t("div",{staticClass:"uk-flex uk-flex-middle"},[e.highPerformanceMode?e._l(i.textLines,(function(n,i){return t("p",{key:i,staticClass:"uk-text-nowrap uk-margin-remove uk-tree-list-item-text"},[e._v("\n              "+e._s(n)+"\n            ")])})):[t("span",{staticClass:"uk-tree-list-item-text"},[e._v(e._s(i.current.text||n.emptyText))])],e._v(" "),i.current.items&&i.current.items.length?t("span",{staticClass:"uk-tree-list-item-badge"},[e._v(e._s(i.current.items.length))]):e._e()],2)])]}),{data:i.current,checked:n.isItemChecked(i.current),index:e.index,offset:20*i.indent+4,onClick:()=>n.onClickButton(i.current)}),e._v(" "),n.getTreeListItemIcon(i.current)?t("span",{staticClass:"uk-tree-list-toggle",class:{"is-expandable":n.isItemExpandable(i.current)},attrs:{"uk-icon":`icon: ${n.getTreeListItemIcon(i.current)}; ratio: 0.8`},on:{click:function(e){return n.onToggleClick(i.current,e)}}}):e._e(),e._v(" "),e.isLineDashVisible?e._l(Array.from({length:i.indent-1},((e,t)=>t+1)),(function(e){return t("span",{key:e,staticClass:"uk-tree-list-toggle-line-dash",style:{left:12+20*(e-1)+"px"}})})):e._e()],2)})),0)}),[],!1,null,null,null).exports},30053:e=>{e.exports=require("posthtml")},6113:e=>{e.exports=require("crypto")},72298:e=>{e.exports=require("electron")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")}},e=>{e.O(0,[8592,8970,4426],(()=>{return t=67244,e(e.s=t);var t}));var t=e.O();module.exports=t}]);