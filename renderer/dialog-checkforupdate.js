/*! For license information please see dialog-checkforupdate.js.LICENSE.txt */
(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[9166],{73654:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var o=n(23645),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,"/* ToDo: replace it */\n/* local style */\n.checking-bar[data-v-350aa20f] {\n  margin: 10px 0;\n  width: 100%;\n  max-width: 500px;\n  height: 8px;\n  border-radius: 4px;\n}\n@keyframes indeterminate-350aa20f {\n0% {\n    transform: translateX(-100px);\n}\n100% {\n    transform: translateX(500px);\n}\n}\n.progress-custom-parent[data-v-350aa20f] {\n  overflow: hidden;\n  position: relative;\n}\n.ui-mprogress[data-v-350aa20f] {\n  pointer-events: none;\n}\n.indeter-bar[data-v-350aa20f] {\n  position: absolute;\n  z-index: 1032;\n  top: 0;\n  left: 0;\n  width: 100px;\n  height: 8px;\n  border-radius: 4px;\n  background: #039be5;\n  animation: indeterminate-350aa20f 1800ms infinite ease-in;\n}\n.bar-bg[data-v-350aa20f] {\n  position: absolute;\n  z-index: 1031;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 8px;\n  border: solid 1px rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n}\n",""]);const r=i},23645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,o){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(o)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);o&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},40334:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var o=n(63111),i=n(54856),r=n(96829),a=n(87141),s=n(90435);const c={computed:{},watch:{touchBarItems(t){this.updateTouchBarItems(t)}},methods:{updateTouchBarItems(t){const e=t=>{const e=t.click;let n=this._touchBarRoutes[e];return n||(n={method:e,endpoint:(0,i.A6)(window.id,(0,r.rs)(e))},this._touchBarRoutes[e]=n),n.unroute||(n.unroute=s.ZP.route(n.endpoint,this[e])),Object.assign({},t,{click:n.endpoint})};t=(t||this.touchBarItems||[]).map((t=>("button"!==t.type||"string"!=typeof t.click||o.sq.includes(t.click)||t.click.startsWith("command:")?"buttons"===t.type&&(t={...t,buttons:t.buttons.map((t=>"string"!=typeof t.click||o.sq.includes(t.click)||t.click.startsWith("command:")?t:e(t)))}):t=e(t),t))),(0,a.JS)("window")?.().updateTouchBarItems(t)}},beforeCreate(){this._touchBarRoutes={}},mounted(){this.updateTouchBarItems()},beforeDestroy(){Object.values(this._touchBarRoutes).forEach((({unroute:t})=>t&&t())),this._touchBarRoutes={}}}},2662:(t,e,n)=>{"use strict";n.r(e);var o=n(59042);var i=("undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function r(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function a(t){return null!==t&&"object"==typeof t}var s=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},c={namespaced:{configurable:!0}};c.namespaced.get=function(){return!!this._rawModule.namespaced},s.prototype.addChild=function(t,e){this._children[t]=e},s.prototype.removeChild=function(t){delete this._children[t]},s.prototype.getChild=function(t){return this._children[t]},s.prototype.hasChild=function(t){return t in this._children},s.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},s.prototype.forEachChild=function(t){r(this._children,t)},s.prototype.forEachGetter=function(t){this._rawModule.getters&&r(this._rawModule.getters,t)},s.prototype.forEachAction=function(t){this._rawModule.actions&&r(this._rawModule.actions,t)},s.prototype.forEachMutation=function(t){this._rawModule.mutations&&r(this._rawModule.mutations,t)},Object.defineProperties(s.prototype,c);var u=function(t){this.register([],t,!1)};function d(t,e,n){if(e.update(n),n.modules)for(var o in n.modules){if(!e.getChild(o))return void 0;d(t.concat(o),e.getChild(o),n.modules[o])}}u.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},u.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return t+((e=e.getChild(n)).namespaced?n+"/":"")}),"")},u.prototype.update=function(t){d([],this.root,t)},u.prototype.register=function(t,e,n){var o=this;void 0===n&&(n=!0);var i=new s(e,n);0===t.length?this.root=i:this.get(t.slice(0,-1)).addChild(t[t.length-1],i);e.modules&&r(e.modules,(function(e,i){o.register(t.concat(i),e,n)}))},u.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],o=e.getChild(n);o&&o.runtime&&e.removeChild(n)},u.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};var l;var p=function(t){var e=this;void 0===t&&(t={}),!l&&"undefined"!=typeof window&&window.Vue&&b(window.Vue);var n=t.plugins;void 0===n&&(n=[]);var o=t.strict;void 0===o&&(o=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new u(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new l,this._makeLocalGettersCache=Object.create(null);var r=this,a=this.dispatch,s=this.commit;this.dispatch=function(t,e){return a.call(r,t,e)},this.commit=function(t,e,n){return s.call(r,t,e,n)},this.strict=o;var c=this._modules.root.state;w(this,c,[],this._modules.root),v(this,c),n.forEach((function(t){return t(e)})),(void 0!==t.devtools?t.devtools:l.config.devtools)&&function(t){i&&(t._devtoolHook=i,i.emit("vuex:init",t),i.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){i.emit("vuex:mutation",t,e)}),{prepend:!0}),t.subscribeAction((function(t,e){i.emit("vuex:action",t,e)}),{prepend:!0}))}(this)},f={state:{configurable:!0}};function h(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function m(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;w(t,n,[],t._modules.root,!0),v(t,n,e)}function v(t,e,n){var o=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,a={};r(i,(function(e,n){a[n]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})}));var s=l.config.silent;l.config.silent=!0,t._vm=new l({data:{$$state:e},computed:a}),l.config.silent=s,t.strict&&function(t){t._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}(t),o&&(n&&t._withCommit((function(){o._data.$$state=null})),l.nextTick((function(){return o.$destroy()})))}function w(t,e,n,o,i){var r=!n.length,a=t._modules.getNamespace(n);if(o.namespaced&&(t._modulesNamespaceMap[a],t._modulesNamespaceMap[a]=o),!r&&!i){var s=y(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit((function(){l.set(s,c,o.state)}))}var u=o.context=function(t,e,n){var o=""===e,i={dispatch:o?t.dispatch:function(n,o,i){var r=g(n,o,i),a=r.payload,s=r.options,c=r.type;return s&&s.root||(c=e+c),t.dispatch(c,a)},commit:o?t.commit:function(n,o,i){var r=g(n,o,i),a=r.payload,s=r.options,c=r.type;s&&s.root||(c=e+c),t.commit(c,a,s)}};return Object.defineProperties(i,{getters:{get:o?function(){return t.getters}:function(){return function(t,e){if(!t._makeLocalGettersCache[e]){var n={},o=e.length;Object.keys(t.getters).forEach((function(i){if(i.slice(0,o)===e){var r=i.slice(o);Object.defineProperty(n,r,{get:function(){return t.getters[i]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}(t,e)}},state:{get:function(){return y(t.state,n)}}}),i}(t,a,n);o.forEachMutation((function(e,n){!function(t,e,n,o){var i=t._mutations[e]||(t._mutations[e]=[]);i.push((function(e){n.call(t,o.state,e)}))}(t,a+n,e,u)})),o.forEachAction((function(e,n){var o=e.root?n:a+n,i=e.handler||e;!function(t,e,n,o){var i=t._actions[e]||(t._actions[e]=[]);i.push((function(e){var i,r=n.call(t,{dispatch:o.dispatch,commit:o.commit,getters:o.getters,state:o.state,rootGetters:t.getters,rootState:t.state},e);return(i=r)&&"function"==typeof i.then||(r=Promise.resolve(r)),t._devtoolHook?r.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):r}))}(t,o,i,u)})),o.forEachGetter((function(e,n){!function(t,e,n,o){if(t._wrappedGetters[e])return void 0;t._wrappedGetters[e]=function(t){return n(o.state,o.getters,t.state,t.getters)}}(t,a+n,e,u)})),o.forEachChild((function(o,r){w(t,e,n.concat(r),o,i)}))}function y(t,e){return e.reduce((function(t,e){return t[e]}),t)}function g(t,e,n){return a(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function b(t){l&&t===l||function(t){if(Number(t.version.split(".")[0])>=2)t.mixin({beforeCreate:n});else{var e=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[n].concat(t.init):n,e.call(this,t)}}function n(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}(l=t)}f.state.get=function(){return this._vm._data.$$state},f.state.set=function(t){0},p.prototype.commit=function(t,e,n){var o=this,i=g(t,e,n),r=i.type,a=i.payload,s=(i.options,{type:r,payload:a}),c=this._mutations[r];c&&(this._withCommit((function(){c.forEach((function(t){t(a)}))})),this._subscribers.slice().forEach((function(t){return t(s,o.state)})))},p.prototype.dispatch=function(t,e){var n=this,o=g(t,e),i=o.type,r=o.payload,a={type:i,payload:r},s=this._actions[i];if(s){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(a,n.state)}))}catch(t){0}var c=s.length>1?Promise.all(s.map((function(t){return t(r)}))):s[0](r);return new Promise((function(t,e){c.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(a,n.state)}))}catch(t){0}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(a,n.state,t)}))}catch(t){0}e(t)}))}))}},p.prototype.subscribe=function(t,e){return h(t,this._subscribers,e)},p.prototype.subscribeAction=function(t,e){return h("function"==typeof t?{before:t}:t,this._actionSubscribers,e)},p.prototype.watch=function(t,e,n){var o=this;return this._watcherVM.$watch((function(){return t(o.state,o.getters)}),e,n)},p.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},p.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),w(this,this.state,t,this._modules.get(t),n.preserveState),v(this,this.state)},p.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=y(e.state,t.slice(0,-1));l.delete(n,t[t.length-1])})),m(this)},p.prototype.hasModule=function(t){return"string"==typeof t&&(t=[t]),this._modules.isRegistered(t)},p.prototype.hotUpdate=function(t){this._modules.update(t),m(this,!0)},p.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(p.prototype,f);var k=_((function(t,e){var n={};return T(e).forEach((function(e){var o=e.key,i=e.val;n[o]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var o=A(this.$store,"mapState",t);if(!o)return;e=o.context.state,n=o.context.getters}return"function"==typeof i?i.call(this,e,n):e[i]},n[o].vuex=!0})),n}));_((function(t,e){var n={};return T(e).forEach((function(e){var o=e.key,i=e.val;n[o]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var o=this.$store.commit;if(t){var r=A(this.$store,"mapMutations",t);if(!r)return;o=r.context.commit}return"function"==typeof i?i.apply(this,[o].concat(e)):o.apply(this.$store,[i].concat(e))}})),n})),_((function(t,e){var n={};return T(e).forEach((function(e){var o=e.key,i=e.val;i=t+i,n[o]=function(){if(!t||A(this.$store,"mapGetters",t))return this.$store.getters[i]},n[o].vuex=!0})),n})),_((function(t,e){var n={};return T(e).forEach((function(e){var o=e.key,i=e.val;n[o]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var o=this.$store.dispatch;if(t){var r=A(this.$store,"mapActions",t);if(!r)return;o=r.context.dispatch}return"function"==typeof i?i.apply(this,[o].concat(e)):o.apply(this.$store,[i].concat(e))}})),n}));function T(t){return function(t){return Array.isArray(t)||a(t)}(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function _(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function A(t,e,n){return t._modulesNamespaceMap[n]}var x=n(69931),E=n(85786),L=n(87141);const C={mixins:[n(40334).Z],data:function(){return{platform:"darwin"===(0,E.Xf)()?"mac":"win",stateText:"",primaryButtonText:"",defaultButtonText:"",secondaryTitle:"",updateSize:"",downloadAnimationDone:!1,iconURL:(0,x.ju)("static/assets/images/check-for-update-bg.svg"),buildNumber:""}},mounted(){this.$safeRun((()=>this.$loadResource("package.json").then((t=>this.buildNumber=JSON.parse(t).buildNumber||"")))),this.changeTextByState(this.status)},computed:{touchBarItems(){return[{type:"space",size:"flexible"},"has-new-version"===this.status?{type:"button",label:this.defaultButtonText,click:"skip"}:null,"update-downloaded"===this.status&&this.downloadAnimationDone?{type:"button",label:this.defaultButtonText,backgroundColor:"primary",click:"closeDialog"}:null,this.showCheckForUpdateButton()&&"checking-for-update"!==this.status&&"checking-for-update-preparing"!==status?{type:"button",label:this.primaryButtonText,backgroundColor:"primary",click:"checkForUpdate"}:null,"has-new-version"===this.status?{type:"button",label:this.primaryButtonText,backgroundColor:"primary",click:"download"}:null,"update-downloaded"===this.status&&this.downloadAnimationDone?{type:"button",label:this.primaryButtonText,backgroundColor:"primary",click:"quitAndInstall"}:null,{type:"space",size:"flexible"}].filter(Boolean)},...k("checkForUpdate",["status","info"]),updateStatus(){return{CHECKING:{TITLE:this.$T("Checking for Update"),DESCRIPTION:this.$T("Current version:")+" ",PRIMARY_BUTTON:this.$T("Check for Update"),DEFAULT_BUTTON:""},UPDATE_AVAILABLE:{TITLE:this.$T("New Version Available"),DESCRIPTION:this.$T("Latest Version:")+" ",PRIMARY_BUTTON:this.$T("Update Now"),DEFAULT_BUTTON:this.$T("Later")},DOWNLOADING:{TITLE:this.$T("Downloading Update"),DESCRIPTION:this.$T("Latest Version:")+" ",PRIMARY_BUTTON:"",DEFAULT_BUTTON:""},DOWNLOADED:{TITLE:this.$T("Your Update is Ready to Install"),DESCRIPTION:this.$T("Latest Version:")+" ",PRIMARY_BUTTON:this.$T("Relaunch to Install"),DEFAULT_BUTTON:this.$T("Later")},UPDATE_NOT_AVAILABLE:{TITLE:this.$T("Your Xmind is Up to Date"),DESCRIPTION:this.$T("Last checked:")+" ",PRIMARY_BUTTON:this.$T("Check for Update"),DEFAULT_BUTTON:""},UPDATE_ERROR:{TITLE:this.$T("Update is Interrupted"),DESCRIPTION:this.$T("Some problems occur due to unstable network or server."),PRIMARY_BUTTON:this.$T("Check for Update"),DEFAULT_BUTTON:""}}},releaseNotes(){let t=this.info[`releaseNotes-${(0,L.S)().language}`]||this.info.releaseNotes||"";return t&&(t=t.split("\n").slice(0,3).join("\n")),t}},watch:{status(t){this.changeTextByState(t)},updateStatus(){this.changeTextByState(this.status)},buildNumber(){this.changeTextByState(this.status)}},methods:{changeTextByState(t){let e=null;const{CHECKING:n,UPDATE_AVAILABLE:o,DOWNLOADING:i,DOWNLOADED:r,UPDATE_NOT_AVAILABLE:a,UPDATE_ERROR:s}=this.updateStatus;if("checking-for-update"===t||"checking-for-update-preparing"===t){const{TITLE:t,DESCRIPTION:e,PRIMARY_BUTTON:o,DEFAULT_BUTTON:i}=n;this.stateText=t,this.secondaryTitle=e+this.buildNumber,this.primaryButtonText=o,this.defaultButtonText=i}else if("has-new-version"===t){const{TITLE:t,DESCRIPTION:e,PRIMARY_BUTTON:n,DEFAULT_BUTTON:i}=o;this.updateSize=`${this.$T("Update Size:")} ${this.info.updateSize||""}  MB`,this.stateText=t,this.secondaryTitle=e+(this.info.version||""),this.primaryButtonText=n,this.defaultButtonText=i}else if("update-downloading"===t){setTimeout((()=>{const t=this.$refs.progress;t&&(e=setInterval((()=>{t.value+=Math.random(),t.value>=95&&clearInterval(e)}),300))}),300);const{TITLE:t,DESCRIPTION:n,PRIMARY_BUTTON:o,DEFAULT_BUTTON:r}=i;this.stateText=t,this.secondaryTitle=n+(this.info.version||""),this.primaryButtonText=o,this.defaultButtonText=r}else if("update-downloaded"===t){clearInterval(e);const t=3e3,n=this.$refs.progress;if(n){let e=(100-n.value)/(t/200);const o=setInterval((()=>{if(n.value+=e,n.value>=100){clearInterval(o);const{TITLE:t,DESCRIPTION:e,PRIMARY_BUTTON:n,DEFAULT_BUTTON:i}=r;this.downloadAnimationDone=!0,this.stateText=t,this.secondaryTitle=e+(this.info.version||""),this.primaryButtonText=n,this.defaultButtonText=i}}),200)}}else if("update-not-available"===t){const{TITLE:t,DESCRIPTION:e,PRIMARY_BUTTON:n,DEFAULT_BUTTON:o}=a;this.stateText=t,this.secondaryTitle=e+(new Date).toLocaleString(),this.primaryButtonText=n,this.defaultButtonText=o}else if("update-error"===t){const{TITLE:t,DESCRIPTION:e,PRIMARY_BUTTON:n,DEFAULT_BUTTON:o}=s;this.stateText=t,this.secondaryTitle=e,this.primaryButtonText=n,this.defaultButtonText=o}},showCheckForUpdateButton(){return["checking-for-update","checking-for-update-preparing","update-not-available","update-error"].includes(this.status)},checkForUpdate(){this.$store.commit("checkForUpdate/updateAction",{action:"checkForUpdate"})},checkAllReleaseNotes(){const t="zh-CN"===(0,L.S)().language?"https://www.xmind.cn":"https://www.xmind.app",e=this.$store.getters["l10n/T"];(0,E.DL)(`${t}/xmind/zen-release-notes/`,e)},closeDialog(){"checking-for-update"===this.status||"checking-for-update-preparing"===this.status?this.cancelCheck():(this.$store.commit("checkForUpdate/updateAction",{action:"pending"}),window.close())},skip(){this.$store.commit("checkForUpdate/updateAction",{action:"skip"}),window.close()},download(){if("linux"===(0,E.Xf)()){const t="zh-CN"===(0,L.S)().language?"https://www.xmind.cn":"https://www.xmind.app",e=this.$store.getters["l10n/T"];(0,E.DL)(`${t}/xmind/zen-update-linux/`,e)}this.$store.commit("checkForUpdate/updateAction",{action:"download"}),this.$store.commit("checkForUpdate/updateStatus",{status:"update-downloading"})},cancelCheck(){this.$store.commit("checkForUpdate/updateStatus",{status:"stop-checking"}),window.close()},quitAndInstall(){this.$store.commit("checkForUpdate/updateAction",{action:"install"}),window.close()}}};n(42074);const O=(0,n(51900).Z)(C,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"vk-window-dialog vk-window-secondary",attrs:{id:"app"}},[e("div",{staticClass:"vk-window-title-bar vk-window-title-bar-floating"},[e("window-control-button-group")],1),t._v(" "),e("div",{staticClass:"vk-window-body uk-flex uk-flex-row"},[e("div",{staticClass:"uk-panel uk-flex uk-flex-column uk-flex-middle inline"},[e("div",{staticClass:"uk-preserve uk-height-1-1",attrs:{draggable:"false","data-src":t.iconURL,"uk-svg":""}})]),t._v(" "),e("div",{staticClass:"uk-width-expand uk-flex uk-flex-column uk-margin-large-left uk-margin-xlarge-top uk-margin-large-right uk-margin-large-bottom uk-margin-top"},[e("h1",{staticClass:"uk-margin-remove-bottom"},[t._v("\n        "+t._s(t.stateText)+"\n      ")]),t._v(" "),e("span",{staticClass:"uk-margin-small"},[t._v(t._s(t.secondaryTitle))]),t._v(" "),e("div",{staticClass:"uk-height-expand uk-margin-xlarge-top"},["checking-for-update"===t.status||"checking-for-update-preparing"===t.status?e("div",{staticClass:"checking-bar progress-custom-parent uk-margin-xlarge-top"},[t._m(0)]):t._e(),t._v(" "),"update-downloading"===t.status||!t.downloadAnimationDone&&"update-downloaded"===t.status?e("progress",{ref:"progress",staticClass:"vk-progress",attrs:{value:"0",max:"100"}}):t._e(),t._v(" "),"update-downloading"===t.status?e("p",[t._v("\n          "+t._s(t.updateSize)+"\n        ")]):t._e(),t._v(" "),"has-new-version"===t.status||"update-downloaded"===t.status&&t.downloadAnimationDone?e("pre",{staticClass:"uk-overflow-hidden",staticStyle:{"font-family":"-apple-system, BlinkMacSystemFont, 'SegoeUI',","font-size":"13px","font-weight":"normal","line-height":"1.5","white-space":"pre-wrap"}},[t._v(t._s(t.releaseNotes)+"\n        ")]):t._e(),t._v(" "),t.defaultButtonText?e("a",{staticClass:"uk-margin-top",attrs:{draggable:"false",href:"javascript:void(0);"},on:{click:t.checkAllReleaseNotes}},[t._v(t._s(t.$T("More..."))+"\n        ")]):t._e()]),t._v(" "),e("div",{staticClass:"uk-flex uk-flex-bottom uk-flex-right uk-margin-xlarge-top"},[e("div",{staticClass:"vk-button-group"},["has-new-version"===t.status?e("button",{staticClass:"vk-button-default vk-size-small",on:{click:function(e){return t.skip()}}},[t._v("\n            "+t._s(t.defaultButtonText)+"\n          ")]):t._e(),t._v(" "),"update-downloaded"===t.status&&t.downloadAnimationDone?e("button",{staticClass:"vk-button-default vk-size-small",on:{click:function(e){return t.closeDialog()}}},[t._v("\n            "+t._s(t.defaultButtonText)+"\n          ")]):t._e(),t._v(" "),t.showCheckForUpdateButton()?e("button",{staticClass:"vk-button-secondary vk-size-small",attrs:{disabled:"checking-for-update"===t.status||"checking-for-update-preparing"===t.status},on:{click:function(e){return t.checkForUpdate()}}},[t._v("\n            "+t._s(t.primaryButtonText)+"\n          ")]):t._e(),t._v(" "),"has-new-version"===t.status?e("button",{staticClass:"vk-button-secondary vk-size-small",on:{click:function(e){return t.download()}}},[t._v("\n            "+t._s(t.primaryButtonText)+"\n          ")]):t._e(),t._v(" "),"update-downloaded"===t.status&&t.downloadAnimationDone?e("button",{staticClass:"vk-button-secondary vk-size-small",on:{click:function(e){return t.quitAndInstall()}}},[t._v("\n            "+t._s(t.primaryButtonText)+"\n          ")]):t._e()])])])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"ui-progress"},[t("div",{staticClass:"indeter-bar"}),this._v(" "),t("div",{staticClass:"bar-bg uk-background-default"})])}],!1,null,"350aa20f",null).exports;(0,o.Z)(O)},59042:(t,e,n)=>{"use strict";n.d(e,{Z:()=>vt});var o=n(47311),i=n(23352),r=n(90435);const a=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",s=(0,i.ZP)(`error:${a}`),c=new o.q(s,{ipc:r.ZP});window.addEventListener("error",(function(t){const e=t.error;e&&c.handle(e)})),window.addEventListener("unhandledrejection",(function(t){const e=t.reason;e&&c.handle(e)}));const u=c;var d=n(2954),l=n(63477),p=n.n(l),f=n(72298),h=n(67657),m=n(13780),v=n.n(m),w=n(30266),y=n(86396),g=n(31945),b=n(54856),k=n(73884),T=n(28914),_=n(56222),A=n(79409),x=n(65114),E=n(77412);const L={install(t){const e="vana-ref";t.directive(e,{bind:function(t,e,n){e.value(n.componentInstance||t,n.key)},update:function(t,n,o,i){if(i.data&&i.data.directives){var r=i.data.directives.find((function(t){return t.name===e}));if(r&&r.value!==n.value)return r&&r.value(null,i.key),void n.value(o.componentInstance||t,o.key)}o.componentInstance===i.componentInstance&&o.elm===i.elm||n.value(o.componentInstance||t,o.key)},unbind:function(t,e,n){e.value(null,n.key)}})}};var C=n(87141);const O={install(t){t.prototype.$T=function(t,...e){return(0,C.JE)().T(t,...e)}}};var S=n(96829);const N=(0,i.ZP)("safe-runner");const I=class{constructor(t){this.errorHandler=t}_handleError(t){"function"==typeof this.errorHandler?this.errorHandler(t):N.error((0,S.SC)(t))}install(t){const e=this;t.prototype.$safeRun=function(t){try{let n=t();return n&&n.then&&n.catch?n.then((t=>t)).catch((t=>e._handleError(t))):n}catch(t){e._handleError(t)}}}};var P=n(69931);const $={install(t){t.prototype.$toResourceURL=(...t)=>(0,P.ju)(...t).replace("(","%28").replace(")","%29"),t.prototype.$loadResource=P.zD}};var B=n(53775),D=n(59474);var R=n(30247),Z=n(2563),F=n(65428);const U=(0,i.ZP)("font");var M=n(22037),j=n.n(M),z=n(38629);const J=(0,i.ZP)("performance");function W(t){t?document.body.style.setProperty("--uk-system-accent-color",t):document.body.style.removeProperty("--uk-system-accent-color")}var q=n(63111),X=n(18621),Y=n(69297),G=n(20993);const H={start:()=>{const t=(0,D.i)();t.startJob();const e=(0,d.YP)((()=>t.pendingJobs),(n=>{n>0||(e(),t.markReady())}));setTimeout((()=>t.endJob()),0)}},V=(()=>{const t=[],e=new Map;return{start:()=>{const t=(0,D.i)();t.startJob(),r.ZP.fetch(b.de).then((e=>{Object.keys(e).forEach((t=>{var n;const o=(0,C.F_)(t);null===(n=null==o?void 0:o())||void 0===n||n.$patch(e[t])})),k.Z.on(x.Md,(t=>{t.forEach((({id:t,state:e})=>{var n;const o=(0,C.F_)(t);null===(n=null==o?void 0:o())||void 0===n||n.$patch((0,d.qj)(e))}))})),t.endJob()}))},plugin:n=>{(0,C.W$)(n.store.$id)&&n.store.$subscribe(((o,i)=>{if(n.store.$id!==o.storeId)return;const a=e.get(o.storeId);e.set(o.storeId,!0),(null===window||void 0===window?void 0:window.isEditorFrame)||a&&o.type!==E.x1.patchObject&&(0,C.W$)(o.storeId)&&(t.push({id:o.storeId,state:JSON.parse(JSON.stringify(i))}),Promise.resolve().then((()=>{r.ZP.fetch(b.w6,{states:t}),t.length=0})))}))}}})(),K={start:()=>{(0,F.r)();const t=(0,P.ju)("/static/snowbird/resource/"),e=function(){const t={};return R.Fy(((e,n)=>{t[e]=n.map((t=>({...t,family:e})))})),t}(),n=Object.values(e).flat().map((e=>function({family:t,src:e,italic:n,weight:o,"unicode-range":i},r){const a=new URL(e,r).href;let s={family:t,source:`url("${a}")`,url:a};return void 0!==n&&(s={...s,style:n?"italic":"normal"}),void 0!==o&&(s={...s,weight:o.toString()}),void 0!==i&&(s={...s,unicodeRange:i}),s}(e,t)));!function(t){Promise.all(t.map((({family:t,source:e,...n})=>{const o=new FontFace(t,e,n);return o.load().then((()=>{document.fonts.add(o)})).catch((()=>{U.error("Failed to load css font from",e)}))})))}(n),function(){const t=document.createElement("style"),e=R.Hn();t.innerHTML=e,document.head.appendChild(t),document.body.style.setProperty("--info-button-font",R.o6)}(),(0,Z.O)().updateBuiltinFontFamilies(Array.from(new Set(Object.keys(e))))}},Q={start:()=>{const t=(0,D.i)(),{_apr:e,_acc:n}=p().parse(location.search.slice(1));e&&(t.startJob(),J.debug("About to load CSS using _apr query parameter:",e),(0,z.Z)(e,(()=>{J.debug("Loaded CSS using _apr query parameter:",e),setTimeout((()=>{t.endJob()}),10)}))),n&&W(n),"darwin"===j().platform()&&parseFloat(j().release())>=20&&document.body.classList.add("uk-darwin-bigsur"),(0,d.YP)((()=>(0,C.S)().language),((t,e)=>{e&&document.body.classList.remove(`uk-lang-${e}`),t&&document.body.classList.add(`uk-lang-${t}`)}));const o=(0,d.YP)((()=>(0,D.i)().ready),(t=>{t&&(o(),(0,d.YP)((()=>[(0,C.S)().appearance,(0,Z.O)().ignoreAppearanceChanged]),(([t,e])=>{e||(0,z.Z)(t)})),(0,d.YP)((()=>(0,C.qr)().systemAccentColor),(t=>W(t))),(0,d.YP)((()=>(0,C.S)().systemScrollbarSetting),(t=>function(t){const e="vk-scrollbar";document.body.classList.forEach((t=>{t.startsWith(e)&&document.body.classList.remove(t)})),document.body.classList.add(`${e}-${(t||"always").toLowerCase()}`)}(t)),{immediate:!0}))}))}},tt={start:()=>{q.nd&&q.qu.forEach((t=>{(0,C.JX)().appendBeforeHandler(t,(()=>(async()=>(await r.ZP.fetch(b.QN),"interruption"))()))})),Object.keys(q.JN).concat(Object.keys(q.oF)).forEach((t=>{(0,C.JX)().appendBeforeHandler(t,(()=>{const e=(0,C.JX)().commandById(t);return(null==e?void 0:e.provider)?(async(t,e)=>{if(!await r.ZP.fetch(b.Gy,{name:t,channel:(0,b.gk)(e)}))return"interruption"})(t,e.provider):"interruption"}))})),q.ZK.forEach((t=>{(0,C.JX)().appendAfterHandler(t,(()=>{const e=t.split(".")[1];(0,X.L9)({eventCategory:"Edit",eventAction:e,eventValue:1})}))})),q.ff.forEach((t=>{(0,C.JX)().appendAfterHandler(t,(()=>{(0,X.L9)({eventCategory:"Share",eventAction:t,eventValue:1})}))})),q.y_.forEach((t=>{(0,C.JX)().appendBeforeHandler(t,(()=>{(0,Y.Kl)()}))})),q.xk.forEach((t=>{(0,C.JX)().appendBeforeHandler(t,(()=>{(0,Y.fv)()}))})),q.wp.forEach((t=>{(0,C.JX)().appendBeforeHandler(t,(()=>{(0,Y.nz)()}))})),(0,C.JX)().appendAfterHandler("editor.addTodo",G.l5),(0,C.JX)().appendAfterHandler("editor.cancelTask",G.DY),(0,C.JX)().appendAfterHandler("editor.checkTodo",(()=>{(0,G.fR)("checkTask")})),(0,C.JX)().appendAfterHandler("editor.uncheckTodo",(()=>{(0,G.fR)("uncheckTask")})),q.QL.forEach((t=>{(0,C.JX)().appendBeforeHandler(t,(()=>{if((0,C.si)().contexts["collaboration.isReadOnly"])return"interruption"}))})),q.gY.forEach((t=>{(0,C.JX)().appendBeforeHandler(t,(()=>{if((0,C.si)().contexts["collaboration.isFromCloud"])return"interruption"}))}))}},et={start:()=>{const t=(0,D.i)();t.startJob(),(0,C.JX)().injectDoHandleCommand((async(t,e)=>r.ZP.fetch(b.hR,{commandId:t,handlerArgs:e}))),t.endJob()}},nt=[V.plugin];var ot=n(7710);const it=p().parse(window.location.search.slice(1)),rt=!0,at=!!it.isBrowserView,st=!!it.isEditorFrame;let ct=h.getCurrentWindow;at&&(ct=function(){const t=T.Z.sendSync("get-current-window-id");return h.BrowserWindow.fromId(parseInt(t))});const ut=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",dt=(0,i.ZP)("performance"),lt=(0,i.ZP)("sentry");dt.debug("Initializing page:",ut),f.webFrame.setVisualZoomLevelLimits(1,1),document.body.classList.add("uk-win32"),Object.defineProperty(window,"id",{get:()=>ct().id}),window.getWindowIdAsync=async()=>await(0,_.A)("get-current-window-id");window.getCurrentWindowAsync=async()=>{const t=await window.getWindowIdAsync();return h.BrowserWindow.fromId(parseInt(t))},window.isEditorFrame=st;const pt=d.ZP.observable({isBeingDestroyed:!1,isDestroyed:!1,isShown:!1});["isBeingDestroyed","isDestroyed","isShown"].forEach((t=>{Object.defineProperty(window,t,{get:()=>pt[t],set(e){pt[t]=e}})})),window.show=()=>{ct().show()},window.hide=()=>{ct().hide()},window.close=()=>{ct().close()},window.minimize=()=>{ct().minimize()},window.maximize=()=>{ct().maximize()},window.restore=()=>{ct().unmaximize()},window.isMinimized=()=>ct().isMinimized(),window.isMaximized=()=>ct().isMaximized(),window.isFullScreen=()=>ct().isFullScreen(),window.resizeTo=(t,e)=>{ct().setContentSize(t,e)},window.resizeBy=(t,e)=>{let[n,o]=ct().getContentSize();ct().setContentSize(n+t,o+e)},window.moveTo=(t,e)=>{ct().setPosition(t,e)},window.moveBy=(t,e)=>{let[n,o]=ct().getPosition();ct().setPosition(n+t,o+e)},k.Z.on("window-maximize",(()=>{document.body.classList.add("uk-window-maximized"),window.dispatchEvent(new Event("maximize"))})),k.Z.on("window-unmaximize",(()=>{document.body.classList.remove("uk-window-maximized"),window.dispatchEvent(new Event("restore"))})),k.Z.on("window-minimize",(()=>{window.dispatchEvent(new Event("minimize"))})),k.Z.on("window-unminimize",(()=>{window.dispatchEvent(new Event("unminimize"))})),k.Z.on("window-focus",(()=>{document.body.classList.remove("uk-window-inactive")})),k.Z.on("window-blur",(()=>{document.body.classList.add("uk-window-inactive")})),k.Z.on("window-enter-full-screen",(()=>{document.body.classList.add("uk-window-full-screen"),window.dispatchEvent(new Event("enter-full-screen"))})),k.Z.on("window-leave-full-screen",(()=>{document.body.classList.remove("uk-window-full-screen"),window.dispatchEvent(new Event("leave-full-screen"))})),k.Z.on("window-sheet-begin",(()=>{document.body.classList.add("uk-disabled"),window.dispatchEvent(new Event("sheet-begin"))})),k.Z.on("window-sheet-end",(()=>{document.body.classList.remove("uk-disabled"),window.dispatchEvent(new Event("sheet-end"))})),k.Z.on("window-show",(()=>{window.dispatchEvent(new Event("window-show"))})),k.Z.on(x.$r,(t=>{(0,ot.l)().setQuery(t)}));const ft=ct&&ct();if(ft&&ft.isMaximized()&&document.body.classList.add("uk-window-maximized"),ft&&ft.isFullScreen()&&document.body.classList.add("uk-window-full-screen"),ft&&!ft.isFocused()&&document.body.classList.add("uk-window-inactive"),document.addEventListener("keydown",(t=>{27===t.keyCode&&document.body.querySelector(".uk-window-dialog")&&setTimeout((()=>{if(t.defaultPrevented)return;const e=new Event("close");window.dispatchEvent(e)&&window.close()}),0)})),ft&&ft.isMaximizable&&ft.isMaximizable()){const t=["a","button","select","input"];document.addEventListener("dblclick",(e=>{const{target:n,defaultPrevented:o}=e;if(o)return;let i=n;for(;i&&"function"==typeof i.matches;){if(t.some((t=>i.matches(t))))return;i=i.parentNode}let r=document.querySelector(".vk-window-title-bar-expanded")||document.querySelector(".vk-window-title-bar");r&&r.contains(n)&&(window.isMaximized()?window.restore():window.maximize())}))}d.ZP.use(E.og),d.ZP.use(new I((t=>u.handle(t)))),d.ZP.use(v()),d.ZP.use(O),d.ZP.use($),d.ZP.use(L),d.ZP.use(w.ZP.Plugin),dt.debug("Initialized page:",ut);const ht=(0,E.WB)();(0,E.uX)(ht),nt.forEach((t=>ht.use(t))),Object.values(C.rx).forEach((t=>t())),H.start(),V.start(),K.start(),Q.start(),tt.start(),et.start();const mt=(0,A.Z)("version").includes("beta");if(process.env.SENTRY_DSN_OF_BROWSER&&mt){const t=(0,d.YP)((()=>(0,C.qr)().sentryConfig),(e=>{t();try{const t=e[process.env.SENTRY_PROJECT_OF_BROWSER]||{};y.S({Vue:d.ZP,dsn:process.env.SENTRY_DSN_OF_BROWSER,environment:"production",...t}),lt.info("init",t)}catch(t){lt.error("Failed to init sentry",t)}}),{immediate:!1})}async function vt(t,{mountTarget:e="#app",name:n=null,plugins:o=[],runAfterPiniaPlugin:i,editorId:a=null,autoShow:s=!0}={}){dt.debug("Bootstrapping:",ut);for(let t of o)d.ZP.use(t);let c;return(0,C._t)((0,g.b3)(window.id)),"dialog-err"===n&&(0,C.VE)((0,g.zN)("dialog-err",window.id)),"dialog-problem"===n&&(0,C.ym)((0,g.zN)("dialog-problem",window.id)),a&&(0,C.OD)((0,g.aJ)(a)),await new Promise((n=>{let o=(0,d.YP)((()=>(0,D.i)().ready),(a=>{a&&(o(),document.body.classList.add(`uk-lang-${(0,C.S)().language}`),i?.(ht),dt.debug("About to create Vue instance:",ut),c=new d.ZP({...t,pinia:ht}),dt.debug("Created Vue instance:",ut),window.addEventListener("unload",(()=>{window.isBeingDestroyed=!0,c.$destroy(),window.isDestroyed=!0})),dt.debug("About to mount Vue instance:",ut),c.$mount(e||"#app"),dt.debug("Mounted Vue instance:",ut),(0,B.qJ)().then((async()=>{if(!s)return;const t=await window.getWindowIdAsync();!rt&&await r.ZP.fetch((0,b.EV)(t),"show"),rt&&await r.ZP.fetch((0,b.EV)(t),"moveToShow"),window.isShown=!0})),n(c))}))})),c}},13382:(t,e,n)=>{"use strict";n.d(e,{G$:()=>_,N0:()=>v,Pg:()=>x,R2:()=>T,W5:()=>k,ZZ:()=>y,am:()=>b,eq:()=>g,yr:()=>A});var o=n(71017),i=n.n(o),r=n(67657),a=n(7104),s=n(23352),c=n(33394),u=n(94593),d=n(90435),l=n(54856),p=n(5893),f=n(87141),h=n(63111);const m=(0,s.ZP)("dialog");async function v(t){(t=Object.assign({},t||{})).icon&&"string"==typeof t.icon&&(t.icon=i().join((0,a.bY)(),t.icon));const e=r.BrowserWindow.fromId(window.id);return[r.dialog.showMessageBoxSync(e,t)]}async function w(t){(t=Object.assign({},t||{})).icon&&"string"==typeof t.icon&&(t.icon=i().join((0,a.bY)(),t.icon));const e=r.BrowserWindow.fromId(window.id),{response:n,checkboxChecked:o}=await r.dialog.showMessageBox(e,t);return[n,o]}async function y(t){(t=Object.assign({securityScopedBookmarks:!0},t||{})).suggestPath&&!t.defaultPath&&(t.defaultPath=b(t.suggestPath,t.filters),delete t.suggestPath);const{canceled:e,filePath:n,bookmark:o}=await r.dialog.showSaveDialog(r.getCurrentWindow(),t);return e?null:(n&&o&&await c.Z.bindBookmark({fp:n,bookmark:o}),n&&(0,f.km)().setLastSaveDirectory(i().dirname(n)),n)}async function g({folderName:t,dialogOptions:e}){let n="";(e=Object.assign({securityScopedBookmarks:!0},e||{})).defaultPath||(e.defaultPath=b({}));const{canceled:o,filePaths:a,bookmark:s}=await r.dialog.showOpenDialog(r.getCurrentWindow(),e);if(o)return null;if(n=a[0],a.length>0&&s&&await c.Z.bindBookmark({fp:n,bookmark:s}),"string"==typeof t){let e=t.replace(/[\\/]/g,"");e=(0,p.N6)(e).replace(/\.+$/g,"").trim(),n=i().join(n,e)}return u.Z.existsSync(n)||u.Z.ensureDir(n),n&&(0,f.km)().setLastSaveDirectory(n),n}function b({doc:t=null,oldDoc:e=null,suggestedName:n=null},o=null){let a,s;if(!a&&n&&(a=(0,p.N6)(n.toString())),!a&&t&&t.title&&t.source&&!t.source.startsWith("new://")&&(a=(0,p.N6)(t.title.toString())),!a&&e&&e.title&&e.source&&!e.source.startsWith("new://")&&(a=(0,p.N6)(e.title.toString())),a&&Array.isArray(o)){const t=o[0]&&o[0].extensions;Array.isArray(t)&&t.length>0&&(a=`${a}.${t[0]}`)}if(!s&&e&&e.source&&e.source.startsWith("file://")){let t=e.source.slice(7);t=t.substring(1),s=i().dirname(t)}if(!s&&(0,f.km)().lastSaveDirectory&&(s=(0,f.km)().lastSaveDirectory),!s)try{s=r.app.getPath("documents")}catch(t){m.info(t)}return s&&a?i().join(s,a):s||a}async function k(t){t.$withUIKit((e=>{const n=`\n        <button\n        class="vk-button-text vk-size-small uk-text-nowrap"\n        style="word-break: keep-all;"\n        focustrigger="cannotGetFocusByMouse">\n          ${t.$T("OK")}\n        </button>\n        </div>`;e.toast({message:t.$T("The map style has been updated for your current version of Xmind."),pos:"bottom-center",timeout:5e3,btn:n,style:{width:"500px",height:"auto",padding:"10px 20px"},btnClick:e.toast.clearAll()})}))}async function T(t){const e=(t="function"!=typeof t?t=>t:t)("OK"),n=t("Get Latest Version"),o=[e,n],[i]=await w({title:"Xmind",message:t("The map style in this file might vary since it was created in a newer version of Xmind."),detail:t("You can continue to open the file or update to the latest version for better compatibility."),buttons:o,defaultId:o.indexOf(n),cancelId:o.indexOf(e),noLink:!0});i===o.indexOf(n)&&d.ZP.fetch(l.lf.GO_DOWNLOAD)}async function _(t){if(t="function"!=typeof t?t=>t:t,h.zr)return await w({title:"Xmind",message:t("Failed to Open File"),detail:t("The file was created with a newer version of Xmind. Please contact your corporate administrator for the latest update."),buttons:[t("Done")],defaultId:0,noLink:!0});const e=t("Cancel"),n=t("Get Latest Version"),o=[n,e],[i]=await w({title:"Xmind",message:t("Failed to Open File"),detail:t("The file was created by a newer version of Xmind. Please update Xmind and try to open it again."),buttons:o,defaultId:o.indexOf(n),cancelId:o.indexOf(e),noLink:!0});i===o.indexOf(n)&&d.ZP.fetch(l.lf.GO_DOWNLOAD)}async function A(t){const e=(t="function"!=typeof t?t=>t:t)("Save"),n=t("Save as"),o=t("Cancel"),i=[];i.push(n,e,o);let[r]=await w({type:"none",title:"Xmind",message:t("Saving file from Xmind"),detail:t("Once you save the file, it cannot be opened normally in older versions like $1.","Xmind 22.11"),buttons:i,defaultId:i.indexOf(n),cancelId:i.indexOf(o),noLink:!0});const a=r===i.indexOf(e),s=r===i.indexOf(n);return{toSave:a,toSaveAs:s,toCancel:!a&&!s}}async function x(t){const e=(t="function"!=typeof t?t=>t:t)("Fix ï¼† Open"),n=t("Cancel"),o=[e,n],[i]=await w({title:"Xmind",message:t("Failed to Open File"),detail:t("The file may contain invalid data structure or have become corrupted. Xmind can try to fix the data structure to help you open it."),buttons:o,defaultId:o.indexOf(e),cancelId:o.indexOf(n),noLink:!0});return{toFix:i===o.indexOf(e),toCancel:i===o.indexOf(n)}}},33394:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var o=n(57147),i=n.n(o),r=n(71017),a=n.n(r),s=n(73837),c=n(23352),u=n(96829),d=n(56222);const l=(0,c.ZP)("renderer:fs");async function p(t){return(0,d.A)("OBTAIN_READ_WRITE_ACCESS",t)}async function f(t){return(0,d.A)("RELEASE_READ_WRITE_ACCESS",t)}const h={read:async function(t){if(!a().isAbsolute(t))throw new Error("Must be an absolute path.");const e=await async function(t){return(0,d.A)("OBTAIN_READ_LOCK",t)}(t);try{return await(0,s.promisify)(i().readFile)(t)}catch(e){l.error(`path(${t}) read error: ${(0,u.SC)(e)}`);try{if(!await p(t))throw new Error(`No access to '${t}'`);return await(0,s.promisify)(i().readFile)(t)}catch(t){throw t}finally{await f(t)}}finally{await async function(t){return(0,d.A)("RELEASE_READ_LOCK",t)}(e)}},write:async function(t,e){if(!a().isAbsolute(t))throw new Error("Must be an absolute path.");const n=await async function(t){return(0,d.A)("OBTAIN_WRITE_LOCK",t)}(t);try{return await(0,s.promisify)(i().writeFile)(t,e)}catch(n){l.error(`path(${t}) write error: ${(0,u.SC)(n)}`);try{if(!await p(t))throw new Error(`No access to '${t}'`);return await(0,s.promisify)(i().writeFile)(t,e)}catch(t){throw t}finally{await f(t)}}finally{await async function(t){return(0,d.A)("RELEASE_WRITE_LOCK",t)}(n)}},bindBookmark:async function({fp:t,bookmark:e}={}){return(0,d.A)("BIND_BOOKMARK",{fp:t,bookmark:e})},hasRWAccess:async function(t){return(0,d.A)("HAS_READ_WRITE_ACCESS",t)},obtainRWAccessFromOS:p,releaseRWAccessFromOS:f}},94593:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(81296),i=n.n(o);const r=(0,n(23352).ZP)("ipc:proxy:"),a=new Proxy(i(),{get(t,e){let n=Reflect.get(t,e);return"function"==typeof n?(...o)=>{if(!window.isDestroyed)return n.apply(t,o);r.error(`window has been destroyed, we should not invoke fsp.${e})`)}:n}})},56222:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var o=n(72298);let i=0;function r(t,e){return new Promise((n=>{const r=i++;o.ipcRenderer.once(`internal-ipc-api-reply:${t}:${r}`,((t,{data:e=null})=>{n(e)})),o.ipcRenderer.send(`internal-ipc-api:${t}`,{payload:e,seq:r})}))}},28914:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(72298);const i=(0,n(23352).ZP)("ipc:proxy:"),r=new Proxy(o.ipcRenderer,{get(t,e){let n=Reflect.get(t,e);return"function"==typeof n?(...o)=>{if(!window.isDestroyed)return n.apply(t,o);i.error(`window has been destroyed, we should not invoke ipcRenderer.${e} with args (${JSON.stringify(o)})`)}:n}})},90435:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>c,he:()=>s});var o=n(96829),i=n(28914);const r=new Map;let a=0;function s(t,e){const n=r.get(t);return n?Promise.resolve().then((()=>n(e))):new Promise(((n,r)=>{const s=a++;i.Z.once(`ipc-api-reply:${t}:${s}`,((t,{error:e=null,data:i=null})=>{e?r((0,o.aq)(e)):n(i)})),i.Z.send(`ipc-api:${t}`,{payload:e,seq:s})}))}const c={fetch:s,route:function(t,e){if("function"!=typeof e)throw new Error(`IPC API "${t}" is routed to invalid handler: ${typeof e}`);if(r.has(t))throw new Error(`IPC API "${t}" is routed twice`);const n=`ipc-api:${t}`;if(i.Z.eventNames().includes(n))throw new Error(`IPC API "${t}" is routed twice`);const a=(n,{payload:r=null,seq:a=0}={})=>{const s=`ipc-api-reply:${t}:${a}`;Promise.resolve().then((()=>e(r))).then((t=>{i.Z.send(s,{data:t})})).catch((t=>{i.Z.send(s,{error:(0,o.SC)(t)})}))};return r.set(t,e),i.Z.on(n,a),i.Z.send("ipc-api-register",{apiName:t}),()=>{i.Z.send("ipc-api-unregister",{apiName:t}),i.Z.removeListener(n,a),r.delete(t)}}}},23352:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>u});var o=n(82134),i=n(96829),r=n(79409),a=n(72298);const s=new o.Jq(global.console,{colorful:!1}),c=new o.Yd({isDebugging:(0,r.Z)("version").indexOf("-alpha")>=0||(0,r.Z)("version").indexOf("-dev")>=0||i.x,handle(t){s.handle(t),function(t){a.ipcRenderer.send("logger:handleLogEvent",t)}(t)}}),u=(t=null)=>c.logger(t)},79409:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var o=n(71017),i=n.n(o),r=n(57147),a=n.n(r),s=n(7104);let c=null;function u(t=null){return c||(c=JSON.parse(a().readFileSync(i().join((0,s.bY)(),"package.json")))),t?c[t]:c}},69931:(t,e,n)=>{"use strict";n.d(e,{Al:()=>l,ju:()=>c,pP:()=>u,zD:()=>d});var o=n(71017),i=n.n(o),r=n(94593),a=n(7104),s=n(5893);function c(t){return(0,s.u3)(i().join((0,a.bY)(),t))}function u(t){return(0,s.u3)(i().join((0,a.D8)(),t))}function d(t){return r.Z.readFile(i().join((0,a.bY)(),t))}const l=(...t)=>c(...t).replace("(","%28").replace(")","%29")},73884:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var o=n(82361),i=n.n(o),r=n(28914);const a=new(i()),s=a.emit;a.emit=function(t,...e){s.call(a,t,...e),u(t)&&r.Z.send("revents:broadcast",[t,...e])},a.on("newListener",(t=>{if(u(t)){0===a.eventNames().filter(u).length&&r.Z.send("revents:register")}})),a.on("removeListener",(t=>{if(u(t)){0===a.eventNames().filter(u).length&&r.Z.send("revents:unregister")}}));const c=a.removeAllListeners;function u(t){return"newListener"!==t&&"removeListener"!==t}a.removeAllListeners=function(t){if(!t)throw new Error("revents's removeAllListeners is forbidden!");if("newListener"===t||"removeListener"===t)throw new Error('revents\'s "newListener" and "removeListener" handler should not be removed');c.call(a,t)},r.Z.on("revents:broadcast",((t,e)=>{let n=JSON.parse(e);s.apply(a,n)})),window.addEventListener("unload",(()=>{r.Z.send("revents:unregister")}));const d=a},85786:(t,e,n)=>{"use strict";n.d(e,{DL:()=>l,Xf:()=>u,Yv:()=>d,vQ:()=>p});var o=n(22037),i=n.n(o),r=n(57310),a=n.n(r),s=n(72298),c=n(13382);function u(){return"win32"}function d(){return{platform:i().platform(),arch:i().arch(),release:i().release()}}function l(t,e){const n=a().parse(t).protocol,o=e||(t=>t);s.shell.openExternal(n?t:`http://${t}`).catch((()=>{(0,c.N0)({title:"Xmind",message:o("Unable to open link."),detail:o("This link is invalid and cannot be opened through browser."),buttons:[o("OK")]})}))}function p(t){s.clipboard.writeText(t)}},69297:(t,e,n)=>{"use strict";n.d(e,{Do:()=>r,Kl:()=>a,N1:()=>i,fv:()=>s,nz:()=>c});var o=n(28914);function i(){return o.Z.sendSync("usage-stats:data")}function r(){o.Z.send("usage-stats:increase",{type:"dwellTimeInZenMode",value:1e3})}function a(t=1){o.Z.send("usage-stats:increase",{type:"topicsAdded",value:t})}function s(t=1){o.Z.send("usage-stats:increase",{type:"sheetsAdded",value:t})}function c(t=1){o.Z.send("usage-stats:increase",{type:"eventsTriggered",value:t})}},18621:(t,e,n)=>{"use strict";n.d(e,{Fk:()=>r,L9:()=>i});var o=n(28914);function i(t){o.Z.send("usage-tracker:track-event",{event:t})}function r(t){o.Z.send("usage-tracker:track-view",{view:t})}},7104:(t,e,n)=>{"use strict";n.d(e,{D8:()=>d,Im:()=>h,L2:()=>p,N8:()=>l,O1:()=>m,Xl:()=>y,bY:()=>u,d6:()=>w,tM:()=>v,tY:()=>f});var o=n(71017),i=n.n(o),r=n(72298),a=n(56222);let s=null;let c=null;function u(){return c||(c=r.ipcRenderer.sendSync("workspace:appPath")),c}function d(){return i().join((s||(s=r.ipcRenderer.sendSync("workspace:userData")),s),"vana")}function l(){return i().join(d(),"workbooks")}function p(){return i().join(d(),"file-cache")}function f(){return i().join(d(),"theme")}function h(){return i().join(d(),"smart-color")}function m(){return i().join(d(),"illustrations")}function v(){return i().join(d(),"templates")}function w(){return i().join(u(),"static/snowbird/resource/")}async function y(){return s||(s=await(0,a.A)("workspace:userData")),i().join(s,"vana","workbooks")}},38629:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var o=n(69931);function i(t,e=null){document.documentElement.setAttribute("color-scheme","default"===t?"light":"dark");if(document.querySelector("#appearance_link"))return void("function"==typeof e&&e());const n=(0,o.ju)("static/vanakit/themes/vana.css"),i=document.createElement("link");i.type="text/css",i.id="appearance_link",i.rel="stylesheet",i.href=n,i.setAttribute("data-appearance",t),"function"==typeof e&&(i.onload=()=>e()),document.head.appendChild(i)}},20993:(t,e,n)=>{"use strict";n.d(e,{AZ:()=>F,Ao:()=>B,Bv:()=>w,C3:()=>A,CI:()=>U,CN:()=>E,DY:()=>s,I1:()=>m,JC:()=>i,NK:()=>d,Pr:()=>p,TJ:()=>g,Vs:()=>L,Wr:()=>D,Xz:()=>I,Yj:()=>k,Zk:()=>l,_5:()=>N,_6:()=>x,cZ:()=>b,cx:()=>P,dx:()=>h,fR:()=>a,jB:()=>f,kI:()=>c,l5:()=>r,p3:()=>u,sF:()=>O,sG:()=>_,t0:()=>Z,wH:()=>R,wp:()=>y,xG:()=>C,xg:()=>T,xy:()=>v,yo:()=>$,zH:()=>S});var o=n(18621);const i=t=>(0,o.L9)({eventName:"Gallery",eventAction:t}),r=()=>(0,o.L9)({eventAction:"insertTask",eventName:"insertTask"}),a=t=>(0,o.L9)({eventAction:"editTask",eventName:t}),s=()=>(0,o.L9)({eventAction:"cancelTask",eventName:"cancelTask"}),c=t=>(0,o.L9)({eventAction:"highlightTask",eventName:t}),u=t=>(0,o.L9)({eventAction:"insertIllustration",eventName:t}),d=t=>(0,o.L9)({eventAction:"searchIllustration",eventName:t}),l=t=>(0,o.L9)({eventAction:"insertIllustrationPro",eventName:t}),p=(t,e,n)=>(0,o.L9)({eventAction:"openTemplateType",eventName:`${t}_${e}_${n}`}),f=t=>(0,o.L9)({eventAction:"popPW",eventName:t}),h=t=>(0,o.L9)({eventAction:"clickPW",eventName:t}),m=()=>{(0,o.L9)({eventAction:"cancelOverlap"})},v=()=>(0,o.L9)({eventAction:"paymentPage"}),w=()=>(0,o.L9)({eventAction:"paymentPageCN"}),y=()=>(0,o.L9)({eventAction:"paymentSuccessful"}),g=()=>(0,o.L9)({eventAction:"paymentSuccessfulCN"}),b=t=>(0,o.L9)({eventName:"PWD-sp35-240515",eventAction:t}),k=()=>(0,o.L9)({eventAction:"sharetoCollaboration"}),T=()=>(0,o.L9)({eventAction:"sharetoEvernote"}),_=t=>(0,o.L9)({eventAction:"pweDisplay",eventName:t}),A=t=>(0,o.L9)({eventAction:"pweContinue",eventName:t}),x=t=>(0,o.L9)({eventAction:"closePwe",eventName:t}),E=t=>(0,o.L9)({eventAction:"pweOrder",eventName:t}),L=t=>(0,o.L9)({eventAction:"purchaseSource",eventName:t}),C=t=>(0,o.L9)({eventAction:"purchaseWindow",eventName:t}),O=({region:t,productId:e})=>(0,o.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButton"+t.toLowerCase(),eventName:e}),S=({region:t,productId:e})=>(0,o.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButtonMAS"+t.toLowerCase(),eventName:e}),N=()=>(0,o.L9)({eventAction:"autoDisconnect"}),I=()=>(0,o.L9)({eventAction:"disableSmartGuideline",eventName:"disableSmartGuideline"}),P=()=>(0,o.L9)({eventAction:"enableSmartGuideline",eventName:"enableSmartGuideline"}),$=()=>(0,o.L9)({eventAction:"clickSearchMaps",eventName:"clickSearchMaps"}),B=()=>(0,o.L9)({eventAction:"insertTaskInfo",eventName:"insertTaskInfo"}),D=()=>(0,o.L9)({eventAction:"removeTaskInfo",eventName:"removeTaskInfo"}),R=()=>(0,o.L9)({eventAction:"enableAutoCalculate",eventName:"enableAutoCalculate"}),Z=()=>(0,o.L9)({eventAction:"disableAutoCalculate",eventName:"disableAutoCalculate"}),F=()=>(0,o.L9)({eventAction:"disableDisplayinTopic",eventName:"disableDisplayinTopic"}),U=()=>(0,o.L9)({eventAction:"enableDisplayinTopic",eventName:"enableDisplayinTopic"})},59474:(t,e,n)=>{"use strict";n.d(e,{i:()=>r});var o=n(77412),i=n(2954);const r=(0,o.Q_)("bootstrap",(()=>{const t=(0,i.iH)(!1),e=(0,i.iH)(0);return{ready:t,markReady:()=>t.value=!0,pendingJobs:e,startJob:()=>e.value+=1,endJob:()=>e.value-=1}}))},65428:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var o=n(54856),i=n(77412),r=n(2954),a=n(90435);const s=(0,i.Q_)("fonts",(()=>{const t=(0,r.iH)(!1),e=(0,r.iH)({systemFonts:{},vanaFonts:{}});return{loaded:t,markLoaded:()=>t.value=!0,getLoadedFonts:async()=>{if(!e.value||Object.keys(e.value.systemFonts).length<=0&&Object.keys(e.value.vanaFonts).length<=0){const t=await(0,a.he)(o.qz);e.value=t}return e.value}}}))},7710:(t,e,n)=>{"use strict";n.d(e,{l:()=>r});var o=n(77412),i=n(2954);const r=(0,o.Q_)("query",(()=>{const t=(0,i.iH)({});return{query:t,setQuery:e=>{t.value=e}}}))},2563:(t,e,n)=>{"use strict";n.d(e,{O:()=>r});var o=n(77412),i=n(2954);const r=(0,o.Q_)("renderer-app",(()=>{const t=(0,i.iH)(!1),e=(0,i.XI)([]),n=(0,i.XI)({}),o=(0,i.XI)([]);return{ignoreAppearanceChanged:t,updateIgnoreAppearance:e=>{t.value=e},builtinFontFamilies:e,updateBuiltinFontFamilies:t=>e.value=t,allFonts:n,updateAllFonts:t=>n.value=t,fontsForMindMap:o,updateFontsForMindMap:t=>o.value=t}}))},53775:(t,e,n)=>{"use strict";async function o(){await new Promise((t=>requestAnimationFrame((()=>{requestAnimationFrame(t)}))))}async function i(t){return Promise.race([new Promise((t=>requestAnimationFrame((()=>{requestAnimationFrame(t)})))),new Promise((e=>setTimeout(e,null!=t?t:200)))])}function r(t,e=300,n=!1){let o;function i(...e){o=void 0,n||t.apply(this,e)}const r=function(...r){void 0!==o&&clearTimeout(o),n&&!o&&t.apply(this,r),o=setTimeout(i.bind(this,...r),e)};return r.cancel=function(){void 0!==o&&(clearTimeout(o),o=void 0)},r}function a(t,e=300,n=!1){let o,i,r,a=!1;function s(){i=Date.now(),t.apply(this,r),void 0!==o&&(clearTimeout(o),o=void 0)}const c=function(...t){if(a)return;if(r=t,n&&!i)return void s.apply(this);const c=Date.now(),u=c-(null!=i?i:c);u>=e?s.apply(this):void 0===o&&(o=setTimeout(s.bind(this),e-u))};return c.cancel=function(t=!0){void 0!==o&&(clearTimeout(o),o=void 0),i=void 0,a=t},c}n.d(e,{Ds:()=>r,P2:()=>a,SX:()=>o,gH:()=>s,qJ:()=>i});const s=(t,e)=>{let n=t,o="";if("object"==typeof e){const t=new URLSearchParams;for(const n in e)t.append(n,e[n]);o=t.toString()}return n=n.includes("?")?n+"&"+o:n+"?"+o,n}},42074:(t,e,n)=>{var o=n(73654);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);(0,n(45346).Z)("7133af66",o,!0,{})},45346:(t,e,n)=>{"use strict";function o(t,e){for(var n=[],o={},i=0;i<e.length;i++){var r=e[i],a=r[0],s={id:t+":"+i,css:r[1],media:r[2],sourceMap:r[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}n.d(e,{Z:()=>h});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,d=function(){},l=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,n,i){u=n,l=i||{};var a=o(t,e);return m(a),function(e){for(var n=[],i=0;i<a.length;i++){var s=a[i];(c=r[s.id]).refs--,n.push(c)}e?m(a=o(t,e)):a=[];for(i=0;i<n.length;i++){var c;if(0===(c=n[i]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete r[c.id]}}}}function m(t){for(var e=0;e<t.length;e++){var n=t[e],o=r[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(w(n.parts[i]));o.parts.length>n.parts.length&&(o.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(w(n.parts[i]));r[n.id]={id:n.id,refs:1,parts:a}}}}function v(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function w(t){var e,n,o=document.querySelector("style["+p+'~="'+t.id+'"]');if(o){if(u)return d;o.parentNode.removeChild(o)}if(f){var i=c++;o=s||(s=v()),e=b.bind(null,o,i,!1),n=b.bind(null,o,i,!0)}else o=v(),e=k.bind(null,o),n=function(){o.parentNode.removeChild(o)};return e(t),function(o){if(o){if(o.css===t.css&&o.media===t.media&&o.sourceMap===t.sourceMap)return;e(t=o)}else n()}}var y,g=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function b(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function k(t,e){var n=e.css,o=e.media,i=e.sourceMap;if(o&&t.setAttribute("media",o),l.ssrId&&t.setAttribute(p,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},6113:t=>{"use strict";t.exports=require("crypto")},72298:t=>{"use strict";t.exports=require("electron")},82361:t=>{"use strict";t.exports=require("events")},57147:t=>{"use strict";t.exports=require("fs")},22037:t=>{"use strict";t.exports=require("os")},71017:t=>{"use strict";t.exports=require("path")},63477:t=>{"use strict";t.exports=require("querystring")},57310:t=>{"use strict";t.exports=require("url")},73837:t=>{"use strict";t.exports=require("util")}},t=>{t.O(0,[8592,8970],(()=>{return e=2662,t(t.s=e);var e}));var e=t.O();module.exports=e}]);