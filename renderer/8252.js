(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[8252],{43240:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(23645),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".spinner-grid-content {\n  background: var(--color-mask-overlay-s, rgba(28, 40, 52, 0.05));\n}\n",""]);const o=r},99858:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(23645),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".preview-item[data-v-f3dfad82] {\n  border: 1px dashed var(--color-border-quaternary);\n  background: var(--color-fill-surface-dim);\n  background-size: contain;\n  background-position: 50% 50%;\n  border-radius: 4px;\n}\n.preview-item.loaded[data-v-f3dfad82] {\n  display: block;\n  box-shadow: 0px 2.129px 7.984px 0px rgba(0, 0, 0, 0.1), 0px 0.532px 2.129px 0px rgba(0, 0, 0, 0.05);\n  border: none;\n}\n.folder-container[data-v-f3dfad82] {\n  background: var(--color-fill-surface-dim);\n  padding: 6px;\n}\n.folder-container .preview-item-1[data-v-f3dfad82] {\n  width: 99px;\n  height: 62px;\n  top: 14px;\n  left: 24px;\n  z-index: 3;\n}\n.folder-container .preview-item-2[data-v-f3dfad82] {\n  width: 84px;\n  height: 52px;\n  transform: rotate(-8deg);\n  top: 20px;\n  left: 6px;\n  z-index: 2;\n}\n.folder-container .preview-item-3[data-v-f3dfad82] {\n  width: 84px;\n  height: 52px;\n  transform: rotate(8deg);\n  top: 20px;\n  right: 6px;\n  z-index: 1;\n}\n.middle-file-motion-enter[data-v-f3dfad82] {\n  scale: 1.1 !important;\n  transform: rotate(3deg) !important;\n  transition-property: scale transform !important;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.middle-file-motion-leave[data-v-f3dfad82] {\n  scale: 1;\n  transform: rotate(0deg);\n  transition-property: scale transform;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n.left-file-motion-move-left[data-v-f3dfad82] {\n  left: -4px !important;\n  transition-property: left !important;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.left-file-motion-move-back[data-v-f3dfad82] {\n  left: 6px;\n  transition-property: left;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n.right-file-motion-move-right[data-v-f3dfad82] {\n  right: -4px !important;\n  transition-property: right !important;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.right-file-motion-move-back[data-v-f3dfad82] {\n  right: 6px;\n  transition-property: right;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n",""]);const o=r},71683:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(23645),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".cloud-file-motion-zoom-in[data-v-3a9f531f] {\n  scale: 1.1 !important;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.cloud-file-motion-zoom-out[data-v-3a9f531f] {\n  scale: 1;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n",""]);const o=r},52212:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(23645),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".form-container .theme-category-name[data-v-3cd57d21] {\n  margin-top: 32px;\n  margin-bottom: 20px;\n  font-weight: bold;\n  font-size: 20px;\n  line-height: 25px;\n}\n.form-container .theme-category-name[data-v-3cd57d21]:first-of-type {\n  margin-top: 0;\n}\n.preview-map-list[data-v-3cd57d21] {\n  list-style: none;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-column-gap: 16px;\n  grid-row-gap: 16px;\n}\n.uk-border-rounded[data-v-3cd57d21] {\n  border-radius: 10px;\n}\n.uk-win32 .uk-border-rounded[data-v-3cd57d21] {\n  border-radius: 4px;\n}\n.title-bar[data-v-3cd57d21] {\n  height: 26px;\n  padding: 20px 26px 0;\n  top: 0;\n  z-index: 1030;\n  background: var(--color-fill-surface);\n}\n.title-bar-sticky[data-v-3cd57d21] {\n  height: 44px;\n  padding: 0 26px;\n  position: sticky;\n  border-bottom: var(--color-border-muted) 1px solid;\n  align-items: center;\n}\n.title-bar-sticky h1[data-v-3cd57d21] {\n  font-size: 15px !important;\n}\n.preview-item-desc[data-v-3cd57d21] {\n  color: var(--color-sidebar-text-subtitle);\n}\n",""]);const o=r},82863:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(23645),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".local-file-motion-zoom-in[data-v-59f236d3] {\n  scale: 1.1 !important;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.local-file-motion-zoom-out[data-v-59f236d3] {\n  scale: 1;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n",""]);const o=r},41265:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});i(4321);const n=(0,i(51900).Z)({},(function(){this._self._c;return this._m(0)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"uk-flex uk-flex-column uk-flex-center uk-flex-middle uk-height-1-1 uk-width-1-1"},[t("div",{staticClass:"uk-margin-small-bottom uk-height-1-1 uk-width-1-1 spinner-grid-content",staticStyle:{"border-radius":"8px"}}),e._v(" "),t("div",{staticClass:"uk-margin-xsmall-bottom spinner-grid-content",staticStyle:{width:"108px",height:"14px","border-radius":"2px"}}),e._v(" "),t("div",{staticClass:"spinner-grid-content",staticStyle:{width:"56px",height:"14px","border-radius":"2px"}})])}],!1,null,null,null).exports},90029:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(2954);const r=(0,n.aZ)({__name:"visibility-sensor",props:{options:{default:()=>({})}},emits:["change"],setup(e,{emit:t}){const i=e,r=(0,n.iH)(null);let o=null;return(0,n.bv)((async()=>{if(await new Promise((e=>setTimeout(e,0))),!r.value)return;let e=0,n=0,a=null;o=new IntersectionObserver((([i])=>{const r=i.isIntersecting,o=i.boundingClientRect.top;r?(e=i.boundingClientRect.top,0!==n&&(a=o>n?"top":"bottom")):(n=i.boundingClientRect.top,0!==e&&(a=o>e?"top":"bottom")),t("change",{visible:r,direction:a})}),i.options),o.observe(r.value)})),(0,n.Jd)((()=>{o&&o.disconnect()})),{__sfc:!0,props:i,emit:t,entryContainer:r,io:o}}});const o=(0,i(51900).Z)(r,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"entryContainer"},[e._t("default")],2)}),[],!1,null,null,null).exports},48252:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var n=i(2954),r=i(96829),o=i(54856),a=i(90435),s=i(23352),l=i(18621),d=i(69297),u=i(87141),c=i(73679),m=i(69931);const p=(0,n.aZ)({__name:"library",props:{isActive:{type:Boolean}},setup(e){const t=e,i=(0,s.ZP)("new-library"),p=(0,u.JE)().T,v=(0,n.iH)(null),f=(0,n.iH)(!1),h=(0,n.Fl)((()=>(0,u.qr)().serviceRegion)),g=(0,n.Fl)((()=>(0,u.jR)().libraryItems)),x=(0,n.Fl)((()=>{var e;return[{items:[...null===(e=g.value)||void 0===e?void 0:e.map((e=>({id:e.id,name:e.name,previewURL:e.previewURL,type:"file"}))),...b]}]})),b=[{id:"openMoreMaps",name:p("More Maps"),previewURL:(0,m.ju)("static/assets/images/new/more.svg")}],_=async()=>{try{const e=(await a.ZP.fetch(o.lf.LIBRARY_ITEMS)).map(((e,t)=>{const i=e.thumbnailUrl.replace(/^https/,"cache");return t<6&&a.ZP.fetch(o.lf.FILE_DOWNLOAD,{downloadUrl:i,filename:(0,r.VR)(i)}).catch((()=>{})),{name:"string"==typeof e.topic&&e.topic.trim(),previewURL:i,id:e.id}}));(0,u.jR)().updateLibraryItems(e)}catch(e){i.error("Failed to get library items:",(0,r.SC)(e))}},y=()=>{a.ZP.fetch(o.lf.GO_LIBRARY_MORE_MAPS),(0,l.L9)({eventCategory:"NewPanel",eventAction:"jumpToMore"})};return(0,n.YP)((()=>[t.isActive,h.value]),(([e,t])=>{e&&_()}),{immediate:!0}),{__sfc:!0,props:t,logger:i,$T:p,selectedLibraryItem:v,isDownloading:f,serviceRegion:h,libraryItems:g,libraryItemsPreviews:x,moreMapsCard:b,refreshLibraryItems:_,createFromLibrary:()=>{const e=v.value&&v.value.id;e&&(f.value||(f.value=!0,a.ZP.fetch(o.lf.LIBRARY_DOWNLOAD,{id:e}).then((e=>{(0,d.fv)(),f.value=!1;const t=v.value.name,i=new URL(e);i.searchParams.set("editor-title",t),a.ZP.fetch(o.NF,{source:i.href}).then((()=>{window.close()}))})).catch((t=>{f.value=!1,i.error("Failed to download workbook from library:",e,(0,r.SC)(t))})),(0,l.L9)({eventAction:"newLaunch",eventName:"openLibrary"})))},handleSelect:e=>{e&&(v.value=e,"openMoreMaps"!==e.id||y())},openMoreMaps:y,PreviewMaps:c.Z}}});const v=(0,i(51900).Z)(p,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.PreviewMaps,{attrs:{title:t.$T("Library"),previews:t.libraryItemsPreviews},on:{select:t.handleSelect,submit:t.createFromLibrary}})}),[],!1,null,null,null).exports},73679:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var n=i(2954),r=i(5893),o=i(90029),a=i(41265),s=i(69931),l=i(62004);const d=(0,n.aZ)({__name:"cloud-thumbnail-item",props:{fileId:null,version:{default:""}},setup(e){const t=e,i=(0,n.iH)(!1),r=(0,n.iH)(!1),o=(0,n.Fl)((()=>{const e=(0,s.ju)("static/assets/images/new/thumbnail.svg"),n=(0,l.Y)().getThumbnailURL({fileId:t.fileId,version:t.version});return i.value?e:n}));return{__sfc:!0,props:t,isError:i,isHovered:r,previewURL:o}}});i(66770);var u=i(51900);const c=(0,u.Z)(d,(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("img",{staticClass:"uk-width-1-1 uk-height-1-1",class:{"cloud-file-motion-zoom-in":i.isHovered,"cloud-file-motion-zoom-out":!i.isHovered},staticStyle:{"object-fit":"cover"},attrs:{src:i.previewURL,draggable:"false"},on:{contextmenu:function(t){return e.$emit("contextmenu")},error:function(e){i.isError=!0},mouseenter:function(e){i.isHovered=!0},mouseleave:function(e){i.isHovered=!1}}})}),[],!1,null,"3a9f531f",null).exports;var m=i(67159);const p=(0,n.aZ)({__name:"cloud-folder-item",props:{folderId:null,isTrashFolder:{type:Boolean}},setup(e){const t=e,{folderMap:i}=(0,m.nu)(),{refreshTrash:r,trash:o}=(0,m.tc)(),a=(0,n.iH)(!1),s=(0,n.Fl)((()=>{var e,n;return t.isTrashFolder?(null===(e=o.value[t.folderId])||void 0===e?void 0:e.fileItems)||[]:(null===(n=i.value[t.folderId])||void 0===n?void 0:n.fileItems)||[]})),d=(0,n.Fl)((()=>s.value?s.value.slice(0,3):[])),u=(0,n.Fl)((()=>Array.from({length:3},((e,t)=>t)).map((e=>{var t,i,n;const r=d.value[e];return r?(0,l.Y)().getThumbnailURL({fileId:r.fileId,version:null!==(n=null!==(i=null===(t=r.meta)||void 0===t?void 0:t.forceUpdateKey)&&void 0!==i?i:r.modifiedTime)&&void 0!==n?n:""}):""}))));return(0,n.bv)((()=>{t.isTrashFolder&&r(t.folderId)})),{__sfc:!0,props:t,folderMap:i,refreshTrash:r,trash:o,MAX_PREVIEW_FILES:3,isHovered:a,fileItems:s,previewFiles:d,previewURLs:u,handleThumbnailLoad:e=>{e.target.classList.add("loaded")}}}});i(21462);const v=(0,u.Z)(p,(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{staticClass:"folder-container uk-width-1-1 uk-height-1-1 uk-position-relative",on:{mouseenter:function(e){i.isHovered=!0},mouseleave:function(e){i.isHovered=!1}}},e._l(i.previewURLs,(function(e,n){return t("div",{staticClass:"uk-position-absolute preview-item",class:{[`preview-item-${n+1}`]:!0,"middle-file-motion-enter":i.isHovered&&0===n,"middle-file-motion-leave":!i.isHovered&&0===n,"left-file-motion-move-left":i.isHovered&&1===n,"left-file-motion-move-back":!i.isHovered&&1===n,"right-file-motion-move-right":i.isHovered&&2===n,"right-file-motion-move-back":!i.isHovered&&2===n},attrs:{"data-src":e,"uk-img":""},on:{load:i.handleThumbnailLoad}})})),0)}),[],!1,null,"f3dfad82",null).exports;const f=(0,n.aZ)({__name:"local-file-item",props:{src:null},setup:e=>({__sfc:!0,isHovered:(0,n.iH)(!1)})});i(22074);const h=(0,u.Z)(f,(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("img",{staticClass:"uk-width-1-1 uk-height-1-1 preview-item",class:{"local-file-motion-zoom-in":i.isHovered,"local-file-motion-zoom-out":!i.isHovered},attrs:{src:e.src,tabindex:"-1",draggable:"false"},on:{mouseenter:function(e){i.isHovered=!0},mouseleave:function(e){i.isHovered=!1}}})}),[],!1,null,"59f236d3",null).exports,g=(0,n.aZ)({__name:"index",props:{itemIdPrefix:{default:""},selectItemId:{default:""},previews:null,isShowLabel:{type:Boolean,default:!1},selectFirst:{type:Boolean,default:!1},title:{default:""},isLoading:{type:Boolean,default:!1},previewContainerStyle:null},emits:["select","submit","contextmenu","contextmenu-blank","load-more","sticky"],setup(e,{emit:t}){const i=e,s=(0,n.iH)(null),l=(0,n.iH)(null),d=(0,n.iH)(!1),u=(0,n.iH)(!0),m=(0,n.Fl)((()=>!i.previews.length)),p=e=>{s.value=e,t("select",e)};return(0,n.bv)((()=>{i.selectFirst&&p(i.previews[0]&&i.previews[0].items[0])})),(0,n.YP)((()=>[i.selectItemId,i.previews]),(([e])=>{if(e){const t=i.previews.flatMap((e=>e.items)).find((t=>t.id===e));t&&p(t)}}),{immediate:!0}),{__sfc:!0,props:i,emit:t,selectedItem:s,container:l,titleBarSticky:d,atTop:u,isPreviewItemsEmpty:m,handleSelectItem:p,handleSubmit:()=>{t("submit",s.value)},handleScrollTop:({visible:e})=>{u.value=e},handleScrollBottom:({visible:e})=>{e&&t("load-more")},handleTitleBarVisible:({visible:e})=>{d.value=!e,t("sticky",!e)},getFileNameDisplay:r.Uy,VisibilitySensor:o.Z,SpinnerSkeletonGrid:a.Z,CloudThumbnailItem:c,CloudFolderItem:v,LocalFileItem:h}}});i(40868);const x=(0,u.Z)(g,(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{ref:"container",staticClass:"uk-height-1-1 uk-flex uk-flex-column",on:{contextmenu:function(e){return i.emit("contextmenu-blank")}}},[t(i.VisibilitySensor,{staticClass:"uk-width-1-1",on:{change:i.handleScrollTop}}),e._v(" "),e._t("header"),e._v(" "),e.title?t("div",{staticClass:"uk-flex uk-flex-between uk-flex-bottom title-bar",class:{"title-bar-sticky":i.titleBarSticky}},[t("span",{staticClass:"uk-flex uk-width-expand uk-flex-middle"},[e._t("title-before"),e._v(" "),t("h1",{staticClass:"uk-margin-remove uk-text-truncate typography-headline-small"},[e._v("\n        "+e._s(e.title)+"\n      ")]),e._v(" "),e._t("title-after")],2),e._v(" "),e._t("title-bar-right")],2):e._e(),e._v(" "),e._t("preview-before"),e._v(" "),t("div",{staticClass:"uk-height-expand uk-overflow-overlay",staticStyle:{padding:"20px 24px 24px"},style:e.previewContainerStyle},[e._t("preview-header"),e._v(" "),t("form",{staticClass:"uk-panel form-container",class:{"uk-height-1-1":e.isLoading||i.isPreviewItemsEmpty},on:{submit:function(e){return e.preventDefault(),i.handleSubmit.apply(null,arguments)}}},[t(i.VisibilitySensor,{attrs:{options:{root:i.container}},on:{change:i.handleTitleBarVisible}}),e._v(" "),t("div",{staticClass:"uk-height-1-1",attrs:{"uk-list-select":"","uk-traverse":"","data-traverse-mode":"nearest-item","data-item":".preview-item","data-form":"true"}},[e.isLoading?t("ul",{staticClass:"uk-margin-remove uk-padding-remove uk-height-1-1 preview-map-list"},e._l(16,(function(e){return t("li",{key:`skeleton-${e}`},[t(i.SpinnerSkeletonGrid)],1)})),0):i.isPreviewItemsEmpty?[e._t("placeholder")]:e._l(e.previews,(function(n){return[e.isShowLabel&&n.label?t("h3",{key:n.label,staticClass:"theme-category-name"},[e._v("\n            "+e._s(n.label)+"\n          ")]):e._e(),e._v(" "),t("ul",{staticClass:"uk-margin-remove uk-padding-remove preview-map-list"},[e._t("list-header",null,{tabindex:"-1"}),e._v(" "),e._l(n.items,(function(n){return t("li",{key:n.id},[t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle"},[t("div",{staticClass:"vk-card vk-size-large uk-padding-remove",class:{"is-active":n.id===(i.selectedItem&&i.selectedItem.id)},style:{"--card-width":"145px","--card-height":"93px"},attrs:{id:`${e.itemIdPrefix}${n.id}`,tabindex:"-1"},on:{click:function(e){return i.handleSelectItem(n)},dblclick:function(e){return e.preventDefault(),i.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"vk-card-inner",on:{contextmenu:function(t){return t.stopPropagation(),e.$emit("contextmenu",n)}}},[n.fromCloud&&"file"===n.type?t(i.CloudThumbnailItem,{attrs:{"file-id":n.id,version:n.forceUpdateKey??n.modifiedTime??""}}):n.fromCloud&&"folder"===n.type?t(i.CloudFolderItem,{attrs:{"folder-id":n.id,"is-trash-folder":n.isTrashFolder}}):t(i.LocalFileItem,{style:{"object-fit":"file"===n.type?"cover":"none"},attrs:{src:n.previewURL}})],1)]),e._v(" "),t("div",{staticClass:"uk-text-center uk-card-selectable-text uk-text-truncate uk-margin-small-top typography-body-medium",staticStyle:{width:"150px"},attrs:{title:i.getFileNameDisplay(n.name)}},[n.fileIcon?t("span",{attrs:{"uk-svg":"","data-src":n.fileIcon}}):e._e(),e._v("\n                  "+e._s(i.getFileNameDisplay(n.name))+"\n                ")]),e._v(" "),n.description?t("div",{staticClass:"preview-item-desc typography-caption-caption"},[e._v("\n                  "+e._s(n.description)+"\n                ")]):e._e()])])})),e._v(" "),e._t("list-footer")],2)]})),e._v(" "),t(i.VisibilitySensor,{attrs:{options:{root:i.container}},on:{change:i.handleScrollBottom}})],2)],1)],2),e._v(" "),e._t("footer")],2)}),[],!1,null,"3cd57d21",null).exports},4321:(e,t,i)=>{var n=i(43240);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(45346).Z)("19fa9b8f",n,!0,{})},21462:(e,t,i)=>{var n=i(99858);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(45346).Z)("ac660d4c",n,!0,{})},66770:(e,t,i)=>{var n=i(71683);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(45346).Z)("199cd804",n,!0,{})},40868:(e,t,i)=>{var n=i(52212);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(45346).Z)("2c728eae",n,!0,{})},22074:(e,t,i)=>{var n=i(82863);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(45346).Z)("8d840518",n,!0,{})}}]);