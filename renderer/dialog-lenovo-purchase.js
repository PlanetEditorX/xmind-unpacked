(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[4587],{19633:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var a=n(23645),i=n.n(a)()((function(e){return e[1]}));i.push([e.id,".uk-win32 .vk-window-dialog[data-v-51241f17] ::-webkit-scrollbar-track {\n  margin: 43px 0 0 0;\n}\n.lenovo-purchase-content[data-v-51241f17] {\n  padding: 64px;\n  overflow: hidden;\n}\n.purchase-info-text[data-v-51241f17] {\n  line-height: 16px;\n  white-space: nowrap;\n}\n",""]);const r=i},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);a&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},96870:(e,t,n)=>{"use strict";n.r(t);var a=n(59042),i=n(2954),r=n(87141),o=n(19469),s=n(18621),c=n(90435),u=n(54856),l=n(54688);const d=(0,i.aZ)({__name:"app",setup(e){const t=(0,i.Fl)((()=>(0,r.S)().language)),n=(0,i.iH)(""),a=(0,i.iH)({autorenew:0,formattedPrice:0,formattedPricePerMonth:0}),d=(0,i.iH)({orderHash:"",orderNumber:0});let p=null;const{refreshSubscriptionData:f}=(0,l.n)(),m=async()=>{var e;if(d.value.orderHash)try{const t=await c.ZP.fetch(u.lf.LENOVO_GET_ORDER_STATUS,{orderHash:d.value.orderHash});0===(null===(e=null==t?void 0:t.order)||void 0===e?void 0:e.status)&&(await f({planType:r.k9.PERSONAL}),(0,s.L9)({eventAction:"subscriptionSuccessFromLenovo",eventName:"subscriptionSuccess"}),window.close())}catch(e){}},v=()=>{const e=(0,o.R)(window.location.search);a.value=JSON.parse(e.product),n.value=e.payQr,d.value.orderHash=e.orderHash,d.value.orderNumber=e.orderNumber,(0,s.L9)({eventAction:"showLenovoPaymentDialog",eventName:"showPaymentDialog"}),p=setInterval(m,2e3)};return(0,i.Ah)((()=>{p&&clearInterval(p)})),v(),{__sfc:!0,HEARTBEAT_INTERVAL_TIME:2e3,ORDER_PURCHASED:0,currentLanguage:t,payQr:n,product:a,order:d,heartbeatInterval:p,refreshSubscriptionData:f,checkOrderHeartbeat:m,init:v}}});n(67570);const p=(0,n(51900).Z)(d,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"vk-window-dialog",staticStyle:{border:"none"},attrs:{id:"app"}},[t("div",{staticClass:"vk-window-title-bar uk-width-1-1",staticStyle:{background:"transparent",border:"none",position:"fixed","z-index":"1"}},[t("window-control-button-group",{staticStyle:{filter:"brightness(2)",height:"43px"}})],1),e._v(" "),t("div",{staticClass:"vk-window-body uk-flex uk-flex-column uk-flex-middle lenovo-purchase-content"},[t("h1",{staticClass:"uk-text-bold uk-text-lead",staticStyle:{"font-size":"34px","margin-bottom":"40px"}},[e._v("\n      "+e._s(e.$T("Check your order"))+"\n    ")]),e._v(" "),t("div",{staticClass:"uk-flex",staticStyle:{width:"100%"}},[t("div",{staticClass:"uk-form-label"},[e._v("\n        "+e._s(e.$T("Product"))+"\n      ")]),e._v(" "),t("div",{staticClass:"uk-form-label purchase-info-text uk-margin-auto-left"},[e._v("\n        "+e._s(e.$T("Xmind Pro (Desktop + Mobile)"))+"\n      ")])]),e._v(" "),t("hr",{staticStyle:{width:"100%"}}),e._v(" "),t("div",{staticClass:"uk-flex uk-form-label purchase-info-text",staticStyle:{width:"100%"}},[t("div",[e._v("\n        "+e._s(e.$T("Subscription"))+"\n      ")]),e._v(" "),t("div",{staticClass:"uk-flex uk-margin-auto-left"},[0===n.product.extend?t("div",[e._v("\n          "+e._s(n.product.formattedPrice)+" / "+e._s(e.$T("Month"))+"\n        ")]):e._e(),e._v(" "),12===n.product.extend?t("div",[e._v("\n          "+e._s(n.product.formattedPrice)+" / "+e._s(e.$T("Year"))+"\n        ")]):e._e(),e._v(" "),1===n.product.autorenew?t("div",[e._v("\n           "+e._s(e.$T("Auto-renewal"))+"\n        ")]):e._e()])]),e._v(" "),t("hr",{staticStyle:{width:"100%"}}),e._v(" "),t("div",{staticClass:"uk-flex uk-form-label purchase-info-text",staticStyle:{width:"100%","margin-bottom":"40px"}},[t("div",[e._v("\n        "+e._s(e.$T("Order Number"))+"\n      ")]),e._v(" "),t("div",{staticClass:"uk-flex uk-margin-auto-left"},[t("div",[e._v("\n          "+e._s(n.order.orderNumber)+"\n        ")])])]),e._v(" "),t("div",{staticClass:"uk-flex",staticStyle:{width:"100%",height:"150px"}},[t("div",{staticClass:"uk-flex uk-flex-column",staticStyle:{"flex-grow":"1"}},[t("div",{staticClass:"uk-text-meta",staticStyle:{"font-size":"12px"}},[e._v("\n          1."+e._s(e.$T("Please don't scan the QR code more than once to avoid additional deductions."))+"\n          "),t("br"),e._v("\n          2."+e._s(e.$T("After payment, please wait patiently for the result of the payment, and don't close the order page before the result is returned."))+"\n          "),t("br"),e._v("\n          3."+e._s(e.$T("This payment is made through Lenovo App Store, please contact Lenovo App Store customer service if you have any questions about invoicing or refund."))+"\n        ")]),e._v(" "),t("div",{staticClass:"uk-flex uk-margin-auto-top"},["zh-CN"!==n.currentLanguage?t("img",{staticClass:"uk-margin-xsmall-right",attrs:{src:e.$toResourceURL("static/assets/images/dialog-lenovo-purchase/alipay-en.svg")}}):e._e(),e._v(" "),"zh-CN"===n.currentLanguage?t("img",{staticClass:"uk-margin-xsmall-right",attrs:{src:e.$toResourceURL("static/assets/images/dialog-lenovo-purchase/alipay-cn.svg")}}):e._e(),e._v(" "),"zh-CN"!==n.currentLanguage&&1!==n.product.autorenew?t("img",{attrs:{src:e.$toResourceURL("static/assets/images/dialog-lenovo-purchase/wechatpay-en.svg")}}):e._e(),e._v(" "),"zh-CN"===n.currentLanguage&&1!==n.product.autorenew?t("img",{staticClass:"uk-margin-xsmall-right",attrs:{src:e.$toResourceURL("static/assets/images/dialog-lenovo-purchase/wechatpay-cn.svg")}}):e._e()])]),e._v(" "),t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle uk-margin-large-left",staticStyle:{"flex-shrink":"0"}},[t("img",{staticClass:"uk-margin-bottom",staticStyle:{width:"120px",height:"120px"},attrs:{src:n.payQr}}),e._v(" "),t("div",{staticClass:"uk-form-label uk-margin-large-bottom"},[e._v("\n          "+e._s(n.product.formattedPrice)+"\n        ")])])])])])}),[],!1,null,"51241f17",null).exports;(0,a.Z)(p,{name:"dialog-lenovo-purchase"})},59042:(e,t,n)=>{"use strict";n.d(t,{Z:()=>he});var a=n(47311),i=n(23352),r=n(90435);const o=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",s=(0,i.ZP)(`error:${o}`),c=new a.q(s,{ipc:r.ZP});window.addEventListener("error",(function(e){const t=e.error;t&&c.handle(t)})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason;t&&c.handle(t)}));const u=c;var l=n(2954),d=n(63477),p=n.n(d),f=n(72298),m=n(67657),v=n(13780),h=n.n(v),w=n(30266),y=n(86396),g=n(31945),b=n(54856),A=n(73884),P=n(28914),k=n(56222),E=n(79409),S=n(65114),C=n(77412);const _={install(e){const t="vana-ref";e.directive(t,{bind:function(e,t,n){t.value(n.componentInstance||e,n.key)},update:function(e,n,a,i){if(i.data&&i.data.directives){var r=i.data.directives.find((function(e){return e.name===t}));if(r&&r.value!==n.value)return r&&r.value(null,i.key),void n.value(a.componentInstance||e,a.key)}a.componentInstance===i.componentInstance&&a.elm===i.elm||n.value(a.componentInstance||e,a.key)},unbind:function(e,t,n){t.value(null,n.key)}})}};var T=n(87141);const L={install(e){e.prototype.$T=function(e,...t){return(0,T.JE)().T(e,...t)}}};var x=n(96829);const N=(0,i.ZP)("safe-runner");const Z=class{constructor(e){this.errorHandler=e}_handleError(e){"function"==typeof this.errorHandler?this.errorHandler(e):N.error((0,x.SC)(e))}install(e){const t=this;e.prototype.$safeRun=function(e){try{let n=e();return n&&n.then&&n.catch?n.then((e=>e)).catch((e=>t._handleError(e))):n}catch(e){t._handleError(e)}}}};var O=n(69931);const I={install(e){e.prototype.$toResourceURL=(...e)=>(0,O.ju)(...e).replace("(","%28").replace(")","%29"),e.prototype.$loadResource=O.zD}};var R=n(53775),D=n(59474);var F=n(30247),$=n(2563),J=n(65428);const M=(0,i.ZP)("font");var W=n(22037),B=n.n(W),z=n(38629);const j=(0,i.ZP)("performance");function q(e){e?document.body.style.setProperty("--uk-system-accent-color",e):document.body.style.removeProperty("--uk-system-accent-color")}var H=n(63111),U=n(18621),X=n(69297),Y=n(20993);const K={start:()=>{const e=(0,D.i)();e.startJob();const t=(0,l.YP)((()=>e.pendingJobs),(n=>{n>0||(t(),e.markReady())}));setTimeout((()=>e.endJob()),0)}},G=(()=>{const e=[],t=new Map;return{start:()=>{const e=(0,D.i)();e.startJob(),r.ZP.fetch(b.de).then((t=>{Object.keys(t).forEach((e=>{var n;const a=(0,T.F_)(e);null===(n=null==a?void 0:a())||void 0===n||n.$patch(t[e])})),A.Z.on(S.Md,(e=>{e.forEach((({id:e,state:t})=>{var n;const a=(0,T.F_)(e);null===(n=null==a?void 0:a())||void 0===n||n.$patch((0,l.qj)(t))}))})),e.endJob()}))},plugin:n=>{(0,T.W$)(n.store.$id)&&n.store.$subscribe(((a,i)=>{if(n.store.$id!==a.storeId)return;const o=t.get(a.storeId);t.set(a.storeId,!0),(null===window||void 0===window?void 0:window.isEditorFrame)||o&&a.type!==C.x1.patchObject&&(0,T.W$)(a.storeId)&&(e.push({id:a.storeId,state:JSON.parse(JSON.stringify(i))}),Promise.resolve().then((()=>{r.ZP.fetch(b.w6,{states:e}),e.length=0})))}))}}})(),V={start:()=>{(0,J.r)();const e=(0,O.ju)("/static/snowbird/resource/"),t=function(){const e={};return F.Fy(((t,n)=>{e[t]=n.map((e=>({...e,family:t})))})),e}(),n=Object.values(t).flat().map((t=>function({family:e,src:t,italic:n,weight:a,"unicode-range":i},r){const o=new URL(t,r).href;let s={family:e,source:`url("${o}")`,url:o};return void 0!==n&&(s={...s,style:n?"italic":"normal"}),void 0!==a&&(s={...s,weight:a.toString()}),void 0!==i&&(s={...s,unicodeRange:i}),s}(t,e)));!function(e){Promise.all(e.map((({family:e,source:t,...n})=>{const a=new FontFace(e,t,n);return a.load().then((()=>{document.fonts.add(a)})).catch((()=>{M.error("Failed to load css font from",t)}))})))}(n),function(){const e=document.createElement("style"),t=F.Hn();e.innerHTML=t,document.head.appendChild(e),document.body.style.setProperty("--info-button-font",F.o6)}(),(0,$.O)().updateBuiltinFontFamilies(Array.from(new Set(Object.keys(t))))}},Q={start:()=>{const e=(0,D.i)(),{_apr:t,_acc:n}=p().parse(location.search.slice(1));t&&(e.startJob(),j.debug("About to load CSS using _apr query parameter:",t),(0,z.Z)(t,(()=>{j.debug("Loaded CSS using _apr query parameter:",t),setTimeout((()=>{e.endJob()}),10)}))),n&&q(n),"darwin"===B().platform()&&parseFloat(B().release())>=20&&document.body.classList.add("uk-darwin-bigsur"),(0,l.YP)((()=>(0,T.S)().language),((e,t)=>{t&&document.body.classList.remove(`uk-lang-${t}`),e&&document.body.classList.add(`uk-lang-${e}`)}));const a=(0,l.YP)((()=>(0,D.i)().ready),(e=>{e&&(a(),(0,l.YP)((()=>[(0,T.S)().appearance,(0,$.O)().ignoreAppearanceChanged]),(([e,t])=>{t||(0,z.Z)(e)})),(0,l.YP)((()=>(0,T.qr)().systemAccentColor),(e=>q(e))),(0,l.YP)((()=>(0,T.S)().systemScrollbarSetting),(e=>function(e){const t="vk-scrollbar";document.body.classList.forEach((e=>{e.startsWith(t)&&document.body.classList.remove(e)})),document.body.classList.add(`${t}-${(e||"always").toLowerCase()}`)}(e)),{immediate:!0}))}))}},ee={start:()=>{H.nd&&H.qu.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>(async()=>(await r.ZP.fetch(b.QN),"interruption"))()))})),Object.keys(H.JN).concat(Object.keys(H.oF)).forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{const t=(0,T.JX)().commandById(e);return(null==t?void 0:t.provider)?(async(e,t)=>{if(!await r.ZP.fetch(b.Gy,{name:e,channel:(0,b.gk)(t)}))return"interruption"})(e,t.provider):"interruption"}))})),H.ZK.forEach((e=>{(0,T.JX)().appendAfterHandler(e,(()=>{const t=e.split(".")[1];(0,U.L9)({eventCategory:"Edit",eventAction:t,eventValue:1})}))})),H.ff.forEach((e=>{(0,T.JX)().appendAfterHandler(e,(()=>{(0,U.L9)({eventCategory:"Share",eventAction:e,eventValue:1})}))})),H.y_.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{(0,X.Kl)()}))})),H.xk.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{(0,X.fv)()}))})),H.wp.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{(0,X.nz)()}))})),(0,T.JX)().appendAfterHandler("editor.addTodo",Y.l5),(0,T.JX)().appendAfterHandler("editor.cancelTask",Y.DY),(0,T.JX)().appendAfterHandler("editor.checkTodo",(()=>{(0,Y.fR)("checkTask")})),(0,T.JX)().appendAfterHandler("editor.uncheckTodo",(()=>{(0,Y.fR)("uncheckTask")})),H.QL.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{if((0,T.si)().contexts["collaboration.isReadOnly"])return"interruption"}))})),H.gY.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{if((0,T.si)().contexts["collaboration.isFromCloud"])return"interruption"}))}))}},te={start:()=>{const e=(0,D.i)();e.startJob(),(0,T.JX)().injectDoHandleCommand((async(e,t)=>r.ZP.fetch(b.hR,{commandId:e,handlerArgs:t}))),e.endJob()}},ne=[G.plugin];var ae=n(7710);const ie=p().parse(window.location.search.slice(1)),re=!0,oe=!!ie.isBrowserView,se=!!ie.isEditorFrame;let ce=m.getCurrentWindow;oe&&(ce=function(){const e=P.Z.sendSync("get-current-window-id");return m.BrowserWindow.fromId(parseInt(e))});const ue=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",le=(0,i.ZP)("performance"),de=(0,i.ZP)("sentry");le.debug("Initializing page:",ue),f.webFrame.setVisualZoomLevelLimits(1,1),document.body.classList.add("uk-win32"),Object.defineProperty(window,"id",{get:()=>ce().id}),window.getWindowIdAsync=async()=>await(0,k.A)("get-current-window-id");window.getCurrentWindowAsync=async()=>{const e=await window.getWindowIdAsync();return m.BrowserWindow.fromId(parseInt(e))},window.isEditorFrame=se;const pe=l.ZP.observable({isBeingDestroyed:!1,isDestroyed:!1,isShown:!1});["isBeingDestroyed","isDestroyed","isShown"].forEach((e=>{Object.defineProperty(window,e,{get:()=>pe[e],set(t){pe[e]=t}})})),window.show=()=>{ce().show()},window.hide=()=>{ce().hide()},window.close=()=>{ce().close()},window.minimize=()=>{ce().minimize()},window.maximize=()=>{ce().maximize()},window.restore=()=>{ce().unmaximize()},window.isMinimized=()=>ce().isMinimized(),window.isMaximized=()=>ce().isMaximized(),window.isFullScreen=()=>ce().isFullScreen(),window.resizeTo=(e,t)=>{ce().setContentSize(e,t)},window.resizeBy=(e,t)=>{let[n,a]=ce().getContentSize();ce().setContentSize(n+e,a+t)},window.moveTo=(e,t)=>{ce().setPosition(e,t)},window.moveBy=(e,t)=>{let[n,a]=ce().getPosition();ce().setPosition(n+e,a+t)},A.Z.on("window-maximize",(()=>{document.body.classList.add("uk-window-maximized"),window.dispatchEvent(new Event("maximize"))})),A.Z.on("window-unmaximize",(()=>{document.body.classList.remove("uk-window-maximized"),window.dispatchEvent(new Event("restore"))})),A.Z.on("window-minimize",(()=>{window.dispatchEvent(new Event("minimize"))})),A.Z.on("window-unminimize",(()=>{window.dispatchEvent(new Event("unminimize"))})),A.Z.on("window-focus",(()=>{document.body.classList.remove("uk-window-inactive")})),A.Z.on("window-blur",(()=>{document.body.classList.add("uk-window-inactive")})),A.Z.on("window-enter-full-screen",(()=>{document.body.classList.add("uk-window-full-screen"),window.dispatchEvent(new Event("enter-full-screen"))})),A.Z.on("window-leave-full-screen",(()=>{document.body.classList.remove("uk-window-full-screen"),window.dispatchEvent(new Event("leave-full-screen"))})),A.Z.on("window-sheet-begin",(()=>{document.body.classList.add("uk-disabled"),window.dispatchEvent(new Event("sheet-begin"))})),A.Z.on("window-sheet-end",(()=>{document.body.classList.remove("uk-disabled"),window.dispatchEvent(new Event("sheet-end"))})),A.Z.on("window-show",(()=>{window.dispatchEvent(new Event("window-show"))})),A.Z.on(S.$r,(e=>{(0,ae.l)().setQuery(e)}));const fe=ce&&ce();if(fe&&fe.isMaximized()&&document.body.classList.add("uk-window-maximized"),fe&&fe.isFullScreen()&&document.body.classList.add("uk-window-full-screen"),fe&&!fe.isFocused()&&document.body.classList.add("uk-window-inactive"),document.addEventListener("keydown",(e=>{27===e.keyCode&&document.body.querySelector(".uk-window-dialog")&&setTimeout((()=>{if(e.defaultPrevented)return;const t=new Event("close");window.dispatchEvent(t)&&window.close()}),0)})),fe&&fe.isMaximizable&&fe.isMaximizable()){const e=["a","button","select","input"];document.addEventListener("dblclick",(t=>{const{target:n,defaultPrevented:a}=t;if(a)return;let i=n;for(;i&&"function"==typeof i.matches;){if(e.some((e=>i.matches(e))))return;i=i.parentNode}let r=document.querySelector(".vk-window-title-bar-expanded")||document.querySelector(".vk-window-title-bar");r&&r.contains(n)&&(window.isMaximized()?window.restore():window.maximize())}))}l.ZP.use(C.og),l.ZP.use(new Z((e=>u.handle(e)))),l.ZP.use(h()),l.ZP.use(L),l.ZP.use(I),l.ZP.use(_),l.ZP.use(w.ZP.Plugin),le.debug("Initialized page:",ue);const me=(0,C.WB)();(0,C.uX)(me),ne.forEach((e=>me.use(e))),Object.values(T.rx).forEach((e=>e())),K.start(),G.start(),V.start(),Q.start(),ee.start(),te.start();const ve=(0,E.Z)("version").includes("beta");if(process.env.SENTRY_DSN_OF_BROWSER&&ve){const e=(0,l.YP)((()=>(0,T.qr)().sentryConfig),(t=>{e();try{const e=t[process.env.SENTRY_PROJECT_OF_BROWSER]||{};y.S({Vue:l.ZP,dsn:process.env.SENTRY_DSN_OF_BROWSER,environment:"production",...e}),de.info("init",e)}catch(e){de.error("Failed to init sentry",e)}}),{immediate:!1})}async function he(e,{mountTarget:t="#app",name:n=null,plugins:a=[],runAfterPiniaPlugin:i,editorId:o=null,autoShow:s=!0}={}){le.debug("Bootstrapping:",ue);for(let e of a)l.ZP.use(e);let c;return(0,T._t)((0,g.b3)(window.id)),"dialog-err"===n&&(0,T.VE)((0,g.zN)("dialog-err",window.id)),"dialog-problem"===n&&(0,T.ym)((0,g.zN)("dialog-problem",window.id)),o&&(0,T.OD)((0,g.aJ)(o)),await new Promise((n=>{let a=(0,l.YP)((()=>(0,D.i)().ready),(o=>{o&&(a(),document.body.classList.add(`uk-lang-${(0,T.S)().language}`),i?.(me),le.debug("About to create Vue instance:",ue),c=new l.ZP({...e,pinia:me}),le.debug("Created Vue instance:",ue),window.addEventListener("unload",(()=>{window.isBeingDestroyed=!0,c.$destroy(),window.isDestroyed=!0})),le.debug("About to mount Vue instance:",ue),c.$mount(t||"#app"),le.debug("Mounted Vue instance:",ue),(0,R.qJ)().then((async()=>{if(!s)return;const e=await window.getWindowIdAsync();!re&&await r.ZP.fetch((0,b.EV)(e),"show"),re&&await r.ZP.fetch((0,b.EV)(e),"moveToShow"),window.isShown=!0})),n(c))}))})),c}},13382:(e,t,n)=>{"use strict";n.d(t,{G$:()=>k,N0:()=>h,Pg:()=>S,R2:()=>P,W5:()=>A,ZZ:()=>y,am:()=>b,eq:()=>g,yr:()=>E});var a=n(71017),i=n.n(a),r=n(67657),o=n(7104),s=n(23352),c=n(33394),u=n(94593),l=n(90435),d=n(54856),p=n(5893),f=n(87141),m=n(63111);const v=(0,s.ZP)("dialog");async function h(e){(e=Object.assign({},e||{})).icon&&"string"==typeof e.icon&&(e.icon=i().join((0,o.bY)(),e.icon));const t=r.BrowserWindow.fromId(window.id);return[r.dialog.showMessageBoxSync(t,e)]}async function w(e){(e=Object.assign({},e||{})).icon&&"string"==typeof e.icon&&(e.icon=i().join((0,o.bY)(),e.icon));const t=r.BrowserWindow.fromId(window.id),{response:n,checkboxChecked:a}=await r.dialog.showMessageBox(t,e);return[n,a]}async function y(e){(e=Object.assign({securityScopedBookmarks:!0},e||{})).suggestPath&&!e.defaultPath&&(e.defaultPath=b(e.suggestPath,e.filters),delete e.suggestPath);const{canceled:t,filePath:n,bookmark:a}=await r.dialog.showSaveDialog(r.getCurrentWindow(),e);return t?null:(n&&a&&await c.Z.bindBookmark({fp:n,bookmark:a}),n&&(0,f.km)().setLastSaveDirectory(i().dirname(n)),n)}async function g({folderName:e,dialogOptions:t}){let n="";(t=Object.assign({securityScopedBookmarks:!0},t||{})).defaultPath||(t.defaultPath=b({}));const{canceled:a,filePaths:o,bookmark:s}=await r.dialog.showOpenDialog(r.getCurrentWindow(),t);if(a)return null;if(n=o[0],o.length>0&&s&&await c.Z.bindBookmark({fp:n,bookmark:s}),"string"==typeof e){let t=e.replace(/[\\/]/g,"");t=(0,p.N6)(t).replace(/\.+$/g,"").trim(),n=i().join(n,t)}return u.Z.existsSync(n)||u.Z.ensureDir(n),n&&(0,f.km)().setLastSaveDirectory(n),n}function b({doc:e=null,oldDoc:t=null,suggestedName:n=null},a=null){let o,s;if(!o&&n&&(o=(0,p.N6)(n.toString())),!o&&e&&e.title&&e.source&&!e.source.startsWith("new://")&&(o=(0,p.N6)(e.title.toString())),!o&&t&&t.title&&t.source&&!t.source.startsWith("new://")&&(o=(0,p.N6)(t.title.toString())),o&&Array.isArray(a)){const e=a[0]&&a[0].extensions;Array.isArray(e)&&e.length>0&&(o=`${o}.${e[0]}`)}if(!s&&t&&t.source&&t.source.startsWith("file://")){let e=t.source.slice(7);e=e.substring(1),s=i().dirname(e)}if(!s&&(0,f.km)().lastSaveDirectory&&(s=(0,f.km)().lastSaveDirectory),!s)try{s=r.app.getPath("documents")}catch(e){v.info(e)}return s&&o?i().join(s,o):s||o}async function A(e){e.$withUIKit((t=>{const n=`\n        <button\n        class="vk-button-text vk-size-small uk-text-nowrap"\n        style="word-break: keep-all;"\n        focustrigger="cannotGetFocusByMouse">\n          ${e.$T("OK")}\n        </button>\n        </div>`;t.toast({message:e.$T("The map style has been updated for your current version of Xmind."),pos:"bottom-center",timeout:5e3,btn:n,style:{width:"500px",height:"auto",padding:"10px 20px"},btnClick:t.toast.clearAll()})}))}async function P(e){const t=(e="function"!=typeof e?e=>e:e)("OK"),n=e("Get Latest Version"),a=[t,n],[i]=await w({title:"Xmind",message:e("The map style in this file might vary since it was created in a newer version of Xmind."),detail:e("You can continue to open the file or update to the latest version for better compatibility."),buttons:a,defaultId:a.indexOf(n),cancelId:a.indexOf(t),noLink:!0});i===a.indexOf(n)&&l.ZP.fetch(d.lf.GO_DOWNLOAD)}async function k(e){if(e="function"!=typeof e?e=>e:e,m.zr)return await w({title:"Xmind",message:e("Failed to Open File"),detail:e("The file was created with a newer version of Xmind. Please contact your corporate administrator for the latest update."),buttons:[e("Done")],defaultId:0,noLink:!0});const t=e("Cancel"),n=e("Get Latest Version"),a=[n,t],[i]=await w({title:"Xmind",message:e("Failed to Open File"),detail:e("The file was created by a newer version of Xmind. Please update Xmind and try to open it again."),buttons:a,defaultId:a.indexOf(n),cancelId:a.indexOf(t),noLink:!0});i===a.indexOf(n)&&l.ZP.fetch(d.lf.GO_DOWNLOAD)}async function E(e){const t=(e="function"!=typeof e?e=>e:e)("Save"),n=e("Save as"),a=e("Cancel"),i=[];i.push(n,t,a);let[r]=await w({type:"none",title:"Xmind",message:e("Saving file from Xmind"),detail:e("Once you save the file, it cannot be opened normally in older versions like $1.","Xmind 22.11"),buttons:i,defaultId:i.indexOf(n),cancelId:i.indexOf(a),noLink:!0});const o=r===i.indexOf(t),s=r===i.indexOf(n);return{toSave:o,toSaveAs:s,toCancel:!o&&!s}}async function S(e){const t=(e="function"!=typeof e?e=>e:e)("Fix ＆ Open"),n=e("Cancel"),a=[t,n],[i]=await w({title:"Xmind",message:e("Failed to Open File"),detail:e("The file may contain invalid data structure or have become corrupted. Xmind can try to fix the data structure to help you open it."),buttons:a,defaultId:a.indexOf(t),cancelId:a.indexOf(n),noLink:!0});return{toFix:i===a.indexOf(t),toCancel:i===a.indexOf(n)}}},33394:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(57147),i=n.n(a),r=n(71017),o=n.n(r),s=n(73837),c=n(23352),u=n(96829),l=n(56222);const d=(0,c.ZP)("renderer:fs");async function p(e){return(0,l.A)("OBTAIN_READ_WRITE_ACCESS",e)}async function f(e){return(0,l.A)("RELEASE_READ_WRITE_ACCESS",e)}const m={read:async function(e){if(!o().isAbsolute(e))throw new Error("Must be an absolute path.");const t=await async function(e){return(0,l.A)("OBTAIN_READ_LOCK",e)}(e);try{return await(0,s.promisify)(i().readFile)(e)}catch(t){d.error(`path(${e}) read error: ${(0,u.SC)(t)}`);try{if(!await p(e))throw new Error(`No access to '${e}'`);return await(0,s.promisify)(i().readFile)(e)}catch(e){throw e}finally{await f(e)}}finally{await async function(e){return(0,l.A)("RELEASE_READ_LOCK",e)}(t)}},write:async function(e,t){if(!o().isAbsolute(e))throw new Error("Must be an absolute path.");const n=await async function(e){return(0,l.A)("OBTAIN_WRITE_LOCK",e)}(e);try{return await(0,s.promisify)(i().writeFile)(e,t)}catch(n){d.error(`path(${e}) write error: ${(0,u.SC)(n)}`);try{if(!await p(e))throw new Error(`No access to '${e}'`);return await(0,s.promisify)(i().writeFile)(e,t)}catch(e){throw e}finally{await f(e)}}finally{await async function(e){return(0,l.A)("RELEASE_WRITE_LOCK",e)}(n)}},bindBookmark:async function({fp:e,bookmark:t}={}){return(0,l.A)("BIND_BOOKMARK",{fp:e,bookmark:t})},hasRWAccess:async function(e){return(0,l.A)("HAS_READ_WRITE_ACCESS",e)},obtainRWAccessFromOS:p,releaseRWAccessFromOS:f}},94593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(81296),i=n.n(a);const r=(0,n(23352).ZP)("ipc:proxy:"),o=new Proxy(i(),{get(e,t){let n=Reflect.get(e,t);return"function"==typeof n?(...a)=>{if(!window.isDestroyed)return n.apply(e,a);r.error(`window has been destroyed, we should not invoke fsp.${t})`)}:n}})},56222:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(72298);let i=0;function r(e,t){return new Promise((n=>{const r=i++;a.ipcRenderer.once(`internal-ipc-api-reply:${e}:${r}`,((e,{data:t=null})=>{n(t)})),a.ipcRenderer.send(`internal-ipc-api:${e}`,{payload:t,seq:r})}))}},28914:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(72298);const i=(0,n(23352).ZP)("ipc:proxy:"),r=new Proxy(a.ipcRenderer,{get(e,t){let n=Reflect.get(e,t);return"function"==typeof n?(...a)=>{if(!window.isDestroyed)return n.apply(e,a);i.error(`window has been destroyed, we should not invoke ipcRenderer.${t} with args (${JSON.stringify(a)})`)}:n}})},90435:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>c,he:()=>s});var a=n(96829),i=n(28914);const r=new Map;let o=0;function s(e,t){const n=r.get(e);return n?Promise.resolve().then((()=>n(t))):new Promise(((n,r)=>{const s=o++;i.Z.once(`ipc-api-reply:${e}:${s}`,((e,{error:t=null,data:i=null})=>{t?r((0,a.aq)(t)):n(i)})),i.Z.send(`ipc-api:${e}`,{payload:t,seq:s})}))}const c={fetch:s,route:function(e,t){if("function"!=typeof t)throw new Error(`IPC API "${e}" is routed to invalid handler: ${typeof t}`);if(r.has(e))throw new Error(`IPC API "${e}" is routed twice`);const n=`ipc-api:${e}`;if(i.Z.eventNames().includes(n))throw new Error(`IPC API "${e}" is routed twice`);const o=(n,{payload:r=null,seq:o=0}={})=>{const s=`ipc-api-reply:${e}:${o}`;Promise.resolve().then((()=>t(r))).then((e=>{i.Z.send(s,{data:e})})).catch((e=>{i.Z.send(s,{error:(0,a.SC)(e)})}))};return r.set(e,t),i.Z.on(n,o),i.Z.send("ipc-api-register",{apiName:e}),()=>{i.Z.send("ipc-api-unregister",{apiName:e}),i.Z.removeListener(n,o),r.delete(e)}}}},23352:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>u});var a=n(82134),i=n(96829),r=n(79409),o=n(72298);const s=new a.Jq(global.console,{colorful:!1}),c=new a.Yd({isDebugging:(0,r.Z)("version").indexOf("-alpha")>=0||(0,r.Z)("version").indexOf("-dev")>=0||i.x,handle(e){s.handle(e),function(e){o.ipcRenderer.send("logger:handleLogEvent",e)}(e)}}),u=(e=null)=>c.logger(e)},79409:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var a=n(71017),i=n.n(a),r=n(57147),o=n.n(r),s=n(7104);let c=null;function u(e=null){return c||(c=JSON.parse(o().readFileSync(i().join((0,s.bY)(),"package.json")))),e?c[e]:c}},69931:(e,t,n)=>{"use strict";n.d(t,{Al:()=>d,ju:()=>c,pP:()=>u,zD:()=>l});var a=n(71017),i=n.n(a),r=n(94593),o=n(7104),s=n(5893);function c(e){return(0,s.u3)(i().join((0,o.bY)(),e))}function u(e){return(0,s.u3)(i().join((0,o.D8)(),e))}function l(e){return r.Z.readFile(i().join((0,o.bY)(),e))}const d=(...e)=>c(...e).replace("(","%28").replace(")","%29")},73884:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(82361),i=n.n(a),r=n(28914);const o=new(i()),s=o.emit;o.emit=function(e,...t){s.call(o,e,...t),u(e)&&r.Z.send("revents:broadcast",[e,...t])},o.on("newListener",(e=>{if(u(e)){0===o.eventNames().filter(u).length&&r.Z.send("revents:register")}})),o.on("removeListener",(e=>{if(u(e)){0===o.eventNames().filter(u).length&&r.Z.send("revents:unregister")}}));const c=o.removeAllListeners;function u(e){return"newListener"!==e&&"removeListener"!==e}o.removeAllListeners=function(e){if(!e)throw new Error("revents's removeAllListeners is forbidden!");if("newListener"===e||"removeListener"===e)throw new Error('revents\'s "newListener" and "removeListener" handler should not be removed');c.call(o,e)},r.Z.on("revents:broadcast",((e,t)=>{let n=JSON.parse(t);s.apply(o,n)})),window.addEventListener("unload",(()=>{r.Z.send("revents:unregister")}));const l=o},69297:(e,t,n)=>{"use strict";n.d(t,{Do:()=>r,Kl:()=>o,N1:()=>i,fv:()=>s,nz:()=>c});var a=n(28914);function i(){return a.Z.sendSync("usage-stats:data")}function r(){a.Z.send("usage-stats:increase",{type:"dwellTimeInZenMode",value:1e3})}function o(e=1){a.Z.send("usage-stats:increase",{type:"topicsAdded",value:e})}function s(e=1){a.Z.send("usage-stats:increase",{type:"sheetsAdded",value:e})}function c(e=1){a.Z.send("usage-stats:increase",{type:"eventsTriggered",value:e})}},18621:(e,t,n)=>{"use strict";n.d(t,{Fk:()=>r,L9:()=>i});var a=n(28914);function i(e){a.Z.send("usage-tracker:track-event",{event:e})}function r(e){a.Z.send("usage-tracker:track-view",{view:e})}},7104:(e,t,n)=>{"use strict";n.d(t,{D8:()=>l,Im:()=>m,L2:()=>p,N8:()=>d,O1:()=>v,Xl:()=>y,bY:()=>u,d6:()=>w,tM:()=>h,tY:()=>f});var a=n(71017),i=n.n(a),r=n(72298),o=n(56222);let s=null;let c=null;function u(){return c||(c=r.ipcRenderer.sendSync("workspace:appPath")),c}function l(){return i().join((s||(s=r.ipcRenderer.sendSync("workspace:userData")),s),"vana")}function d(){return i().join(l(),"workbooks")}function p(){return i().join(l(),"file-cache")}function f(){return i().join(l(),"theme")}function m(){return i().join(l(),"smart-color")}function v(){return i().join(l(),"illustrations")}function h(){return i().join(l(),"templates")}function w(){return i().join(u(),"static/snowbird/resource/")}async function y(){return s||(s=await(0,o.A)("workspace:userData")),i().join(s,"vana","workbooks")}},38629:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(69931);function i(e,t=null){document.documentElement.setAttribute("color-scheme","default"===e?"light":"dark");if(document.querySelector("#appearance_link"))return void("function"==typeof t&&t());const n=(0,a.ju)("static/vanakit/themes/vana.css"),i=document.createElement("link");i.type="text/css",i.id="appearance_link",i.rel="stylesheet",i.href=n,i.setAttribute("data-appearance",e),"function"==typeof t&&(i.onload=()=>t()),document.head.appendChild(i)}},20993:(e,t,n)=>{"use strict";n.d(t,{AZ:()=>J,Ao:()=>R,Bv:()=>w,C3:()=>E,CI:()=>M,CN:()=>C,DY:()=>s,I1:()=>v,JC:()=>i,NK:()=>l,Pr:()=>p,TJ:()=>g,Vs:()=>_,Wr:()=>D,Xz:()=>Z,Yj:()=>A,Zk:()=>d,_5:()=>N,_6:()=>S,cZ:()=>b,cx:()=>O,dx:()=>m,fR:()=>o,jB:()=>f,kI:()=>c,l5:()=>r,p3:()=>u,sF:()=>L,sG:()=>k,t0:()=>$,wH:()=>F,wp:()=>y,xG:()=>T,xg:()=>P,xy:()=>h,yo:()=>I,zH:()=>x});var a=n(18621);const i=e=>(0,a.L9)({eventName:"Gallery",eventAction:e}),r=()=>(0,a.L9)({eventAction:"insertTask",eventName:"insertTask"}),o=e=>(0,a.L9)({eventAction:"editTask",eventName:e}),s=()=>(0,a.L9)({eventAction:"cancelTask",eventName:"cancelTask"}),c=e=>(0,a.L9)({eventAction:"highlightTask",eventName:e}),u=e=>(0,a.L9)({eventAction:"insertIllustration",eventName:e}),l=e=>(0,a.L9)({eventAction:"searchIllustration",eventName:e}),d=e=>(0,a.L9)({eventAction:"insertIllustrationPro",eventName:e}),p=(e,t,n)=>(0,a.L9)({eventAction:"openTemplateType",eventName:`${e}_${t}_${n}`}),f=e=>(0,a.L9)({eventAction:"popPW",eventName:e}),m=e=>(0,a.L9)({eventAction:"clickPW",eventName:e}),v=()=>{(0,a.L9)({eventAction:"cancelOverlap"})},h=()=>(0,a.L9)({eventAction:"paymentPage"}),w=()=>(0,a.L9)({eventAction:"paymentPageCN"}),y=()=>(0,a.L9)({eventAction:"paymentSuccessful"}),g=()=>(0,a.L9)({eventAction:"paymentSuccessfulCN"}),b=e=>(0,a.L9)({eventName:"PWD-sp35-240515",eventAction:e}),A=()=>(0,a.L9)({eventAction:"sharetoCollaboration"}),P=()=>(0,a.L9)({eventAction:"sharetoEvernote"}),k=e=>(0,a.L9)({eventAction:"pweDisplay",eventName:e}),E=e=>(0,a.L9)({eventAction:"pweContinue",eventName:e}),S=e=>(0,a.L9)({eventAction:"closePwe",eventName:e}),C=e=>(0,a.L9)({eventAction:"pweOrder",eventName:e}),_=e=>(0,a.L9)({eventAction:"purchaseSource",eventName:e}),T=e=>(0,a.L9)({eventAction:"purchaseWindow",eventName:e}),L=({region:e,productId:t})=>(0,a.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButton"+e.toLowerCase(),eventName:t}),x=({region:e,productId:t})=>(0,a.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButtonMAS"+e.toLowerCase(),eventName:t}),N=()=>(0,a.L9)({eventAction:"autoDisconnect"}),Z=()=>(0,a.L9)({eventAction:"disableSmartGuideline",eventName:"disableSmartGuideline"}),O=()=>(0,a.L9)({eventAction:"enableSmartGuideline",eventName:"enableSmartGuideline"}),I=()=>(0,a.L9)({eventAction:"clickSearchMaps",eventName:"clickSearchMaps"}),R=()=>(0,a.L9)({eventAction:"insertTaskInfo",eventName:"insertTaskInfo"}),D=()=>(0,a.L9)({eventAction:"removeTaskInfo",eventName:"removeTaskInfo"}),F=()=>(0,a.L9)({eventAction:"enableAutoCalculate",eventName:"enableAutoCalculate"}),$=()=>(0,a.L9)({eventAction:"disableAutoCalculate",eventName:"disableAutoCalculate"}),J=()=>(0,a.L9)({eventAction:"disableDisplayinTopic",eventName:"disableDisplayinTopic"}),M=()=>(0,a.L9)({eventAction:"enableDisplayinTopic",eventName:"enableDisplayinTopic"})},54688:(e,t,n)=>{"use strict";n.d(t,{d:()=>g,n:()=>A});var a=n(2954),i=n(87141),r=n(54856),o=n(63111),s=n(96829),c=n(90435),u=n(18621),l=n(23352),d=n(20993),p=n(13382);const f=[(0,s.WZ)("One subscription is allowed to activate Xmind on 5 Mac/PCs, and Xmind on 5 mobile devices.")],m=[(0,s.WZ)("One subscription is allowed to activate Xmind on 5 Mac/PCs, and Xmind on 5 mobile devices."),(0,s.WZ)("After confirming your purchase, payment will be made through your iTunes account."),(0,s.WZ)("Apple ID for automatic renewal subscription will be automatically charged for an additional 6 months in iTunes account 24 hours prior to the expiration of each billing cycle."),(0,s.WZ)("You can cancel your subscription from your personal iTunes account during the subscription period. It is required to cancel the subscription at least 24 hours prior to the expiration of the existing plan.")],v={[i.kc.PRO]:(0,s.WZ)("The current account is already subscribed to the Pro plan."),[i.kc.PREMIUM]:(0,s.WZ)("The current account is already subscribed to the Premium plan."),[i.kc.DEPRECATED_PERSONAL]:(0,s.WZ)("The current account is already subscribed to the Personal plan."),[i.pK.BUSINESS]:(0,s.WZ)("The current account is already subscribed to the Business plan."),[i.pK.DEPRECATED_ESSENTIAL]:(0,s.WZ)("The current account is already subscribed to the Essential plan."),[i.pK.DEPRECATED_TEAM]:(0,s.WZ)("The current account is already subscribed to the Team plan.")},h=async()=>{const e=(0,i.JE)().T;return await(0,p.N0)({title:e("Upgrade Not Supported"),message:e("The current account type does not support upgrading the plan. Please contact customer service, and we will assist you as soon as possible."),buttons:[e("Contact Now"),e("Cancel")],defaultId:0})},w=async()=>{const e=(0,i.JE)().T;await(0,p.N0)({type:"warning",message:e("Free Trial Unavailable"),detail:e("Free trial is currently unavailable for your account or region. Please contact our support for further information."),buttons:[e("OK")]})},y=(0,l.ZP)("paywall");var g;!function(e){e.CANCEL="cancel",e.CONTINUE="continue"}(g||(g={}));const b=["ios_app_store","mac_app_store","alipay_mp","wx_mp","lenovo_mp"],A=()=>{const e=(0,i.JE)().T,t=(0,a.iH)(!1),n=(0,a.iH)(!1),l=(0,a.Fl)((()=>!!(0,i.c7)().user)),A=(0,a.Fl)((()=>(0,i.qr)().serviceRegion)),P=(0,a.Fl)((()=>"cn"===A.value)),k=(0,a.Fl)((()=>(0,i.jR)().isTrialable)),E=(0,a.Fl)((()=>(o.AY?m:f).map((t=>e("$$",t))))),S=async({productType:e,productMonth:t,teamId:n,currency:a})=>{try{const o=(0,i.IW)().productItems.find((n=>n.type===e&&n.month===t));if(!o)return null;return(await c.ZP.fetch(r.lf.PAY_ORDER_FEES,{version:e,month:t,extend:o.extend,autorenew:o.autorenew,currency:P.value?"cny":a||"usd",teamId:n})).currency}catch(e){return null}},C=async()=>{c.ZP.fetch(r._v).catch((e=>{y.error("Refresh MAS pricing table:",(0,s.SC)(e))}))},_=async(e={silent:!1})=>{const{silent:t}=e;try{const e=await c.ZP.fetch(r.tt);return y.debug("license:",e),!0}catch(e){if(y.warn("warn:",(0,s.SC)(e),e.data),e.code===o.W1&&(await c.ZP.fetch(r.Pp,{mutations:[{id:"account",type:"clearAccount"}]}),await c.ZP.fetch(r.Fx,{name:"dialog-signin"})),t)return!1;if(500===e.code)await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({message:e("Can't connect with Xmind server, please try again later."),buttons:[e("OK")]})})();else if(e.data&&e.data.errorcode)if("4001"===e.data.errorcode)await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({message:e("Incorrect subscription information"),detail:e("The software encountered some problems during license activation."),buttons:[e("OK")]})})();else if("4002"===e.data.errorcode)await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({message:e("Invalid subscription information"),detail:e("Subscription information failed to verify, please provide valid subscription information."),buttons:[e("OK")]})})();else if("4003"===e.data.errorcode)await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({message:e("No subscription information detected"),detail:e("You may not have purchased or your subscription has expired. Please subscribe now."),buttons:[e("OK")]})})();else{if("4004"===e.data.errorcode)return await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({message:e("You've already subscribed."),buttons:[e("OK")]})})(),!0;"4005"===e.data.errorcode&&await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({message:e("Purchase Failed"),detail:e("Probably the currently signed in Apple ID has purchased this item, please try to sign in with another Apple ID."),buttons:[e("OK")]})})()}else await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({message:e("Invalid purchase information."),detail:e("Please confirm that you have successfully purchased this item with current Apple ID."),buttons:[e("OK")]})})();return!1}},T=({planPayload:e})=>{c.ZP.fetch(r.Fx,{wait:!0,name:"dialog-signin",query:{...e}})},L=async(e,{silent:t}={silent:!1})=>{n.value=!0,(0,u.L9)({eventCategory:"Activate",eventAction:"signinToActivate"+A.value.toUpperCase()});try{const{license:n,rawData:a}=await c.ZP.fetch(r.lf.DEVICE_BIND),o=await c.ZP.fetch(r.rM.GET_TEAM_PROFILES);await c.ZP.fetch(r.Pp,{mutations:[{id:"account",type:"updateAccount",payload:[{rawSubscriptionData:a,isHaveSubEver:null==n?void 0:n.hasSubId,monthOfPro:null==n?void 0:n.month,rawTeamSubscriptionData:o}]}]});if((0,i.Yh)().checkActivationValid({...e,feature:"action.upgrade"})&&await c.ZP.fetch(r.Fx,{name:"dialog-congratulate"}),!t){const t=e.planType===i.k9.PERSONAL?(0,i.Yh)().subscriptionPlan[i.k9.PERSONAL]:(0,i.Yh)().subscriptionPlan[e.teamId];v[t]?(async({plan:e})=>{const t=(0,i.JE)().T;await(0,p.N0)({message:t("Subscription Already Active"),detail:t("$$",v[e]),buttons:[t("OK")]})})({plan:t}):await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({message:e("No Subscription Detected"),detail:e("Unable to detect any valid subscription status, please subscribe to a plan first."),buttons:[e("OK")]})})()}}catch(e){if(t)return;e.code===o.W1?(await c.ZP.fetch(r.Pp,{mutations:[{id:"account",type:"clearAccount"}]}),await c.ZP.fetch(r.Fx,{name:"dialog-signin"})):e.code===o.oM||e.code===o.q4?(await c.ZP.fetch(r.Pp,{mutations:[{id:"account",type:"clearAccount"}]}),await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({message:e("Signed Out"),detail:e("You have been signed out from this device. Please keep your account safe."),buttons:[e("OK")]})})()):(y.warn("Failed to refresh subscription information:",e),await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({message:e("Unable to verify Xmind ID."),detail:e("Can't connect with Xmind server, please try again later."),buttons:[e("OK")]})})())}finally{n.value=!1}},x={appstore:e("Mac App Store"),official_website:e("Official Website"),lenovo:e("App Store"),google:e("Google Play"),xiaomi:e("App Store")},N={1:e("monthly"),3:e("quarterly"),12:e("yearly")};return{isRefreshingSubscriptionData:n,termsOfService:E,doSignIn:T,openFreeTrialUnavailableDialog:w,openUpgradeNotSupportedDialog:h,checkTrialable:async({productType:e,teamId:t})=>{try{if(!l.value||!k.value)return{isTrialable:!1};const n=(0,i.IW)().productItems.find((t=>t.type===e&&12===t.month));if(!n)return{isTrialable:!1};if(o.AY)return{isTrialable:!0};{const a=await c.ZP.fetch(r.lf.PAY_ORDER_FEES,{version:e,month:12,extend:n.extend,autorenew:n.autorenew,currency:P.value?"cny":"usd",teamId:t,trial:!0});return{isTrialable:!0,trialDay:String(a.trial_day)}}}catch(e){return{isTrialable:!1}}},checkExistsCurrency:S,purchaseUsingMAS:async e=>{t.value=!0,await c.ZP.fetch(r.Qv,{productId:e}).then((t=>{t||y.error("Product id is not valid:",e)})),(0,d.zH)({productId:e,region:A.value})},purchaseUsingLenovo:async e=>{var n;if(e){y.info("start purchase: ",e),t.value=!0;try{const{extend:a,autorenew:i,price:o}=e,s={extend:a,autorenew:i,formattedPrice:`¥ ${o}`},u=await c.ZP.fetch(r.lf.LENOVO_CREATE_ORDER,{product:{price:e.price,autorenew:e.autorenew,extend:e.extend}});if(!(null===(n=null==u?void 0:u.charge)||void 0===n?void 0:n.qr))throw new Error("No charge qr");if(!u.order_hash)throw new Error("No order hash");await c.ZP.fetch(r.Fx,{name:"dialog-lenovo-purchase",query:{product:JSON.stringify(s),payQr:"data:image/png;base64,"+u.charge.qr,orderHash:u.order_hash,orderNumber:u.charge.tradeNo},wait:!0}),t.value=!1}catch(e){t.value=!1,y.error("purchase error: ",e),await(async()=>{const e=(0,i.JE)().T;await(0,p.N0)({title:e("Unable to create order"),detail:e("Please check your connection or contact us.")})})()}}},purchaseUsingOfficial:async(e,{openAfterClose:t,teamId:n,amount:a,couponCode:i,isTrial:o,currency:s,isLockBillingCycle:u}={openAfterClose:!1,teamId:"",amount:0,couponCode:"",isTrial:!1})=>{const l=P.value?"cny":"usd";let p=s||l;const f=await(async({product:e,teamId:t,currency:n})=>{try{return await c.ZP.fetch(r.lf.PAY_ORDER_FEES,{version:e.type,month:e.month,extend:e.extend,autorenew:e.autorenew,currency:n,teamId:t}),!0}catch(e){return y.error("checkOfficaialCreateOrderAvailable error:",e),!1}})({product:e,teamId:n,currency:p});if(!f){const[e]=await h();return 0===e&&c.ZP.fetch(r.Fx,{name:"feedback"}),!1}const m=await S({productType:e.type,productMonth:e.month,teamId:n,currency:p});m&&(p=m),(0,d.sF)({region:A.value,productId:e.type+e.month});const v=P.value?e.price.cny:e.price.usd,w={type:e.type,month:e.month,extend:e.extend,autorenew:e.autorenew,amount:a||v,currency:p,teamId:n,trial:o,isLockBillingCycle:u,...i&&{couponCode:i}};return t?(await c.ZP.fetch((0,r.iM)(window.id),{action:"open-window",name:"dialog-payment",query:w}),!0):(await c.ZP.fetch(r.Fx,{name:"dialog-payment",query:w}),!0)},refreshPricingTable:async()=>{if(t.value=!0,o.AY)C().finally((()=>{t.value=!1}));else try{const e=await c.ZP.fetch(r.lf.GET_VANA_PRICE);(0,i.IW)().updateVanaProducts(e)}catch(e){y.warn("Failed to load pricing table:",e)}finally{t.value=!1}},refreshSubscriptionData:L,refreshSubscriptionDataUsingMAS:async(e,{silent:t}={silent:!1})=>{if(!l.value)return T({planPayload:e});(0,u.L9)({eventCategory:"Activate",eventAction:"restorePurchased"+A.value.toUpperCase()}),n.value=!0;try{if(!await c.ZP.fetch(r.jJ))return void(n.value=!1);await _({silent:t})&&await L(e,{silent:t})}catch(e){y.error("Restore MAS purchase:",(0,s.SC)(e))}finally{n.value=!1}},doRefreshMASTransactionState:async e=>{if(e===o.N1.PURCHASED){await _()&&await L({planType:i.k9.PERSONAL}),await c.ZP.fetch(r.Pp,{mutations:[{id:"activation",type:"updateMASTransactionState",payload:[{transactionState:o.N1.DEFAULT}]}]})}},checkPaymentFromOtherChannel:async({type:e,autorenew:t})=>{var n;let a,s="official_website";s=o.AY?"appstore":o.pM?"lenovo":"official_website";try{a=await c.ZP.fetch(r.lf.USER_SUB_DETAILS)}catch(e){return g.CONTINUE}const u=Object.keys(a).filter((e=>e!==s));if(!u.length)return g.CONTINUE;const l=u.map((e=>{var t,n;return(null===(t=a[e])||void 0===t?void 0:t.length)?null===(n=a[e])||void 0===n?void 0:n.map((t=>({...t,channel:e}))):[]})).flat(),d=null===(n=a[s])||void 0===n?void 0:n.filter((e=>"sub"===e.status)),f=l.filter((e=>"sub"===e.status));if(f.length){if(P.value)return await(async()=>{const e=(0,i.JE)().T;return await(0,p.N0)({message:e("Duplicate Subscription"),detail:e("The current account already has an active auto-renewal (Pro/Pro+) subscription purchased via (App Store/Mac App Store/Other Stores). If you proceed with the purchase, multiple subscriptions will be auto-renewed simultaneously, but only the latest subscription plan will be activated."),buttons:[e("OK")]})})(),g.CANCEL;const e=f[0],t=x[e.channel]||"",n=N[e.plan.month]||"",a="bundle"===e.product_name?"Pro":"Premium",[o]=await(async({channelName:e,subPlan:t,billingCycle:n=""})=>{const a=(0,i.JE)().T;return await(0,p.N0)({message:a("Duplicate Subscription"),detail:a("The current account already has an active auto-renewal plan from $1: $2 $3.If you continue with the purchase, multiple subscriptions will renew simultaneously,but only the latest subscription plan will remain active.",e,t,n),buttons:[a("Manage Subscription"),a("Continue to Purchase"),a("Cancel")],cancelId:2})})({channelName:t,subPlan:a,billingCycle:n});if(0===o)return await c.ZP.fetch(r.lf.GO_ACCOUNT_PROFILE),g.CANCEL;if(1===o)return g.CONTINUE;if(2===o)return g.CANCEL}if(P.value&&"official_website"===s&&d.length){const n=d.map((e=>e.source)),a=n.some((e=>b.includes(e))),o=n.every((e=>"wx_mp"===e)),s=e===i.kv.proplus;if(a&&!o&&(s&&!!t)){const[e]=await(async()=>{const e=(0,i.JE)().T;return await(0,p.N0)({message:e("Duplicate Subscription"),detail:e("The current account already has an active auto-renewal (Pro/Pro+) subscription purchased via Official Website. If you proceed with the purchase, multiple subscriptions will be auto-renewed simultaneously, but only the latest subscription plan will be activated."),buttons:[e("Manage Subscription"),e("Continue"),e("Cancel")],cancelId:2})})();if(0===e)return await c.ZP.fetch(r.lf.GO_ACCOUNT_PROFILE),g.CANCEL;if(1===e)return g.CONTINUE;if(2===e)return g.CANCEL}}return g.CONTINUE}}}},59474:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});var a=n(77412),i=n(2954);const r=(0,a.Q_)("bootstrap",(()=>{const e=(0,i.iH)(!1),t=(0,i.iH)(0);return{ready:e,markReady:()=>e.value=!0,pendingJobs:t,startJob:()=>t.value+=1,endJob:()=>t.value-=1}}))},65428:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var a=n(54856),i=n(77412),r=n(2954),o=n(90435);const s=(0,i.Q_)("fonts",(()=>{const e=(0,r.iH)(!1),t=(0,r.iH)({systemFonts:{},vanaFonts:{}});return{loaded:e,markLoaded:()=>e.value=!0,getLoadedFonts:async()=>{if(!t.value||Object.keys(t.value.systemFonts).length<=0&&Object.keys(t.value.vanaFonts).length<=0){const e=await(0,o.he)(a.qz);t.value=e}return t.value}}}))},7710:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var a=n(77412),i=n(2954);const r=(0,a.Q_)("query",(()=>{const e=(0,i.iH)({});return{query:e,setQuery:t=>{e.value=t}}}))},2563:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var a=n(77412),i=n(2954);const r=(0,a.Q_)("renderer-app",(()=>{const e=(0,i.iH)(!1),t=(0,i.XI)([]),n=(0,i.XI)({}),a=(0,i.XI)([]);return{ignoreAppearanceChanged:e,updateIgnoreAppearance:t=>{e.value=t},builtinFontFamilies:t,updateBuiltinFontFamilies:e=>t.value=e,allFonts:n,updateAllFonts:e=>n.value=e,fontsForMindMap:a,updateFontsForMindMap:e=>a.value=e}}))},19469:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var a=n(63477);const i=e=>e.startsWith("?")?(0,a.parse)(e.slice(1)):(0,a.parse)(e)},53775:(e,t,n)=>{"use strict";async function a(){await new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)}))))}async function i(e){return Promise.race([new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)})))),new Promise((t=>setTimeout(t,null!=e?e:200)))])}function r(e,t=300,n=!1){let a;function i(...t){a=void 0,n||e.apply(this,t)}const r=function(...r){void 0!==a&&clearTimeout(a),n&&!a&&e.apply(this,r),a=setTimeout(i.bind(this,...r),t)};return r.cancel=function(){void 0!==a&&(clearTimeout(a),a=void 0)},r}function o(e,t=300,n=!1){let a,i,r,o=!1;function s(){i=Date.now(),e.apply(this,r),void 0!==a&&(clearTimeout(a),a=void 0)}const c=function(...e){if(o)return;if(r=e,n&&!i)return void s.apply(this);const c=Date.now(),u=c-(null!=i?i:c);u>=t?s.apply(this):void 0===a&&(a=setTimeout(s.bind(this),t-u))};return c.cancel=function(e=!0){void 0!==a&&(clearTimeout(a),a=void 0),i=void 0,o=e},c}n.d(t,{Ds:()=>r,P2:()=>o,SX:()=>a,gH:()=>s,qJ:()=>i});const s=(e,t)=>{let n=e,a="";if("object"==typeof t){const e=new URLSearchParams;for(const n in t)e.append(n,t[n]);a=e.toString()}return n=n.includes("?")?n+"&"+a:n+"?"+a,n}},67570:(e,t,n)=>{var a=n(19633);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(45346).Z)("0bb5074d",a,!0,{})},45346:(e,t,n)=>{"use strict";function a(e,t){for(var n=[],a={},i=0;i<t.length;i++){var r=t[i],o=r[0],s={id:e+":"+i,css:r[1],media:r[2],sourceMap:r[3]};a[o]?a[o].parts.push(s):n.push(a[o]={id:o,parts:[s]})}return n}n.d(t,{Z:()=>m});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},o=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,l=function(){},d=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,n,i){u=n,d=i||{};var o=a(e,t);return v(o),function(t){for(var n=[],i=0;i<o.length;i++){var s=o[i];(c=r[s.id]).refs--,n.push(c)}t?v(o=a(e,t)):o=[];for(i=0;i<n.length;i++){var c;if(0===(c=n[i]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete r[c.id]}}}}function v(e){for(var t=0;t<e.length;t++){var n=e[t],a=r[n.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](n.parts[i]);for(;i<n.parts.length;i++)a.parts.push(w(n.parts[i]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(w(n.parts[i]));r[n.id]={id:n.id,refs:1,parts:o}}}}function h(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function w(e){var t,n,a=document.querySelector("style["+p+'~="'+e.id+'"]');if(a){if(u)return l;a.parentNode.removeChild(a)}if(f){var i=c++;a=s||(s=h()),t=b.bind(null,a,i,!1),n=b.bind(null,a,i,!0)}else a=h(),t=A.bind(null,a),n=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else n()}}var y,g=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function b(e,t,n,a){var i=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var r=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function A(e,t){var n=t.css,a=t.media,i=t.sourceMap;if(a&&e.setAttribute("media",a),d.ssrId&&e.setAttribute(p,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},6113:e=>{"use strict";e.exports=require("crypto")},72298:e=>{"use strict";e.exports=require("electron")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")}},e=>{e.O(0,[8592,8970],(()=>{return t=96870,e(e.s=t);var t}));var t=e.O();module.exports=t}]);