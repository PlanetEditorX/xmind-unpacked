(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[3292],{48123:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var o=r(23645),n=r.n(o)()((function(e){return e[1]}));n.push([e.id,".topic-popover-overlay {\n  display: block;\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1010;\n  background-color: transparent;\n  border: none;\n}\n",""]);const a=n},96874:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},29932:e=>{e.exports=function(e,t){for(var r=-1,o=null==e?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}},34865:(e,t,r)=>{var o=r(89465),n=r(77813),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var i=e[t];a.call(e,t)&&n(i,r)&&(void 0!==r||t in e)||o(e,t,r)}},89465:(e,t,r)=>{var o=r(38777);e.exports=function(e,t,r){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},21078:(e,t,r)=>{var o=r(62488),n=r(37285);e.exports=function e(t,r,a,i,u){var l=-1,c=t.length;for(a||(a=n),u||(u=[]);++l<c;){var p=t[l];r>0&&a(p)?r>1?e(p,r-1,a,i,u):o(u,p):i||(u[u.length]=p)}return u}},97786:(e,t,r)=>{var o=r(71811),n=r(40327);e.exports=function(e,t){for(var r=0,a=(t=o(t,e)).length;null!=e&&r<a;)e=e[n(t[r++])];return r&&r==a?e:void 0}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},25970:(e,t,r)=>{var o=r(63012),n=r(79095);e.exports=function(e,t){return o(e,t,(function(t,r){return n(e,r)}))}},63012:(e,t,r)=>{var o=r(97786),n=r(10611),a=r(71811);e.exports=function(e,t,r){for(var i=-1,u=t.length,l={};++i<u;){var c=t[i],p=o(e,c);r(p,c)&&n(l,a(c,e),p)}return l}},10611:(e,t,r)=>{var o=r(34865),n=r(71811),a=r(65776),i=r(13218),u=r(40327);e.exports=function(e,t,r,l){if(!i(e))return e;for(var c=-1,p=(t=n(t,e)).length,s=p-1,d=e;null!=d&&++c<p;){var f=u(t[c]),v=r;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(c!=s){var h=d[f];void 0===(v=l?l(h,f,d):void 0)&&(v=i(h)?h:a(t[c+1])?[]:{})}o(d,f,v),d=d[f]}return e}},56560:(e,t,r)=>{var o=r(75703),n=r(38777),a=r(6557),i=n?function(e,t){return n(e,"toString",{configurable:!0,enumerable:!1,value:o(t),writable:!0})}:a;e.exports=i},80531:(e,t,r)=>{var o=r(62705),n=r(29932),a=r(1469),i=r(33448),u=o?o.prototype:void 0,l=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return n(t,e)+"";if(i(t))return l?l.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r}},71811:(e,t,r)=>{var o=r(1469),n=r(15403),a=r(55514),i=r(79833);e.exports=function(e,t){return o(e)?e:n(e,t)?[e]:a(i(e))}},38777:(e,t,r)=>{var o=r(10852),n=function(){try{var e=o(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=n},99021:(e,t,r)=>{var o=r(85564),n=r(45357),a=r(30061);e.exports=function(e){return a(n(e,void 0,o),e+"")}},222:(e,t,r)=>{var o=r(71811),n=r(35694),a=r(1469),i=r(65776),u=r(41780),l=r(40327);e.exports=function(e,t,r){for(var c=-1,p=(t=o(t,e)).length,s=!1;++c<p;){var d=l(t[c]);if(!(s=null!=e&&r(e,d)))break;e=e[d]}return s||++c!=p?s:!!(p=null==e?0:e.length)&&u(p)&&i(d,p)&&(a(e)||n(e))}},37285:(e,t,r)=>{var o=r(62705),n=r(35694),a=r(1469),i=o?o.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||n(e)||!!(i&&e&&e[i])}},15403:(e,t,r)=>{var o=r(1469),n=r(33448),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(o(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!n(e))||(i.test(e)||!a.test(e)||null!=t&&e in Object(t))}},24523:(e,t,r)=>{var o=r(88306);e.exports=function(e){var t=o(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},45357:(e,t,r)=>{var o=r(96874),n=Math.max;e.exports=function(e,t,r){return t=n(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,u=n(a.length-t,0),l=Array(u);++i<u;)l[i]=a[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=a[i];return c[t]=r(l),o(e,this,c)}}},30061:(e,t,r)=>{var o=r(56560),n=r(21275)(o);e.exports=n},21275:e=>{var t=Date.now;e.exports=function(e){var r=0,o=0;return function(){var n=t(),a=16-(n-o);if(o=n,a>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},55514:(e,t,r)=>{var o=r(24523),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=o((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(n,(function(e,r,o,n){t.push(o?n.replace(a,"$1"):r||e)})),t}));e.exports=i},40327:(e,t,r)=>{var o=r(33448);e.exports=function(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},75703:e=>{e.exports=function(e){return function(){return e}}},85564:(e,t,r)=>{var o=r(21078);e.exports=function(e){return(null==e?0:e.length)?o(e,1):[]}},79095:(e,t,r)=>{var o=r(13),n=r(222);e.exports=function(e,t){return null!=e&&n(e,t,o)}},6557:e=>{e.exports=function(e){return e}},88306:(e,t,r)=>{var o=r(83369);function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var o=arguments,n=t?t.apply(this,o):o[0],a=r.cache;if(a.has(n))return a.get(n);var i=e.apply(this,o);return r.cache=a.set(n,i)||a,i};return r.cache=new(n.Cache||o),r}n.Cache=o,e.exports=n},78718:(e,t,r)=>{var o=r(25970),n=r(99021)((function(e,t){return null==e?{}:o(e,t)}));e.exports=n},79833:(e,t,r)=>{var o=r(80531);e.exports=function(e){return null==e?"":o(e)}},43292:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var o=r(2954),n=r(84374),a=r(27049),i=r(46016),u=r(87141),l=r(88495);var c=r(80356),p=r(23168);const s=(0,o.aZ)({__name:"marker-editor",setup(e){const{topicRect:t,computedBounds:r,markerResources:s,close:d,changeMarker:f,deleteMarker:v}=(()=>{const{domRectForSelection:e,markerModule:t,executeMutationAction:r}=(0,n.nZ)(),{getMarkerGroupById:c,getMarkerInfoById:p}=t,{updateSelectedMarkerId:s}=(0,a.E)(),{setPopoverEditorVisible:d}=(0,i.$)(),f=(0,o.Fl)((()=>{const e=t.getMarkerInfoById((0,a.E)().selectedMarkerId);if(e){const t=e.groupId,r=c(t,{lang:v((0,u.S)().language)});return r?r.markerIds.map((e=>{const{imageSrc:t,id:r,hidden:o}=p(e);if(!o)return{id:r,path:t.split("\\").join("/")}})).filter((e=>!!e)):[]}}));function v(e){switch(e){case"zh-CN":return l.SQ.ZH_CN;case"en-US":default:return l.SQ.EN_US;case"zh-HK":return l.SQ.ZH_HK;case"zh-TW":return l.SQ.ZH_TW;case"ja-JP":return l.SQ.JA_JP;case"de-DE":return l.SQ.DE_DE;case"fr-FR":return l.SQ.FR_FR;case"es":return l.SQ.ES_ES;case"id":return l.SQ.ID_ID;case"it-IT":return l.SQ.IT_IT;case"ko":return l.SQ.KR_KR;case"pt-PT":return l.SQ.PT_PT;case"ru-RU":return l.SQ.RU_RU;case"th":return l.SQ.TH_TH}}return{close:()=>{s(""),d("")},changeMarker:e=>{e!=(0,a.E)().selectedMarkerId&&r({name:"mutate:addMarker",inputValue:e})},deleteMarker:()=>{const e={name:"mutate:removeMarker",inputValue:(0,a.E)().selectedMarkerId};r(e)},computedBounds:(0,o.Fl)((()=>{const e=f.value.length;return e<8?{width:24*(e+1)+31,height:40}:{width:186,height:24*Math.ceil(e/7)+54}})),markerResources:f,topicRect:e}})(),h=(0,o.Fl)((()=>s.value.length>7?"uk-flex-column uk-flex-center uk-separator":"uk-flex-row uk-flex-middle uk-separator-vertical")),g=(0,o.Fl)((()=>s.value.length>7?"uk-padding-small uk-padding-remove-horizontal uk-padding-remove-top":"uk-padding-small uk-padding-remove-vertical uk-padding-remove-left")),k=(0,o.Fl)((()=>s.value.length>7?"uk-padding-xsmall uk-padding-remove-horizontal uk-padding-remove-bottom uk-flex uk-flex-column uk-flex-center":"uk-padding-xsmall uk-padding-remove-vertical uk-padding-remove-right"));return{__sfc:!0,topicRect:t,computedBounds:r,markerResources:s,close:d,changeMarker:f,deleteMarker:v,containerStyle:h,markersPadding:g,deleteButtonPadding:k,handleKeydown:e=>{"Tab"===e.code&&(e.preventDefault(),e.stopPropagation())},handleMarkerDelete:()=>{(0,c.C)().checkLocked("mutate:removeMarker")||v()},TopicPopoverContainer:p.Z}}});const d=(0,r(51900).Z)(s,(function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t(r.TopicPopoverContainer,{attrs:{"popover-width":r.computedBounds.width,"popover-height":r.computedBounds.height,"topic-width":r.topicRect.width,"topic-height":r.topicRect.height,"topic-left":r.topicRect.x,"topic-top":r.topicRect.y},on:{"popover-close":r.close}},[t("div",{staticClass:"uk-flex uk-flex-wrap uk-padding-small uk-child-separator",class:r.containerStyle,on:{keydown:r.handleKeydown}},[t("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-flex-wrap",class:r.markersPadding},e._l(r.markerResources,(function({id:e,path:o}){return t("button",{key:e,staticClass:"vk-button-tile vk-size-small topic-popover-close-trigger",on:{mousedown:function(e){e.preventDefault()},click:function(t){return r.changeMarker(e)}}},[t("img",{staticClass:"uk-background-center-center uk-background-norepeat",staticStyle:{height:"16px",width:"16px"},attrs:{draggable:"false","uk-img":"",src:o}})])})),0),e._v(" "),t("div",{class:r.deleteButtonPadding},[t("button",{staticClass:"vk-button-tile uk-size-small uk-background-center-center uk-background-norepeat topic-popover-close-trigger",on:{click:r.handleMarkerDelete}},[t("span",{attrs:{"uk-icon":"icon: trash"}})])])])])}),[],!1,null,null,null).exports},23168:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var o=r(2954),n=r(78718),a=r.n(n),i=r(84374);const u=(0,o.aZ)({__name:"topic-popover-container",props:{topicHeight:null,topicWidth:null,topicLeft:null,topicTop:null,popoverWidth:null,popoverHeight:{default:0},viewPortPadding:null,autoShowOnMounted:{type:Boolean,default:!0}},emits:["popover-close"],setup(e,{emit:t}){const r=e,n=(0,o.FN)(),u=(0,o.iH)(null),l=(0,o.Fl)((()=>{const{viewPortPadding:e}=r;return void 0===e?16:e})),c=(0,o.Fl)((()=>{const{autoShowOnMounted:e}=r;return void 0===e||e})),p=(0,o.Fl)((()=>({top:r.topicTop+"px",left:r.topicLeft+"px",width:r.topicWidth+"px",height:r.topicHeight+"px"}))),s=e=>{const t=e.getBoundingClientRect();return Object.assign({},a()(t,"top","left","right","bottom","width","height"),{offsetTop:e.offsetTop,offsetLeft:e.offsetLeft})},d=()=>{const e=document.querySelector("#editor-container");return e?s(e):null},f=()=>{const e=d();if(!e)return!1;const{popoverHeight:t,popoverWidth:o,topicTop:n,topicLeft:a,topicWidth:u,topicHeight:c}=r,p=a+d().left,s=n+d().top,f=e.offsetTop>s,v=e.offsetTop+e.height<c+s+t,h=p-(e.left+e.offsetLeft)<o/2-u/2,g=e.left+e.offsetLeft+e.width<p+u/2+o/2,k=c+t>e.height,x=u>e.width;let m=e.offsetLeft,y=e.offsetTop;f&&(y=s-l.value),v&&(y=s+c+r.popoverHeight-e.height+l.value),k&&(y=Math.max(c-e.height,0)+s+r.popoverHeight);const w=Math.max((r.popoverWidth-u)/2,0);if(h&&(m=p-e.left-l.value-w),g&&(m=p-e.left+u-e.width+w+l.value),x&&(m=p+w),f||v||h||g||k||x){const{moveViewport:e}=(0,i.nZ)();return e(m,y),!0}return!0},v=async()=>{if(!await f())return h(!1);h(!0)},h=e=>{setTimeout((()=>{n.proxy.$withUIKit((t=>{const r=t.pop(u.value);r&&(e?r.show():r.hide())}))}),50)};return(0,o.bv)((()=>{c.value&&v(),(0,o.Y3)((()=>{n.proxy.$withUIKit((e=>{e.util.on(u.value,"hidden",(()=>{t("popover-close")}))}))}))})),{__sfc:!0,props:r,emits:t,vm:n,popoverEl:u,viewPortPadding:l,isAutoShowOnMounted:c,topicRectStyle:p,getElementRect:s,getWindowBounds:d,moveViewport:f,showPopover:v,_togglePopover:h}}});r(53193);const l=(0,r(51900).Z)(u,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}]},[t("div",{staticClass:"uk-position-absolute",style:e._self._setupProxy.topicRectStyle}),e._v(" "),t("div",{ref:"popoverEl",style:{width:e.popoverWidth+"px",height:e.popoverHeight?e.popoverHeight+"px":"auto"},attrs:{"uk-popover":"","data-cls-overlay":"topic-popover-overlay","data-sel-close":".topic-popover-close-trigger"}},[e._t("default")],2)])}),[],!1,null,null,null).exports},53193:(e,t,r)=>{var o=r(48123);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,r(45346).Z)("915f5348",o,!0,{})}}]);