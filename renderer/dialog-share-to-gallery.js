(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[3503],{67537:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(23645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".share-content-list[data-v-0b619d5c] {\n  margin: 24px 0 0 0;\n  padding: 0;\n}\n.share-content-list-item[data-v-0b619d5c] {\n  margin-bottom: 8px;\n}\n.share-content-list-item[data-v-0b619d5c]:last-of-type {\n  margin-bottom: 0px;\n}\n.share-content-list-item-desc[data-v-0b619d5c] {\n  font-size: 11px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  word-break: break-all;\n}\n.share-content-error-text[data-v-0b619d5c] {\n  margin: 20px 0 0;\n  font-size: 12px;\n}\n.share-to-gallery-checkbox[data-v-0b619d5c] {\n  margin-left: 1px;\n  margin-top: 13px;\n}\n",""]);const a=r},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(r[o]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);i&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},25317:(e,t,n)=>{"use strict";n.r(t);var i,r=n(59042),a=n(2954),o=n(63477),s=n.n(o),c=n(54856),l=n(90435),d=n(20993),u=n(87141);!function(e){e.CURRENT_SHEET="CURRENT_SHEET",e.WHOLE_WORKBOOK="WHOLE_WORKBOOK"}(i||(i={}));const p=s().parse(location.search.slice(1)),v=Array.isArray(p.sheetIds)?p.sheetIds:[p.sheetIds],m="xmind-share-of-cn"===p.type,f=(0,a.aZ)({components:{PrivacyOptionTemplate:{props:["linkClickHanlder"],render(e){const t=(0,u.JE)().T,n=t("Xmind Gallery"),i=t("I agree this mind map can be displayed on $1 and downloaded by other users.",n),r=e("span",{class:"uk-link",style:{whiteSpace:"nowrap"},on:{click:e=>{e.preventDefault(),e.stopPropagation(),this.linkClickHanlder()}}},n),a=i.split(n).map((t=>e("span",t)));return e("span",[a[0],r,a[1]])}},ShareOfCNDescTemplate:{props:["linkClickHanlder"],render(e){const t=(0,u.JE)().T,n=t("Xmind Gallery"),i=t("The map will be uploaded to xmind.cn, and may be featured to display on $1.",n),r=e("span",{class:"uk-link",style:{whiteSpace:"nowrap"},on:{click:e=>{e.preventDefault(),e.stopPropagation(),this.linkClickHanlder()}}},n),a=i.split(n).map((t=>e("span",t)));return e("span",[a[0],r,a[1]])}}},setup(){const e=(0,u.JE)().T,t=(0,a.iH)({}),n=(0,a.iH)(1),r=(0,a.iH)(i.CURRENT_SHEET),o=(0,a.iH)(!1),s=(0,a.iH)(!1),f=(0,a.iH)(!1),h=(0,a.Fl)((()=>r.value===i.CURRENT_SHEET?[p.currSheetId]:v)),w=(0,a.Fl)((()=>h.value.map((e=>t.value[e])))),y=(0,a.Fl)((()=>{const e=w.value[n.value-1];return e?`data:image/svg+xml;utf8,${encodeURIComponent(e.data)}`:null})),g=(0,a.Fl)((()=>{const e=w.value[n.value-1];if(!e)return{width:0,height:0};const{width:t,height:i}=e,r=t/i;let a,o;return r>200/220?(a=200,o=a/r):(o=220,a=o*r),{width:a,height:o}})),b=(0,a.Fl)((()=>({"xmind share":{title:e("Submit to Gallery"),desc:e("The map you choose will be uploaded to xmind.app."),confirmText:e("Upload & Create Link"),errorText:e("Uploading to Xmind Share failed. Please check the network or re-login your Xmind ID.")},"xmind-share-of-cn":{title:e("Choose a Map to Submit"),confirmText:e("Go to Submit"),errorText:e("Uploading failed. Please check the network or re-login your Xmind ID.")}}[p.type]))),k=(0,a.Fl)((()=>[{label:e("Current Map"),value:i.CURRENT_SHEET,title:p.mapTitle},{label:e("Current File"),value:i.WHOLE_WORKBOOK,title:p.fileTitle}])),x=(0,a.Fl)((()=>b.value.errorText));(0,a.bv)((()=>{v.map((e=>l.ZP.fetch((0,c.vN)(p.editorId),{exportImageOptions:{format:"SVG",noBackground:!1,skipFont:!0,maximumWidth:2100,maximumHeight:1300},sheetId:e}).then((n=>{t.value={...t.value,[e]:n}}))))}));const C=()=>{window.close()};return{isXmindShareOfCN:m,currPreviewIndex:n,currPreviewImage:y,currPreviewImageSize:g,displayPreviewImages:w,shareText:b,shareContentVal:r,shareContentOpts:k,shareErrorText:x,isShareFaild:o,isConfirming:s,shareToGallery:f,openXMindGallery:()=>{l.ZP.fetch(c.lf.GO_LIBRARY_MORE_MAPS)},handleShareContentChange:e=>{r.value=e,n.value=1},handleClose:C,handleConfirm:async()=>{s.value=!0,m&&(0,d.JC)("goSubmitClick");const e=k.value.find((e=>e.value===r.value)),t={title:e.title,description:"",lang:"all",isPrivate:!!m||!f.value,uploadSheetTypes:e.value},n=await l.ZP.fetch((0,c.dm)(p.editorId),t);s.value=!1,n instanceof Error?((0,d.JC)("jumpToSubmitPageFail"),o.value=!0):((0,d.JC)("jumpToSubmitPageSucc"),o.value=!1),setTimeout((()=>{o.value||C()}))}}}});n(64311);const h=(0,n(51900).Z)(f,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vk-window-dialog",attrs:{id:"app"}},[t("div",{staticClass:"vk-window-title-bar vk-window-title-bar-floating"},[t("window-control-button-group")],1),e._v(" "),t("div",{staticClass:"vk-window-body uk-flex uk-overflow-hidden uk-child-separator uk-separator-vertical"},[t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle uk-flex-center uk-position-relative uk-background-inverse",staticStyle:{width:"240px"}},[t("div",{staticClass:"uk-flex uk-flex-center uk-flex-middle"},[e.currPreviewImage?t("div",{staticClass:"uk-box-shadow-small uk-padding-small",staticStyle:{"border-radius":"8px"}},[t("img",{staticClass:"uk-preserve",attrs:{"uk-svg":"",draggable:"false","data-src":e.currPreviewImage,width:e.currPreviewImageSize.width,height:e.currPreviewImageSize.height}})]):t("div",{attrs:{"uk-spinner":"ratio: 1.5"}})]),e._v(" "),t("vk-pagination",{staticClass:"uk-margin-top",attrs:{total:e.displayPreviewImages.length,"page-index":e.currPreviewIndex},on:{change:function(t){e.currPreviewIndex=t}}})],1),e._v(" "),t("div",{staticClass:"uk-padding-large uk-flex uk-flex-1 uk-flex-column uk-flex-between uk-background-default uk-height-1-1",staticStyle:{"padding-bottom":"22px"}},[t("div",[t("h1",{staticStyle:{"margin-bottom":"8px"}},[e._v("\n          "+e._s(e.shareText.title)+"\n        ")]),e._v(" "),t("p",{staticClass:"uk-margin-remove"},[e.isXmindShareOfCN?t("ShareOfCNDescTemplate",{attrs:{"link-click-hanlder":e.openXMindGallery}}):t("span",[e._v(e._s(e.shareText.desc))])],1),e._v(" "),t("ul",{staticClass:"share-content-list"},e._l(e.shareContentOpts,(function(n){return t("li",{key:n.value,staticClass:"uk-flex uk-flex-top share-content-list-item"},[t("input",{staticClass:"vk-radio uk-margin-remove-top",staticStyle:{"min-width":"16px","min-height":"16px"},attrs:{id:n.value,type:"radio",name:"share-content"},domProps:{value:n.value,checked:e.shareContentVal===n.value},on:{change:function(t){return e.handleShareContentChange(t.target.value)}}}),e._v(" "),t("label",{staticStyle:{"margin-left":"3px"},attrs:{for:n.value}},[t("div",{staticStyle:{"line-height":"16px"}},[e._v(e._s(n.label))]),e._v(" "),t("span",{staticClass:"uk-text-muted share-content-list-item-desc"},[e._v(e._s(n.title))])])])})),0),e._v(" "),e.isXmindShareOfCN?e._e():t("div",{staticClass:"uk-flex share-to-gallery-checkbox"},[t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.shareToGallery,expression:"shareToGallery"}],staticClass:"vk-checkbox",attrs:{type:"checkbox",name:"shareToGallery"},domProps:{checked:Array.isArray(e.shareToGallery)?e._i(e.shareToGallery,null)>-1:e.shareToGallery},on:{change:function(t){var n=e.shareToGallery,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.shareToGallery=n.concat([null])):a>-1&&(e.shareToGallery=n.slice(0,a).concat(n.slice(a+1)))}else e.shareToGallery=r}}})]),e._v(" "),t("span",{staticStyle:{"margin-left":"4px"},on:{click:function(t){e.shareToGallery=!e.shareToGallery}}},[t("PrivacyOptionTemplate",{attrs:{"link-click-hanlder":e.openXMindGallery}})],1)]),e._v(" "),e.isShareFaild?t("p",{staticClass:"uk-text-danger share-content-error-text"},[e._v("\n          "+e._s(e.shareErrorText)+"\n        ")]):e._e()]),e._v(" "),t("div",{staticClass:"vk-window-button-bar uk-background-default uk-padding-remove",staticStyle:{"min-height":"0"}},[t("div",{staticClass:"vk-button-group"},[t("button",{staticClass:"vk-button-secondary vk-size-small",attrs:{disabled:e.isConfirming},on:{click:e.handleConfirm}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.isConfirming,expression:"isConfirming"}],staticClass:"uk-text-middle",attrs:{"uk-spinner":"ratio: 0.6"}}),e._v(" "),t("span",{staticClass:"uk-text-middle"},[e._v("\n              "+e._s(e.shareText.confirmText)+"\n            ")])]),e._v(" "),t("button",{staticClass:"vk-button-default vk-size-small",on:{click:e.handleClose}},[e._v("\n            "+e._s(e.$T("Cancel"))+"\n          ")])])])])])])}),[],!1,null,"0b619d5c",null).exports;(0,r.Z)(h,{name:"dialog-share-to-gallery"})},59042:(e,t,n)=>{"use strict";n.d(t,{Z:()=>he});var i=n(47311),r=n(23352),a=n(90435);const o=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",s=(0,r.ZP)(`error:${o}`),c=new i.q(s,{ipc:a.ZP});window.addEventListener("error",(function(e){const t=e.error;t&&c.handle(t)})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason;t&&c.handle(t)}));const l=c;var d=n(2954),u=n(63477),p=n.n(u),v=n(72298),m=n(67657),f=n(13780),h=n.n(f),w=n(30266),y=n(86396),g=n(31945),b=n(54856),k=n(73884),x=n(28914),C=n(56222),S=n(79409),P=n(65114),T=n(77412);const A={install(e){const t="vana-ref";e.directive(t,{bind:function(e,t,n){t.value(n.componentInstance||e,n.key)},update:function(e,n,i,r){if(r.data&&r.data.directives){var a=r.data.directives.find((function(e){return e.name===t}));if(a&&a.value!==n.value)return a&&a.value(null,r.key),void n.value(i.componentInstance||e,i.key)}i.componentInstance===r.componentInstance&&i.elm===r.elm||n.value(i.componentInstance||e,i.key)},unbind:function(e,t,n){t.value(null,n.key)}})}};var L=n(87141);const E={install(e){e.prototype.$T=function(e,...t){return(0,L.JE)().T(e,...t)}}};var Z=n(96829);const _=(0,r.ZP)("safe-runner");const N=class{constructor(e){this.errorHandler=e}_handleError(e){"function"==typeof this.errorHandler?this.errorHandler(e):_.error((0,Z.SC)(e))}install(e){const t=this;e.prototype.$safeRun=function(e){try{let n=e();return n&&n.then&&n.catch?n.then((e=>e)).catch((e=>t._handleError(e))):n}catch(e){t._handleError(e)}}}};var I=n(69931);const O={install(e){e.prototype.$toResourceURL=(...e)=>(0,I.ju)(...e).replace("(","%28").replace(")","%29"),e.prototype.$loadResource=I.zD}};var F=n(53775),R=n(59474);var z=n(30247),J=n(2563),H=n(65428);const $=(0,r.ZP)("font");var j=n(22037),D=n.n(j),B=n(38629);const q=(0,r.ZP)("performance");function M(e){e?document.body.style.setProperty("--uk-system-accent-color",e):document.body.style.removeProperty("--uk-system-accent-color")}var X=n(63111),G=n(18621),W=n(69297),Y=n(20993);const U={start:()=>{const e=(0,R.i)();e.startJob();const t=(0,d.YP)((()=>e.pendingJobs),(n=>{n>0||(t(),e.markReady())}));setTimeout((()=>e.endJob()),0)}},V=(()=>{const e=[],t=new Map;return{start:()=>{const e=(0,R.i)();e.startJob(),a.ZP.fetch(b.de).then((t=>{Object.keys(t).forEach((e=>{var n;const i=(0,L.F_)(e);null===(n=null==i?void 0:i())||void 0===n||n.$patch(t[e])})),k.Z.on(P.Md,(e=>{e.forEach((({id:e,state:t})=>{var n;const i=(0,L.F_)(e);null===(n=null==i?void 0:i())||void 0===n||n.$patch((0,d.qj)(t))}))})),e.endJob()}))},plugin:n=>{(0,L.W$)(n.store.$id)&&n.store.$subscribe(((i,r)=>{if(n.store.$id!==i.storeId)return;const o=t.get(i.storeId);t.set(i.storeId,!0),(null===window||void 0===window?void 0:window.isEditorFrame)||o&&i.type!==T.x1.patchObject&&(0,L.W$)(i.storeId)&&(e.push({id:i.storeId,state:JSON.parse(JSON.stringify(r))}),Promise.resolve().then((()=>{a.ZP.fetch(b.w6,{states:e}),e.length=0})))}))}}})(),K={start:()=>{(0,H.r)();const e=(0,I.ju)("/static/snowbird/resource/"),t=function(){const e={};return z.Fy(((t,n)=>{e[t]=n.map((e=>({...e,family:t})))})),e}(),n=Object.values(t).flat().map((t=>function({family:e,src:t,italic:n,weight:i,"unicode-range":r},a){const o=new URL(t,a).href;let s={family:e,source:`url("${o}")`,url:o};return void 0!==n&&(s={...s,style:n?"italic":"normal"}),void 0!==i&&(s={...s,weight:i.toString()}),void 0!==r&&(s={...s,unicodeRange:r}),s}(t,e)));!function(e){Promise.all(e.map((({family:e,source:t,...n})=>{const i=new FontFace(e,t,n);return i.load().then((()=>{document.fonts.add(i)})).catch((()=>{$.error("Failed to load css font from",t)}))})))}(n),function(){const e=document.createElement("style"),t=z.Hn();e.innerHTML=t,document.head.appendChild(e),document.body.style.setProperty("--info-button-font",z.o6)}(),(0,J.O)().updateBuiltinFontFamilies(Array.from(new Set(Object.keys(t))))}},Q={start:()=>{const e=(0,R.i)(),{_apr:t,_acc:n}=p().parse(location.search.slice(1));t&&(e.startJob(),q.debug("About to load CSS using _apr query parameter:",t),(0,B.Z)(t,(()=>{q.debug("Loaded CSS using _apr query parameter:",t),setTimeout((()=>{e.endJob()}),10)}))),n&&M(n),"darwin"===D().platform()&&parseFloat(D().release())>=20&&document.body.classList.add("uk-darwin-bigsur"),(0,d.YP)((()=>(0,L.S)().language),((e,t)=>{t&&document.body.classList.remove(`uk-lang-${t}`),e&&document.body.classList.add(`uk-lang-${e}`)}));const i=(0,d.YP)((()=>(0,R.i)().ready),(e=>{e&&(i(),(0,d.YP)((()=>[(0,L.S)().appearance,(0,J.O)().ignoreAppearanceChanged]),(([e,t])=>{t||(0,B.Z)(e)})),(0,d.YP)((()=>(0,L.qr)().systemAccentColor),(e=>M(e))),(0,d.YP)((()=>(0,L.S)().systemScrollbarSetting),(e=>function(e){const t="vk-scrollbar";document.body.classList.forEach((e=>{e.startsWith(t)&&document.body.classList.remove(e)})),document.body.classList.add(`${t}-${(e||"always").toLowerCase()}`)}(e)),{immediate:!0}))}))}},ee={start:()=>{X.nd&&X.qu.forEach((e=>{(0,L.JX)().appendBeforeHandler(e,(()=>(async()=>(await a.ZP.fetch(b.QN),"interruption"))()))})),Object.keys(X.JN).concat(Object.keys(X.oF)).forEach((e=>{(0,L.JX)().appendBeforeHandler(e,(()=>{const t=(0,L.JX)().commandById(e);return(null==t?void 0:t.provider)?(async(e,t)=>{if(!await a.ZP.fetch(b.Gy,{name:e,channel:(0,b.gk)(t)}))return"interruption"})(e,t.provider):"interruption"}))})),X.ZK.forEach((e=>{(0,L.JX)().appendAfterHandler(e,(()=>{const t=e.split(".")[1];(0,G.L9)({eventCategory:"Edit",eventAction:t,eventValue:1})}))})),X.ff.forEach((e=>{(0,L.JX)().appendAfterHandler(e,(()=>{(0,G.L9)({eventCategory:"Share",eventAction:e,eventValue:1})}))})),X.y_.forEach((e=>{(0,L.JX)().appendBeforeHandler(e,(()=>{(0,W.Kl)()}))})),X.xk.forEach((e=>{(0,L.JX)().appendBeforeHandler(e,(()=>{(0,W.fv)()}))})),X.wp.forEach((e=>{(0,L.JX)().appendBeforeHandler(e,(()=>{(0,W.nz)()}))})),(0,L.JX)().appendAfterHandler("editor.addTodo",Y.l5),(0,L.JX)().appendAfterHandler("editor.cancelTask",Y.DY),(0,L.JX)().appendAfterHandler("editor.checkTodo",(()=>{(0,Y.fR)("checkTask")})),(0,L.JX)().appendAfterHandler("editor.uncheckTodo",(()=>{(0,Y.fR)("uncheckTask")})),X.QL.forEach((e=>{(0,L.JX)().appendBeforeHandler(e,(()=>{if((0,L.si)().contexts["collaboration.isReadOnly"])return"interruption"}))})),X.gY.forEach((e=>{(0,L.JX)().appendBeforeHandler(e,(()=>{if((0,L.si)().contexts["collaboration.isFromCloud"])return"interruption"}))}))}},te={start:()=>{const e=(0,R.i)();e.startJob(),(0,L.JX)().injectDoHandleCommand((async(e,t)=>a.ZP.fetch(b.hR,{commandId:e,handlerArgs:t}))),e.endJob()}},ne=[V.plugin];var ie=n(7710);const re=p().parse(window.location.search.slice(1)),ae=!0,oe=!!re.isBrowserView,se=!!re.isEditorFrame;let ce=m.getCurrentWindow;oe&&(ce=function(){const e=x.Z.sendSync("get-current-window-id");return m.BrowserWindow.fromId(parseInt(e))});const le=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",de=(0,r.ZP)("performance"),ue=(0,r.ZP)("sentry");de.debug("Initializing page:",le),v.webFrame.setVisualZoomLevelLimits(1,1),document.body.classList.add("uk-win32"),Object.defineProperty(window,"id",{get:()=>ce().id}),window.getWindowIdAsync=async()=>await(0,C.A)("get-current-window-id");window.getCurrentWindowAsync=async()=>{const e=await window.getWindowIdAsync();return m.BrowserWindow.fromId(parseInt(e))},window.isEditorFrame=se;const pe=d.ZP.observable({isBeingDestroyed:!1,isDestroyed:!1,isShown:!1});["isBeingDestroyed","isDestroyed","isShown"].forEach((e=>{Object.defineProperty(window,e,{get:()=>pe[e],set(t){pe[e]=t}})})),window.show=()=>{ce().show()},window.hide=()=>{ce().hide()},window.close=()=>{ce().close()},window.minimize=()=>{ce().minimize()},window.maximize=()=>{ce().maximize()},window.restore=()=>{ce().unmaximize()},window.isMinimized=()=>ce().isMinimized(),window.isMaximized=()=>ce().isMaximized(),window.isFullScreen=()=>ce().isFullScreen(),window.resizeTo=(e,t)=>{ce().setContentSize(e,t)},window.resizeBy=(e,t)=>{let[n,i]=ce().getContentSize();ce().setContentSize(n+e,i+t)},window.moveTo=(e,t)=>{ce().setPosition(e,t)},window.moveBy=(e,t)=>{let[n,i]=ce().getPosition();ce().setPosition(n+e,i+t)},k.Z.on("window-maximize",(()=>{document.body.classList.add("uk-window-maximized"),window.dispatchEvent(new Event("maximize"))})),k.Z.on("window-unmaximize",(()=>{document.body.classList.remove("uk-window-maximized"),window.dispatchEvent(new Event("restore"))})),k.Z.on("window-minimize",(()=>{window.dispatchEvent(new Event("minimize"))})),k.Z.on("window-unminimize",(()=>{window.dispatchEvent(new Event("unminimize"))})),k.Z.on("window-focus",(()=>{document.body.classList.remove("uk-window-inactive")})),k.Z.on("window-blur",(()=>{document.body.classList.add("uk-window-inactive")})),k.Z.on("window-enter-full-screen",(()=>{document.body.classList.add("uk-window-full-screen"),window.dispatchEvent(new Event("enter-full-screen"))})),k.Z.on("window-leave-full-screen",(()=>{document.body.classList.remove("uk-window-full-screen"),window.dispatchEvent(new Event("leave-full-screen"))})),k.Z.on("window-sheet-begin",(()=>{document.body.classList.add("uk-disabled"),window.dispatchEvent(new Event("sheet-begin"))})),k.Z.on("window-sheet-end",(()=>{document.body.classList.remove("uk-disabled"),window.dispatchEvent(new Event("sheet-end"))})),k.Z.on("window-show",(()=>{window.dispatchEvent(new Event("window-show"))})),k.Z.on(P.$r,(e=>{(0,ie.l)().setQuery(e)}));const ve=ce&&ce();if(ve&&ve.isMaximized()&&document.body.classList.add("uk-window-maximized"),ve&&ve.isFullScreen()&&document.body.classList.add("uk-window-full-screen"),ve&&!ve.isFocused()&&document.body.classList.add("uk-window-inactive"),document.addEventListener("keydown",(e=>{27===e.keyCode&&document.body.querySelector(".uk-window-dialog")&&setTimeout((()=>{if(e.defaultPrevented)return;const t=new Event("close");window.dispatchEvent(t)&&window.close()}),0)})),ve&&ve.isMaximizable&&ve.isMaximizable()){const e=["a","button","select","input"];document.addEventListener("dblclick",(t=>{const{target:n,defaultPrevented:i}=t;if(i)return;let r=n;for(;r&&"function"==typeof r.matches;){if(e.some((e=>r.matches(e))))return;r=r.parentNode}let a=document.querySelector(".vk-window-title-bar-expanded")||document.querySelector(".vk-window-title-bar");a&&a.contains(n)&&(window.isMaximized()?window.restore():window.maximize())}))}d.ZP.use(T.og),d.ZP.use(new N((e=>l.handle(e)))),d.ZP.use(h()),d.ZP.use(E),d.ZP.use(O),d.ZP.use(A),d.ZP.use(w.ZP.Plugin),de.debug("Initialized page:",le);const me=(0,T.WB)();(0,T.uX)(me),ne.forEach((e=>me.use(e))),Object.values(L.rx).forEach((e=>e())),U.start(),V.start(),K.start(),Q.start(),ee.start(),te.start();const fe=(0,S.Z)("version").includes("beta");if(process.env.SENTRY_DSN_OF_BROWSER&&fe){const e=(0,d.YP)((()=>(0,L.qr)().sentryConfig),(t=>{e();try{const e=t[process.env.SENTRY_PROJECT_OF_BROWSER]||{};y.S({Vue:d.ZP,dsn:process.env.SENTRY_DSN_OF_BROWSER,environment:"production",...e}),ue.info("init",e)}catch(e){ue.error("Failed to init sentry",e)}}),{immediate:!1})}async function he(e,{mountTarget:t="#app",name:n=null,plugins:i=[],runAfterPiniaPlugin:r,editorId:o=null,autoShow:s=!0}={}){de.debug("Bootstrapping:",le);for(let e of i)d.ZP.use(e);let c;return(0,L._t)((0,g.b3)(window.id)),"dialog-err"===n&&(0,L.VE)((0,g.zN)("dialog-err",window.id)),"dialog-problem"===n&&(0,L.ym)((0,g.zN)("dialog-problem",window.id)),o&&(0,L.OD)((0,g.aJ)(o)),await new Promise((n=>{let i=(0,d.YP)((()=>(0,R.i)().ready),(o=>{o&&(i(),document.body.classList.add(`uk-lang-${(0,L.S)().language}`),r?.(me),de.debug("About to create Vue instance:",le),c=new d.ZP({...e,pinia:me}),de.debug("Created Vue instance:",le),window.addEventListener("unload",(()=>{window.isBeingDestroyed=!0,c.$destroy(),window.isDestroyed=!0})),de.debug("About to mount Vue instance:",le),c.$mount(t||"#app"),de.debug("Mounted Vue instance:",le),(0,F.qJ)().then((async()=>{if(!s)return;const e=await window.getWindowIdAsync();!ae&&await a.ZP.fetch((0,b.EV)(e),"show"),ae&&await a.ZP.fetch((0,b.EV)(e),"moveToShow"),window.isShown=!0})),n(c))}))})),c}},94593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(81296),r=n.n(i);const a=(0,n(23352).ZP)("ipc:proxy:"),o=new Proxy(r(),{get(e,t){let n=Reflect.get(e,t);return"function"==typeof n?(...i)=>{if(!window.isDestroyed)return n.apply(e,i);a.error(`window has been destroyed, we should not invoke fsp.${t})`)}:n}})},56222:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(72298);let r=0;function a(e,t){return new Promise((n=>{const a=r++;i.ipcRenderer.once(`internal-ipc-api-reply:${e}:${a}`,((e,{data:t=null})=>{n(t)})),i.ipcRenderer.send(`internal-ipc-api:${e}`,{payload:t,seq:a})}))}},28914:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(72298);const r=(0,n(23352).ZP)("ipc:proxy:"),a=new Proxy(i.ipcRenderer,{get(e,t){let n=Reflect.get(e,t);return"function"==typeof n?(...i)=>{if(!window.isDestroyed)return n.apply(e,i);r.error(`window has been destroyed, we should not invoke ipcRenderer.${t} with args (${JSON.stringify(i)})`)}:n}})},90435:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>c,he:()=>s});var i=n(96829),r=n(28914);const a=new Map;let o=0;function s(e,t){const n=a.get(e);return n?Promise.resolve().then((()=>n(t))):new Promise(((n,a)=>{const s=o++;r.Z.once(`ipc-api-reply:${e}:${s}`,((e,{error:t=null,data:r=null})=>{t?a((0,i.aq)(t)):n(r)})),r.Z.send(`ipc-api:${e}`,{payload:t,seq:s})}))}const c={fetch:s,route:function(e,t){if("function"!=typeof t)throw new Error(`IPC API "${e}" is routed to invalid handler: ${typeof t}`);if(a.has(e))throw new Error(`IPC API "${e}" is routed twice`);const n=`ipc-api:${e}`;if(r.Z.eventNames().includes(n))throw new Error(`IPC API "${e}" is routed twice`);const o=(n,{payload:a=null,seq:o=0}={})=>{const s=`ipc-api-reply:${e}:${o}`;Promise.resolve().then((()=>t(a))).then((e=>{r.Z.send(s,{data:e})})).catch((e=>{r.Z.send(s,{error:(0,i.SC)(e)})}))};return a.set(e,t),r.Z.on(n,o),r.Z.send("ipc-api-register",{apiName:e}),()=>{r.Z.send("ipc-api-unregister",{apiName:e}),r.Z.removeListener(n,o),a.delete(e)}}}},23352:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l});var i=n(82134),r=n(96829),a=n(79409),o=n(72298);const s=new i.Jq(global.console,{colorful:!1}),c=new i.Yd({isDebugging:(0,a.Z)("version").indexOf("-alpha")>=0||(0,a.Z)("version").indexOf("-dev")>=0||r.x,handle(e){s.handle(e),function(e){o.ipcRenderer.send("logger:handleLogEvent",e)}(e)}}),l=(e=null)=>c.logger(e)},79409:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(71017),r=n.n(i),a=n(57147),o=n.n(a),s=n(7104);let c=null;function l(e=null){return c||(c=JSON.parse(o().readFileSync(r().join((0,s.bY)(),"package.json")))),e?c[e]:c}},69931:(e,t,n)=>{"use strict";n.d(t,{Al:()=>u,ju:()=>c,pP:()=>l,zD:()=>d});var i=n(71017),r=n.n(i),a=n(94593),o=n(7104),s=n(5893);function c(e){return(0,s.u3)(r().join((0,o.bY)(),e))}function l(e){return(0,s.u3)(r().join((0,o.D8)(),e))}function d(e){return a.Z.readFile(r().join((0,o.bY)(),e))}const u=(...e)=>c(...e).replace("(","%28").replace(")","%29")},73884:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(82361),r=n.n(i),a=n(28914);const o=new(r()),s=o.emit;o.emit=function(e,...t){s.call(o,e,...t),l(e)&&a.Z.send("revents:broadcast",[e,...t])},o.on("newListener",(e=>{if(l(e)){0===o.eventNames().filter(l).length&&a.Z.send("revents:register")}})),o.on("removeListener",(e=>{if(l(e)){0===o.eventNames().filter(l).length&&a.Z.send("revents:unregister")}}));const c=o.removeAllListeners;function l(e){return"newListener"!==e&&"removeListener"!==e}o.removeAllListeners=function(e){if(!e)throw new Error("revents's removeAllListeners is forbidden!");if("newListener"===e||"removeListener"===e)throw new Error('revents\'s "newListener" and "removeListener" handler should not be removed');c.call(o,e)},a.Z.on("revents:broadcast",((e,t)=>{let n=JSON.parse(t);s.apply(o,n)})),window.addEventListener("unload",(()=>{a.Z.send("revents:unregister")}));const d=o},69297:(e,t,n)=>{"use strict";n.d(t,{Do:()=>a,Kl:()=>o,N1:()=>r,fv:()=>s,nz:()=>c});var i=n(28914);function r(){return i.Z.sendSync("usage-stats:data")}function a(){i.Z.send("usage-stats:increase",{type:"dwellTimeInZenMode",value:1e3})}function o(e=1){i.Z.send("usage-stats:increase",{type:"topicsAdded",value:e})}function s(e=1){i.Z.send("usage-stats:increase",{type:"sheetsAdded",value:e})}function c(e=1){i.Z.send("usage-stats:increase",{type:"eventsTriggered",value:e})}},18621:(e,t,n)=>{"use strict";n.d(t,{Fk:()=>a,L9:()=>r});var i=n(28914);function r(e){i.Z.send("usage-tracker:track-event",{event:e})}function a(e){i.Z.send("usage-tracker:track-view",{view:e})}},7104:(e,t,n)=>{"use strict";n.d(t,{D8:()=>d,Im:()=>m,L2:()=>p,N8:()=>u,O1:()=>f,Xl:()=>y,bY:()=>l,d6:()=>w,tM:()=>h,tY:()=>v});var i=n(71017),r=n.n(i),a=n(72298),o=n(56222);let s=null;let c=null;function l(){return c||(c=a.ipcRenderer.sendSync("workspace:appPath")),c}function d(){return r().join((s||(s=a.ipcRenderer.sendSync("workspace:userData")),s),"vana")}function u(){return r().join(d(),"workbooks")}function p(){return r().join(d(),"file-cache")}function v(){return r().join(d(),"theme")}function m(){return r().join(d(),"smart-color")}function f(){return r().join(d(),"illustrations")}function h(){return r().join(d(),"templates")}function w(){return r().join(l(),"static/snowbird/resource/")}async function y(){return s||(s=await(0,o.A)("workspace:userData")),r().join(s,"vana","workbooks")}},38629:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(69931);function r(e,t=null){document.documentElement.setAttribute("color-scheme","default"===e?"light":"dark");if(document.querySelector("#appearance_link"))return void("function"==typeof t&&t());const n=(0,i.ju)("static/vanakit/themes/vana.css"),r=document.createElement("link");r.type="text/css",r.id="appearance_link",r.rel="stylesheet",r.href=n,r.setAttribute("data-appearance",e),"function"==typeof t&&(r.onload=()=>t()),document.head.appendChild(r)}},20993:(e,t,n)=>{"use strict";n.d(t,{AZ:()=>H,Ao:()=>F,Bv:()=>w,C3:()=>S,CI:()=>$,CN:()=>T,DY:()=>s,I1:()=>f,JC:()=>r,NK:()=>d,Pr:()=>p,TJ:()=>g,Vs:()=>A,Wr:()=>R,Xz:()=>N,Yj:()=>k,Zk:()=>u,_5:()=>_,_6:()=>P,cZ:()=>b,cx:()=>I,dx:()=>m,fR:()=>o,jB:()=>v,kI:()=>c,l5:()=>a,p3:()=>l,sF:()=>E,sG:()=>C,t0:()=>J,wH:()=>z,wp:()=>y,xG:()=>L,xg:()=>x,xy:()=>h,yo:()=>O,zH:()=>Z});var i=n(18621);const r=e=>(0,i.L9)({eventName:"Gallery",eventAction:e}),a=()=>(0,i.L9)({eventAction:"insertTask",eventName:"insertTask"}),o=e=>(0,i.L9)({eventAction:"editTask",eventName:e}),s=()=>(0,i.L9)({eventAction:"cancelTask",eventName:"cancelTask"}),c=e=>(0,i.L9)({eventAction:"highlightTask",eventName:e}),l=e=>(0,i.L9)({eventAction:"insertIllustration",eventName:e}),d=e=>(0,i.L9)({eventAction:"searchIllustration",eventName:e}),u=e=>(0,i.L9)({eventAction:"insertIllustrationPro",eventName:e}),p=(e,t,n)=>(0,i.L9)({eventAction:"openTemplateType",eventName:`${e}_${t}_${n}`}),v=e=>(0,i.L9)({eventAction:"popPW",eventName:e}),m=e=>(0,i.L9)({eventAction:"clickPW",eventName:e}),f=()=>{(0,i.L9)({eventAction:"cancelOverlap"})},h=()=>(0,i.L9)({eventAction:"paymentPage"}),w=()=>(0,i.L9)({eventAction:"paymentPageCN"}),y=()=>(0,i.L9)({eventAction:"paymentSuccessful"}),g=()=>(0,i.L9)({eventAction:"paymentSuccessfulCN"}),b=e=>(0,i.L9)({eventName:"PWD-sp35-240515",eventAction:e}),k=()=>(0,i.L9)({eventAction:"sharetoCollaboration"}),x=()=>(0,i.L9)({eventAction:"sharetoEvernote"}),C=e=>(0,i.L9)({eventAction:"pweDisplay",eventName:e}),S=e=>(0,i.L9)({eventAction:"pweContinue",eventName:e}),P=e=>(0,i.L9)({eventAction:"closePwe",eventName:e}),T=e=>(0,i.L9)({eventAction:"pweOrder",eventName:e}),A=e=>(0,i.L9)({eventAction:"purchaseSource",eventName:e}),L=e=>(0,i.L9)({eventAction:"purchaseWindow",eventName:e}),E=({region:e,productId:t})=>(0,i.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButton"+e.toLowerCase(),eventName:t}),Z=({region:e,productId:t})=>(0,i.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButtonMAS"+e.toLowerCase(),eventName:t}),_=()=>(0,i.L9)({eventAction:"autoDisconnect"}),N=()=>(0,i.L9)({eventAction:"disableSmartGuideline",eventName:"disableSmartGuideline"}),I=()=>(0,i.L9)({eventAction:"enableSmartGuideline",eventName:"enableSmartGuideline"}),O=()=>(0,i.L9)({eventAction:"clickSearchMaps",eventName:"clickSearchMaps"}),F=()=>(0,i.L9)({eventAction:"insertTaskInfo",eventName:"insertTaskInfo"}),R=()=>(0,i.L9)({eventAction:"removeTaskInfo",eventName:"removeTaskInfo"}),z=()=>(0,i.L9)({eventAction:"enableAutoCalculate",eventName:"enableAutoCalculate"}),J=()=>(0,i.L9)({eventAction:"disableAutoCalculate",eventName:"disableAutoCalculate"}),H=()=>(0,i.L9)({eventAction:"disableDisplayinTopic",eventName:"disableDisplayinTopic"}),$=()=>(0,i.L9)({eventAction:"enableDisplayinTopic",eventName:"enableDisplayinTopic"})},59474:(e,t,n)=>{"use strict";n.d(t,{i:()=>a});var i=n(77412),r=n(2954);const a=(0,i.Q_)("bootstrap",(()=>{const e=(0,r.iH)(!1),t=(0,r.iH)(0);return{ready:e,markReady:()=>e.value=!0,pendingJobs:t,startJob:()=>t.value+=1,endJob:()=>t.value-=1}}))},65428:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var i=n(54856),r=n(77412),a=n(2954),o=n(90435);const s=(0,r.Q_)("fonts",(()=>{const e=(0,a.iH)(!1),t=(0,a.iH)({systemFonts:{},vanaFonts:{}});return{loaded:e,markLoaded:()=>e.value=!0,getLoadedFonts:async()=>{if(!t.value||Object.keys(t.value.systemFonts).length<=0&&Object.keys(t.value.vanaFonts).length<=0){const e=await(0,o.he)(i.qz);t.value=e}return t.value}}}))},7710:(e,t,n)=>{"use strict";n.d(t,{l:()=>a});var i=n(77412),r=n(2954);const a=(0,i.Q_)("query",(()=>{const e=(0,r.iH)({});return{query:e,setQuery:t=>{e.value=t}}}))},2563:(e,t,n)=>{"use strict";n.d(t,{O:()=>a});var i=n(77412),r=n(2954);const a=(0,i.Q_)("renderer-app",(()=>{const e=(0,r.iH)(!1),t=(0,r.XI)([]),n=(0,r.XI)({}),i=(0,r.XI)([]);return{ignoreAppearanceChanged:e,updateIgnoreAppearance:t=>{e.value=t},builtinFontFamilies:t,updateBuiltinFontFamilies:e=>t.value=e,allFonts:n,updateAllFonts:e=>n.value=e,fontsForMindMap:i,updateFontsForMindMap:e=>i.value=e}}))},53775:(e,t,n)=>{"use strict";async function i(){await new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)}))))}async function r(e){return Promise.race([new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)})))),new Promise((t=>setTimeout(t,null!=e?e:200)))])}function a(e,t=300,n=!1){let i;function r(...t){i=void 0,n||e.apply(this,t)}const a=function(...a){void 0!==i&&clearTimeout(i),n&&!i&&e.apply(this,a),i=setTimeout(r.bind(this,...a),t)};return a.cancel=function(){void 0!==i&&(clearTimeout(i),i=void 0)},a}function o(e,t=300,n=!1){let i,r,a,o=!1;function s(){r=Date.now(),e.apply(this,a),void 0!==i&&(clearTimeout(i),i=void 0)}const c=function(...e){if(o)return;if(a=e,n&&!r)return void s.apply(this);const c=Date.now(),l=c-(null!=r?r:c);l>=t?s.apply(this):void 0===i&&(i=setTimeout(s.bind(this),t-l))};return c.cancel=function(e=!0){void 0!==i&&(clearTimeout(i),i=void 0),r=void 0,o=e},c}n.d(t,{Ds:()=>a,P2:()=>o,SX:()=>i,gH:()=>s,qJ:()=>r});const s=(e,t)=>{let n=e,i="";if("object"==typeof t){const e=new URLSearchParams;for(const n in t)e.append(n,t[n]);i=e.toString()}return n=n.includes("?")?n+"&"+i:n+"?"+i,n}},64311:(e,t,n)=>{var i=n(67537);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,n(45346).Z)("aff5a282",i,!0,{})},45346:(e,t,n)=>{"use strict";function i(e,t){for(var n=[],i={},r=0;r<t.length;r++){var a=t[r],o=a[0],s={id:e+":"+r,css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(s):n.push(i[o]={id:o,parts:[s]})}return n}n.d(t,{Z:()=>m});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,d=function(){},u=null,p="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,n,r){l=n,u=r||{};var o=i(e,t);return f(o),function(t){for(var n=[],r=0;r<o.length;r++){var s=o[r];(c=a[s.id]).refs--,n.push(c)}t?f(o=i(e,t)):o=[];for(r=0;r<n.length;r++){var c;if(0===(c=n[r]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete a[c.id]}}}}function f(e){for(var t=0;t<e.length;t++){var n=e[t],i=a[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(w(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var o=[];for(r=0;r<n.parts.length;r++)o.push(w(n.parts[r]));a[n.id]={id:n.id,refs:1,parts:o}}}}function h(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function w(e){var t,n,i=document.querySelector("style["+p+'~="'+e.id+'"]');if(i){if(l)return d;i.parentNode.removeChild(i)}if(v){var r=c++;i=s||(s=h()),t=b.bind(null,i,r,!1),n=b.bind(null,i,r,!0)}else i=h(),t=k.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}var y,g=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function b(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=g(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function k(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute(p,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},6113:e=>{"use strict";e.exports=require("crypto")},72298:e=>{"use strict";e.exports=require("electron")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")}},e=>{e.O(0,[8592,8970],(()=>{return t=25317,e(e.s=t);var t}));var t=e.O();module.exports=t}]);