(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[9050],{43240:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(23645),a=i.n(n)()((function(e){return e[1]}));a.push([e.id,".spinner-grid-content {\n  background: var(--color-mask-overlay-s, rgba(28, 40, 52, 0.05));\n}\n",""]);const o=a},99858:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(23645),a=i.n(n)()((function(e){return e[1]}));a.push([e.id,".preview-item[data-v-f3dfad82] {\n  border: 1px dashed var(--color-border-quaternary);\n  background: var(--color-fill-surface-dim);\n  background-size: contain;\n  background-position: 50% 50%;\n  border-radius: 4px;\n}\n.preview-item.loaded[data-v-f3dfad82] {\n  display: block;\n  box-shadow: 0px 2.129px 7.984px 0px rgba(0, 0, 0, 0.1), 0px 0.532px 2.129px 0px rgba(0, 0, 0, 0.05);\n  border: none;\n}\n.folder-container[data-v-f3dfad82] {\n  background: var(--color-fill-surface-dim);\n  padding: 6px;\n}\n.folder-container .preview-item-1[data-v-f3dfad82] {\n  width: 99px;\n  height: 62px;\n  top: 14px;\n  left: 24px;\n  z-index: 3;\n}\n.folder-container .preview-item-2[data-v-f3dfad82] {\n  width: 84px;\n  height: 52px;\n  transform: rotate(-8deg);\n  top: 20px;\n  left: 6px;\n  z-index: 2;\n}\n.folder-container .preview-item-3[data-v-f3dfad82] {\n  width: 84px;\n  height: 52px;\n  transform: rotate(8deg);\n  top: 20px;\n  right: 6px;\n  z-index: 1;\n}\n.middle-file-motion-enter[data-v-f3dfad82] {\n  scale: 1.1 !important;\n  transform: rotate(3deg) !important;\n  transition-property: scale transform !important;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.middle-file-motion-leave[data-v-f3dfad82] {\n  scale: 1;\n  transform: rotate(0deg);\n  transition-property: scale transform;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n.left-file-motion-move-left[data-v-f3dfad82] {\n  left: -4px !important;\n  transition-property: left !important;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.left-file-motion-move-back[data-v-f3dfad82] {\n  left: 6px;\n  transition-property: left;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n.right-file-motion-move-right[data-v-f3dfad82] {\n  right: -4px !important;\n  transition-property: right !important;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.right-file-motion-move-back[data-v-f3dfad82] {\n  right: 6px;\n  transition-property: right;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n",""]);const o=a},71683:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(23645),a=i.n(n)()((function(e){return e[1]}));a.push([e.id,".cloud-file-motion-zoom-in[data-v-3a9f531f] {\n  scale: 1.1 !important;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.cloud-file-motion-zoom-out[data-v-3a9f531f] {\n  scale: 1;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n",""]);const o=a},52212:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(23645),a=i.n(n)()((function(e){return e[1]}));a.push([e.id,".form-container .theme-category-name[data-v-3cd57d21] {\n  margin-top: 32px;\n  margin-bottom: 20px;\n  font-weight: bold;\n  font-size: 20px;\n  line-height: 25px;\n}\n.form-container .theme-category-name[data-v-3cd57d21]:first-of-type {\n  margin-top: 0;\n}\n.preview-map-list[data-v-3cd57d21] {\n  list-style: none;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-column-gap: 16px;\n  grid-row-gap: 16px;\n}\n.uk-border-rounded[data-v-3cd57d21] {\n  border-radius: 10px;\n}\n.uk-win32 .uk-border-rounded[data-v-3cd57d21] {\n  border-radius: 4px;\n}\n.title-bar[data-v-3cd57d21] {\n  height: 26px;\n  padding: 20px 26px 0;\n  top: 0;\n  z-index: 1030;\n  background: var(--color-fill-surface);\n}\n.title-bar-sticky[data-v-3cd57d21] {\n  height: 44px;\n  padding: 0 26px;\n  position: sticky;\n  border-bottom: var(--color-border-muted) 1px solid;\n  align-items: center;\n}\n.title-bar-sticky h1[data-v-3cd57d21] {\n  font-size: 15px !important;\n}\n.preview-item-desc[data-v-3cd57d21] {\n  color: var(--color-sidebar-text-subtitle);\n}\n",""]);const o=a},82863:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(23645),a=i.n(n)()((function(e){return e[1]}));a.push([e.id,".local-file-motion-zoom-in[data-v-59f236d3] {\n  scale: 1.1 !important;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-productive-standard) !important;\n  transition-duration: var(--motion-duration-medium-1) !important;\n}\n.local-file-motion-zoom-out[data-v-59f236d3] {\n  scale: 1;\n  transition-property: scale;\n  transition-timing-function: var(--motion-easing-expressive-exit);\n  transition-duration: var(--motion-duration-medium-1);\n}\n",""]);const o=a},62705:(e,t,i)=>{var n=i(55639).Symbol;e.exports=n},44239:(e,t,i)=>{var n=i(62705),a=i(89607),o=i(2333),r=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?a(e):o(e)}},27561:(e,t,i)=>{var n=i(67990),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},31957:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},89607:(e,t,i)=>{var n=i(62705),a=Object.prototype,o=a.hasOwnProperty,r=a.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),i=e[s];try{e[s]=void 0;var n=!0}catch(e){}var a=r.call(e);return n&&(t?e[s]=i:delete e[s]),a}},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:(e,t,i)=>{var n=i(31957),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},67990:e=>{var t=/\s/;e.exports=function(e){for(var i=e.length;i--&&t.test(e.charAt(i)););return i}},23279:(e,t,i)=>{var n=i(13218),a=i(7771),o=i(14841),r=Math.max,s=Math.min;e.exports=function(e,t,i){var l,d,u,c,p,m,f=0,v=!1,h=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var i=l,n=d;return l=d=void 0,f=t,c=e.apply(n,i)}function b(e){var i=e-m;return void 0===m||i>=t||i<0||h&&e-f>=u}function y(){var e=a();if(b(e))return _(e);p=setTimeout(y,function(e){var i=t-(e-m);return h?s(i,u-(e-f)):i}(e))}function _(e){return p=void 0,g&&l?x(e):(l=d=void 0,c)}function k(){var e=a(),i=b(e);if(l=arguments,d=this,m=e,i){if(void 0===p)return function(e){return f=e,p=setTimeout(y,t),v?x(e):c}(m);if(h)return clearTimeout(p),p=setTimeout(y,t),x(m)}return void 0===p&&(p=setTimeout(y,t)),c}return t=o(t)||0,n(i)&&(v=!!i.leading,u=(h="maxWait"in i)?r(o(i.maxWait)||0,t):u,g="trailing"in i?!!i.trailing:g),k.cancel=function(){void 0!==p&&clearTimeout(p),f=0,l=m=d=p=void 0},k.flush=function(){return void 0===p?c:_(a())},k}},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},33448:(e,t,i)=>{var n=i(44239),a=i(37005);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},7771:(e,t,i)=>{var n=i(55639);e.exports=function(){return n.Date.now()}},14841:(e,t,i)=>{var n=i(27561),a=i(13218),o=i(33448),r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var i=s.test(e);return i||l.test(e)?d(e.slice(2),i?2:8):r.test(e)?NaN:+e}},41265:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});i(4321);const n=(0,i(51900).Z)({},(function(){this._self._c;return this._m(0)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"uk-flex uk-flex-column uk-flex-center uk-flex-middle uk-height-1-1 uk-width-1-1"},[t("div",{staticClass:"uk-margin-small-bottom uk-height-1-1 uk-width-1-1 spinner-grid-content",staticStyle:{"border-radius":"8px"}}),e._v(" "),t("div",{staticClass:"uk-margin-xsmall-bottom spinner-grid-content",staticStyle:{width:"108px",height:"14px","border-radius":"2px"}}),e._v(" "),t("div",{staticClass:"spinner-grid-content",staticStyle:{width:"56px",height:"14px","border-radius":"2px"}})])}],!1,null,null,null).exports},90029:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(2954);const a=(0,n.aZ)({__name:"visibility-sensor",props:{options:{default:()=>({})}},emits:["change"],setup(e,{emit:t}){const i=e,a=(0,n.iH)(null);let o=null;return(0,n.bv)((async()=>{if(await new Promise((e=>setTimeout(e,0))),!a.value)return;let e=0,n=0,r=null;o=new IntersectionObserver((([i])=>{const a=i.isIntersecting,o=i.boundingClientRect.top;a?(e=i.boundingClientRect.top,0!==n&&(r=o>n?"top":"bottom")):(n=i.boundingClientRect.top,0!==e&&(r=o>e?"top":"bottom")),t("change",{visible:a,direction:r})}),i.options),o.observe(a.value)})),(0,n.Jd)((()=>{o&&o.disconnect()})),{__sfc:!0,props:i,emit:t,entryContainer:a,io:o}}});const o=(0,i(51900).Z)(a,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"entryContainer"},[e._t("default")],2)}),[],!1,null,null,null).exports},28534:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var n=i(2954),a=i(23279),o=i.n(a),r=i(96829),s=i(20993);const l=(0,n.aZ)({__name:"map-search",props:{disabled:{type:Boolean,default:!1}},emits:["change","active-change"],setup(e,{emit:t}){const i=(0,n.iH)(`search-input-${(0,r.hb)()}`),a=(0,n.iH)(!1),l=(0,n.iH)(""),d=(0,n.iH)(!1),u=o()((e=>{d.value||t("change",e)}),300);return{__sfc:!0,emit:t,searchInputId:i,isSearchInputVisible:a,searchContent:l,inputMethodInputting:d,debounceChangeSearchContent:u,changeSearchContent:e=>{l.value=e,u(e)},openSearchInput:()=>{(0,s.yo)(),l.value="",a.value=!0,t("active-change",!0),setTimeout((()=>{var e;null===(e=document.getElementById(i.value))||void 0===e||e.focus()}))},closeSearchInput:()=>{l.value||(a.value=!1,t("active-change",!1))}}}});const d=(0,i(51900).Z)(l,(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return i.isSearchInputVisible?t("vk-input",{staticStyle:{width:"226px"},attrs:{id:i.searchInputId,prefix:"search",placeholder:e.$T("Search maps and folders"),disabled:e.disabled,value:i.searchContent},on:{compositionstart:function(e){i.inputMethodInputting=!0},compositionend:function(e){i.inputMethodInputting=!1},blur:i.closeSearchInput,input:i.changeSearchContent}}):t("button",{staticClass:"vk-button-tile",attrs:{disabled:e.disabled},on:{click:i.openSearchInput}},[t("span",{attrs:{"uk-icon":"search"}})])}),[],!1,null,"61a1855d",null).exports},27e3:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=(0,i(51900).Z)({},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"uk-width-1-1 uk-height-1-1 uk-flex uk-flex-middle uk-flex-center"},[t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle"},[t("span",{staticStyle:{color:"var(--color-empty-text)"},attrs:{"uk-icon":"icon: note; ratio: 1.6"}}),e._v(" "),t("div",{staticClass:"typography-body-small",staticStyle:{"margin-top":"var(--spacing-margin-xxs)",color:"var(--color-empty-text)"}},[e._v("\n      "+e._s(e.$T("No xmind files found"))+"\n    ")])])])}),[],!1,null,null,null).exports},73679:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var n=i(2954),a=i(5893),o=i(90029),r=i(41265),s=i(69931),l=i(62004);const d=(0,n.aZ)({__name:"cloud-thumbnail-item",props:{fileId:null,version:{default:""}},setup(e){const t=e,i=(0,n.iH)(!1),a=(0,n.iH)(!1),o=(0,n.Fl)((()=>{const e=(0,s.ju)("static/assets/images/new/thumbnail.svg"),n=(0,l.Y)().getThumbnailURL({fileId:t.fileId,version:t.version});return i.value?e:n}));return{__sfc:!0,props:t,isError:i,isHovered:a,previewURL:o}}});i(66770);var u=i(51900);const c=(0,u.Z)(d,(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("img",{staticClass:"uk-width-1-1 uk-height-1-1",class:{"cloud-file-motion-zoom-in":i.isHovered,"cloud-file-motion-zoom-out":!i.isHovered},staticStyle:{"object-fit":"cover"},attrs:{src:i.previewURL,draggable:"false"},on:{contextmenu:function(t){return e.$emit("contextmenu")},error:function(e){i.isError=!0},mouseenter:function(e){i.isHovered=!0},mouseleave:function(e){i.isHovered=!1}}})}),[],!1,null,"3a9f531f",null).exports;var p=i(67159);const m=(0,n.aZ)({__name:"cloud-folder-item",props:{folderId:null,isTrashFolder:{type:Boolean}},setup(e){const t=e,{folderMap:i}=(0,p.nu)(),{refreshTrash:a,trash:o}=(0,p.tc)(),r=(0,n.iH)(!1),s=(0,n.Fl)((()=>{var e,n;return t.isTrashFolder?(null===(e=o.value[t.folderId])||void 0===e?void 0:e.fileItems)||[]:(null===(n=i.value[t.folderId])||void 0===n?void 0:n.fileItems)||[]})),d=(0,n.Fl)((()=>s.value?s.value.slice(0,3):[])),u=(0,n.Fl)((()=>Array.from({length:3},((e,t)=>t)).map((e=>{var t,i,n;const a=d.value[e];return a?(0,l.Y)().getThumbnailURL({fileId:a.fileId,version:null!==(n=null!==(i=null===(t=a.meta)||void 0===t?void 0:t.forceUpdateKey)&&void 0!==i?i:a.modifiedTime)&&void 0!==n?n:""}):""}))));return(0,n.bv)((()=>{t.isTrashFolder&&a(t.folderId)})),{__sfc:!0,props:t,folderMap:i,refreshTrash:a,trash:o,MAX_PREVIEW_FILES:3,isHovered:r,fileItems:s,previewFiles:d,previewURLs:u,handleThumbnailLoad:e=>{e.target.classList.add("loaded")}}}});i(21462);const f=(0,u.Z)(m,(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{staticClass:"folder-container uk-width-1-1 uk-height-1-1 uk-position-relative",on:{mouseenter:function(e){i.isHovered=!0},mouseleave:function(e){i.isHovered=!1}}},e._l(i.previewURLs,(function(e,n){return t("div",{staticClass:"uk-position-absolute preview-item",class:{[`preview-item-${n+1}`]:!0,"middle-file-motion-enter":i.isHovered&&0===n,"middle-file-motion-leave":!i.isHovered&&0===n,"left-file-motion-move-left":i.isHovered&&1===n,"left-file-motion-move-back":!i.isHovered&&1===n,"right-file-motion-move-right":i.isHovered&&2===n,"right-file-motion-move-back":!i.isHovered&&2===n},attrs:{"data-src":e,"uk-img":""},on:{load:i.handleThumbnailLoad}})})),0)}),[],!1,null,"f3dfad82",null).exports;const v=(0,n.aZ)({__name:"local-file-item",props:{src:null},setup:e=>({__sfc:!0,isHovered:(0,n.iH)(!1)})});i(22074);const h=(0,u.Z)(v,(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("img",{staticClass:"uk-width-1-1 uk-height-1-1 preview-item",class:{"local-file-motion-zoom-in":i.isHovered,"local-file-motion-zoom-out":!i.isHovered},attrs:{src:e.src,tabindex:"-1",draggable:"false"},on:{mouseenter:function(e){i.isHovered=!0},mouseleave:function(e){i.isHovered=!1}}})}),[],!1,null,"59f236d3",null).exports,g=(0,n.aZ)({__name:"index",props:{itemIdPrefix:{default:""},selectItemId:{default:""},previews:null,isShowLabel:{type:Boolean,default:!1},selectFirst:{type:Boolean,default:!1},title:{default:""},isLoading:{type:Boolean,default:!1},previewContainerStyle:null},emits:["select","submit","contextmenu","contextmenu-blank","load-more","sticky"],setup(e,{emit:t}){const i=e,s=(0,n.iH)(null),l=(0,n.iH)(null),d=(0,n.iH)(!1),u=(0,n.iH)(!0),p=(0,n.Fl)((()=>!i.previews.length)),m=e=>{s.value=e,t("select",e)};return(0,n.bv)((()=>{i.selectFirst&&m(i.previews[0]&&i.previews[0].items[0])})),(0,n.YP)((()=>[i.selectItemId,i.previews]),(([e])=>{if(e){const t=i.previews.flatMap((e=>e.items)).find((t=>t.id===e));t&&m(t)}}),{immediate:!0}),{__sfc:!0,props:i,emit:t,selectedItem:s,container:l,titleBarSticky:d,atTop:u,isPreviewItemsEmpty:p,handleSelectItem:m,handleSubmit:()=>{t("submit",s.value)},handleScrollTop:({visible:e})=>{u.value=e},handleScrollBottom:({visible:e})=>{e&&t("load-more")},handleTitleBarVisible:({visible:e})=>{d.value=!e,t("sticky",!e)},getFileNameDisplay:a.Uy,VisibilitySensor:o.Z,SpinnerSkeletonGrid:r.Z,CloudThumbnailItem:c,CloudFolderItem:f,LocalFileItem:h}}});i(40868);const x=(0,u.Z)(g,(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{ref:"container",staticClass:"uk-height-1-1 uk-flex uk-flex-column",on:{contextmenu:function(e){return i.emit("contextmenu-blank")}}},[t(i.VisibilitySensor,{staticClass:"uk-width-1-1",on:{change:i.handleScrollTop}}),e._v(" "),e._t("header"),e._v(" "),e.title?t("div",{staticClass:"uk-flex uk-flex-between uk-flex-bottom title-bar",class:{"title-bar-sticky":i.titleBarSticky}},[t("span",{staticClass:"uk-flex uk-width-expand uk-flex-middle"},[e._t("title-before"),e._v(" "),t("h1",{staticClass:"uk-margin-remove uk-text-truncate typography-headline-small"},[e._v("\n        "+e._s(e.title)+"\n      ")]),e._v(" "),e._t("title-after")],2),e._v(" "),e._t("title-bar-right")],2):e._e(),e._v(" "),e._t("preview-before"),e._v(" "),t("div",{staticClass:"uk-height-expand uk-overflow-overlay",staticStyle:{padding:"20px 24px 24px"},style:e.previewContainerStyle},[e._t("preview-header"),e._v(" "),t("form",{staticClass:"uk-panel form-container",class:{"uk-height-1-1":e.isLoading||i.isPreviewItemsEmpty},on:{submit:function(e){return e.preventDefault(),i.handleSubmit.apply(null,arguments)}}},[t(i.VisibilitySensor,{attrs:{options:{root:i.container}},on:{change:i.handleTitleBarVisible}}),e._v(" "),t("div",{staticClass:"uk-height-1-1",attrs:{"uk-list-select":"","uk-traverse":"","data-traverse-mode":"nearest-item","data-item":".preview-item","data-form":"true"}},[e.isLoading?t("ul",{staticClass:"uk-margin-remove uk-padding-remove uk-height-1-1 preview-map-list"},e._l(16,(function(e){return t("li",{key:`skeleton-${e}`},[t(i.SpinnerSkeletonGrid)],1)})),0):i.isPreviewItemsEmpty?[e._t("placeholder")]:e._l(e.previews,(function(n){return[e.isShowLabel&&n.label?t("h3",{key:n.label,staticClass:"theme-category-name"},[e._v("\n            "+e._s(n.label)+"\n          ")]):e._e(),e._v(" "),t("ul",{staticClass:"uk-margin-remove uk-padding-remove preview-map-list"},[e._t("list-header",null,{tabindex:"-1"}),e._v(" "),e._l(n.items,(function(n){return t("li",{key:n.id},[t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle"},[t("div",{staticClass:"vk-card vk-size-large uk-padding-remove",class:{"is-active":n.id===(i.selectedItem&&i.selectedItem.id)},style:{"--card-width":"145px","--card-height":"93px"},attrs:{id:`${e.itemIdPrefix}${n.id}`,tabindex:"-1"},on:{click:function(e){return i.handleSelectItem(n)},dblclick:function(e){return e.preventDefault(),i.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"vk-card-inner",on:{contextmenu:function(t){return t.stopPropagation(),e.$emit("contextmenu",n)}}},[n.fromCloud&&"file"===n.type?t(i.CloudThumbnailItem,{attrs:{"file-id":n.id,version:n.forceUpdateKey??n.modifiedTime??""}}):n.fromCloud&&"folder"===n.type?t(i.CloudFolderItem,{attrs:{"folder-id":n.id,"is-trash-folder":n.isTrashFolder}}):t(i.LocalFileItem,{style:{"object-fit":"file"===n.type?"cover":"none"},attrs:{src:n.previewURL}})],1)]),e._v(" "),t("div",{staticClass:"uk-text-center uk-card-selectable-text uk-text-truncate uk-margin-small-top typography-body-medium",staticStyle:{width:"150px"},attrs:{title:i.getFileNameDisplay(n.name)}},[n.fileIcon?t("span",{attrs:{"uk-svg":"","data-src":n.fileIcon}}):e._e(),e._v("\n                  "+e._s(i.getFileNameDisplay(n.name))+"\n                ")]),e._v(" "),n.description?t("div",{staticClass:"preview-item-desc typography-caption-caption"},[e._v("\n                  "+e._s(n.description)+"\n                ")]):e._e()])])})),e._v(" "),e._t("list-footer")],2)]})),e._v(" "),t(i.VisibilitySensor,{attrs:{options:{root:i.container}},on:{change:i.handleScrollBottom}})],2)],1)],2),e._v(" "),e._t("footer")],2)}),[],!1,null,"3cd57d21",null).exports},29050:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var n=i(2954),a=i(54856),o=(i(96829),i(90435)),r=i(23352),s=i(86842),l=i(67159),d=i(27e3),u=i(73679),c=i(57507),p=i(87141),m=i(72298),f=i(62004),v=i(28534);const h=(0,n.aZ)({__name:"shared-maps",props:{isActive:{type:Boolean}},setup(e){const t=e,i=(0,r.ZP)("shared-maps"),h=(0,s.C)().T,g=(0,n.iH)([]),x=(0,n.iH)(""),{user:b}=(0,p.c7)(),{renameFile:y,shareFile:_}=(0,l.MP)(),{moveDriveToTrash:k,showMapLocation:w}=(0,l.nu)(),{showNormalFailureToast:I,showCopySuccessToast:S,showUnableConnectToast:C}=(0,l.pm)(),{myWorks:T,teams:F}=(0,l.t7)(),M=(0,n.iH)(!1),H=(0,n.iH)(!1),Z=(0,n.Fl)((()=>!g.value.length&&M.value)),P=(0,n.Fl)((()=>{const e=x.value?g.value.filter((e=>e.name.includes(x.value))):g.value;return 0===e.length?[]:[{items:e}]})),L=({fileId:e,name:t,teamId:i,teammateRole:n,modifiedTime:a,type:o,xmindId:r,parentFolderId:s,meta:l})=>({id:e,name:t,teamId:i,teammateRole:n,modifiedTime:a,type:o,xmindId:r,parentFolderId:s,forceUpdateKey:null==l?void 0:l.forceUpdateKey,fromCloud:!0}),R=async()=>{M.value=!0;try{const e=await o.ZP.fetch(a.rM.LIST_FILES_SHARED_WITH_ME);if(!(null==e?void 0:e.files))return;g.value=e.files.sort(((e,t)=>new Date(t.modifiedTime).getTime()-new Date(e.modifiedTime).getTime())).map((e=>L(e)))}catch(e){i.error("refreshShareList failed",e),C()}finally{M.value=!1}};return(0,n.YP)((()=>t.isActive),(e=>{e&&R()}),{immediate:!0}),{__sfc:!0,props:t,logger:i,$T:h,sharedMapsItems:g,searchContent:x,user:b,renameFile:y,shareFile:_,moveDriveToTrash:k,showMapLocation:w,showNormalFailureToast:I,showCopySuccessToast:S,showUnableConnectToast:C,myWorks:T,teams:F,isRequesting:M,isRefreshing:H,isInitinting:Z,sharedMapsItemsPreviews:P,toMapPreviewItem:L,createFromSharedMaps:async({id:e})=>{o.ZP.fetch(a.NF,{source:`cloud://host.xmind.app/${e}`}).then((()=>{window.close()}))},refreshShareList:R,handleContextMenu:e=>{const t=e.xmindId===b,i=[...F.value,T.value].find((t=>t.teamId===e.teamId)),n=!!i,r=[{label:h("Share"),click:()=>_({fileId:e.id,fileName:e.name,teamId:e.teamId,fileOwner:e.xmindId,isTeamOwner:"owner"===(null==i?void 0:i.role)})},{label:h("Show Map Location"),click:()=>w({teamId:e.teamId,folderId:e.parentFolderId,fileId:e.id}),disabled:!n},{label:h("Rename"),click:async()=>{await y(e.id,e.name),await R()}},{label:h("Move to Trash"),click:async()=>{await k({fileId:e.id}),await R()}}],s=[{label:h("Share"),click:()=>_({fileId:e.id,fileName:e.name,teamId:e.teamId,fileOwner:e.xmindId,isTeamOwner:"owner"===(null==i?void 0:i.role)})},{label:h("Copy Share Link"),click:()=>{const t=(0,f.Y)().getShareLink({fileId:e.id,fileName:e.name});m.clipboard.writeText(t),S()}},{label:h("Show Map Location"),click:()=>w({teamId:e.teamId,folderId:e.parentFolderId,fileId:e.id}),disabled:!n},{label:h("Remove Me"),click:async()=>{try{const{result:t}=await o.ZP.fetch(a.Fx,{name:"dialog-confirm",wait:!0,parentId:window.id,query:{type:"leave-collaboration"}});if(!(null==t?void 0:t.confirm))return;await o.ZP.fetch(a.rM.REMOVE_SESSION_USER_FROM_INVITEES,{fileId:e.id}),await R()}catch(e){I()}}}],l=(t?r:s).filter((e=>!e.disabled));(0,c.k)(l)},showRefreshMenu:()=>{(0,c.k)([{label:h("Refresh"),click:()=>{H.value=!0,R().finally((()=>{H.value=!1}))}}])},PlaceholderNoFile:d.Z,PreviewMaps:u.Z,MapSearch:v.Z}}});const g=(0,i(51900).Z)(h,(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.PreviewMaps,{attrs:{title:i.$T("Shared Maps"),previews:i.sharedMapsItemsPreviews,"is-loading":i.isInitinting||i.isRefreshing},on:{submit:i.createFromSharedMaps,contextmenu:i.handleContextMenu,"contextmenu-blank":i.showRefreshMenu},scopedSlots:e._u([{key:"title-bar-right",fn:function(){return[t(i.MapSearch,{attrs:{disabled:i.isInitinting||i.isRefreshing},on:{change:function(e){i.searchContent=e}}})]},proxy:!0},{key:"placeholder",fn:function(){return[t(i.PlaceholderNoFile,{staticStyle:{"margin-top":"-23px"}})]},proxy:!0}])})}),[],!1,null,null,null).exports},4321:(e,t,i)=>{var n=i(43240);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(45346).Z)("19fa9b8f",n,!0,{})},21462:(e,t,i)=>{var n=i(99858);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(45346).Z)("ac660d4c",n,!0,{})},66770:(e,t,i)=>{var n=i(71683);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(45346).Z)("199cd804",n,!0,{})},40868:(e,t,i)=>{var n=i(52212);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(45346).Z)("2c728eae",n,!0,{})},22074:(e,t,i)=>{var n=i(82863);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(45346).Z)("8d840518",n,!0,{})}}]);