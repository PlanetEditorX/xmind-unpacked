"use strict";(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[6103],{11632:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(77412),a=n(63111),o=n(82647),r=n(54856),s=n(90435),c=n(87141);const d=[a.Zr.E_KEY_BIND_TO_ANOTHER_MACHINE,a.Zr.E_KEY_NOT_EXIST],l={data:()=>({licenseKey:"",email:"",validity:a.lX.VALID,serverStatus:a.Zr.VALID,activating:!1}),computed:{...(0,i.rn)(c.Yh,{validatePerMachineLicenseKey:e=>e.validatePerMachineLicenseKey,parsePerMachineLicenseData:e=>e.parsePerMachineLicenseData,validatePerMachineLicenseData:e=>e.validatePerMachineLicenseData}),canActivate(){return this.licenseKey&&this.email&&!this.activating},errMsg(){if(this.validity!==a.lX.VALID){switch(this.validity){case a.lX.E_KEY_INVALID:return this.$T("Invalid license. Please enter a correct email and key.");case a.lX.E_OUTDATED:return this.$T("Please enter a valid license key.");case a.lX.E_MAJOR_VERSION_UNMATCHED:return this.$T("This license key cannot be used in this version of Xmind.");case a.lX.E_MACHINE_ID_UNMATCHED:return this.$T("Failed to obtain device information to bind to this license key.")}return this.$T("Unexpected error occurred during activating license.")}if(this.serverStatus!==a.Zr.VALID){switch(this.serverStatus){case a.Zr.E_KEY_BIND_TO_ANOTHER_MACHINE:return this.$T("This license key is already bound with another device.");case a.Zr.E_KEY_NOT_EXIST:return this.$T("Activation failed, please check your Email and license key.");case a.Zr.E_PARAM_MISSING:return this.$T("Unexpected error occurred during activating license.");case a.Zr.E_SERVER_ERR:return this.$T("Can't connect with Xmind server, please try again later.")}return this.$T("Network error or other unexpected error. Please try again later.")}return""}},methods:{submitForm(e){return e.preventDefault(),e.returnValue=!1,this.$safeRun((()=>this.activate())),!1},async activate(){if(this.canActivate){this.activating=!0;try{this.validity=a.lX.VALID,this.serverStatus=a.Zr.VALID;const e=(0,o.Nc)(this.licenseKey),t=this.email.trim();let n;try{n=await s.ZP.fetch(r.lf.SME_LICENSE_ACTIVATE,{key:e,email:t})}catch(i){if(d.includes(i.code))return void(this.serverStatus=i.code);n={key:e,email:t}}try{let e=this.parsePerMachineLicenseData(n);this.validity=this.validatePerMachineLicenseData(e)}catch(e){this.validity=a.lX.E_KEY_INVALID}if(this.validity!==a.lX.VALID)return;await Promise.all([s.ZP.fetch(r.Pp,{mutations:[{id:"activation",type:"updateRawPerMachineLicenseData",payload:[{rawData:{...n,email:t}}]}]}),s.ZP.fetch((0,r.iM)(window.id),{success:!0})]),setTimeout((()=>window.close()),0),await s.ZP.fetch(r.Fx,{name:"dialog-congratulate"})}finally{this.activating=!1}}}}}},40334:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(63111),a=n(54856),o=n(96829),r=n(87141),s=n(90435);const c={computed:{},watch:{touchBarItems(e){this.updateTouchBarItems(e)}},methods:{updateTouchBarItems(e){const t=e=>{const t=e.click;let n=this._touchBarRoutes[t];return n||(n={method:t,endpoint:(0,a.A6)(window.id,(0,o.rs)(t))},this._touchBarRoutes[t]=n),n.unroute||(n.unroute=s.ZP.route(n.endpoint,this[t])),Object.assign({},e,{click:n.endpoint})};e=(e||this.touchBarItems||[]).map((e=>("button"!==e.type||"string"!=typeof e.click||i.sq.includes(e.click)||e.click.startsWith("command:")?"buttons"===e.type&&(e={...e,buttons:e.buttons.map((e=>"string"!=typeof e.click||i.sq.includes(e.click)||e.click.startsWith("command:")?e:t(e)))}):e=t(e),e))),(0,r.JS)("window")?.().updateTouchBarItems(e)}},beforeCreate(){this._touchBarRoutes={}},mounted(){this.updateTouchBarItems()},beforeDestroy(){Object.values(this._touchBarRoutes).forEach((({unroute:e})=>e&&e())),this._touchBarRoutes={}}}},70714:(e,t,n)=>{n.r(t);var i=n(59042),a=n(40334),o=n(11632),r=n(87141);const s={mixins:[a.Z,o.Z],data(){return{illustrationImageURL:this.$toResourceURL("static/assets/images/license-dialog-illustration.png"),illustrationHDImageURL:`${this.$toResourceURL("static/assets/images/license-dialog-illustration.png")} 1x, ${this.$toResourceURL("static/assets/images/license-dialog-illustration@2x.png")} 2x`}},computed:{appearance:()=>(0,r.S)().appearance,touchBarItems(){return[{type:"space",size:"flexible"},{type:"button",label:this.$T("Cancel"),click:"close"},{type:"button",label:this.$T("Activate"),backgroundColor:"primary",click:"activate"},{type:"space",size:"flexible"}]}}};const c=(0,n(51900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"vk-window-dialog vk-window-secondary",attrs:{id:"app"}},[t("div",{staticClass:"vk-window-title-bar vk-window-title-bar-floating"},[t("window-control-button-group")],1),e._v(" "),t("div",{staticClass:"vk-window-body uk-flex uk-child-width-expand"},[t("article",{staticClass:"uk-flex uk-height-1-1"},[t("div",{staticClass:"uk-height-1-1 uk-flex-no-shrink"},[t("img",{staticClass:"uk-height-1-1",attrs:{draggable:"false",src:e.illustrationImageURL,srcset:e.illustrationHDImageURL}})]),e._v(" "),t("div",{staticClass:"uk-width-expand uk-margin-large-top uk-margin-large-bottom uk-padding-large"},[t("div",{staticClass:"uk-height-1-1 uk-flex uk-flex-column"},[t("h1",{staticClass:"uk-margin-bottom"},[e._v("\n            "+e._s(e.$T("Enter License"))+"\n          ")]),e._v(" "),t("div",[e._v("\n            "+e._s(e.$T("Enter license to activate your Xmind Pro on this device."))+"\n          ")]),e._v(" "),t("form",{staticClass:"uk-form-stacked",staticStyle:{"margin-top":"40px"},attrs:{id:"per_machine_license_form"},on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[t("div",{staticClass:"uk-margin"},[t("label",{staticClass:"uk-form-label"},[e._v(e._s(e.$T("Email")+e.$T(":")))]),e._v(" "),t("div",{staticClass:"uk-form-controls"},[t("vk-input",{attrs:{autofocus:!0,value:e.email},on:{input:function(t){e.email=t}}})],1)]),e._v(" "),t("div",{staticClass:"uk-margin uk-margin-remove-bottom"},[t("label",{staticClass:"uk-form-label"},[e._v(e._s(e.$T("License Key")+e.$T(":")))]),e._v(" "),t("div",{staticClass:"uk-form-controls vk-input-container"},[t("textarea",{staticClass:"vk-textarea",staticStyle:{height:"122px"},domProps:{value:e.licenseKey},on:{input:function(t){e.licenseKey=t.target.value}}})])])]),e._v(" "),t("p",{staticClass:"uk-text-danger uk-margin-remove-top"},[e._v("\n            "+e._s(e.errMsg||"Â ")+"\n          ")]),e._v(" "),t("button",{staticClass:"vk-button-secondary uk-size-large",attrs:{type:"submit",form:"per_machine_license_form",disabled:!e.canActivate}},[e.activating?t("span",{staticClass:"uk-margin-small-right",attrs:{"uk-spinner":"ratio: 0.6"}}):e._e(),e._v("\n            "+e._s(e.$T("Activate"))+"\n          ")])])])])])])}),[],!1,null,null,null).exports;(0,i.Z)(c,{name:"dialog-license"})},59042:(e,t,n)=>{n.d(t,{Z:()=>he});var i=n(47311),a=n(23352),o=n(90435);const r=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",s=(0,a.ZP)(`error:${r}`),c=new i.q(s,{ipc:o.ZP});window.addEventListener("error",(function(e){const t=e.error;t&&c.handle(t)})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason;t&&c.handle(t)}));const d=c;var l=n(2954),u=n(63477),v=n.n(u),p=n(72298),m=n(67657),w=n(13780),h=n.n(w),f=n(30266),y=n(86396),g=n(31945),b=n(54856),k=n(73884),L=n(28914),A=n(56222),E=n(79409),P=n(65114),Z=n(77412);const _={install(e){const t="vana-ref";e.directive(t,{bind:function(e,t,n){t.value(n.componentInstance||e,n.key)},update:function(e,n,i,a){if(a.data&&a.data.directives){var o=a.data.directives.find((function(e){return e.name===t}));if(o&&o.value!==n.value)return o&&o.value(null,a.key),void n.value(i.componentInstance||e,i.key)}i.componentInstance===a.componentInstance&&i.elm===a.elm||n.value(i.componentInstance||e,i.key)},unbind:function(e,t,n){t.value(null,n.key)}})}};var T=n(87141);const I={install(e){e.prototype.$T=function(e,...t){return(0,T.JE)().T(e,...t)}}};var S=n(96829);const C=(0,a.ZP)("safe-runner");const N=class{constructor(e){this.errorHandler=e}_handleError(e){"function"==typeof this.errorHandler?this.errorHandler(e):C.error((0,S.SC)(e))}install(e){const t=this;e.prototype.$safeRun=function(e){try{let n=e();return n&&n.then&&n.catch?n.then((e=>e)).catch((e=>t._handleError(e))):n}catch(e){t._handleError(e)}}}};var x=n(69931);const $={install(e){e.prototype.$toResourceURL=(...e)=>(0,x.ju)(...e).replace("(","%28").replace(")","%29"),e.prototype.$loadResource=x.zD}};var D=n(53775),R=n(59474);var F=n(30247),O=n(2563),z=n(65428);const J=(0,a.ZP)("font");var M=n(22037),B=n.n(M),j=n(38629);const q=(0,a.ZP)("performance");function H(e){e?document.body.style.setProperty("--uk-system-accent-color",e):document.body.style.removeProperty("--uk-system-accent-color")}var X=n(63111),Y=n(18621),V=n(69297),W=n(20993);const K={start:()=>{const e=(0,R.i)();e.startJob();const t=(0,l.YP)((()=>e.pendingJobs),(n=>{n>0||(t(),e.markReady())}));setTimeout((()=>e.endJob()),0)}},U=(()=>{const e=[],t=new Map;return{start:()=>{const e=(0,R.i)();e.startJob(),o.ZP.fetch(b.de).then((t=>{Object.keys(t).forEach((e=>{var n;const i=(0,T.F_)(e);null===(n=null==i?void 0:i())||void 0===n||n.$patch(t[e])})),k.Z.on(P.Md,(e=>{e.forEach((({id:e,state:t})=>{var n;const i=(0,T.F_)(e);null===(n=null==i?void 0:i())||void 0===n||n.$patch((0,l.qj)(t))}))})),e.endJob()}))},plugin:n=>{(0,T.W$)(n.store.$id)&&n.store.$subscribe(((i,a)=>{if(n.store.$id!==i.storeId)return;const r=t.get(i.storeId);t.set(i.storeId,!0),(null===window||void 0===window?void 0:window.isEditorFrame)||r&&i.type!==Z.x1.patchObject&&(0,T.W$)(i.storeId)&&(e.push({id:i.storeId,state:JSON.parse(JSON.stringify(a))}),Promise.resolve().then((()=>{o.ZP.fetch(b.w6,{states:e}),e.length=0})))}))}}})(),G={start:()=>{(0,z.r)();const e=(0,x.ju)("/static/snowbird/resource/"),t=function(){const e={};return F.Fy(((t,n)=>{e[t]=n.map((e=>({...e,family:t})))})),e}(),n=Object.values(t).flat().map((t=>function({family:e,src:t,italic:n,weight:i,"unicode-range":a},o){const r=new URL(t,o).href;let s={family:e,source:`url("${r}")`,url:r};return void 0!==n&&(s={...s,style:n?"italic":"normal"}),void 0!==i&&(s={...s,weight:i.toString()}),void 0!==a&&(s={...s,unicodeRange:a}),s}(t,e)));!function(e){Promise.all(e.map((({family:e,source:t,...n})=>{const i=new FontFace(e,t,n);return i.load().then((()=>{document.fonts.add(i)})).catch((()=>{J.error("Failed to load css font from",t)}))})))}(n),function(){const e=document.createElement("style"),t=F.Hn();e.innerHTML=t,document.head.appendChild(e),document.body.style.setProperty("--info-button-font",F.o6)}(),(0,O.O)().updateBuiltinFontFamilies(Array.from(new Set(Object.keys(t))))}},Q={start:()=>{const e=(0,R.i)(),{_apr:t,_acc:n}=v().parse(location.search.slice(1));t&&(e.startJob(),q.debug("About to load CSS using _apr query parameter:",t),(0,j.Z)(t,(()=>{q.debug("Loaded CSS using _apr query parameter:",t),setTimeout((()=>{e.endJob()}),10)}))),n&&H(n),"darwin"===B().platform()&&parseFloat(B().release())>=20&&document.body.classList.add("uk-darwin-bigsur"),(0,l.YP)((()=>(0,T.S)().language),((e,t)=>{t&&document.body.classList.remove(`uk-lang-${t}`),e&&document.body.classList.add(`uk-lang-${e}`)}));const i=(0,l.YP)((()=>(0,R.i)().ready),(e=>{e&&(i(),(0,l.YP)((()=>[(0,T.S)().appearance,(0,O.O)().ignoreAppearanceChanged]),(([e,t])=>{t||(0,j.Z)(e)})),(0,l.YP)((()=>(0,T.qr)().systemAccentColor),(e=>H(e))),(0,l.YP)((()=>(0,T.S)().systemScrollbarSetting),(e=>function(e){const t="vk-scrollbar";document.body.classList.forEach((e=>{e.startsWith(t)&&document.body.classList.remove(e)})),document.body.classList.add(`${t}-${(e||"always").toLowerCase()}`)}(e)),{immediate:!0}))}))}},ee={start:()=>{X.nd&&X.qu.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>(async()=>(await o.ZP.fetch(b.QN),"interruption"))()))})),Object.keys(X.JN).concat(Object.keys(X.oF)).forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{const t=(0,T.JX)().commandById(e);return(null==t?void 0:t.provider)?(async(e,t)=>{if(!await o.ZP.fetch(b.Gy,{name:e,channel:(0,b.gk)(t)}))return"interruption"})(e,t.provider):"interruption"}))})),X.ZK.forEach((e=>{(0,T.JX)().appendAfterHandler(e,(()=>{const t=e.split(".")[1];(0,Y.L9)({eventCategory:"Edit",eventAction:t,eventValue:1})}))})),X.ff.forEach((e=>{(0,T.JX)().appendAfterHandler(e,(()=>{(0,Y.L9)({eventCategory:"Share",eventAction:e,eventValue:1})}))})),X.y_.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{(0,V.Kl)()}))})),X.xk.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{(0,V.fv)()}))})),X.wp.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{(0,V.nz)()}))})),(0,T.JX)().appendAfterHandler("editor.addTodo",W.l5),(0,T.JX)().appendAfterHandler("editor.cancelTask",W.DY),(0,T.JX)().appendAfterHandler("editor.checkTodo",(()=>{(0,W.fR)("checkTask")})),(0,T.JX)().appendAfterHandler("editor.uncheckTodo",(()=>{(0,W.fR)("uncheckTask")})),X.QL.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{if((0,T.si)().contexts["collaboration.isReadOnly"])return"interruption"}))})),X.gY.forEach((e=>{(0,T.JX)().appendBeforeHandler(e,(()=>{if((0,T.si)().contexts["collaboration.isFromCloud"])return"interruption"}))}))}},te={start:()=>{const e=(0,R.i)();e.startJob(),(0,T.JX)().injectDoHandleCommand((async(e,t)=>o.ZP.fetch(b.hR,{commandId:e,handlerArgs:t}))),e.endJob()}},ne=[U.plugin];var ie=n(7710);const ae=v().parse(window.location.search.slice(1)),oe=!0,re=!!ae.isBrowserView,se=!!ae.isEditorFrame;let ce=m.getCurrentWindow;re&&(ce=function(){const e=L.Z.sendSync("get-current-window-id");return m.BrowserWindow.fromId(parseInt(e))});const de=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",le=(0,a.ZP)("performance"),ue=(0,a.ZP)("sentry");le.debug("Initializing page:",de),p.webFrame.setVisualZoomLevelLimits(1,1),document.body.classList.add("uk-win32"),Object.defineProperty(window,"id",{get:()=>ce().id}),window.getWindowIdAsync=async()=>await(0,A.A)("get-current-window-id");window.getCurrentWindowAsync=async()=>{const e=await window.getWindowIdAsync();return m.BrowserWindow.fromId(parseInt(e))},window.isEditorFrame=se;const ve=l.ZP.observable({isBeingDestroyed:!1,isDestroyed:!1,isShown:!1});["isBeingDestroyed","isDestroyed","isShown"].forEach((e=>{Object.defineProperty(window,e,{get:()=>ve[e],set(t){ve[e]=t}})})),window.show=()=>{ce().show()},window.hide=()=>{ce().hide()},window.close=()=>{ce().close()},window.minimize=()=>{ce().minimize()},window.maximize=()=>{ce().maximize()},window.restore=()=>{ce().unmaximize()},window.isMinimized=()=>ce().isMinimized(),window.isMaximized=()=>ce().isMaximized(),window.isFullScreen=()=>ce().isFullScreen(),window.resizeTo=(e,t)=>{ce().setContentSize(e,t)},window.resizeBy=(e,t)=>{let[n,i]=ce().getContentSize();ce().setContentSize(n+e,i+t)},window.moveTo=(e,t)=>{ce().setPosition(e,t)},window.moveBy=(e,t)=>{let[n,i]=ce().getPosition();ce().setPosition(n+e,i+t)},k.Z.on("window-maximize",(()=>{document.body.classList.add("uk-window-maximized"),window.dispatchEvent(new Event("maximize"))})),k.Z.on("window-unmaximize",(()=>{document.body.classList.remove("uk-window-maximized"),window.dispatchEvent(new Event("restore"))})),k.Z.on("window-minimize",(()=>{window.dispatchEvent(new Event("minimize"))})),k.Z.on("window-unminimize",(()=>{window.dispatchEvent(new Event("unminimize"))})),k.Z.on("window-focus",(()=>{document.body.classList.remove("uk-window-inactive")})),k.Z.on("window-blur",(()=>{document.body.classList.add("uk-window-inactive")})),k.Z.on("window-enter-full-screen",(()=>{document.body.classList.add("uk-window-full-screen"),window.dispatchEvent(new Event("enter-full-screen"))})),k.Z.on("window-leave-full-screen",(()=>{document.body.classList.remove("uk-window-full-screen"),window.dispatchEvent(new Event("leave-full-screen"))})),k.Z.on("window-sheet-begin",(()=>{document.body.classList.add("uk-disabled"),window.dispatchEvent(new Event("sheet-begin"))})),k.Z.on("window-sheet-end",(()=>{document.body.classList.remove("uk-disabled"),window.dispatchEvent(new Event("sheet-end"))})),k.Z.on("window-show",(()=>{window.dispatchEvent(new Event("window-show"))})),k.Z.on(P.$r,(e=>{(0,ie.l)().setQuery(e)}));const pe=ce&&ce();if(pe&&pe.isMaximized()&&document.body.classList.add("uk-window-maximized"),pe&&pe.isFullScreen()&&document.body.classList.add("uk-window-full-screen"),pe&&!pe.isFocused()&&document.body.classList.add("uk-window-inactive"),document.addEventListener("keydown",(e=>{27===e.keyCode&&document.body.querySelector(".uk-window-dialog")&&setTimeout((()=>{if(e.defaultPrevented)return;const t=new Event("close");window.dispatchEvent(t)&&window.close()}),0)})),pe&&pe.isMaximizable&&pe.isMaximizable()){const e=["a","button","select","input"];document.addEventListener("dblclick",(t=>{const{target:n,defaultPrevented:i}=t;if(i)return;let a=n;for(;a&&"function"==typeof a.matches;){if(e.some((e=>a.matches(e))))return;a=a.parentNode}let o=document.querySelector(".vk-window-title-bar-expanded")||document.querySelector(".vk-window-title-bar");o&&o.contains(n)&&(window.isMaximized()?window.restore():window.maximize())}))}l.ZP.use(Z.og),l.ZP.use(new N((e=>d.handle(e)))),l.ZP.use(h()),l.ZP.use(I),l.ZP.use($),l.ZP.use(_),l.ZP.use(f.ZP.Plugin),le.debug("Initialized page:",de);const me=(0,Z.WB)();(0,Z.uX)(me),ne.forEach((e=>me.use(e))),Object.values(T.rx).forEach((e=>e())),K.start(),U.start(),G.start(),Q.start(),ee.start(),te.start();const we=(0,E.Z)("version").includes("beta");if(process.env.SENTRY_DSN_OF_BROWSER&&we){const e=(0,l.YP)((()=>(0,T.qr)().sentryConfig),(t=>{e();try{const e=t[process.env.SENTRY_PROJECT_OF_BROWSER]||{};y.S({Vue:l.ZP,dsn:process.env.SENTRY_DSN_OF_BROWSER,environment:"production",...e}),ue.info("init",e)}catch(e){ue.error("Failed to init sentry",e)}}),{immediate:!1})}async function he(e,{mountTarget:t="#app",name:n=null,plugins:i=[],runAfterPiniaPlugin:a,editorId:r=null,autoShow:s=!0}={}){le.debug("Bootstrapping:",de);for(let e of i)l.ZP.use(e);let c;return(0,T._t)((0,g.b3)(window.id)),"dialog-err"===n&&(0,T.VE)((0,g.zN)("dialog-err",window.id)),"dialog-problem"===n&&(0,T.ym)((0,g.zN)("dialog-problem",window.id)),r&&(0,T.OD)((0,g.aJ)(r)),await new Promise((n=>{let i=(0,l.YP)((()=>(0,R.i)().ready),(r=>{r&&(i(),document.body.classList.add(`uk-lang-${(0,T.S)().language}`),a?.(me),le.debug("About to create Vue instance:",de),c=new l.ZP({...e,pinia:me}),le.debug("Created Vue instance:",de),window.addEventListener("unload",(()=>{window.isBeingDestroyed=!0,c.$destroy(),window.isDestroyed=!0})),le.debug("About to mount Vue instance:",de),c.$mount(t||"#app"),le.debug("Mounted Vue instance:",de),(0,D.qJ)().then((async()=>{if(!s)return;const e=await window.getWindowIdAsync();!oe&&await o.ZP.fetch((0,b.EV)(e),"show"),oe&&await o.ZP.fetch((0,b.EV)(e),"moveToShow"),window.isShown=!0})),n(c))}))})),c}},94593:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(81296),a=n.n(i);const o=(0,n(23352).ZP)("ipc:proxy:"),r=new Proxy(a(),{get(e,t){let n=Reflect.get(e,t);return"function"==typeof n?(...i)=>{if(!window.isDestroyed)return n.apply(e,i);o.error(`window has been destroyed, we should not invoke fsp.${t})`)}:n}})},56222:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(72298);let a=0;function o(e,t){return new Promise((n=>{const o=a++;i.ipcRenderer.once(`internal-ipc-api-reply:${e}:${o}`,((e,{data:t=null})=>{n(t)})),i.ipcRenderer.send(`internal-ipc-api:${e}`,{payload:t,seq:o})}))}},28914:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(72298);const a=(0,n(23352).ZP)("ipc:proxy:"),o=new Proxy(i.ipcRenderer,{get(e,t){let n=Reflect.get(e,t);return"function"==typeof n?(...i)=>{if(!window.isDestroyed)return n.apply(e,i);a.error(`window has been destroyed, we should not invoke ipcRenderer.${t} with args (${JSON.stringify(i)})`)}:n}})},90435:(e,t,n)=>{n.d(t,{ZP:()=>c,he:()=>s});var i=n(96829),a=n(28914);const o=new Map;let r=0;function s(e,t){const n=o.get(e);return n?Promise.resolve().then((()=>n(t))):new Promise(((n,o)=>{const s=r++;a.Z.once(`ipc-api-reply:${e}:${s}`,((e,{error:t=null,data:a=null})=>{t?o((0,i.aq)(t)):n(a)})),a.Z.send(`ipc-api:${e}`,{payload:t,seq:s})}))}const c={fetch:s,route:function(e,t){if("function"!=typeof t)throw new Error(`IPC API "${e}" is routed to invalid handler: ${typeof t}`);if(o.has(e))throw new Error(`IPC API "${e}" is routed twice`);const n=`ipc-api:${e}`;if(a.Z.eventNames().includes(n))throw new Error(`IPC API "${e}" is routed twice`);const r=(n,{payload:o=null,seq:r=0}={})=>{const s=`ipc-api-reply:${e}:${r}`;Promise.resolve().then((()=>t(o))).then((e=>{a.Z.send(s,{data:e})})).catch((e=>{a.Z.send(s,{error:(0,i.SC)(e)})}))};return o.set(e,t),a.Z.on(n,r),a.Z.send("ipc-api-register",{apiName:e}),()=>{a.Z.send("ipc-api-unregister",{apiName:e}),a.Z.removeListener(n,r),o.delete(e)}}}},23352:(e,t,n)=>{n.d(t,{ZP:()=>d});var i=n(82134),a=n(96829),o=n(79409),r=n(72298);const s=new i.Jq(global.console,{colorful:!1}),c=new i.Yd({isDebugging:(0,o.Z)("version").indexOf("-alpha")>=0||(0,o.Z)("version").indexOf("-dev")>=0||a.x,handle(e){s.handle(e),function(e){r.ipcRenderer.send("logger:handleLogEvent",e)}(e)}}),d=(e=null)=>c.logger(e)},79409:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(71017),a=n.n(i),o=n(57147),r=n.n(o),s=n(7104);let c=null;function d(e=null){return c||(c=JSON.parse(r().readFileSync(a().join((0,s.bY)(),"package.json")))),e?c[e]:c}},69931:(e,t,n)=>{n.d(t,{Al:()=>u,ju:()=>c,pP:()=>d,zD:()=>l});var i=n(71017),a=n.n(i),o=n(94593),r=n(7104),s=n(5893);function c(e){return(0,s.u3)(a().join((0,r.bY)(),e))}function d(e){return(0,s.u3)(a().join((0,r.D8)(),e))}function l(e){return o.Z.readFile(a().join((0,r.bY)(),e))}const u=(...e)=>c(...e).replace("(","%28").replace(")","%29")},73884:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(82361),a=n.n(i),o=n(28914);const r=new(a()),s=r.emit;r.emit=function(e,...t){s.call(r,e,...t),d(e)&&o.Z.send("revents:broadcast",[e,...t])},r.on("newListener",(e=>{if(d(e)){0===r.eventNames().filter(d).length&&o.Z.send("revents:register")}})),r.on("removeListener",(e=>{if(d(e)){0===r.eventNames().filter(d).length&&o.Z.send("revents:unregister")}}));const c=r.removeAllListeners;function d(e){return"newListener"!==e&&"removeListener"!==e}r.removeAllListeners=function(e){if(!e)throw new Error("revents's removeAllListeners is forbidden!");if("newListener"===e||"removeListener"===e)throw new Error('revents\'s "newListener" and "removeListener" handler should not be removed');c.call(r,e)},o.Z.on("revents:broadcast",((e,t)=>{let n=JSON.parse(t);s.apply(r,n)})),window.addEventListener("unload",(()=>{o.Z.send("revents:unregister")}));const l=r},69297:(e,t,n)=>{n.d(t,{Do:()=>o,Kl:()=>r,N1:()=>a,fv:()=>s,nz:()=>c});var i=n(28914);function a(){return i.Z.sendSync("usage-stats:data")}function o(){i.Z.send("usage-stats:increase",{type:"dwellTimeInZenMode",value:1e3})}function r(e=1){i.Z.send("usage-stats:increase",{type:"topicsAdded",value:e})}function s(e=1){i.Z.send("usage-stats:increase",{type:"sheetsAdded",value:e})}function c(e=1){i.Z.send("usage-stats:increase",{type:"eventsTriggered",value:e})}},18621:(e,t,n)=>{n.d(t,{Fk:()=>o,L9:()=>a});var i=n(28914);function a(e){i.Z.send("usage-tracker:track-event",{event:e})}function o(e){i.Z.send("usage-tracker:track-view",{view:e})}},7104:(e,t,n)=>{n.d(t,{D8:()=>l,Im:()=>m,L2:()=>v,N8:()=>u,O1:()=>w,Xl:()=>y,bY:()=>d,d6:()=>f,tM:()=>h,tY:()=>p});var i=n(71017),a=n.n(i),o=n(72298),r=n(56222);let s=null;let c=null;function d(){return c||(c=o.ipcRenderer.sendSync("workspace:appPath")),c}function l(){return a().join((s||(s=o.ipcRenderer.sendSync("workspace:userData")),s),"vana")}function u(){return a().join(l(),"workbooks")}function v(){return a().join(l(),"file-cache")}function p(){return a().join(l(),"theme")}function m(){return a().join(l(),"smart-color")}function w(){return a().join(l(),"illustrations")}function h(){return a().join(l(),"templates")}function f(){return a().join(d(),"static/snowbird/resource/")}async function y(){return s||(s=await(0,r.A)("workspace:userData")),a().join(s,"vana","workbooks")}},38629:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(69931);function a(e,t=null){document.documentElement.setAttribute("color-scheme","default"===e?"light":"dark");if(document.querySelector("#appearance_link"))return void("function"==typeof t&&t());const n=(0,i.ju)("static/vanakit/themes/vana.css"),a=document.createElement("link");a.type="text/css",a.id="appearance_link",a.rel="stylesheet",a.href=n,a.setAttribute("data-appearance",e),"function"==typeof t&&(a.onload=()=>t()),document.head.appendChild(a)}},20993:(e,t,n)=>{n.d(t,{AZ:()=>z,Ao:()=>D,Bv:()=>f,C3:()=>E,CI:()=>J,CN:()=>Z,DY:()=>s,I1:()=>w,JC:()=>a,NK:()=>l,Pr:()=>v,TJ:()=>g,Vs:()=>_,Wr:()=>R,Xz:()=>N,Yj:()=>k,Zk:()=>u,_5:()=>C,_6:()=>P,cZ:()=>b,cx:()=>x,dx:()=>m,fR:()=>r,jB:()=>p,kI:()=>c,l5:()=>o,p3:()=>d,sF:()=>I,sG:()=>A,t0:()=>O,wH:()=>F,wp:()=>y,xG:()=>T,xg:()=>L,xy:()=>h,yo:()=>$,zH:()=>S});var i=n(18621);const a=e=>(0,i.L9)({eventName:"Gallery",eventAction:e}),o=()=>(0,i.L9)({eventAction:"insertTask",eventName:"insertTask"}),r=e=>(0,i.L9)({eventAction:"editTask",eventName:e}),s=()=>(0,i.L9)({eventAction:"cancelTask",eventName:"cancelTask"}),c=e=>(0,i.L9)({eventAction:"highlightTask",eventName:e}),d=e=>(0,i.L9)({eventAction:"insertIllustration",eventName:e}),l=e=>(0,i.L9)({eventAction:"searchIllustration",eventName:e}),u=e=>(0,i.L9)({eventAction:"insertIllustrationPro",eventName:e}),v=(e,t,n)=>(0,i.L9)({eventAction:"openTemplateType",eventName:`${e}_${t}_${n}`}),p=e=>(0,i.L9)({eventAction:"popPW",eventName:e}),m=e=>(0,i.L9)({eventAction:"clickPW",eventName:e}),w=()=>{(0,i.L9)({eventAction:"cancelOverlap"})},h=()=>(0,i.L9)({eventAction:"paymentPage"}),f=()=>(0,i.L9)({eventAction:"paymentPageCN"}),y=()=>(0,i.L9)({eventAction:"paymentSuccessful"}),g=()=>(0,i.L9)({eventAction:"paymentSuccessfulCN"}),b=e=>(0,i.L9)({eventName:"PWD-sp35-240515",eventAction:e}),k=()=>(0,i.L9)({eventAction:"sharetoCollaboration"}),L=()=>(0,i.L9)({eventAction:"sharetoEvernote"}),A=e=>(0,i.L9)({eventAction:"pweDisplay",eventName:e}),E=e=>(0,i.L9)({eventAction:"pweContinue",eventName:e}),P=e=>(0,i.L9)({eventAction:"closePwe",eventName:e}),Z=e=>(0,i.L9)({eventAction:"pweOrder",eventName:e}),_=e=>(0,i.L9)({eventAction:"purchaseSource",eventName:e}),T=e=>(0,i.L9)({eventAction:"purchaseWindow",eventName:e}),I=({region:e,productId:t})=>(0,i.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButton"+e.toLowerCase(),eventName:t}),S=({region:e,productId:t})=>(0,i.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButtonMAS"+e.toLowerCase(),eventName:t}),C=()=>(0,i.L9)({eventAction:"autoDisconnect"}),N=()=>(0,i.L9)({eventAction:"disableSmartGuideline",eventName:"disableSmartGuideline"}),x=()=>(0,i.L9)({eventAction:"enableSmartGuideline",eventName:"enableSmartGuideline"}),$=()=>(0,i.L9)({eventAction:"clickSearchMaps",eventName:"clickSearchMaps"}),D=()=>(0,i.L9)({eventAction:"insertTaskInfo",eventName:"insertTaskInfo"}),R=()=>(0,i.L9)({eventAction:"removeTaskInfo",eventName:"removeTaskInfo"}),F=()=>(0,i.L9)({eventAction:"enableAutoCalculate",eventName:"enableAutoCalculate"}),O=()=>(0,i.L9)({eventAction:"disableAutoCalculate",eventName:"disableAutoCalculate"}),z=()=>(0,i.L9)({eventAction:"disableDisplayinTopic",eventName:"disableDisplayinTopic"}),J=()=>(0,i.L9)({eventAction:"enableDisplayinTopic",eventName:"enableDisplayinTopic"})},59474:(e,t,n)=>{n.d(t,{i:()=>o});var i=n(77412),a=n(2954);const o=(0,i.Q_)("bootstrap",(()=>{const e=(0,a.iH)(!1),t=(0,a.iH)(0);return{ready:e,markReady:()=>e.value=!0,pendingJobs:t,startJob:()=>t.value+=1,endJob:()=>t.value-=1}}))},65428:(e,t,n)=>{n.d(t,{r:()=>s});var i=n(54856),a=n(77412),o=n(2954),r=n(90435);const s=(0,a.Q_)("fonts",(()=>{const e=(0,o.iH)(!1),t=(0,o.iH)({systemFonts:{},vanaFonts:{}});return{loaded:e,markLoaded:()=>e.value=!0,getLoadedFonts:async()=>{if(!t.value||Object.keys(t.value.systemFonts).length<=0&&Object.keys(t.value.vanaFonts).length<=0){const e=await(0,r.he)(i.qz);t.value=e}return t.value}}}))},7710:(e,t,n)=>{n.d(t,{l:()=>o});var i=n(77412),a=n(2954);const o=(0,i.Q_)("query",(()=>{const e=(0,a.iH)({});return{query:e,setQuery:t=>{e.value=t}}}))},2563:(e,t,n)=>{n.d(t,{O:()=>o});var i=n(77412),a=n(2954);const o=(0,i.Q_)("renderer-app",(()=>{const e=(0,a.iH)(!1),t=(0,a.XI)([]),n=(0,a.XI)({}),i=(0,a.XI)([]);return{ignoreAppearanceChanged:e,updateIgnoreAppearance:t=>{e.value=t},builtinFontFamilies:t,updateBuiltinFontFamilies:e=>t.value=e,allFonts:n,updateAllFonts:e=>n.value=e,fontsForMindMap:i,updateFontsForMindMap:e=>i.value=e}}))},53775:(e,t,n)=>{async function i(){await new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)}))))}async function a(e){return Promise.race([new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)})))),new Promise((t=>setTimeout(t,null!=e?e:200)))])}function o(e,t=300,n=!1){let i;function a(...t){i=void 0,n||e.apply(this,t)}const o=function(...o){void 0!==i&&clearTimeout(i),n&&!i&&e.apply(this,o),i=setTimeout(a.bind(this,...o),t)};return o.cancel=function(){void 0!==i&&(clearTimeout(i),i=void 0)},o}function r(e,t=300,n=!1){let i,a,o,r=!1;function s(){a=Date.now(),e.apply(this,o),void 0!==i&&(clearTimeout(i),i=void 0)}const c=function(...e){if(r)return;if(o=e,n&&!a)return void s.apply(this);const c=Date.now(),d=c-(null!=a?a:c);d>=t?s.apply(this):void 0===i&&(i=setTimeout(s.bind(this),t-d))};return c.cancel=function(e=!0){void 0!==i&&(clearTimeout(i),i=void 0),a=void 0,r=e},c}n.d(t,{Ds:()=>o,P2:()=>r,SX:()=>i,gH:()=>s,qJ:()=>a});const s=(e,t)=>{let n=e,i="";if("object"==typeof t){const e=new URLSearchParams;for(const n in t)e.append(n,t[n]);i=e.toString()}return n=n.includes("?")?n+"&"+i:n+"?"+i,n}},6113:e=>{e.exports=require("crypto")},72298:e=>{e.exports=require("electron")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")}},e=>{e.O(0,[8592,8970],(()=>{return t=70714,e(e.s=t);var t}));var t=e.O();module.exports=t}]);