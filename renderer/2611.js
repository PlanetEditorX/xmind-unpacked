(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[2611],{90620:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,".color-well-opacity-input[data-v-ea27e938] {\n  border: none;\n  border-left: 1px solid;\n  border-radius: 0;\n  width: 31px;\n  height: 11px;\n}\n.color-well-hex-input[data-v-ea27e938] {\n  width: 72px;\n  height: 18px;\n  margin: 2px 0 2px 1px;\n  padding-right: 0 !important;\n  border: none;\n}\n",""]);const i=o},68794:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,".section-collapse .section-collapse-header[data-v-1a2b60d6] {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n.section-collapse .section-collapse-header .section-collapse-icon[data-v-1a2b60d6] {\n  margin-left: -5px;\n  color: var(--color-title-icon-primary);\n  transform: rotate(-90deg);\n  transition: 0.1s ease-in-out;\n}\n.section-collapse .section-collapse-header .section-sub-title[data-v-1a2b60d6] {\n  margin-bottom: 0;\n}\n.section-collapse .section-collapse-content[data-v-1a2b60d6] {\n  display: none;\n  margin-top: 12px;\n}\n.section-collapse.is-active .section-collapse-content[data-v-1a2b60d6] {\n  display: block;\n}\n.section-collapse.is-active .section-collapse-icon[data-v-1a2b60d6] {\n  transform: rotate(0deg);\n}\n",""]);const i=o},15884:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,".map-shot-border[data-v-1a48cdbc],\n.map-shot-frame[data-v-1a48cdbc],\n[class*='map-shot-handler'][data-v-1a48cdbc] {\n  border: 2px solid #5499f5;\n}\n.map-shot-frame.map-shot-frame-taking-shot[data-v-1a48cdbc] {\n  border-color: transparent;\n}\n.map-shot-frame.map-shot-frame-taking-shot [class*='map-shot-handler'][data-v-1a48cdbc] {\n  display: none;\n}\n.map-shot-frame-display-size[data-v-1a48cdbc] {\n  color: #fff;\n  font-size: 13px;\n  position: absolute;\n  left: 0;\n  line-height: 1em;\n  bottom: calc(100% + 8px);\n  white-space: nowrap;\n}\n[class*='map-shot-handler'][data-v-1a48cdbc] {\n  position: absolute;\n  background-color: #fff;\n  width: 6px;\n  height: 6px;\n}\n.map-shot-handler-right[data-v-1a48cdbc] {\n  right: -6px;\n  top: calc((100% - 10px) / 2);\n  cursor: ew-resize;\n}\n.map-shot-handler-left[data-v-1a48cdbc] {\n  left: -6px;\n  top: calc((100% - 10px) / 2);\n  cursor: ew-resize;\n}\n.map-shot-handler-bottom[data-v-1a48cdbc] {\n  bottom: -6px;\n  left: calc((100% - 10px) / 2);\n  cursor: ns-resize;\n}\n.map-shot-handler-top[data-v-1a48cdbc] {\n  top: -6px;\n  left: calc((100% - 10px) / 2);\n  cursor: ns-resize;\n}\n.map-shot-handler-right-bottom[data-v-1a48cdbc] {\n  right: -6px;\n  bottom: -6px;\n  cursor: nwse-resize;\n}\n.map-shot-handler-right-top[data-v-1a48cdbc] {\n  right: -6px;\n  top: -6px;\n  cursor: nesw-resize;\n}\n.map-shot-handler-left-bottom[data-v-1a48cdbc] {\n  left: -6px;\n  bottom: -6px;\n  cursor: nesw-resize;\n}\n.map-shot-handler-left-top[data-v-1a48cdbc] {\n  left: -6px;\n  top: -6px;\n  cursor: nwse-resize;\n}\n#tool-bar[data-v-1a48cdbc] {\n  position: absolute;\n  display: flex;\n}\n#tool-bar .btn[data-v-1a48cdbc] {\n  height: 28px;\n  white-space: nowrap;\n}\n#tool-bar .btn-icon[data-v-1a48cdbc] {\n  width: 42px;\n  line-height: 25px;\n}\n#tool-bar .btn-segment[data-v-1a48cdbc] {\n  padding-left: 8px;\n  padding-right: 23px;\n  background-position: right 8px top 50%;\n}\n.folder[data-v-1a48cdbc] {\n  background: #ffffff;\n  transition-timing-function: ease-in;\n  transition: 0.2s;\n}\n",""]);const i=o},90320:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,"#map-shot-modal[data-v-10794072] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n@keyframes springish-10794072 {\n0.00% {\n    transform: scale(0.9);\n    opacity: 0.3;\n}\n40% {\n    transform: scale(1.1106);\n    opacity: 1;\n}\n80% {\n    transform: scale(0.9591);\n    opacity: 1;\n}\n100.00% {\n    transform: scale(1);\n    opacity: 1;\n}\n}\n.springish[data-v-10794072] {\n  animation: springish-10794072;\n  animation-duration: 0.5s;\n  animation-timing-function: cubic-bezier(0.445, 0.05, 0.55, 0.95);\n}\n.activation-text[data-v-10794072] {\n  margin-top: 8px;\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 14px;\n  letter-spacing: 0.07px;\n}\n.uk-lang-ru-RU .map-shot-save-btn[data-v-10794072] {\n  padding: 4px 18px;\n  line-height: 14px;\n}\n",""]);const i=o},43686:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,".uk-animation-duration-500ms[data-v-35353ac8] {\n  animation-duration: 0.5s !important;\n}\n",""]);const i=o},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=e(t);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(o[l]=!0)}for(var r=0;r<e.length;r++){var s=[].concat(e[r]);n&&o[s[0]]||(a&&(s[2]?s[2]="".concat(a," and ").concat(s[2]):s[2]=a),t.push(s))}},t}},65840:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(2954),o=a(87141),i=a(70183),l=a(14025),r=a(11681),s=a(18264);const c=(0,n.aZ)({__name:"color-picker",props:{value:{default:"#FFF"},noneValue:{default:"none"},pos:{default:"left-center"},isMultiple:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},offsetTop:{default:0},offsetLeft:{default:0},popoverContainerId:{default:"body"}},emits:["input"],setup(e,{emit:t}){const a=e,c=(0,n.iH)(["#FFFFFF","#EEEEEE","#D0D0D0","#ADADAD","#999999","#666666","#333333","#111111","#000000","#FDD834","#FF9595","#8EDE99","#0CE6CF","#8EDDF9","#50C3F7","#7986CB","#BA69C8","#FFABD5","#FFC009","#FF5252","#2CD551","#00A99D","#2ABEE0","#05A8F4","#4051B5","#9C27B0","#EA8ABA","#FF9F00","#FF3C00","#19A719","#007C74","#0096BF","#0288D1","#303E9F","#7B1FA2","#CE4289","#FF6F00","#E32C2D","#15831C","#025A5A","#00526B","#00579B","#1A227E","#4A148C","#A34075"]),u=(0,o.JE)().T,d=(0,n.iH)(null);(0,n.Jd)((()=>{p()}));const h=(0,n.Fl)((()=>a.isMultiple?"multi-color":a.value)),p=()=>{var e,t;if(!d.value)return;const a=d.value.$el.querySelector("[uk-popover]");null===(t=null===(e=(0,n.FN)())||void 0===e?void 0:e.proxy)||void 0===t||t.$withUIKit((e=>{const t=e.pop(a);t&&t.close()}))},v=(0,n.Fl)((()=>(0,o.km)().recentlyUsedColors));return{__sfc:!0,presetColors:c,props:a,emit:t,$T:u,colorWellElement:d,computedInternalValue:h,handleColorInput:e=>{t("input",e)},closePopover:p,popoverHide:()=>{setTimeout((()=>{(0,s.U)().updateLastFocusedElementTag(null)}),100)},recentlyUsedColors:v,handleRecentColorChange:e=>(0,o.km)().updateRecentlyUsedColor(e),ColorWell:i.Z,colorWall:l.Z,SectionCollapse:r.Z}}});const u=(0,a(51900).Z)(c,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.ColorWell,{ref:"colorWellElement",attrs:{"intermediate-value":"multi-color","grid-options":a.presetColors,"none-value":e.noneValue,title:a.$T("Click to choose a color."),value:a.computedInternalValue,"is-disabled":e.isDisabled,"color-value-tooltips":a.$T("Set the color value (hex)."),"color-opacity-tooltips":a.$T("Set the opacity."),"color-selector-tooltips":a.$T("Click to show more colors or create your own."),"popover-container-id":e.popoverContainerId,"popover-pos":e.pos,"popover-offset-top":e.offsetTop,"popover-offset-left":e.offsetLeft},on:{input:a.handleColorInput,"popover-hide":a.popoverHide,"recent-color-change":a.handleRecentColorChange}},[e._t("footer"),e._v(" "),t("div",{attrs:{slot:"bottom"},slot:"bottom"},[a.recentlyUsedColors.length>0?[t("hr",{staticClass:"vk-divider-strong",staticStyle:{margin:"8px 0"}}),e._v(" "),t("div",{staticStyle:{padding:"8px 16px 0"}},[t(a.SectionCollapse,{attrs:{label:a.$T("Recently Used")},scopedSlots:e._u([{key:"collapse-content",fn:function(){return[t(a.colorWall,{attrs:{"grid-options":a.recentlyUsedColors,value:e.value},on:{input:a.handleColorInput}})]},proxy:!0}],null,!1,2977246040)})],1)]:e._e()],2)],2)}),[],!1,null,null,null).exports},14025:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const n={name:"ColorWall",props:{gridOptions:{type:Array,default:()=>[]},value:{type:String,default:""}},data(){return{internalValue:this.normalizeValue(this.value)}},computed:{computedGridOptions(){const e=new Set;return this.gridOptions.map((e=>"string"==typeof e?{value:this.normalizeValue(e)}:Object.assign({},e,{value:this.normalizeValue(e&&e.value)}))).filter((({value:t})=>!e.has(t)&&(e.add(t),!0)))}},watch:{value(e){this.internalValue=this.normalizeValue(e)}},methods:{normalizeValue:e=>e&&/#[0-9a-f]{6}/i.test(e)?e.toUpperCase():e,handleClickInsideColorPicker({target:e}){(e=this.getButton(e))&&e.hasAttribute("value")&&(this.internalValue=this.normalizeValue(e.getAttribute("value")),this.$emit("input",this.internalValue))},getButton(e){for(;e&&e.classList;){if(e.classList.contains("uk-color-picker-button"))return e;e=e.parentNode}return null}}};const o=(0,a(51900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",[t("ul",{staticClass:"uk-color-picker-grid",attrs:{"uk-list-select":"","uk-traverse":"","data-item":"li > button:not(:disabled)","data-columns":"9","data-cls-active":"false"},on:{click:e.handleClickInsideColorPicker}},e._l(e.computedGridOptions,(function(a,n){return t("li",{key:"grid@"+n},[t("button",{ref:"gridButton",refInFor:!0,staticClass:"uk-button uk-color-picker-button",class:{"uk-color-picker-button-selected":e.internalValue===a.value},style:{"background-color":a.value},attrs:{title:a.label||"",value:a.value,"data-ref":"gridButton"}})])})),0)])}),[],!1,null,null,null).exports},70183:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(7836),o=a(96829),i=a(14025);let l=1;const r={name:"ColorWell",components:{ColorWall:i.Z,Teleport:n.Z},props:{name:{type:String,default:""},value:{type:String,default:""},isDisabled:{type:Boolean,default:!1},inputId:{type:String,default:""},popoverPos:{type:String,default:"left-center"},popoverOffsetTop:{type:Number,default:0},popoverOffsetLeft:{type:Number,default:0},noneValue:{type:String,default:""},dynamicValue:{type:String,default:"inherited"},hasDynamic:{type:Boolean,default:!1},intermediateValue:{type:String,default:"intermediate"},iconUrl:{type:String,default:null},gridOptions:{type:Array,default:()=>[]},autofocusOnClose:{type:Boolean,default:!1},title:{type:String,default:""},colorValueTooltips:{type:String,default:""},colorOpacityTooltips:{type:String,default:""},colorSelectorTooltips:{type:String,default:""},popoverContainerId:{type:String,default:"body"},popoverClass:{type:String,default:""},colorOpacityRange:{type:Array,default:()=>[0,100]}},data(){const e=l.toString();return l++,{popoverId:`popover-${(0,o.hb)()}`,internalValue:this.normalizeValue(this.value)??"",internalInputId:`uk_color_well_input_${e}`,initValue:"",colorOpacityValue:0}},computed:{computedInputId(){return this.inputId||this.internalInputId},computedInputValue(){return this.noneValue&&this.value===this.noneValue?"":this.noneValue&&this.internalValue===this.noneValue||this.internalValue===this.intermediateValue||this.internalValue===this.dynamicValue?"#000000":this.internalValue||"#000000"},computedInputColor(){return this.iconUrl||this.noneValue&&this.internalValue===this.noneValue||this.internalValue===this.intermediateValue||this.internalValue===this.dynamicValue?"":this.internalValue},computedColorTypeValue(){return this.computedInputValue.slice(0,7)},computedOpacity(){return!this.computedInputValue||this.computedInputValue.length<=7?"FF":this.computedInputValue.slice(7,9)},computedOpacityNumber(){return parseInt(parseInt(this.computedOpacity,16)/255*100)}},watch:{value(e){this.internalValue=this.normalizeValue(e)},computedOpacityNumber:{immediate:!0,handler(e){this.colorOpacityValue=e}}},methods:{handleColorInput(e){this.internalValue=e+this.computedOpacity,this.$emit("input",this.internalValue)},normalizeValue:e=>e&&/#[0-9a-f]{6}/i.test(e)?e.toUpperCase():e,handleHexInput(e){let t=e.target.value;if(this.value!==this.noneValue||""!==t){if(t=t.replace(/^#/,""),t.length>6)t="FFFFFF";else for(t=t.replace(/[^0-9a-f]/gi,"0"),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);6!==t.length;)t+="0";this.internalValue="#"+t+this.computedOpacity,this.$emit("input",this.internalValue)}},colorCompletion(e){if(e.length<=1||e.length>7)return e;let t=e;for(;t.length<7;)t+=e.slice(-1);return t},handleOpacityInput(e){let t=parseInt(e.target.value);t||0===t||(t=100),t>this.colorOpacityRange[1]&&(t=this.colorOpacityRange[1]),t<this.colorOpacityRange[0]&&(t=this.colorOpacityRange[0]),this.colorOpacityValue=t;let a=Math.ceil(t/100*255).toString(16);1===a.length&&(a=`0${a}`),this.internalValue=this.colorCompletion(this.computedColorTypeValue)+a,this.$emit("input",this.internalValue)},handleInputClick({target:e}){e.value=this.computedInputValue},close(){this.$refs.popover&&this.$withUIKit((e=>{e.pop(this.$refs.popover).close()}))}},mounted(){this.$withUIKit((e=>{e.util.on(this.$refs.popover,"show",(()=>{this.initValue=this.internalValue,this.$emit("popover-show")})),e.util.on(this.$refs.popover,"hidden",(()=>{this.value!==this.intermediateValue?(this.initValue.length<this.internalValue.length&&(this.initValue=this.initValue+"FF"),this.internalValue.toUpperCase()!==this.initValue.toUpperCase()&&this.$emit("recent-color-change",this.internalValue),this.$emit("popover-hide")):this.$emit("popover-hide")}))}))}};a(37485);const s=(0,a(51900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"uk-color-well",staticStyle:{display:"inline-block"}},[t("button",{ref:"button",staticClass:"vk-select-color",class:{"is-none":e.internalValue===e.noneValue},style:!e.isDisabled&&{"background-color":e.computedInputColor},attrs:{id:e.popoverId,type:"button",disabled:e.isDisabled,title:e.title}},[e.iconUrl?t("img",{staticClass:"uk-height-1-1",attrs:{"uk-svg":"",src:e.iconUrl,alt:""}}):e.internalValue===e.dynamicValue&&e.hasDynamic?t("span",{attrs:{width:"100%",height:"100%"}},[e._v("\n      "+e._s(e.$T("Dynamic"))+"\n    ")]):e.internalValue===e.intermediateValue?t("svg",{attrs:{width:"100%",height:"100%"}},[t("circle",{attrs:{cx:"50%",cy:"50%",r:"2",fill:"currentcolor"}}),e._v(" "),t("circle",{attrs:{cx:"calc(50% - 7px)",cy:"50%",r:"2",fill:"currentcolor"}}),e._v(" "),t("circle",{attrs:{cx:"calc(50% + 7px)",cy:"50%",r:"2",fill:"currentcolor"}})]):e._e()]),e._v(" "),t("teleport",{attrs:{to:e.popoverContainerId}},[t("div",{ref:"popover",staticClass:"uk-color-well-popover",class:e.popoverClass,staticStyle:{padding:"16px 0"},attrs:{"uk-popover":"","data-pos":e.popoverPos,"data-offset-top":e.popoverOffsetTop,"data-offset-left":e.popoverOffsetLeft,"data-autofocus-on-close":e.autofocusOnClose?"true":"false","data-target":`#${e.popoverId}`,"data-toggle":`#${e.popoverId}`,"data-sel-close":"> * .uk-color-picker-button, .uk-color-picker-button-trigger"}},[t("div",{staticStyle:{padding:"0 16px 8px"}},[e._t("header"),e._v(" "),t("ul",{staticClass:"uk-color-picker"},[e.gridOptions.length>0?t("li",[t("color-wall",{attrs:{"grid-options":e.gridOptions,value:e.value},on:{input:e.handleColorInput}})],1):e._e(),e._v(" "),t("li",{staticClass:"uk-color-picker-customize uk-flex uk-flex-between",staticStyle:{"margin-top":"8px"}},[t("div",{staticClass:"uk-color-picker-input uk-flex uk-flex-middle"},[t("div",{staticClass:"uk-color-picker-hex-input uk-inline uk-input",staticStyle:{padding:"0","box-sizing":"content-box",width:"127px"}},[t("span",{staticClass:"uk-form-icon",attrs:{"uk-icon":"icon: hashtag"}}),e._v(" "),t("input",{ref:"hexColorInput",staticClass:"uk-input uk-text-muted uk-text-justify uk-overflow-hidden uk-box-shadow-none color-well-hex-input",attrs:{title:e.colorValueTooltips},domProps:{value:e.computedColorTypeValue.replace("#","")},on:{blur:e.handleHexInput,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleHexInput.apply(null,arguments)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.colorOpacityValue,expression:"colorOpacityValue"}],staticClass:"uk-input uk-text-center uk-overflow-hidden divider-vertical-border-color uk-box-shadow-none uk-text-middle color-well-opacity-input",staticStyle:{padding:"0 0 0 6px !important"},attrs:{disabled:!e.computedInputValue,title:e.colorOpacityTooltips},domProps:{value:e.colorOpacityValue},on:{blur:e.handleOpacityInput,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleOpacityInput.apply(null,arguments)},input:function(t){t.target.composing||(e.colorOpacityValue=t.target.value)}}}),e._v(" "),t("span",{staticStyle:{"margin-left":"-2px",display:"inline-block","vertical-align":"middle"}},[e._v("%")])]),e._v(" "),t("div",{staticClass:"uk-color-picker-input-preview uk-margin-small-left",style:{"background-color":e.computedInputValue}})]),e._v(" "),t("label",{staticClass:"uk-color-well-label",attrs:{for:e.computedInputId,title:e.colorSelectorTooltips}},[t("input",{ref:"input",staticClass:"uk-color-well-input",attrs:{id:e.computedInputId,type:"color",name:e.name},domProps:{value:e.computedColorTypeValue},on:{input:e.handleHexInput,click:e.handleInputClick}})])]),e._v(" "),e._t("default")],2),e._v(" "),e._t("footer")],2),e._v(" "),e._t("bottom")],2)])],1)}),[],!1,null,"ea27e938",null).exports},11681:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(2954),o=a(87141),i=a(69931);const l=(0,n.aZ)({__name:"section-collapse",props:{label:{default:""},clsLabel:{default:""},isActive:{type:Boolean,default:!0},withPro:{type:Boolean,default:!1},contentStyle:{default:""}},setup(e){const t=e,a=(0,n.iH)(null),l=(0,n.iH)(null),r=(0,n.Fl)((()=>(0,o.S)().preferredLanguage)),s=(0,n.Fl)((()=>"dark"===(0,o.S)().appearance)),c=(0,n.Fl)((()=>(0,i.ju)(s.value?"static/assets/images/pro/pro-small-with-no-border-dark.svg":"static/assets/images/pro/pro-small-with-no-border.svg"))),u=()=>{if(!l.value)return;const{offsetWidth:e,scrollWidth:a}=l.value;e<a&&(l.value.title=t.label)};return(0,n.YP)((()=>r.value),(()=>{u()})),(0,n.bv)((()=>{u()})),{__sfc:!0,props:t,sectionContainer:a,labelElement:l,preferredLanguage:r,isDarkMode:s,proIcon:c,handleLabelEllipsis:u,handleSectionCollapse:()=>{a.value&&a.value.classList.toggle("is-active")}}}});a(58372);const r=(0,a(51900).Z)(l,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{ref:"sectionContainer",staticClass:"section-collapse",class:{"is-active":e.isActive}},[t("div",{staticClass:"uk-flex uk-flex-middle uk-flex-between"},[t("div",{staticClass:"section-collapse-header",on:{click:a.handleSectionCollapse}},[t("span",{staticClass:"section-collapse-icon",attrs:{"uk-icon":"arrow-fill-down"}}),e._v(" "),e.withPro?t("img",{staticClass:"uk-margin-xsmall-right",attrs:{draggable:"false",src:a.proIcon}}):e._e(),e._v(" "),t("div",{ref:"labelElement",staticClass:"vk-title-primary uk-text-truncate",class:e.clsLabel},[e._v("\n        "+e._s(e.label)+"\n      ")])]),e._v(" "),e._t("collapse-header-right")],2),e._v(" "),t("div",{staticClass:"section-collapse-content",style:e.contentStyle},[e._t("collapse-content")],2)])}),[],!1,null,"1a2b60d6",null).exports},52590:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(2954),o=a(54856),i=a(90435);const l=(0,n.aZ)({__name:"watermark-checkbox",props:{isActivationValid:{type:Boolean},editorId:null,value:{type:Boolean,default:!1},textStyle:{default:""}},emits:["toggle"],setup(e,{emit:t}){const a=e;return{__sfc:!0,props:a,emit:t,handleWatermarkClick:e=>{a.isActivationValid||(e.preventDefault(),i.ZP.fetch(o.Gy,{name:"action.toggleWatermark",channel:(0,o.gk)(a.editorId)}))},handleWatermarkChange:e=>{t("toggle",e.target.checked)}}}});const r=(0,a(51900).Z)(l,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-form-controls"},[t("label",{on:{click:a.handleWatermarkClick}},[t("input",{staticClass:"vk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.value},on:{change:a.handleWatermarkChange}}),e._v(" "),t("span",{style:e.textStyle},[e._v(e._s(e.$T('Show "Presented with xmind"')))])])])}),[],!1,null,null,null).exports},12611:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>$});var n=a(2954),o=a(71017),i=a.n(o),l=a(78198),r=a(13382),s=a(23352),c=a(18621),u=a(94593),d=a(96829),h=a(72298),p=a(67657);function v(){return p.BrowserWindow.fromId(window.id)}const m=(0,n.aZ)({__name:"map-shot-frame",props:{visible:{type:Boolean},backgroundGrayscale:null,defaultSize:null,defaultRate:null,containerStyle:null,isTakingShot:{type:Boolean},appearance:null,sheetContainerElement:null,canvasWidth:null,canvasHeight:null,topBarHeight:null},emits:["mousewheel","close","takeshot"],setup(e,{expose:t,emit:a}){const o=e,i={side:[["left"],["top"],["right"],["bottom"]],corner:[["left","top"],["left","bottom"],["right","top"],["right","bottom"]]};function l(e){let t=!1;return function(...a){t||(window.requestAnimationFrame((function(){e.apply(null,a),t=!1})),t=!0)}}const r=(0,n.FN)().proxy,s=(0,n.Fl)((()=>o.sheetContainerElement)),c=(0,n.Fl)((()=>o.canvasWidth)),u=(0,n.Fl)((()=>o.canvasHeight)),d=(0,n.iH)(null),h=(0,n.iH)(null),p=(0,n.iH)(null),v=(0,n.iH)(null);let m=(0,n.iH)(null);const f=(0,n.iH)(!1),g=(0,n.iH)(!1),w=(0,n.iH)("default"),b=(0,n.iH)(null),k=(0,n.iH)(null),y=(0,n.iH)(null),S=(0,n.iH)(null),x=(0,n.iH)(o.defaultRate),C=(0,n.iH)([0,0]),_=(0,n.iH)(null),F=(0,n.iH)(null),M=(0,n.iH)(!1),B=(0,n.iH)(null),I=(0,n.iH)(null),V=(0,n.iH)();(0,n.bv)((()=>{$(),R(!0)})),(0,n.Jd)((()=>{R(!1)}));const T=(0,n.Fl)((()=>Math.max(u.value,c.value)+500)),A=(0,n.Fl)((()=>{const e={width:"auto",height:"auto",overflow:"hidden","z-index":1020,cursor:w.value};return Object.assign({},e,o.containerStyle)})),W=(0,n.Fl)((()=>[{key:"1:1",text:r.$T("Square (1:1)")},{key:"free",text:r.$T("Custom")}])),H=(0,n.Fl)({set(e){x.value=e.key},get:()=>W.value.find((e=>e.key===x.value))}),E=(0,n.Fl)((()=>"free"===H.value.key?i.side.concat(i.corner):i.corner));(0,n.YP)(H,(e=>{const{value:t}=h;if("free"===e.key)return;if(!t)return;const{clientHeight:a}=t,n=H.value.key.split(":"),o=a*(parseInt(n[0])/parseInt(n[1]));P({width:o})}));const R=e=>{const{value:t}=s;t[e?"addEventListener":"removeEventListener"]("scroll",L),e||(_.value=null,F.value=null)},L=()=>{if(f.value)return;if(o.isTakingShot)return;const{value:e}=s,{value:t}=h,a=[e.scrollLeft,e.scrollTop],n=[c.value,u.value];if(null!==F.value&&(n[0]!==F.value[0]||n[1]!==F.value[1]))return _.value=a,void(F.value=n);if(_.value){const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("top").replace("px","")),o=parseFloat(e.getPropertyValue("left").replace("px",""));t.style.left=o-(a[0]-_.value[0])+"px",t.style.top=n-(a[1]-_.value[1])+"px"}_.value=a,z({})},O=()=>{const{value:e}=s;_.value=[e.scrollLeft,e.scrollTop],F.value=[c.value,u.value]},$=()=>{const{value:e}=s,{value:t}=d,{clientWidth:a,clientHeight:n}=t;let[i,l]=o.defaultSize;const r=i/l;let u=(n-(l+4))/2;if(u<60){let t=u-(.5*(l+2)-.5*n)-60;const a=e.scrollTop+t;a<0&&(t=-e.scrollTop,l-=Math.abs(a),i-=Math.abs(a)*r),u=t}let h=(a-(i+4))/2;if(h<0){let t=h+(.5*(i+2)-.5*a)+1;if(e.scrollLeft+t+i>c.value){i=c.value-(e.scrollLeft+t);const a=i/r;u+=.5*Math.abs(a-l),l=a}h=t}P({width:i,height:l,left:h,top:u}),O(),g.value=!1},P=e=>{const{value:t}=h;let a=!1;const n=["left","top","right","bottom","width","height"];for(const o in e){let i=e[o];null!==i&&(["width","height"].includes(o)&&(a=!0),n.includes(o)&&(i=`${i}px`),t.style[o]=i)}z(e),a&&r.$nextTick((()=>{const{clientWidth:e,clientHeight:a}=t;C.value=[e,a]}))},z=e=>{const{value:t}=s,{value:a}=h,{value:n}=p,{value:i}=v;let{left:l,top:r,height:c,width:d}=e;l="number"==typeof l?l:parseInt(l),r="number"==typeof r?r:parseInt(r),c="number"==typeof c?c:parseInt(c),d="number"==typeof d?d:parseInt(d);const m=n,f=i,{clientHeight:w,clientWidth:b}=m,{clientHeight:k,clientWidth:y}=t;if(!l||!r){const e=getComputedStyle(a);l=parseInt(e.getPropertyValue("left").replace("px","")),r=parseInt(e.getPropertyValue("top").replace("px",""))}c&&d||(c=a.clientHeight,d=a.clientWidth);const S={top:r+c+14+4,left:l},x={bottom:"calc(100% + 8px)",color:"#FFF"};if(t.scrollTop+r-16<=0&&(x.bottom="calc(100% - 16px)",o.backgroundGrayscale>128&&(x.color="#333")),t.scrollTop+k>=u.value-5){let e=!1;S.top+w>k&&(S.top=r+c-14-w,e=!0),e&&S.top+14+w>=k&&(S.top=k-w-14)}m.style.top=`${S.top}px`,m.style.left=`${S.left}px`,f.style.color=x.color,f.style.bottom=x.bottom;const C=0<S.top&&S.top+w<=k&&-10<S.left&&S.left+b<=y;C&&g.value&&(g.value=!1),C||g.value||(g.value=!0)};let D=e=>{const{value:t}=s,{value:a}=h;if(0===e.buttons&&"handler"===b.value)return N();if(!f.value&&"handler"!==b.value)return;const n=(n={vertical:!0,horizontal:!0})=>{const{width:o,height:i}=a.getBoundingClientRect(),{offsetLeft:l,offsetTop:r}=a,s=r+i,d=l+o,{scrollTop:h,scrollLeft:p}=t,v=p+l,m=p+d,f=h+r,g=h+s,w={left:n.horizontal&&e.clientX-B.value.offsetX,top:n.vertical&&e.clientY-B.value.offsetY};"number"==typeof w.left&&(v<=0&&w.left<=l||m>=c.value&&w.left+o>=d)&&(w.left=null),"number"==typeof w.top&&(f<=0&&w.top<=r||g>=u.value&&w.top+i>=s)&&(w.top=null),P(w)},i=()=>{t.scroll(I.value.scrollLeft-(e.clientX-B.value.mouseClientX),I.value.scrollTop-(e.clientY-B.value.mouseClientY))},r=()=>{const e={vertical:!0,horizontal:!0};return(t.scrollTop<=1||t.scrollTop+t.clientHeight>=u.value-1)&&(e.vertical=!1),(t.scrollLeft<=1||t.scrollLeft+t.clientWidth>=c.value-1)&&(e.horizontal=!1),e};if("frame"===b.value&&"left"===k.value)n();else if("container"===b.value&&"right"===k.value)i(),n(r());else if("frame"===b.value&&"right"===k.value)i(),n(r());else if("handler"===b.value){const n=S.value.getBoundingClientRect();let i,r,s,d=null;const h={top:!1,left:!1,right:!1,bottom:!1},p=50,v=15;if(y.value.includes("right")&&(i=e.clientX-V.value.frameClientRectLeft,i<1&&(i=1),t.offsetWidth-n.x<p+v&&(h.right=!0)),y.value.includes("bottom")&&(r=e.clientY-V.value.frameClientRectTop-o.topBarHeight,r<1&&(r=1),t.offsetHeight-(n.y-o.topBarHeight)<p+v&&(h.bottom=!0)),y.value.includes("left")){const t=V.value.frameClientRectLeft+V.value.frameClientWidth-1;s=e.clientX,i=V.value.frameClientWidth-(e.clientX-V.value.frameClientRectLeft),i<1&&(i=1),s>t&&(s=t),n.x<p&&(h.left=!0)}if(y.value.includes("top")){const t=V.value.frameClientRectTop+V.value.frameClientHeight-1;d=e.clientY-o.topBarHeight,r=V.value.frameClientHeight-(e.clientY-o.topBarHeight-V.value.frameClientRectTop),r<1&&(r=1),d>t&&(d=t),n.y-o.topBarHeight<p&&(h.top=!0)}const f=()=>{const e=H.value.key.split(":");if(h.top||h.bottom){let t=i;t=Math.floor(Math.floor(r)*(parseInt(e[0])/parseInt(e[1]))),s&&(s+=i-t),i=t}else if(h.right||h.left){let t=Math.floor(Math.floor(i)*(parseInt(e[1])/parseInt(e[0])));d&&(d+=r-t),r=t}else{let t=i;t=Math.floor(Math.floor(r)*(parseInt(e[0])/parseInt(e[1]))),s&&(s+=i-t),i=t}};if(clearInterval(m.value),Object.values(h).some((e=>e))){let e=8;"free"!==H.value.key&&(e=4);const a=()=>{if(!V.value)return;const a={left:t.scrollLeft,top:t.scrollTop},n=new Set;h.left&&a.left>1&&(a.left-=e,i+=e,V.value.frameClientRectLeft+=e,n.add("width")),h.right&&a.left+t.clientWidth<c.value-1&&(a.left+=e,i+=e,V.value.frameClientRectLeft-=e,n.add("width")),h.top&&a.top>1&&(a.top-=e,r+=e,V.value.frameClientRectTop+=e,n.add("height")),h.bottom&&a.top+t.clientHeight<u.value-1&&(a.top+=e,r+=e,V.value.frameClientRectTop-=e,n.add("height")),t.scroll(a),"free"!==H.value.key&&f(),P({width:i,height:r,top:d,left:s})};m.value=setInterval(l(a),1)}"free"!==H.value.key&&f(),null!==d&&t.scrollTop+d<=0&&(d=0,i=null,r=null);let g=d;g||(g=a.offsetTop),null!==r&&t.scrollTop+g+r>u.value&&(i=null,r=null),P({width:i,height:r,top:d,left:s})}};D=l(D);const N=e=>{e&&"mouseup"===e.type&&clearInterval(m.value),e&&"mouseleave"===e.type&&"handler"===b.value||(e&&"mouseup"===e.type&&0===e.button&&e.target===d.value&&!M.value&&a("close"),b.value=null,f.value=!1,B.value=null,V.value=null,I.value=null,y.value=null,w.value="default",O())};return t({isShowGoMapShotBar:g,updateMapShotFrameStyle:P}),{__sfc:!0,MAP_SHOT_FRAME_BORDER_WIDTH:2,MAP_SHOT_FRAME_MIN_HEIGHT:1,MAP_SHOT_FRAME_MIN_WIDTH:1,MAP_SHOT_HANDLER_CONFIG_MAP:i,throttle:l,props:o,emits:a,vm:r,scrollContainerEl:s,canvasWidth:c,canvasHeight:u,mapShotFrameContainerEl:d,mapShotFrameEl:h,mapShotToolbarEl:p,mapShotFrameDisplaySizeEl:v,containerScrollIntervalHanlder:m,isDragging:f,isShowGoMapShotBar:g,containerCursorStyle:w,targetType:b,mouseType:k,handlerType:y,currentMapShotHandler:S,selectedRate:x,currentFrameSize:C,lastScrollBarPosition:_,lastSbContainerSize:F,mouseDownOnSafeZone:M,dragStartData:B,scrollContainerStartPoint:I,resizeStartData:V,commputedBoxShadow:T,computedContainerStyle:A,frameSizeList:W,computedSelectedRate:H,mapShotHandlers:E,setScrollContainerListener:R,scrollActionHandler:L,updateLastScrollBarPosition:O,initMapShotFrameOnMounted:$,updateMapShotFrameStyle:P,updateToolbarAndDisplaySize:z,onMapShotMouseDown:e=>{const{value:t}=s,{value:a}=h,{value:n}=d;if(e.target===a&&(b.value="frame"),e.target===n&&(b.value="container"),0===e.button&&(k.value="left"),2===e.button&&(k.value="right"),null!==b.value&&null!==k.value){const{offsetLeft:n,offsetTop:o}=a;B.value={offsetX:e.clientX-n,offsetY:e.clientY-o,mouseClientX:e.clientX,mouseClientY:e.clientY},"right"===k.value&&(I.value={scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),f.value=!0}"right"===k.value&&(w.value="grab!important"),M.value=e.target!==d.value},onMapShotMouseMove:D,onMapShotMouseUpOrLeave:N,onMapShotHandlerDown:(e,t)=>{M.value=!0;const{value:a}=h,{offsetLeft:n,offsetTop:o}=a,i=window.getComputedStyle(t.target,null).getPropertyValue("cursor");w.value=i,b.value="handler",y.value=e.slice(),S.value=document.querySelector(`.map-shot-handler-${y.value[0]}`+(y.value[1]?`-${y.value[1]}`:"")),V.value={frameClientRectLeft:n,frameClientRectTop:o,frameClientWidth:a.clientWidth,frameClientHeight:a.clientHeight}},goMapShotBar:async()=>{const{value:e}=h,{value:t}=s,{offsetLeft:a,offsetTop:n}=e,o=e.clientWidth+4,i=e.clientHeight+4,{clientWidth:l,clientHeight:c}=t;let u=t.scrollLeft+a-(l-o)/2-(l<o?(o-l)/2+1:0),d=t.scrollTop+n-(c-i)/2+(c/2<i/2+60?(i-c)/2+60:0);t.scrollTo(u,d),await r.$nextTick(),L()},onWheelAndPinch:e=>{a("mousewheel",e)},onClose:()=>{a("close")},onTakeShot:()=>{const{offsetLeft:e,offsetTop:t}=h.value,{width:n,height:o}=h.value.getBoundingClientRect();a("takeshot",{width:n,height:o,left:e,top:t},x.value,C.value)}}}});a(60244);var f=a(51900);const g=(0,f.Z)(m,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{ref:"mapShotFrameContainerEl",staticClass:"uk-position-fixed uk-panel uk-position-cover",style:a.computedContainerStyle,on:{mousedown:a.onMapShotMouseDown,mousemove:a.onMapShotMouseMove,mouseup:a.onMapShotMouseUpOrLeave,mouseleave:a.onMapShotMouseUpOrLeave,mousewheel:a.onWheelAndPinch}},[t("div",{ref:"mapShotFrameEl",staticClass:"map-shot-frame uk-position-absolute",style:{"box-shadow":"0 0 0 "+a.commputedBoxShadow+"px rgba(0, 0, 0, 0.6)",visibility:e.visible?"visible":"hidden",cursor:"default"===a.computedContainerStyle.cursor?"all-scroll":a.computedContainerStyle.cursor}},[t("div",{staticClass:"click-safe-zone",style:{position:"absolute",width:"calc(100% + 30px)",height:"calc(100% + 30px)",left:"-15px",top:"-15px",cursor:"default","z-index":"-1"}}),e._v(" "),t("div",{ref:"mapShotFrameDisplaySizeEl",staticClass:"map-shot-frame-display-size"},[e._v("\n      "+e._s(a.currentFrameSize[0])+" × "+e._s(a.currentFrameSize[1])+"\n    ")]),e._v(" "),e._l(a.mapShotHandlers,(function(e,n){return t("div",{key:n,class:`map-shot-handler-${e[0]}`+(e[1]?`-${e[1]}`:""),on:{mousedown:function(t){return t.target!==t.currentTarget?null:(t.stopPropagation(),a.onMapShotHandlerDown(e,t))}}})}))],2),e._v(" "),t("div",{ref:"mapShotToolbarEl",staticStyle:{"padding-bottom":"16px","padding-right":"24px"},style:{visibility:e.visible?"visible":"hidden"},attrs:{id:"tool-bar"}},[t("ul",{staticClass:"vk-segment-button-group"},[t("li",{attrs:{title:e.$T("Exit Map Shot.")}},[t("label",[t("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"radio",name:"map-shot-frame"}}),e._v(" "),t("span",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-segment-button",attrs:{"uk-icon":"xmark"},on:{click:a.onClose}})])]),e._v(" "),t("li",{attrs:{title:e.$T("Choose the aspect ratio.")}},[t("label",[t("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"radio",name:"map-shot-frame"}}),e._v(" "),t("span",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-segment-button",attrs:{id:"aspect-ratio-btn"}},[t("span",[e._v(e._s(a.computedSelectedRate.text))]),e._v(" "),t("span",{attrs:{"uk-icon":"icon: chevron-downward; ratio: 0.6"}})])])]),e._v(" "),t("li",{attrs:{title:e.$T("Capture the screenshot.")}},[t("label",[t("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"radio",name:"map-shot-frame"}}),e._v(" "),t("span",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-segment-button",attrs:{"uk-icon":"camera"},on:{click:a.onTakeShot}})])])])]),e._v(" "),t("div",{ref:"popover",staticClass:"uk-width-small",attrs:{"uk-popover":"","data-target":"#aspect-ratio-btn","data-toggle":"#aspect-ratio-btn","data-sel-close":"[uk-menu] > li"}},[t("ul",{staticClass:"uk-height-1-1 uk-overflow-auto",attrs:{"uk-menu":""}},e._l(a.frameSizeList,(function(n){return t("li",{key:n.key,on:{click:function(e){a.computedSelectedRate=n}}},[t("button",{class:{"uk-active":n.key===a.computedSelectedRate.key},attrs:{autofocus:n.key===a.computedSelectedRate.key}},[t("span",{staticStyle:{"margin-right":"8px"},style:{visibility:n.key===a.computedSelectedRate.key?"visible":"hidden"},attrs:{"uk-icon":"icon: check"}}),e._v(" "),t("span",[e._v(e._s(n.text))])])])})),0)]),e._v(" "),a.isShowGoMapShotBar?t("div",{staticClass:"vk-button-secondary vk-size-small uk-position-fixed",staticStyle:{left:"20px","z-index":"1030"},style:{visibility:e.visible?"visible":"hidden",top:`${20+e.topBarHeight}px`},on:{mouseup:function(e){return e.preventDefault(),a.goMapShotBar.apply(null,arguments)}}},[e._v("\n    "+e._s(e.$T("Go Map Shot Bar"))+"\n  ")]):e._e()])}),[],!1,null,"1a48cdbc",null).exports;var w=a(60746),b=a(52590),k=a(65840),y=a(12455);const S=(0,n.aZ)({__name:"map-shot-modal",props:{pngBuffer:null,appearance:null,defaultCheckedFrame:{type:Boolean},defaultCheckedShadow:{type:Boolean},defaultCheckedWatermark:{type:Boolean},defaultFrameColor:null,defaultFrameWidth:null},emits:["cancel","save"],setup(e,{emit:t}){const a=e,o=window.editorId,i=(0,n.FN)().proxy,l=(0,n.iH)(a.defaultCheckedShadow),r=(0,n.iH)(a.defaultCheckedWatermark),s=(0,n.iH)(a.defaultCheckedFrame),c=(0,n.iH)(a.defaultFrameColor),u=(0,n.iH)(a.defaultCheckedFrame?a.defaultFrameWidth:"normal"),d=(0,n.iH)({width:400,height:360});["thin","normal","thick"].includes(u.value)||(u.value="normal");const h=(0,n.iH)(null),p=(0,n.iH)(i.$toResourceURL("static/images/map-shot/watermark.svg")),v=(0,n.iH)({dark:"rgba(0, 0, 0, 0.3)",light:"rgba(255, 255, 255, 0.3)"}),m=()=>{const{width:e,height:t}=h.value;return e<t?"width":"height"},f=()=>{const{width:e,height:t}=h.value;return e>t?"width":"height"},g=(0,n.Fl)((()=>{const e=[{name:i.$T("Thin"),id:"thin",ratio:.1,borderWidth:0},{name:i.$T("Medium"),id:"normal",ratio:.2,borderWidth:0},{name:i.$T("Thick"),id:"thick",ratio:.3,borderWidth:0}],t=(e,t)=>e.map((e=>(e.borderWidth=Math.floor(t*e.ratio),e)));if(!h.value)return t(e,100);const a=m();return t(e,h.value[a])})),S=(0,n.Fl)((()=>g.value.find((e=>e.id===u.value)))),x=(0,n.Fl)((()=>{if(!h.value)return{width:0,height:0};const e=g.value.find((e=>"thick"===e.id)).borderWidth;return{width:h.value.width/(h.value.width+2*e)*d.value.width,height:h.value.height/(h.value.height+2*e)*d.value.height}})),C=(0,n.Fl)((()=>{if(!h.value)return 1;const e=f();return Math.min(1,x.value[e]/h.value[e])})),_=(0,n.Fl)((()=>{const{pngBuffer:e}=a;if(!e)return"";let t="";for(let a=0;a<e.byteLength;a++)t+=String.fromCharCode(e[a]);return`data:image/png;base64,${window.btoa(t)}`})),F=(0,n.Fl)((()=>{const e=g.value.find((e=>"normal"===e.id)).borderWidth,t=(s.value?S.value.borderWidth:e)*C.value;return Math.max(Math.floor(t),2)})),M=(0,n.Fl)((()=>s.value?(0,w.sF)(c.value)>127.5?"dark":"light":"dark")),B=(0,n.Fl)((()=>({bottom:(F.value-Math.max(.15*F.value,6))/2+"px"})));(0,n.YP)(_,(e=>{const t=new Image;t.src=e,t.onload=()=>{h.value={width:t.width,height:t.height}}}));const I=(0,n.Fl)((()=>(0,y.A)().contexts["activation.isValid"]));return{__sfc:!0,PREVIEW_CONTAINER_MAX_HEIGHT:360,PREVIEW_CONTAINER_MAX_WIDTH:400,MIN_PREVIEW_PADDING:2,props:a,emit:t,editorId:o,vm:i,checkedShadow:l,checkedWatermark:r,checkedFrame:s,pickedColor:c,selectedFrame:u,previewCinatinerMaxSize:d,pngSize:h,watermarkImage:p,watermarkColors:v,getSmallerSide:m,getLongerSide:f,frameListConfig:g,selectedFrameData:S,maxPreviewImageSize:x,shrinkRatio:C,pngDataURL:_,previewPadding:F,watermarkColor:M,watermarkImgStyle:B,onCancel:()=>{t("cancel")},onSave:async()=>{t("save",_.value,{frame:s.value,shadow:l.value,watermark:r.value,watermarkColor:M.value,frameColor:c.value,frameWidth:u.value,frameRatio:S.value.ratio})},isActivationValid:I,WatermarkCheckbox:b.Z,ColorPicker:k.Z}}});a(89175);const x=(0,f.Z)(S,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-flex-top uk-overflow-hidden",staticStyle:{"z-index":"1030"},attrs:{id:"map-shot-modal","uk-modal":""}},[t("div",{staticClass:"uk-modal-dialog uk-modal-body uk-margin-auto-vertical uk-format-panel uk-flex springish uk-overflow-hidden",style:{height:"400px",width:"740px",padding:0,borderRadius:"8px",boxShadow:"0px 12px 36px 0px rgba(0,0,0,0.3)"},attrs:{id:"map-shot-modal-body"}},[t("div",{staticClass:"uk-text-center uk-flex uk-flex-middle uk-flex-center",style:{backgroundColor:"dark"===e.appearance?"#949699":"#fafafb",boxSizing:"border-box",height:"100%",width:"440px",borderTopLeftRadius:"8px",borderBottomLeftRadius:"8px"},attrs:{id:"map-shot-preview"}},[t("div",{staticClass:"uk-display-inline-block",style:{position:"relative",overflow:"hidden",backgroundColor:a.checkedFrame?a.pickedColor:"transparent",padding:a.previewPadding+"px"}},[t("div",{staticClass:"uk-position-relative",style:{boxShadow:a.checkedShadow?`0px 0px ${parseInt(.4*a.previewPadding)}px 0px rgba(0, 0, 0, 0.2)`:""}},[a.pngDataURL?t("img",{staticClass:"uk-display-inline-block",style:{maxWidth:`${a.maxPreviewImageSize.width}px`,maxHeight:`${a.maxPreviewImageSize.height}px`},attrs:{draggable:"false",src:a.pngDataURL}}):e._e(),e._v(" "),a.checkedFrame||a.checkedShadow?e._e():t("div",{staticClass:"uk-position-absolute uk-height-1-1 uk-width-1-1",staticStyle:{top:"0",left:"0"},style:{border:"1px solid "+("dark"===e.appearance?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)")}})]),e._v(" "),a.checkedWatermark?t("div",{staticClass:"uk-text-center uk-flex uk-flex-column",staticStyle:{justifycontent:"center"},style:{...a.watermarkImgStyle,width:"100%",position:"absolute",left:0,color:a.watermarkColors[a.watermarkColor],backgroundColor:"transparent"}},[t("img",{staticClass:"uk-display-inline-block",style:{height:.15*a.previewPadding+"px",width:"auto",minHeight:"6px",maxHeight:.8*a.previewPadding+"px"},attrs:{src:a.watermarkImage,"uk-svg":"",draggable:"false"}})]):e._e()])]),e._v(" "),t("div",{staticClass:"uk-flex-column uk-flex uk-flex-between",style:{width:"300px"}},[t("div",{staticClass:"uk-flex uk-flex-column",style:{padding:"48px 20px 0 24px"}},[t("div",{staticClass:"uk-format-panel-section-heading",style:{fontSize:"20px",paddingBottom:"25px"}},[e._v("\n          "+e._s(e.$T("Options"))+"\n        ")]),e._v(" "),t("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle",style:{marginBottom:"8px"}},[t("label",{staticClass:"uk-flex uk-flex-middle"},[t("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-checkbox",attrs:{type:"checkbox"},domProps:{checked:a.checkedFrame},on:{change:function(e){a.checkedFrame=!a.checkedFrame}}}),e._v(" "),t("span",{staticClass:"uk-format-panel-sub-section-heading"},[e._v(e._s(e.$T("Frame")))])])]),e._v(" "),t("div",{staticClass:"uk-format-panel-sub-section uk-flex-middle uk-padding-remove uk-width-1-1"},[t("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}]},[t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-select-base",staticStyle:{width:"176px"},attrs:{disabled:!a.checkedFrame,title:e.$T("Choose a frame style")}},[t("span",[e._v(e._s(a.selectedFrameData.name))]),e._v(" "),t("span",{staticStyle:{"margin-left":"8px"},attrs:{"uk-icon":"icon: chevron-downward; ratio: 0.6"}})]),e._v(" "),t("div",{ref:"popover",staticClass:"uk-popover-contextual",attrs:{"uk-contextual-popover":"","align-checked":"false","data-sel-close":"[uk-menu] > li > button"}},[t("ul",{staticClass:"uk-overflow-hidden uk-height-1-1",attrs:{"uk-menu":""}},e._l(a.frameListConfig,(function(n,o){return t("li",{key:o,attrs:{index:o,value:o}},[t("button",{class:{"uk-active":n.id===a.selectedFrame},on:{click:function(e){a.selectedFrame=n.id}}},[t("span",{staticStyle:{"margin-right":"8px"},style:{visibility:n.id===a.selectedFrame?"visible":"hidden"},attrs:{"uk-icon":"icon: check"}}),e._v(" "),t("span",[e._v(e._s(n.name))])])])})),0)])]),e._v(" "),t(a.ColorPicker,{staticClass:"uk-format-panel-inline-ml uk-flex-no-shrink",attrs:{"popover-container-id":"#map-shot-modal-body",pos:"left-top","is-disabled":!a.checkedFrame},model:{value:a.pickedColor,callback:function(e){a.pickedColor=e},expression:"pickedColor"}})],1),e._v(" "),t("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle",style:{marginTop:"13px"}},[t("label",{staticClass:"uk-flex uk-flex-middle"},[t("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-checkbox",attrs:{type:"checkbox"},domProps:{checked:a.checkedShadow},on:{change:function(e){a.checkedShadow=!a.checkedShadow}}}),e._v(" "),t("span",{staticClass:"uk-format-panel-sub-section-heading"},[e._v(e._s(e.$T("Shadow")))])])]),e._v(" "),t("div",{style:{marginTop:"13px"}},[t(a.WatermarkCheckbox,{attrs:{"is-activation-valid":a.isActivationValid,"editor-id":a.editorId,value:a.checkedWatermark,"text-style":"margin-left: 3px; font-size: 13px; font-weight: 500; line-height: 13px;"},on:{toggle:e=>a.checkedWatermark=e}})],1),e._v(" "),a.isActivationValid?e._e():t("div",{staticClass:"uk-text-muted activation-text"},[e._v("\n          "+e._s(e.$T('"Presented with xmind" is locked before upgrading plan.'))+"\n        ")])]),e._v(" "),t("div",{staticClass:"uk-flex vk-button-group uk-flex-right",style:{marginRight:"21px",marginBottom:"22px"}},[t("button",{staticClass:"vk-button-default vk-size-small",on:{click:a.onCancel}},[e._v("\n          "+e._s(e.$T("Cancel"))+"\n        ")]),e._v(" "),t("button",{staticClass:"vk-button-secondary vk-size-small map-shot-save-btn",on:{click:a.onSave}},[e._v("\n          "+e._s(e.$T("Copy & Save"))+"\n        ")])])])])])}),[],!1,null,"10794072",null).exports;var C=a(28914),_=a(69931),F=a(67214);const{BrowserWindow:M,screen:B,BrowserView:I}=p;const V=e=>(0,w.lF)(e),T=class{constructor(e){const t=B.getAllDisplays().reduce(((e,t)=>e?e.workArea.y+e.workArea.height<t.workArea.y+t.workArea.height?t:e:t),null);this.window=new M({show:!1,enableLargerThanScreen:!0,maxWidth:1/0,maxHeight:1/0,x:t.workArea.x+t.workArea.width-1,y:t.workArea.y+t.workArea.height-1,skipTaskbar:!0,focusable:!1,frame:!1,fullscreenable:!1,alwaysOnTop:!0}),this.view=new I,this.view.setAutoResize({horizontal:!0,vertical:!0}),this.view.webContents.loadURL((0,_.ju)("static/html/map-shot-placeholder.html")),this.currentBrowserWindowId=e.currentBrowserWindowId}async capturePage(e,t,a,n){const{result:o}=await async function(e,t){const a={};for(let n=0;n<e.length;n++){const{name:o,fn:i}=e[n];`before/${o}`in t&&await t[`before/${o}`](),await i(a),`after/${o}`in t&&await t[`after/${o}`]()}return a}([{name:"init",fn:async e=>{e.currentBrowserView=function(){const e=C.Z.sendSync("get-current-browser-view-index",window.editorId);return p.getCurrentWindow().getBrowserViews()[e]}(),e.currentBrowserWindow=M.fromId(this.currentBrowserWindowId),e.originBrowserViewSize=e.currentBrowserView.getBounds(),e.originBrowserWindowSize=e.currentBrowserWindow.getBounds()}},{name:"showWindow",fn:async()=>{this.window.show()}},{name:"moveBrowserViewBeforeCapture",fn:async e=>{this.window.removeBrowserView(this.view),e.currentBrowserWindow.addBrowserView(this.view),e.currentBrowserWindow.setTopBrowserView(this.view),this.view.setBounds(e.originBrowserViewSize),e.currentBrowserWindow.removeBrowserView(e.currentBrowserView),this.window.addBrowserView(e.currentBrowserView)}},{name:"setBoundsBeforeCapture",fn:async e=>{this.window.setSize(Math.round(n.width),Math.round(n.height)),await(0,w.SX)(),await(0,d._v)(100),e.currentBrowserView.setBounds({width:Math.round(n.width),height:Math.round(n.height),x:0,y:0}),await(0,w.SX)(),await(0,d._v)(100)}},{name:"appendMapShotSvgPreview",fn:async e=>{document.body.appendChild(t),await(0,w.SX)(),await(0,d._v)(100),e.mapShotStyle=document.createElement("style"),e.mapShotStyle.innerHTML=A,document.head.append(e.mapShotStyle),await(0,w.SX)(),await(0,d._v)(100)}},{name:"capturePage",fn:async e=>{const{ctx:o,canvas:i}=(0,F.d5)();o.clearRect(0,0,i.width,i.height),o.imageSmoothingEnabled=!1;const l=await(0,w.mi)(a.width,a.height,2);i.width=a.width*l,i.height=a.height*l;const r=Math.ceil(a.width/n.width),s=Math.ceil(a.height/n.height),c=t.querySelector('g[data-view-id="preview"]'),u=c.getAttribute("transform"),h=u.match(/scale\(([^,]+),\s*([^)]+)\)/),p=parseFloat(null==h?void 0:h[1]),v=parseFloat(null==h?void 0:h[2]);for(let t=0;t<s;t++)for(let a=0;a<r;a++){const o=a*n.width,r=t*n.height,s=u+` translate(${-o/(p||1)}, ${-r/(v||1)})`;c.setAttribute("transform",s),await(0,w.SX)(),await(0,d._v)(200);const h=await e.currentBrowserView.webContents.capturePage({x:0,y:0,width:n.width,height:n.height});await(0,F.vV)(i,h.toDataURL(),o*l,r*l,n.width*l,n.height*l)}e.img=i.toDataURL()}},{name:"createChangedPngDpiBuffer",fn:async e=>{e.result=this.createChangedPngDpiBuffer(e.img)}},{name:"removeMapShotSvgPreview",fn:async e=>{t.remove(),e.mapShotStyle.remove()}},{name:"setBoundsAfterCapture",fn:async e=>{const{width:t,height:a}=e.originBrowserViewSize,{width:n,height:o}=e.originBrowserWindowSize;this.window.setSize(n,o),e.currentBrowserView.setBounds({width:t,height:a,x:0,y:0}),await(0,w.SX)()}},{name:"moveBrowserViewAfterCapture",fn:async e=>{e.currentBrowserWindow.addBrowserView(e.currentBrowserView),e.currentBrowserWindow.removeBrowserView(this.view),this.window.removeBrowserView(e.currentBrowserView)}},{name:"hideWindow",fn:async()=>{this.window.hide(),p.getCurrentWindow().focus()}}],e);return o}createChangedPngDpiBuffer(e){return V(e)}destroy(){this.window.destroy(),this.window=null,this.view=null}},A="\n#app{\n  opacity: 0 !important;\n}\n.uk-toast{\n  opacity: 0 !important;\n}\n",W={big:{width:263,height:20},normal:{width:197,height:15},small:{width:131,height:11}};class H{constructor(e,t){this.canvas=document.createElement("canvas"),this.options=t,this.imageDataUrl=e,this.shadowColor="rgba(0, 0, 0, 0.1)",this.shadowBlurRatio=.4,this.shadowBlurWidth=10,this.watermarkBottomBorderNoFrameMaxRatio=.2,this.watermarkUrl=(0,_.ju)("static/images/map-shot/watermark-light.svg"),this.watermarkDarkUrl=(0,_.ju)("static/images/map-shot/watermark-dark.svg"),this.watermarkColor=t.watermarkColor||"dark",this.canvasScale=1}loadImage(e){return new Promise(((t,a)=>{const n=new Image;n.src=e,n.onload=()=>{t(n)},n.onerror=e=>a(e)}))}async initCanvas(e){const{frame:t,shadow:a,watermark:n,frameRatio:o}=this.options,i={width:e.width,height:e.height},l=i.width<i.height?"width":"height",r="width"===l?"height":"width",s={width:400,height:360};let c=[0,0,0,0];t?c=c.map((()=>i[l]*o)):a?c=c.map((()=>i[l]*this.shadowBlurRatio*this.shadowBlurRatio)):n&&(c[2]=i[l]*this.shadowBlurRatio*this.shadowBlurRatio);const u=()=>i.width+c[1]+c[3],d=()=>i.height+c[0]+c[2],h={width:u(),height:d()};let p={[r]:s[r],[l]:s[r]*(h[l]/h[r])};p.width<s.width+1&&p.height<s.height+1||(p={[l]:s[l],[r]:s[l]*(h[r]/h[l])});const v=p.height*(i.height/h.height);let m=null;if(n){const e=h.width/p.width,a=h.height/p.height;m=this.getAppropriateWatermark(i),m.width>u()&&(c[1]=c[3]=(m.width-i.width)/2+1*e),m.height+c[0]+i.height>d()&&(c[2]=m.height+2*a*2),!t&&m.height/c[2]>this.watermarkBottomBorderNoFrameMaxRatio&&(c[2]=m.height/this.watermarkBottomBorderNoFrameMaxRatio)}let f=null;if(a){f=i.height*(this.shadowBlurWidth/v);const e=Math.min.apply(null,c);f>Math.min.apply(null,c)&&(f=e)}const g={width:u(),height:d()};return this.canvasScale=await(0,w.mi)(g.width,g.height),this.canvas.width=g.width*this.canvasScale,this.canvas.height=g.height*this.canvasScale,{context:this.canvas.getContext("2d"),border:c.map((e=>e*this.canvasScale)),watermarkSize:{width:(null==m?void 0:m.width)*this.canvasScale,height:(null==m?void 0:m.height)*this.canvasScale},shadowBlur:f*this.canvasScale}}drawFrame(e){const{frame:t,frameColor:a}=this.options;e.fillStyle=t?a:"rgba(0, 0, 0, 0)",e.fillRect(0,0,this.canvas.width,this.canvas.height)}drawShadow(e,t,a,n){const{shadow:o}=this.options;o&&(e.fillStyle="#FFF",e.shadowBlur=n,e.shadowColor=this.shadowColor,e.fillRect(a[3],a[0],t.width*this.canvasScale,t.height*this.canvasScale))}drawImage(e,t,a){e.imageSmoothingEnabled=!1,e.drawImage(t,a[3],a[0],t.width*this.canvasScale,t.height*this.canvasScale)}drawWatermark(e,t,a,n,o){const{watermark:i}=this.options;if(!i)return;e.imageSmoothingEnabled=!1;const l=n[2],{width:r,height:s}=o;let c=n[3],u=n[0]+t.height*this.canvasScale;c+=(t.width*this.canvasScale-r)/2,u+=(l-s)/2,e.drawImage(a,c,u,r,s)}getAppropriateWatermark(e){let t;return t=e.width<1e3||e.height<1e3?W.small:e.width>5e3||e.height>5e3?W.big:W.normal,t}getPngDataURL(){return this.canvas.toDataURL("image/png")}async build(){const e=await this.loadImage(this.imageDataUrl),t=await this.loadImage(this.options.frame?"light"===this.watermarkColor?this.watermarkDarkUrl:this.watermarkUrl:this.watermarkDarkUrl),{context:a,border:n,watermarkSize:o,shadowBlur:i}=await this.initCanvas(e);return this.drawFrame(a),this.drawShadow(a,e,n,i),this.drawImage(a,e,n),this.drawWatermark(a,e,t,n,o),this.getPngDataURL()}}var E=a(87141),R=a(27049),L=a(84374);const O=(0,n.aZ)({__name:"map-shot-v2",setup(e){const t=[400,400],a="free",o=(0,s.ZP)("map-shot"),m=(0,n.FN)().proxy,{T:f}=(0,E.JE)();let w=null;const b=(0,n.iH)(!1),k=(0,n.iH)(!1),S=(0,n.iH)(!1),C=(0,n.iH)(null),_=(0,n.iH)(null),F=(0,n.iH)(!1),M=(0,n.iH)(null),B=(0,n.iH)(null);let I=null;(0,n.bv)((()=>{q(!1),C.value=new T({currentBrowserWindowId:window.id}),m.$el.focus(),oe=ne()})),(0,n.Jd)((()=>{q(!0),C.value.destroy(),oe&&oe(),le()}));const A=(0,n.Fl)((()=>(0,y.A)().contexts["activation.isValid"])),W=(0,n.Fl)((()=>(0,E.S)().appearance)),O=(0,n.Fl)((()=>(0,R.E)().getZoomScaleForSheet((0,L.nZ)().activeSheetId.value))),$=(0,n.Fl)((()=>(0,E.tP)().screenshot.size||t)),P=(0,n.Fl)((()=>(0,E.tP)().screenshot.rate||a)),z=(0,n.Fl)((()=>(0,L.nZ)().editorContainer.value)),D=(0,n.Fl)((()=>{const e=Object.assign({},(0,E.tP)().modalOptions);return A.value?e.watermark=(0,E.S)().watermarkEnabled:e.watermark=!0,e})),N=(0,n.Fl)((()=>{const e=(0,y.r)(),t=(null==e?void 0:e.editorViewInfos.length)>1;return(null==e?void 0:e.isShowTabBar)||t})),U=(0,n.Fl)((()=>52+(N.value?28:0))),Z=(0,n.Fl)((()=>{const e=j.value.children[0];return{width:parseFloat(e.getAttribute("width")),height:parseFloat(e.getAttribute("height"))}})),X=(0,n.Fl)((()=>j.value.children[0].children[0].getAttribute("transform"))),Y=(0,n.Fl)((()=>{const[e]=v().getSize();let t=8;return j.value.clientWidth===e&&(t=0),{borderRadius:"12px",left:"12px",bottom:`${12+t}px`,right:`${t}px`,top:`${U.value}px`}})),G=(0,n.Fl)((()=>{var e,t,a,n;const o=null!==(n=null===(a=null===(t=null===(e=(0,L.nZ)().styles)||void 0===e?void 0:e.value)||void 0===t?void 0:t.mapBackgroundColor)||void 0===a?void 0:a.value)&&void 0!==n?n:"none",i="none"===o?"#FFFFFF":o,l=[parseInt("0x"+i.slice(1,3)),parseInt("0x"+i.slice(3,5)),parseInt("0x"+i.slice(5,7))];return(l[0]+l[1]+l[2])/3})),j=(0,n.Fl)((()=>{const{sheets:e,activeSheetId:t}=(0,L.nZ)(),a=e.value.findIndex((e=>e.id===t.value));if(a<0)return;const n=z.value.children[a];return n||null})),q=e=>{const t=v();t.setResizable(e),t.setMaximizable(e),t.setFullScreenable(e)},J=async e=>{k.value=!0;const t=`Xmind ${Date.now()}`,a=i().join(ce(),`${t}.png`);M.value=a;try{await function(e,t,a){const{nativeImage:n,clipboard:o}=p,{mimetype:i="image/png"}=a;let l;return Buffer.isBuffer(t)?l=t:"string"==typeof t&&(l=Buffer.from(t.replace(`data:${i};base64,`,""),"base64")),a.clipboard&&o.writeImage(n.createFromBuffer(l)),u.Z.writeFile(e,l)}(a,e,{clipboard:!0})}catch(t){let[a]=await(0,r.N0)({type:"info",message:f("Failed to save image"),detail:f("Xmind has no permission to access this folder. Please change another one."),buttons:[f("Continue"),f("Cancel")],defaultId:0,cancelId:1});if(0==a){let t=await(0,r.ZZ)({suggestPath:(0,r.am)({}),filters:[{name:"PNG",extensions:["png"]}]});t&&u.Z.writeFile(t,e)}}k.value=!1},K={width:2e3,height:2e3},Q=async e=>{var t;const{activeSheetViewer:a}=(0,L.nZ)(),n=await(null===(t=a.value)||void 0===t?void 0:t.exportSVGElement({opaqueBackground:!0,disableEmbedFonts:!0})),o=document.createElement("div");o.style.width=K.width+"px",o.style.height=K.height+"px",o.style.position="fixed",o.style.left="0",o.style.top="0",o.style.overflow="hidden",o.appendChild(n);const{width:i,height:l}=Z.value;n.setAttribute("width",i.toString()),n.setAttribute("height",l.toString()),n.removeAttribute("viewBox");const r=n.querySelector('g[data-view-id="preview"]'),s=`translate(${-(e.left+j.value.scrollLeft)}, ${-(e.top+j.value.scrollTop)}) `+X.value;return r.setAttribute("transform",s),o},ee=async e=>{const t=await Q(e);return C.value.capturePage({"after/showWindow":async()=>{S.value=!0,await(0,n.Y3)()},"after/capturePage":async()=>{b.value=!0}},t,{width:e.width,height:e.height},K)},te=(e,t)=>{(0,c.L9)({eventAction:"clickCaptureMap",eventName:"mapShotRatio",eventValue:e}),(0,c.L9)({eventAction:"clickCaptureMap",eventName:"mapShotResolution",eventValue:JSON.stringify(t)})},ae=(()=>{let e=null;return()=>(e||(e=document.getElementById("map-shot-modal")),e)})(),ne=()=>{const e=document.querySelector("#map-shot-modal"),t=new MutationObserver((t=>{t.forEach((t=>{"attributes"===t.type&&"class"===t.attributeName&&(!t.oldValue.includes("uk-open")&&e.getAttribute("class").includes("uk-open")?F.value=!0:t.oldValue.includes("uk-open")&&!e.getAttribute("class").includes("uk-open")&&(F.value=!1))}))}));return t.observe(e,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0}),()=>{t.disconnect()}};let oe=null;const ie=()=>{const{UIkit:e}=window,t=ae();return e.modal(t)},le=()=>{const e=ie();e&&(e.hide(),e.$destroy(!0))},re=async e=>{var t;_.value=e,await(0,n.Y3)(),null===(t=ie())||void 0===t||t.show()},se=(e,t,a,n,o)=>{A.value&&(0,c.L9)({eventAction:"watermarkStatus",eventName:a?"MapShotwithWatermark":"MapShotwithoutWatermark"}),(0,c.L9)({eventAction:"addBorder",eventValue:e}),(0,c.L9)({eventAction:"addShadow",eventValue:t}),(0,c.L9)({eventAction:"addWatermark",eventValue:a}),e&&((0,c.L9)({eventAction:"borderWidth",eventValue:n}),(0,c.L9)({eventAction:"borderColor",eventValue:o}))},ce=()=>{let e=null;try{e=p.app.getPath("desktop")}catch(t){o.error((0,d.SC)(t)),e=(0,r.am)({})}return e},ue=()=>{var e,t;M.value?(t=M.value,h.shell.showItemInFolder(t)):(e=ce(),h.shell.openPath(e))};return{__sfc:!0,WIN_SCROLL_BAR_WIDTH:8,MAC_LINUX_SCROLL_BAR_WIDTH:13,WHEEL_MAX_DELTA_Y:10,MAP_SHOT_DEFAULT_SIZE:t,MAP_SHOT_DEFAULT_RATE:a,logger:o,vm:m,$T:f,resetMapShotFrameStyle:w,isShowMapShotMask:b,isSaving:k,isTakingShot:S,pageCapturer:C,tmpPngBuffer:_,isShowModal:F,mapShotFilePath:M,mapShotFrameComponent:B,uikitSaveToast:I,isActivationValid:A,appearance:W,zoomScaleForActiveSheet:O,defaultSize:$,defaultRate:P,editorContainer:z,defaultModalOptions:D,isShowTabBar:N,topbarHeight:U,canvasClient:Z,canvasContentTransform:X,containerStyle:Y,mindMapBackgroundGrayscale:G,activeSheetContainer:j,onWheelAndPinch:e=>{if(e.ctrlKey){const t=Math.abs(e.deltaY)>10?e.deltaY/Math.abs(e.deltaY)*10:e.deltaY;let a=Math.floor(-t)+O.value;a>l.Y1?a=l.Y1:a<l.d_&&(a=l.d_),(0,R.E)().updateSheetStatus({id:(0,L.nZ)().activeSheetId.value,zoomScale:a})}else j.value.scrollBy(e.deltaX,e.deltaY)},setBrowserWindowResizable:q,saveImg:J,CHUNK_SIZE:K,makeCaptureSVG:Q,capturePage:ee,onTakeShot:async(e,t,a)=>{if(k.value)return;if(null==I?void 0:I.close){const e=!0;I.close(e),I=null}const o=await ee(e);re(o),await(0,n.Y3)(),S.value=!1,b.value=!1,B.value.isShowGoMapShotBar=!1,(0,E.tP)().updateScreenshot({rate:t,size:a}),te(t,a)},trackClickMapShotEvent:te,getMapShotModalEl:ae,addMapShotModalEventListener:ne,removeMapShotModalEventListener:oe,getMapShotModal:ie,closeMapShotModal:le,openMapShotModal:re,onMapShotModalCancel:()=>{le()},onMapShotModalSave:async(e,t)=>{const a=new H(e,t),o=await a.build();J(V(o)),(0,n.Y3)((()=>{le(),(0,E.tP)().updateModalOptions({frame:t.frame,shadow:t.shadow,frameColor:t.frameColor,frameWidth:t.frameWidth}),(0,E.S)().updatePreferences({watermarkEnabled:t.watermark}),m.$withUIKit((e=>{const t=`<div class="vk-button-group">\n            <button\n            class="vk-button-link vk-size-small"\n            focustrigger="cannotGetFocusByMouse">\n              ${f("Open Folder")}\n            </button>\n            </div>`;I=e.toast({message:f("The map you captured is saved and copied."),pos:"bottom-center",timeout:4e3,btn:t,onclose:()=>{var e,t;null===(t=null===(e=null==I?void 0:I.$el)||void 0===e?void 0:e.parentElement)||void 0===t||t.remove()},style:{width:"360px"},btnClick:ue})})),se(t.frame,t.shadow,t.watermark,t.frameWidth,t.frameColor)}))},trackSaveMapShotModalEvent:se,onCloseMapShot:()=>{(0,E.JX)().handleCommand("mapShot")},getMapShotFolder:ce,onOpenMapShotFolder:ue,MapShotFrame:g,MapShotModal:x}}});a(81837);const $=(0,f.Z)(O,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{attrs:{tabindex:"0"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:a.onCloseMapShot.apply(null,arguments)}}},[t(a.MapShotFrame,{directives:[{name:"show",rawName:"v-show",value:!a.isShowModal,expression:"!isShowModal"}],ref:"mapShotFrameComponent",attrs:{visible:!a.isTakingShot,"default-size":a.defaultSize,"default-rate":a.defaultRate,appearance:a.appearance,"container-style":a.containerStyle,"background-grayscale":a.mindMapBackgroundGrayscale,"sheet-container-element":a.activeSheetContainer,"canvas-width":a.canvasClient.width,"canvas-height":a.canvasClient.height,"top-bar-height":a.topbarHeight,"is-taking-shot":a.isTakingShot},on:{mousewheel:a.onWheelAndPinch,close:a.onCloseMapShot,takeshot:a.onTakeShot}}),e._v(" "),t(a.MapShotModal,{attrs:{"png-buffer":a.tmpPngBuffer,appearance:a.appearance,"default-checked-frame":a.defaultModalOptions.frame,"default-checked-shadow":a.defaultModalOptions.shadow,"default-checked-watermark":a.defaultModalOptions.watermark,"default-frame-color":a.defaultModalOptions.frameColor,"default-frame-width":a.defaultModalOptions.frameWidth},on:{save:a.onMapShotModalSave,cancel:a.onMapShotModalCancel}}),e._v(" "),t("keep-alive",[t("transition",{attrs:{"leave-active-class":"uk-animation-fade uk-animation-reverse uk-animation-duration-500ms"}},[a.isShowMapShotMask?t("div",{staticClass:"uk-position-fixed uk-height-1-1 uk-width-1-1 uk-panel uk-position-cover",staticStyle:{"z-index":"1021","background-color":"white"}}):e._e()])],1)],1)}),[],!1,null,"35353ac8",null).exports},37485:(e,t,a)=>{var n=a(90620);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("5ae48fdd",n,!0,{})},58372:(e,t,a)=>{var n=a(68794);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("31bb4bc5",n,!0,{})},60244:(e,t,a)=>{var n=a(15884);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("eae1378e",n,!0,{})},89175:(e,t,a)=>{var n=a(90320);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("17729717",n,!0,{})},81837:(e,t,a)=>{var n=a(43686);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("d7b64244",n,!0,{})},45346:(e,t,a)=>{"use strict";function n(e,t){for(var a=[],n={},o=0;o<t.length;o++){var i=t[o],l=i[0],r={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};n[l]?n[l].parts.push(r):a.push(n[l]={id:l,parts:[r]})}return a}a.d(t,{Z:()=>v});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},l=o&&(document.head||document.getElementsByTagName("head")[0]),r=null,s=0,c=!1,u=function(){},d=null,h="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(e,t,a,o){c=a,d=o||{};var l=n(e,t);return m(l),function(t){for(var a=[],o=0;o<l.length;o++){var r=l[o];(s=i[r.id]).refs--,a.push(s)}t?m(l=n(e,t)):l=[];for(o=0;o<a.length;o++){var s;if(0===(s=a[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}}function m(e){for(var t=0;t<e.length;t++){var a=e[t],n=i[a.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](a.parts[o]);for(;o<a.parts.length;o++)n.parts.push(g(a.parts[o]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{var l=[];for(o=0;o<a.parts.length;o++)l.push(g(a.parts[o]));i[a.id]={id:a.id,refs:1,parts:l}}}}function f(){var e=document.createElement("style");return e.type="text/css",l.appendChild(e),e}function g(e){var t,a,n=document.querySelector("style["+h+'~="'+e.id+'"]');if(n){if(c)return u;n.parentNode.removeChild(n)}if(p){var o=s++;n=r||(r=f()),t=k.bind(null,n,o,!1),a=k.bind(null,n,o,!0)}else n=f(),t=y.bind(null,n),a=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else a()}}var w,b=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function k(e,t,a,n){var o=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var i=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(i,l[t]):e.appendChild(i)}}function y(e,t){var a=t.css,n=t.media,o=t.sourceMap;if(n&&e.setAttribute("media",n),d.ssrId&&e.setAttribute(h,t.id),o&&(a+="\n/*# sourceURL="+o.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}},7836:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var n={name:"teleport",props:{to:{type:String,required:!0},where:{type:String,default:"after"},disabled:Boolean},data:function(){return{nodes:[],waiting:!1,observer:null,parent:null}},watch:{to:"maybeMove",where:"maybeMove",disabled:function(e){e?(this.disable(),this.teardownObserver()):(this.bootObserver(),this.move())}},mounted:function(){this.nodes=Array.from(this.$el.childNodes),this.disabled||this.bootObserver(),this.maybeMove()},beforeDestroy:function(){this.disable(),this.teardownObserver()},computed:{classes:function(){return this.disabled?["teleporter"]:["teleporter","hidden"]}},methods:{maybeMove:function(){this.disabled||this.move()},move:function(){if(this.waiting=!1,this.parent=document.querySelector(this.to),!this.parent)return this.disable(),void(this.waiting=!0);"before"===this.where?this.parent.prepend(this.getFragment()):this.parent.appendChild(this.getFragment())},disable:function(){this.$el.appendChild(this.getFragment()),this.parent=null},getFragment:function(){var e=document.createDocumentFragment();return this.nodes.forEach((function(t){return e.appendChild(t)})),e},onMutations:function(e){for(var t=this,a=!1,n=0;n<e.length;n++){var o=e[n],i=Array.from(o.addedNodes).filter((function(e){return!t.nodes.includes(e)}));Array.from(o.removedNodes).includes(this.parent)?(this.disable(),this.waiting=!this.disabled):this.waiting&&i.length>0&&(a=!0)}a&&this.move()},bootObserver:function(){var e=this;this.observer||(this.observer=new MutationObserver((function(t){return e.onMutations(t)})),this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}))},teardownObserver:function(){this.observer&&(this.observer.disconnect(),this.observer=null)}}};function o(e,t,a,n,o,i,l,r,s,c){"boolean"!=typeof l&&(s=r,r=l,l=!1);var u,d="function"==typeof a?a.options:a;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),n&&(d._scopeId=n),i?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,s(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=u):t&&(u=l?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),u)if(d.functional){var h=d.render;d.render=function(e,t){return u.call(t),h(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,u):[u]}return a}var i,l="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function r(e){return function(e,t){return function(e,t){var a=l?t.media||"default":e,n=s[a]||(s[a]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);var o=t.source;if(t.map&&(o+="\n/*# sourceURL="+t.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),void 0===i&&(i=document.head||document.getElementsByTagName("head")[0]),i.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(o),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{var r=n.ids.size-1,c=document.createTextNode(o),u=n.element.childNodes;u[r]&&n.element.removeChild(u[r]),u.length?n.element.insertBefore(c,u[r]):n.element.appendChild(c)}}}(e,t)}}var s={};var c=n,u=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.classes},[e._t("default")],2)};u._withStripped=!0;var d=o({render:u,staticRenderFns:[]},(function(e){e&&e("data-v-d4e6e290_0",{source:".hidden[data-v-d4e6e290] {\n  visibility: hidden;\n  display: none;\n}\n\n/*# sourceMappingURL=Teleport.vue.map */",map:{version:3,sources:["/Users/shodan/Projects/vue2-teleport/src/Teleport.vue","Teleport.vue"],names:[],mappings:"AAuJA;EACA,kBAAA;EACA,aAAA;ACtJA;;AAEA,uCAAuC",file:"Teleport.vue",sourcesContent:["<template>\n  <div :class=\"classes\">\n    <slot/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'teleport',\n  props: {\n    to: {\n      type: String,\n      required: true,\n    },\n    where: {\n      type: String,\n      default: 'after',\n    },\n    disabled: Boolean,\n  },\n  data() {\n    return {\n      nodes: [],\n      waiting: false,\n      observer: null,\n      parent: null,\n    };\n  },\n  watch: {\n    to: 'maybeMove',\n    where: 'maybeMove',\n    disabled(value) {\n      if (value) {\n        this.disable();\n        this.teardownObserver();\n      } else {\n        this.bootObserver();\n        this.move();\n      }\n    },\n  },\n  mounted() {\n    // Store a reference to the nodes\n    this.nodes = Array.from(this.$el.childNodes);\n\n    if (!this.disabled) {\n      this.bootObserver();\n    }\n\n    // Move slot content to target\n    this.maybeMove();\n  },\n  beforeDestroy() {\n    // Move back\n    this.disable();\n\n    // Stop observing\n    this.teardownObserver();\n  },\n  computed: {\n    classes() {\n      if (this.disabled) {\n        return ['teleporter'];\n      }\n\n      return ['teleporter', 'hidden'];\n    },\n  },\n  methods: {\n    maybeMove() {\n      if (!this.disabled) {\n        this.move();\n      }\n    },\n    move() {\n      this.waiting = false;\n\n      this.parent = document.querySelector(this.to);\n\n      if (!this.parent) {\n        this.disable();\n\n        this.waiting = true;\n\n        return;\n      }\n\n      if (this.where === 'before') {\n        this.parent.prepend(this.getFragment());\n      } else {\n        this.parent.appendChild(this.getFragment());\n      }\n    },\n    disable() {\n      this.$el.appendChild(this.getFragment());\n      this.parent = null;\n    },\n    // Using a fragment is faster because it'll trigger only a single reflow\n    // See https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\n    getFragment() {\n      const fragment = document.createDocumentFragment();\n\n      this.nodes.forEach(node => fragment.appendChild(node));\n\n      return fragment;\n    },\n    onMutations(mutations) {\n      // Makes sure the move operation is only done once\n      let shouldMove = false;\n\n      for (let i = 0; i < mutations.length; i++) {\n        const mutation = mutations[i];\n        const filteredAddedNodes = Array.from(mutation.addedNodes).filter(node => !this.nodes.includes(node));\n\n        if (Array.from(mutation.removedNodes).includes(this.parent)) {\n          this.disable();\n          this.waiting = !this.disabled;\n        } else if (this.waiting && filteredAddedNodes.length > 0) {\n          shouldMove = true;\n        }\n      }\n\n      if (shouldMove) {\n        this.move();\n      }\n    },\n    bootObserver() {\n      if (this.observer) {\n        return;\n      }\n\n      this.observer = new MutationObserver(mutations => this.onMutations(mutations));\n\n      this.observer.observe(document.body, {\n        childList: true,\n        subtree: true,\n        attributes: false,\n        characterData: false,\n      });\n    },\n    teardownObserver() {\n      if (this.observer) {\n        this.observer.disconnect();\n        this.observer = null;\n      }\n    },\n  },\n};\n<\/script>\n\n<style scoped lang=\"scss\">\n.hidden {\n  visibility: hidden;\n  display: none;\n}\n</style>\n",".hidden {\n  visibility: hidden;\n  display: none;\n}\n\n/*# sourceMappingURL=Teleport.vue.map */"]},media:void 0})}),c,"data-v-d4e6e290",false,undefined,!1,r,void 0,void 0);var h={install:function e(t){e.installed||(e.installed=!0,t.component("Teleport",d))}},p=null;"undefined"!=typeof window?p=window.Vue:"undefined"!=typeof global&&(p=global.Vue),p&&p.use(h);const v=d}}]);