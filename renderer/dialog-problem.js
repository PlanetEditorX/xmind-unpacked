"use strict";(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[3757],{39953:(e,t,n)=>{n.r(t);var o=n(59042),i=n(2954),r=n(63111),a=n(87141),s=n(69931),c=n(85786);const d=r.Us["dialog-problem"];var l;!function(e){e.OPEN_FILE="OPEN_FILE",e.OPEN_LINK="OPEN_LINK",e.OPEN_EMAIL="OPEN_EMAIL"}(l||(l={}));const u=(0,i.aZ)({setup(){const{code:e,stack:t,message:n}=(0,a.JS)("dialog-problem")().error,o=(0,a.JE)().T,r=(0,i.Fl)((()=>{switch(e){case l.OPEN_FILE:return o("Unable to Open File");case l.OPEN_LINK:return o("The Browser Can't Be Opened");case l.OPEN_EMAIL:return o("The E-mail Client Can't Be Opened")}})),u=(0,i.Fl)((()=>{switch(e){case l.OPEN_FILE:return o("This file may have become corrupted. You may be able to retrieve previous versions from your File Cache, or report the issue to us for a solution. Thank you for helping us improve.");case l.OPEN_LINK:return o("Oops, there was an error here. You may check the default browser of the system, or report it to us for a solution. Thank you for helping us to get better.");case l.OPEN_EMAIL:return o("Oops, there was an error here. You may check the default e-mail client of the system, or report it to us for a solution. Thank you for helping us to get better.")}})),p=(0,i.Fl)((()=>{const e=(0,c.Yv)();return`${[e.platform,e.arch,e.release].join(",")}:\n--------------------------------------------------\n${t||n}`}));return{iconImageURL:(0,s.ju)("static/images/error-dialog-icon.svg"),errorTitle:r,errorDesc:u,errorDetails:p,isOpenFileErr:e===l.OPEN_FILE,openFileCache:()=>{(0,a.JX)().handleCommand("fileCache")},sendFeedback:()=>{(0,a.JX)().handleCommand("feedback",{query:{isSendDiagnostic:!0}})},expandDialog:()=>{window.resizeTo(d.width,d.height+180)},shrinkDialog:()=>{window.resizeTo(d.width,d.height+8)},close:()=>{window.close()},$T:o}}});const p=(0,n(51900).Z)(u,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vk-window-dialog",attrs:{id:"app"}},[t("div",{staticClass:"vk-window-title-bar"},[t("div",{staticClass:"vk-window-title"},[e._v("\n      "+e._s(e.$T("Problem Occurred"))+"\n    ")]),e._v(" "),t("window-control-button-group")],1),e._v(" "),t("div",{staticClass:"vk-window-body uk-flex uk-flex-column uk-overflow-hidden",staticStyle:{padding:"22px 24px"}},[t("div",{staticClass:"uk-flex uk-flex-top uk-margin"},[t("div",{staticStyle:{width:"88px",height:"88px","background-position":"100% 100%"},attrs:{"data-src":e.iconImageURL,"uk-img":""}}),e._v(" "),t("div",{staticClass:"uk-width-expand uk-margin-left"},[t("h1",{staticClass:"uk-margin-remove"},[e._v(e._s(e.errorTitle))]),e._v(" "),t("p",{staticStyle:{margin:"8px 0 12px"}},[e._v(e._s(e.errorDesc))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpenFileErr,expression:"isOpenFileErr"}]},[t("div",[t("button",{staticClass:"vk-button-link vk-size-small",on:{click:e.openFileCache}},[e._v("\n              "+e._s(e.$T("Retrieve from File Cache"))+"\n            ")])]),e._v(" "),t("button",{staticClass:"vk-button-link vk-size-small",on:{click:e.sendFeedback}},[e._v("\n            "+e._s(e.$T("Report Issue to Xmind"))+"\n          ")])])])]),e._v(" "),t("div",{staticClass:"uk-panel uk-height-expand error-details-toggle-group",attrs:{hidden:!0}},[t("pre",{staticClass:"uk-panel-scrollable uk-height-1-1",staticStyle:{"user-select":"text"}},[e._v(e._s(e.errorDetails))])])]),e._v(" "),t("div",{staticClass:"vk-window-button-bar"},[e.isOpenFileErr?t("div",[t("button",{staticClass:"vk-button-default vk-size-small",on:{click:e.close}},[e._v("\n        "+e._s(e.$T("Close"))+"\n      ")])]):t("div",{staticClass:"vk-button-group"},[t("button",{staticClass:"vk-button-secondary vk-size-small",on:{click:e.sendFeedback}},[e._v("\n        "+e._s(e.$T("Send to Xmind"))+"\n      ")]),e._v(" "),t("button",{staticClass:"vk-button-default vk-size-small",on:{click:e.close}},[e._v("\n        "+e._s(e.$T("Cancel"))+"\n      ")])]),e._v(" "),t("button",{staticClass:"vk-button-default vk-size-small error-details-toggle-group",attrs:{type:"button","uk-toggle":"target: .error-details-toggle-group",autofocus:""},on:{click:e.expandDialog}},[e._v("\n      "+e._s(e.$T("Error Code"))+"\n    ")]),e._v(" "),t("button",{staticClass:"vk-button-default vk-size-small error-details-toggle-group",attrs:{type:"button","uk-toggle":"target: .error-details-toggle-group",hidden:""},on:{click:e.shrinkDialog}},[e._v("\n      "+e._s(e.$T("Hide Error Code"))+"\n    ")])])])}),[],!1,null,null,null).exports;(0,o.Z)(p,{name:"dialog-problem"})},59042:(e,t,n)=>{n.d(t,{Z:()=>fe});var o=n(47311),i=n(23352),r=n(90435);const a=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",s=(0,i.ZP)(`error:${a}`),c=new o.q(s,{ipc:r.ZP});window.addEventListener("error",(function(e){const t=e.error;t&&c.handle(t)})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason;t&&c.handle(t)}));const d=c;var l=n(2954),u=n(63477),p=n.n(u),w=n(72298),v=n(67657),m=n(13780),f=n.n(m),h=n(30266),y=n(86396),g=n(31945),b=n(54856),k=n(73884),A=n(28914),E=n(56222),L=n(79409),P=n(65114),O=n(77412);const S={install(e){const t="vana-ref";e.directive(t,{bind:function(e,t,n){t.value(n.componentInstance||e,n.key)},update:function(e,n,o,i){if(i.data&&i.data.directives){var r=i.data.directives.find((function(e){return e.name===t}));if(r&&r.value!==n.value)return r&&r.value(null,i.key),void n.value(o.componentInstance||e,o.key)}o.componentInstance===i.componentInstance&&o.elm===i.elm||n.value(o.componentInstance||e,o.key)},unbind:function(e,t,n){t.value(null,n.key)}})}};var _=n(87141);const Z={install(e){e.prototype.$T=function(e,...t){return(0,_.JE)().T(e,...t)}}};var C=n(96829);const x=(0,i.ZP)("safe-runner");const N=class{constructor(e){this.errorHandler=e}_handleError(e){"function"==typeof this.errorHandler?this.errorHandler(e):x.error((0,C.SC)(e))}install(e){const t=this;e.prototype.$safeRun=function(e){try{let n=e();return n&&n.then&&n.catch?n.then((e=>e)).catch((e=>t._handleError(e))):n}catch(e){t._handleError(e)}}}};var I=n(69931);const T={install(e){e.prototype.$toResourceURL=(...e)=>(0,I.ju)(...e).replace("(","%28").replace(")","%29"),e.prototype.$loadResource=I.zD}};var F=n(53775),$=n(59474);var D=n(30247),R=n(2563),z=n(65428);const j=(0,i.ZP)("font");var B=n(22037),J=n.n(B),X=n(38629);const q=(0,i.ZP)("performance");function W(e){e?document.body.style.setProperty("--uk-system-accent-color",e):document.body.style.removeProperty("--uk-system-accent-color")}var M=n(63111),H=n(18621),Y=n(69297),K=n(20993);const V={start:()=>{const e=(0,$.i)();e.startJob();const t=(0,l.YP)((()=>e.pendingJobs),(n=>{n>0||(t(),e.markReady())}));setTimeout((()=>e.endJob()),0)}},G=(()=>{const e=[],t=new Map;return{start:()=>{const e=(0,$.i)();e.startJob(),r.ZP.fetch(b.de).then((t=>{Object.keys(t).forEach((e=>{var n;const o=(0,_.F_)(e);null===(n=null==o?void 0:o())||void 0===n||n.$patch(t[e])})),k.Z.on(P.Md,(e=>{e.forEach((({id:e,state:t})=>{var n;const o=(0,_.F_)(e);null===(n=null==o?void 0:o())||void 0===n||n.$patch((0,l.qj)(t))}))})),e.endJob()}))},plugin:n=>{(0,_.W$)(n.store.$id)&&n.store.$subscribe(((o,i)=>{if(n.store.$id!==o.storeId)return;const a=t.get(o.storeId);t.set(o.storeId,!0),(null===window||void 0===window?void 0:window.isEditorFrame)||a&&o.type!==O.x1.patchObject&&(0,_.W$)(o.storeId)&&(e.push({id:o.storeId,state:JSON.parse(JSON.stringify(i))}),Promise.resolve().then((()=>{r.ZP.fetch(b.w6,{states:e}),e.length=0})))}))}}})(),Q={start:()=>{(0,z.r)();const e=(0,I.ju)("/static/snowbird/resource/"),t=function(){const e={};return D.Fy(((t,n)=>{e[t]=n.map((e=>({...e,family:t})))})),e}(),n=Object.values(t).flat().map((t=>function({family:e,src:t,italic:n,weight:o,"unicode-range":i},r){const a=new URL(t,r).href;let s={family:e,source:`url("${a}")`,url:a};return void 0!==n&&(s={...s,style:n?"italic":"normal"}),void 0!==o&&(s={...s,weight:o.toString()}),void 0!==i&&(s={...s,unicodeRange:i}),s}(t,e)));!function(e){Promise.all(e.map((({family:e,source:t,...n})=>{const o=new FontFace(e,t,n);return o.load().then((()=>{document.fonts.add(o)})).catch((()=>{j.error("Failed to load css font from",t)}))})))}(n),function(){const e=document.createElement("style"),t=D.Hn();e.innerHTML=t,document.head.appendChild(e),document.body.style.setProperty("--info-button-font",D.o6)}(),(0,R.O)().updateBuiltinFontFamilies(Array.from(new Set(Object.keys(t))))}},U={start:()=>{const e=(0,$.i)(),{_apr:t,_acc:n}=p().parse(location.search.slice(1));t&&(e.startJob(),q.debug("About to load CSS using _apr query parameter:",t),(0,X.Z)(t,(()=>{q.debug("Loaded CSS using _apr query parameter:",t),setTimeout((()=>{e.endJob()}),10)}))),n&&W(n),"darwin"===J().platform()&&parseFloat(J().release())>=20&&document.body.classList.add("uk-darwin-bigsur"),(0,l.YP)((()=>(0,_.S)().language),((e,t)=>{t&&document.body.classList.remove(`uk-lang-${t}`),e&&document.body.classList.add(`uk-lang-${e}`)}));const o=(0,l.YP)((()=>(0,$.i)().ready),(e=>{e&&(o(),(0,l.YP)((()=>[(0,_.S)().appearance,(0,R.O)().ignoreAppearanceChanged]),(([e,t])=>{t||(0,X.Z)(e)})),(0,l.YP)((()=>(0,_.qr)().systemAccentColor),(e=>W(e))),(0,l.YP)((()=>(0,_.S)().systemScrollbarSetting),(e=>function(e){const t="vk-scrollbar";document.body.classList.forEach((e=>{e.startsWith(t)&&document.body.classList.remove(e)})),document.body.classList.add(`${t}-${(e||"always").toLowerCase()}`)}(e)),{immediate:!0}))}))}},ee={start:()=>{M.nd&&M.qu.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>(async()=>(await r.ZP.fetch(b.QN),"interruption"))()))})),Object.keys(M.JN).concat(Object.keys(M.oF)).forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{const t=(0,_.JX)().commandById(e);return(null==t?void 0:t.provider)?(async(e,t)=>{if(!await r.ZP.fetch(b.Gy,{name:e,channel:(0,b.gk)(t)}))return"interruption"})(e,t.provider):"interruption"}))})),M.ZK.forEach((e=>{(0,_.JX)().appendAfterHandler(e,(()=>{const t=e.split(".")[1];(0,H.L9)({eventCategory:"Edit",eventAction:t,eventValue:1})}))})),M.ff.forEach((e=>{(0,_.JX)().appendAfterHandler(e,(()=>{(0,H.L9)({eventCategory:"Share",eventAction:e,eventValue:1})}))})),M.y_.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{(0,Y.Kl)()}))})),M.xk.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{(0,Y.fv)()}))})),M.wp.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{(0,Y.nz)()}))})),(0,_.JX)().appendAfterHandler("editor.addTodo",K.l5),(0,_.JX)().appendAfterHandler("editor.cancelTask",K.DY),(0,_.JX)().appendAfterHandler("editor.checkTodo",(()=>{(0,K.fR)("checkTask")})),(0,_.JX)().appendAfterHandler("editor.uncheckTodo",(()=>{(0,K.fR)("uncheckTask")})),M.QL.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{if((0,_.si)().contexts["collaboration.isReadOnly"])return"interruption"}))})),M.gY.forEach((e=>{(0,_.JX)().appendBeforeHandler(e,(()=>{if((0,_.si)().contexts["collaboration.isFromCloud"])return"interruption"}))}))}},te={start:()=>{const e=(0,$.i)();e.startJob(),(0,_.JX)().injectDoHandleCommand((async(e,t)=>r.ZP.fetch(b.hR,{commandId:e,handlerArgs:t}))),e.endJob()}},ne=[G.plugin];var oe=n(7710);const ie=p().parse(window.location.search.slice(1)),re=!0,ae=!!ie.isBrowserView,se=!!ie.isEditorFrame;let ce=v.getCurrentWindow;ae&&(ce=function(){const e=A.Z.sendSync("get-current-window-id");return v.BrowserWindow.fromId(parseInt(e))});const de=window.location.pathname.match(/\/([a-zA-Z0-9-]+)\.html$/)[1]||"default",le=(0,i.ZP)("performance"),ue=(0,i.ZP)("sentry");le.debug("Initializing page:",de),w.webFrame.setVisualZoomLevelLimits(1,1),document.body.classList.add("uk-win32"),Object.defineProperty(window,"id",{get:()=>ce().id}),window.getWindowIdAsync=async()=>await(0,E.A)("get-current-window-id");window.getCurrentWindowAsync=async()=>{const e=await window.getWindowIdAsync();return v.BrowserWindow.fromId(parseInt(e))},window.isEditorFrame=se;const pe=l.ZP.observable({isBeingDestroyed:!1,isDestroyed:!1,isShown:!1});["isBeingDestroyed","isDestroyed","isShown"].forEach((e=>{Object.defineProperty(window,e,{get:()=>pe[e],set(t){pe[e]=t}})})),window.show=()=>{ce().show()},window.hide=()=>{ce().hide()},window.close=()=>{ce().close()},window.minimize=()=>{ce().minimize()},window.maximize=()=>{ce().maximize()},window.restore=()=>{ce().unmaximize()},window.isMinimized=()=>ce().isMinimized(),window.isMaximized=()=>ce().isMaximized(),window.isFullScreen=()=>ce().isFullScreen(),window.resizeTo=(e,t)=>{ce().setContentSize(e,t)},window.resizeBy=(e,t)=>{let[n,o]=ce().getContentSize();ce().setContentSize(n+e,o+t)},window.moveTo=(e,t)=>{ce().setPosition(e,t)},window.moveBy=(e,t)=>{let[n,o]=ce().getPosition();ce().setPosition(n+e,o+t)},k.Z.on("window-maximize",(()=>{document.body.classList.add("uk-window-maximized"),window.dispatchEvent(new Event("maximize"))})),k.Z.on("window-unmaximize",(()=>{document.body.classList.remove("uk-window-maximized"),window.dispatchEvent(new Event("restore"))})),k.Z.on("window-minimize",(()=>{window.dispatchEvent(new Event("minimize"))})),k.Z.on("window-unminimize",(()=>{window.dispatchEvent(new Event("unminimize"))})),k.Z.on("window-focus",(()=>{document.body.classList.remove("uk-window-inactive")})),k.Z.on("window-blur",(()=>{document.body.classList.add("uk-window-inactive")})),k.Z.on("window-enter-full-screen",(()=>{document.body.classList.add("uk-window-full-screen"),window.dispatchEvent(new Event("enter-full-screen"))})),k.Z.on("window-leave-full-screen",(()=>{document.body.classList.remove("uk-window-full-screen"),window.dispatchEvent(new Event("leave-full-screen"))})),k.Z.on("window-sheet-begin",(()=>{document.body.classList.add("uk-disabled"),window.dispatchEvent(new Event("sheet-begin"))})),k.Z.on("window-sheet-end",(()=>{document.body.classList.remove("uk-disabled"),window.dispatchEvent(new Event("sheet-end"))})),k.Z.on("window-show",(()=>{window.dispatchEvent(new Event("window-show"))})),k.Z.on(P.$r,(e=>{(0,oe.l)().setQuery(e)}));const we=ce&&ce();if(we&&we.isMaximized()&&document.body.classList.add("uk-window-maximized"),we&&we.isFullScreen()&&document.body.classList.add("uk-window-full-screen"),we&&!we.isFocused()&&document.body.classList.add("uk-window-inactive"),document.addEventListener("keydown",(e=>{27===e.keyCode&&document.body.querySelector(".uk-window-dialog")&&setTimeout((()=>{if(e.defaultPrevented)return;const t=new Event("close");window.dispatchEvent(t)&&window.close()}),0)})),we&&we.isMaximizable&&we.isMaximizable()){const e=["a","button","select","input"];document.addEventListener("dblclick",(t=>{const{target:n,defaultPrevented:o}=t;if(o)return;let i=n;for(;i&&"function"==typeof i.matches;){if(e.some((e=>i.matches(e))))return;i=i.parentNode}let r=document.querySelector(".vk-window-title-bar-expanded")||document.querySelector(".vk-window-title-bar");r&&r.contains(n)&&(window.isMaximized()?window.restore():window.maximize())}))}l.ZP.use(O.og),l.ZP.use(new N((e=>d.handle(e)))),l.ZP.use(f()),l.ZP.use(Z),l.ZP.use(T),l.ZP.use(S),l.ZP.use(h.ZP.Plugin),le.debug("Initialized page:",de);const ve=(0,O.WB)();(0,O.uX)(ve),ne.forEach((e=>ve.use(e))),Object.values(_.rx).forEach((e=>e())),V.start(),G.start(),Q.start(),U.start(),ee.start(),te.start();const me=(0,L.Z)("version").includes("beta");if(process.env.SENTRY_DSN_OF_BROWSER&&me){const e=(0,l.YP)((()=>(0,_.qr)().sentryConfig),(t=>{e();try{const e=t[process.env.SENTRY_PROJECT_OF_BROWSER]||{};y.S({Vue:l.ZP,dsn:process.env.SENTRY_DSN_OF_BROWSER,environment:"production",...e}),ue.info("init",e)}catch(e){ue.error("Failed to init sentry",e)}}),{immediate:!1})}async function fe(e,{mountTarget:t="#app",name:n=null,plugins:o=[],runAfterPiniaPlugin:i,editorId:a=null,autoShow:s=!0}={}){le.debug("Bootstrapping:",de);for(let e of o)l.ZP.use(e);let c;return(0,_._t)((0,g.b3)(window.id)),"dialog-err"===n&&(0,_.VE)((0,g.zN)("dialog-err",window.id)),"dialog-problem"===n&&(0,_.ym)((0,g.zN)("dialog-problem",window.id)),a&&(0,_.OD)((0,g.aJ)(a)),await new Promise((n=>{let o=(0,l.YP)((()=>(0,$.i)().ready),(a=>{a&&(o(),document.body.classList.add(`uk-lang-${(0,_.S)().language}`),i?.(ve),le.debug("About to create Vue instance:",de),c=new l.ZP({...e,pinia:ve}),le.debug("Created Vue instance:",de),window.addEventListener("unload",(()=>{window.isBeingDestroyed=!0,c.$destroy(),window.isDestroyed=!0})),le.debug("About to mount Vue instance:",de),c.$mount(t||"#app"),le.debug("Mounted Vue instance:",de),(0,F.qJ)().then((async()=>{if(!s)return;const e=await window.getWindowIdAsync();!re&&await r.ZP.fetch((0,b.EV)(e),"show"),re&&await r.ZP.fetch((0,b.EV)(e),"moveToShow"),window.isShown=!0})),n(c))}))})),c}},13382:(e,t,n)=>{n.d(t,{G$:()=>E,N0:()=>f,Pg:()=>P,R2:()=>A,W5:()=>k,ZZ:()=>y,am:()=>b,eq:()=>g,yr:()=>L});var o=n(71017),i=n.n(o),r=n(67657),a=n(7104),s=n(23352),c=n(33394),d=n(94593),l=n(90435),u=n(54856),p=n(5893),w=n(87141),v=n(63111);const m=(0,s.ZP)("dialog");async function f(e){(e=Object.assign({},e||{})).icon&&"string"==typeof e.icon&&(e.icon=i().join((0,a.bY)(),e.icon));const t=r.BrowserWindow.fromId(window.id);return[r.dialog.showMessageBoxSync(t,e)]}async function h(e){(e=Object.assign({},e||{})).icon&&"string"==typeof e.icon&&(e.icon=i().join((0,a.bY)(),e.icon));const t=r.BrowserWindow.fromId(window.id),{response:n,checkboxChecked:o}=await r.dialog.showMessageBox(t,e);return[n,o]}async function y(e){(e=Object.assign({securityScopedBookmarks:!0},e||{})).suggestPath&&!e.defaultPath&&(e.defaultPath=b(e.suggestPath,e.filters),delete e.suggestPath);const{canceled:t,filePath:n,bookmark:o}=await r.dialog.showSaveDialog(r.getCurrentWindow(),e);return t?null:(n&&o&&await c.Z.bindBookmark({fp:n,bookmark:o}),n&&(0,w.km)().setLastSaveDirectory(i().dirname(n)),n)}async function g({folderName:e,dialogOptions:t}){let n="";(t=Object.assign({securityScopedBookmarks:!0},t||{})).defaultPath||(t.defaultPath=b({}));const{canceled:o,filePaths:a,bookmark:s}=await r.dialog.showOpenDialog(r.getCurrentWindow(),t);if(o)return null;if(n=a[0],a.length>0&&s&&await c.Z.bindBookmark({fp:n,bookmark:s}),"string"==typeof e){let t=e.replace(/[\\/]/g,"");t=(0,p.N6)(t).replace(/\.+$/g,"").trim(),n=i().join(n,t)}return d.Z.existsSync(n)||d.Z.ensureDir(n),n&&(0,w.km)().setLastSaveDirectory(n),n}function b({doc:e=null,oldDoc:t=null,suggestedName:n=null},o=null){let a,s;if(!a&&n&&(a=(0,p.N6)(n.toString())),!a&&e&&e.title&&e.source&&!e.source.startsWith("new://")&&(a=(0,p.N6)(e.title.toString())),!a&&t&&t.title&&t.source&&!t.source.startsWith("new://")&&(a=(0,p.N6)(t.title.toString())),a&&Array.isArray(o)){const e=o[0]&&o[0].extensions;Array.isArray(e)&&e.length>0&&(a=`${a}.${e[0]}`)}if(!s&&t&&t.source&&t.source.startsWith("file://")){let e=t.source.slice(7);e=e.substring(1),s=i().dirname(e)}if(!s&&(0,w.km)().lastSaveDirectory&&(s=(0,w.km)().lastSaveDirectory),!s)try{s=r.app.getPath("documents")}catch(e){m.info(e)}return s&&a?i().join(s,a):s||a}async function k(e){e.$withUIKit((t=>{const n=`\n        <button\n        class="vk-button-text vk-size-small uk-text-nowrap"\n        style="word-break: keep-all;"\n        focustrigger="cannotGetFocusByMouse">\n          ${e.$T("OK")}\n        </button>\n        </div>`;t.toast({message:e.$T("The map style has been updated for your current version of Xmind."),pos:"bottom-center",timeout:5e3,btn:n,style:{width:"500px",height:"auto",padding:"10px 20px"},btnClick:t.toast.clearAll()})}))}async function A(e){const t=(e="function"!=typeof e?e=>e:e)("OK"),n=e("Get Latest Version"),o=[t,n],[i]=await h({title:"Xmind",message:e("The map style in this file might vary since it was created in a newer version of Xmind."),detail:e("You can continue to open the file or update to the latest version for better compatibility."),buttons:o,defaultId:o.indexOf(n),cancelId:o.indexOf(t),noLink:!0});i===o.indexOf(n)&&l.ZP.fetch(u.lf.GO_DOWNLOAD)}async function E(e){if(e="function"!=typeof e?e=>e:e,v.zr)return await h({title:"Xmind",message:e("Failed to Open File"),detail:e("The file was created with a newer version of Xmind. Please contact your corporate administrator for the latest update."),buttons:[e("Done")],defaultId:0,noLink:!0});const t=e("Cancel"),n=e("Get Latest Version"),o=[n,t],[i]=await h({title:"Xmind",message:e("Failed to Open File"),detail:e("The file was created by a newer version of Xmind. Please update Xmind and try to open it again."),buttons:o,defaultId:o.indexOf(n),cancelId:o.indexOf(t),noLink:!0});i===o.indexOf(n)&&l.ZP.fetch(u.lf.GO_DOWNLOAD)}async function L(e){const t=(e="function"!=typeof e?e=>e:e)("Save"),n=e("Save as"),o=e("Cancel"),i=[];i.push(n,t,o);let[r]=await h({type:"none",title:"Xmind",message:e("Saving file from Xmind"),detail:e("Once you save the file, it cannot be opened normally in older versions like $1.","Xmind 22.11"),buttons:i,defaultId:i.indexOf(n),cancelId:i.indexOf(o),noLink:!0});const a=r===i.indexOf(t),s=r===i.indexOf(n);return{toSave:a,toSaveAs:s,toCancel:!a&&!s}}async function P(e){const t=(e="function"!=typeof e?e=>e:e)("Fix ï¼† Open"),n=e("Cancel"),o=[t,n],[i]=await h({title:"Xmind",message:e("Failed to Open File"),detail:e("The file may contain invalid data structure or have become corrupted. Xmind can try to fix the data structure to help you open it."),buttons:o,defaultId:o.indexOf(t),cancelId:o.indexOf(n),noLink:!0});return{toFix:i===o.indexOf(t),toCancel:i===o.indexOf(n)}}},33394:(e,t,n)=>{n.d(t,{Z:()=>v});var o=n(57147),i=n.n(o),r=n(71017),a=n.n(r),s=n(73837),c=n(23352),d=n(96829),l=n(56222);const u=(0,c.ZP)("renderer:fs");async function p(e){return(0,l.A)("OBTAIN_READ_WRITE_ACCESS",e)}async function w(e){return(0,l.A)("RELEASE_READ_WRITE_ACCESS",e)}const v={read:async function(e){if(!a().isAbsolute(e))throw new Error("Must be an absolute path.");const t=await async function(e){return(0,l.A)("OBTAIN_READ_LOCK",e)}(e);try{return await(0,s.promisify)(i().readFile)(e)}catch(t){u.error(`path(${e}) read error: ${(0,d.SC)(t)}`);try{if(!await p(e))throw new Error(`No access to '${e}'`);return await(0,s.promisify)(i().readFile)(e)}catch(e){throw e}finally{await w(e)}}finally{await async function(e){return(0,l.A)("RELEASE_READ_LOCK",e)}(t)}},write:async function(e,t){if(!a().isAbsolute(e))throw new Error("Must be an absolute path.");const n=await async function(e){return(0,l.A)("OBTAIN_WRITE_LOCK",e)}(e);try{return await(0,s.promisify)(i().writeFile)(e,t)}catch(n){u.error(`path(${e}) write error: ${(0,d.SC)(n)}`);try{if(!await p(e))throw new Error(`No access to '${e}'`);return await(0,s.promisify)(i().writeFile)(e,t)}catch(e){throw e}finally{await w(e)}}finally{await async function(e){return(0,l.A)("RELEASE_WRITE_LOCK",e)}(n)}},bindBookmark:async function({fp:e,bookmark:t}={}){return(0,l.A)("BIND_BOOKMARK",{fp:e,bookmark:t})},hasRWAccess:async function(e){return(0,l.A)("HAS_READ_WRITE_ACCESS",e)},obtainRWAccessFromOS:p,releaseRWAccessFromOS:w}},94593:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81296),i=n.n(o);const r=(0,n(23352).ZP)("ipc:proxy:"),a=new Proxy(i(),{get(e,t){let n=Reflect.get(e,t);return"function"==typeof n?(...o)=>{if(!window.isDestroyed)return n.apply(e,o);r.error(`window has been destroyed, we should not invoke fsp.${t})`)}:n}})},56222:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(72298);let i=0;function r(e,t){return new Promise((n=>{const r=i++;o.ipcRenderer.once(`internal-ipc-api-reply:${e}:${r}`,((e,{data:t=null})=>{n(t)})),o.ipcRenderer.send(`internal-ipc-api:${e}`,{payload:t,seq:r})}))}},28914:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(72298);const i=(0,n(23352).ZP)("ipc:proxy:"),r=new Proxy(o.ipcRenderer,{get(e,t){let n=Reflect.get(e,t);return"function"==typeof n?(...o)=>{if(!window.isDestroyed)return n.apply(e,o);i.error(`window has been destroyed, we should not invoke ipcRenderer.${t} with args (${JSON.stringify(o)})`)}:n}})},90435:(e,t,n)=>{n.d(t,{ZP:()=>c,he:()=>s});var o=n(96829),i=n(28914);const r=new Map;let a=0;function s(e,t){const n=r.get(e);return n?Promise.resolve().then((()=>n(t))):new Promise(((n,r)=>{const s=a++;i.Z.once(`ipc-api-reply:${e}:${s}`,((e,{error:t=null,data:i=null})=>{t?r((0,o.aq)(t)):n(i)})),i.Z.send(`ipc-api:${e}`,{payload:t,seq:s})}))}const c={fetch:s,route:function(e,t){if("function"!=typeof t)throw new Error(`IPC API "${e}" is routed to invalid handler: ${typeof t}`);if(r.has(e))throw new Error(`IPC API "${e}" is routed twice`);const n=`ipc-api:${e}`;if(i.Z.eventNames().includes(n))throw new Error(`IPC API "${e}" is routed twice`);const a=(n,{payload:r=null,seq:a=0}={})=>{const s=`ipc-api-reply:${e}:${a}`;Promise.resolve().then((()=>t(r))).then((e=>{i.Z.send(s,{data:e})})).catch((e=>{i.Z.send(s,{error:(0,o.SC)(e)})}))};return r.set(e,t),i.Z.on(n,a),i.Z.send("ipc-api-register",{apiName:e}),()=>{i.Z.send("ipc-api-unregister",{apiName:e}),i.Z.removeListener(n,a),r.delete(e)}}}},23352:(e,t,n)=>{n.d(t,{ZP:()=>d});var o=n(82134),i=n(96829),r=n(79409),a=n(72298);const s=new o.Jq(global.console,{colorful:!1}),c=new o.Yd({isDebugging:(0,r.Z)("version").indexOf("-alpha")>=0||(0,r.Z)("version").indexOf("-dev")>=0||i.x,handle(e){s.handle(e),function(e){a.ipcRenderer.send("logger:handleLogEvent",e)}(e)}}),d=(e=null)=>c.logger(e)},79409:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(71017),i=n.n(o),r=n(57147),a=n.n(r),s=n(7104);let c=null;function d(e=null){return c||(c=JSON.parse(a().readFileSync(i().join((0,s.bY)(),"package.json")))),e?c[e]:c}},69931:(e,t,n)=>{n.d(t,{Al:()=>u,ju:()=>c,pP:()=>d,zD:()=>l});var o=n(71017),i=n.n(o),r=n(94593),a=n(7104),s=n(5893);function c(e){return(0,s.u3)(i().join((0,a.bY)(),e))}function d(e){return(0,s.u3)(i().join((0,a.D8)(),e))}function l(e){return r.Z.readFile(i().join((0,a.bY)(),e))}const u=(...e)=>c(...e).replace("(","%28").replace(")","%29")},73884:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(82361),i=n.n(o),r=n(28914);const a=new(i()),s=a.emit;a.emit=function(e,...t){s.call(a,e,...t),d(e)&&r.Z.send("revents:broadcast",[e,...t])},a.on("newListener",(e=>{if(d(e)){0===a.eventNames().filter(d).length&&r.Z.send("revents:register")}})),a.on("removeListener",(e=>{if(d(e)){0===a.eventNames().filter(d).length&&r.Z.send("revents:unregister")}}));const c=a.removeAllListeners;function d(e){return"newListener"!==e&&"removeListener"!==e}a.removeAllListeners=function(e){if(!e)throw new Error("revents's removeAllListeners is forbidden!");if("newListener"===e||"removeListener"===e)throw new Error('revents\'s "newListener" and "removeListener" handler should not be removed');c.call(a,e)},r.Z.on("revents:broadcast",((e,t)=>{let n=JSON.parse(t);s.apply(a,n)})),window.addEventListener("unload",(()=>{r.Z.send("revents:unregister")}));const l=a},85786:(e,t,n)=>{n.d(t,{DL:()=>u,Xf:()=>d,Yv:()=>l,vQ:()=>p});var o=n(22037),i=n.n(o),r=n(57310),a=n.n(r),s=n(72298),c=n(13382);function d(){return"win32"}function l(){return{platform:i().platform(),arch:i().arch(),release:i().release()}}function u(e,t){const n=a().parse(e).protocol,o=t||(e=>e);s.shell.openExternal(n?e:`http://${e}`).catch((()=>{(0,c.N0)({title:"Xmind",message:o("Unable to open link."),detail:o("This link is invalid and cannot be opened through browser."),buttons:[o("OK")]})}))}function p(e){s.clipboard.writeText(e)}},69297:(e,t,n)=>{n.d(t,{Do:()=>r,Kl:()=>a,N1:()=>i,fv:()=>s,nz:()=>c});var o=n(28914);function i(){return o.Z.sendSync("usage-stats:data")}function r(){o.Z.send("usage-stats:increase",{type:"dwellTimeInZenMode",value:1e3})}function a(e=1){o.Z.send("usage-stats:increase",{type:"topicsAdded",value:e})}function s(e=1){o.Z.send("usage-stats:increase",{type:"sheetsAdded",value:e})}function c(e=1){o.Z.send("usage-stats:increase",{type:"eventsTriggered",value:e})}},18621:(e,t,n)=>{n.d(t,{Fk:()=>r,L9:()=>i});var o=n(28914);function i(e){o.Z.send("usage-tracker:track-event",{event:e})}function r(e){o.Z.send("usage-tracker:track-view",{view:e})}},7104:(e,t,n)=>{n.d(t,{D8:()=>l,Im:()=>v,L2:()=>p,N8:()=>u,O1:()=>m,Xl:()=>y,bY:()=>d,d6:()=>h,tM:()=>f,tY:()=>w});var o=n(71017),i=n.n(o),r=n(72298),a=n(56222);let s=null;let c=null;function d(){return c||(c=r.ipcRenderer.sendSync("workspace:appPath")),c}function l(){return i().join((s||(s=r.ipcRenderer.sendSync("workspace:userData")),s),"vana")}function u(){return i().join(l(),"workbooks")}function p(){return i().join(l(),"file-cache")}function w(){return i().join(l(),"theme")}function v(){return i().join(l(),"smart-color")}function m(){return i().join(l(),"illustrations")}function f(){return i().join(l(),"templates")}function h(){return i().join(d(),"static/snowbird/resource/")}async function y(){return s||(s=await(0,a.A)("workspace:userData")),i().join(s,"vana","workbooks")}},38629:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(69931);function i(e,t=null){document.documentElement.setAttribute("color-scheme","default"===e?"light":"dark");if(document.querySelector("#appearance_link"))return void("function"==typeof t&&t());const n=(0,o.ju)("static/vanakit/themes/vana.css"),i=document.createElement("link");i.type="text/css",i.id="appearance_link",i.rel="stylesheet",i.href=n,i.setAttribute("data-appearance",e),"function"==typeof t&&(i.onload=()=>t()),document.head.appendChild(i)}},20993:(e,t,n)=>{n.d(t,{AZ:()=>z,Ao:()=>F,Bv:()=>h,C3:()=>L,CI:()=>j,CN:()=>O,DY:()=>s,I1:()=>m,JC:()=>i,NK:()=>l,Pr:()=>p,TJ:()=>g,Vs:()=>S,Wr:()=>$,Xz:()=>N,Yj:()=>k,Zk:()=>u,_5:()=>x,_6:()=>P,cZ:()=>b,cx:()=>I,dx:()=>v,fR:()=>a,jB:()=>w,kI:()=>c,l5:()=>r,p3:()=>d,sF:()=>Z,sG:()=>E,t0:()=>R,wH:()=>D,wp:()=>y,xG:()=>_,xg:()=>A,xy:()=>f,yo:()=>T,zH:()=>C});var o=n(18621);const i=e=>(0,o.L9)({eventName:"Gallery",eventAction:e}),r=()=>(0,o.L9)({eventAction:"insertTask",eventName:"insertTask"}),a=e=>(0,o.L9)({eventAction:"editTask",eventName:e}),s=()=>(0,o.L9)({eventAction:"cancelTask",eventName:"cancelTask"}),c=e=>(0,o.L9)({eventAction:"highlightTask",eventName:e}),d=e=>(0,o.L9)({eventAction:"insertIllustration",eventName:e}),l=e=>(0,o.L9)({eventAction:"searchIllustration",eventName:e}),u=e=>(0,o.L9)({eventAction:"insertIllustrationPro",eventName:e}),p=(e,t,n)=>(0,o.L9)({eventAction:"openTemplateType",eventName:`${e}_${t}_${n}`}),w=e=>(0,o.L9)({eventAction:"popPW",eventName:e}),v=e=>(0,o.L9)({eventAction:"clickPW",eventName:e}),m=()=>{(0,o.L9)({eventAction:"cancelOverlap"})},f=()=>(0,o.L9)({eventAction:"paymentPage"}),h=()=>(0,o.L9)({eventAction:"paymentPageCN"}),y=()=>(0,o.L9)({eventAction:"paymentSuccessful"}),g=()=>(0,o.L9)({eventAction:"paymentSuccessfulCN"}),b=e=>(0,o.L9)({eventName:"PWD-sp35-240515",eventAction:e}),k=()=>(0,o.L9)({eventAction:"sharetoCollaboration"}),A=()=>(0,o.L9)({eventAction:"sharetoEvernote"}),E=e=>(0,o.L9)({eventAction:"pweDisplay",eventName:e}),L=e=>(0,o.L9)({eventAction:"pweContinue",eventName:e}),P=e=>(0,o.L9)({eventAction:"closePwe",eventName:e}),O=e=>(0,o.L9)({eventAction:"pweOrder",eventName:e}),S=e=>(0,o.L9)({eventAction:"purchaseSource",eventName:e}),_=e=>(0,o.L9)({eventAction:"purchaseWindow",eventName:e}),Z=({region:e,productId:t})=>(0,o.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButton"+e.toLowerCase(),eventName:t}),C=({region:e,productId:t})=>(0,o.L9)({eventCategory:"Activate",eventAction:"clickSubscriptButtonMAS"+e.toLowerCase(),eventName:t}),x=()=>(0,o.L9)({eventAction:"autoDisconnect"}),N=()=>(0,o.L9)({eventAction:"disableSmartGuideline",eventName:"disableSmartGuideline"}),I=()=>(0,o.L9)({eventAction:"enableSmartGuideline",eventName:"enableSmartGuideline"}),T=()=>(0,o.L9)({eventAction:"clickSearchMaps",eventName:"clickSearchMaps"}),F=()=>(0,o.L9)({eventAction:"insertTaskInfo",eventName:"insertTaskInfo"}),$=()=>(0,o.L9)({eventAction:"removeTaskInfo",eventName:"removeTaskInfo"}),D=()=>(0,o.L9)({eventAction:"enableAutoCalculate",eventName:"enableAutoCalculate"}),R=()=>(0,o.L9)({eventAction:"disableAutoCalculate",eventName:"disableAutoCalculate"}),z=()=>(0,o.L9)({eventAction:"disableDisplayinTopic",eventName:"disableDisplayinTopic"}),j=()=>(0,o.L9)({eventAction:"enableDisplayinTopic",eventName:"enableDisplayinTopic"})},59474:(e,t,n)=>{n.d(t,{i:()=>r});var o=n(77412),i=n(2954);const r=(0,o.Q_)("bootstrap",(()=>{const e=(0,i.iH)(!1),t=(0,i.iH)(0);return{ready:e,markReady:()=>e.value=!0,pendingJobs:t,startJob:()=>t.value+=1,endJob:()=>t.value-=1}}))},65428:(e,t,n)=>{n.d(t,{r:()=>s});var o=n(54856),i=n(77412),r=n(2954),a=n(90435);const s=(0,i.Q_)("fonts",(()=>{const e=(0,r.iH)(!1),t=(0,r.iH)({systemFonts:{},vanaFonts:{}});return{loaded:e,markLoaded:()=>e.value=!0,getLoadedFonts:async()=>{if(!t.value||Object.keys(t.value.systemFonts).length<=0&&Object.keys(t.value.vanaFonts).length<=0){const e=await(0,a.he)(o.qz);t.value=e}return t.value}}}))},7710:(e,t,n)=>{n.d(t,{l:()=>r});var o=n(77412),i=n(2954);const r=(0,o.Q_)("query",(()=>{const e=(0,i.iH)({});return{query:e,setQuery:t=>{e.value=t}}}))},2563:(e,t,n)=>{n.d(t,{O:()=>r});var o=n(77412),i=n(2954);const r=(0,o.Q_)("renderer-app",(()=>{const e=(0,i.iH)(!1),t=(0,i.XI)([]),n=(0,i.XI)({}),o=(0,i.XI)([]);return{ignoreAppearanceChanged:e,updateIgnoreAppearance:t=>{e.value=t},builtinFontFamilies:t,updateBuiltinFontFamilies:e=>t.value=e,allFonts:n,updateAllFonts:e=>n.value=e,fontsForMindMap:o,updateFontsForMindMap:e=>o.value=e}}))},53775:(e,t,n)=>{async function o(){await new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)}))))}async function i(e){return Promise.race([new Promise((e=>requestAnimationFrame((()=>{requestAnimationFrame(e)})))),new Promise((t=>setTimeout(t,null!=e?e:200)))])}function r(e,t=300,n=!1){let o;function i(...t){o=void 0,n||e.apply(this,t)}const r=function(...r){void 0!==o&&clearTimeout(o),n&&!o&&e.apply(this,r),o=setTimeout(i.bind(this,...r),t)};return r.cancel=function(){void 0!==o&&(clearTimeout(o),o=void 0)},r}function a(e,t=300,n=!1){let o,i,r,a=!1;function s(){i=Date.now(),e.apply(this,r),void 0!==o&&(clearTimeout(o),o=void 0)}const c=function(...e){if(a)return;if(r=e,n&&!i)return void s.apply(this);const c=Date.now(),d=c-(null!=i?i:c);d>=t?s.apply(this):void 0===o&&(o=setTimeout(s.bind(this),t-d))};return c.cancel=function(e=!0){void 0!==o&&(clearTimeout(o),o=void 0),i=void 0,a=e},c}n.d(t,{Ds:()=>r,P2:()=>a,SX:()=>o,gH:()=>s,qJ:()=>i});const s=(e,t)=>{let n=e,o="";if("object"==typeof t){const e=new URLSearchParams;for(const n in t)e.append(n,t[n]);o=e.toString()}return n=n.includes("?")?n+"&"+o:n+"?"+o,n}},6113:e=>{e.exports=require("crypto")},72298:e=>{e.exports=require("electron")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")}},e=>{e.O(0,[8592,8970],(()=>{return t=39953,e(e.s=t);var t}));var t=e.O();module.exports=t}]);