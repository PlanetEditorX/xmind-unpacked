(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[6070],{85901:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var i=a(23645),n=a.n(i)()((function(e){return e[1]}));n.push([e.id,".statusbar-divider-vertical[data-v-303bd27c] {\n  margin: 0 8px;\n  width: 1px;\n  height: 11px;\n  background: var(--color-sheetbar-divider);\n}\n",""]);const s=n},23834:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var i=a(23645),n=a.n(i)()((function(e){return e[1]}));n.push([e.id,".statusbar-divider-vertical[data-v-3fc3929a] {\n  margin: 0 8px;\n  width: 1px;\n  height: 11px;\n  background: var(--color-sheetbar-divider);\n}\n.sheetbar-item[data-v-3fc3929a] {\n  line-height: 20px;\n  padding: 0;\n  overflow: hidden;\n}\n.sheetbar-item-container[data-v-3fc3929a] {\n  min-width: 24px;\n  max-width: 220px;\n}\n.sheet-title-edit-input[data-v-3fc3929a] {\n  height: 20px;\n  background: transparent !important;\n  box-shadow: none !important;\n}\n",""]);const s=n},53550:(e,t,a)=>{"use strict";a.d(t,{v:()=>c});var i=a(2954),n=a(87141),s=a(54856),l=a(96829),o=a(90435),r=a(84374),d=a(27049),u=a(46016);function c(){const{sheets:e,activeSheetId:t,executeAction:a,executeEditorAction:c,isMapOverviewShowing:h,getSheetViewer:v}=(0,r.nZ)(),{testSheetPasteVisible:p}=(0,r.pk)(),{handleCommand:f}=(0,n.JX)(),g=(0,i.Fl)((()=>e.value.map((e=>({id:e.id,title:e.title})))));return{sheets:e,activeSheetId:t,sheetIdTitleList:g,isMapOverviewShowing:h,switchSheet:async e=>{const a=v(e);(null==a?void 0:a.isInited())&&!(0,u.$)().isOutlinerMode||t.value!==e&&((0,d.E)().updateSheetRendering({sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,l._v)(100)),c({name:"mutateEditor:switchSheet",inputValue:e})},newSheet:async e=>{await o.ZP.fetch(s.Gy,{name:"action.addSheet",channel:(0,s.gk)(window.editorId)})&&c({name:"mutateEditor:newSheet",inputValue:e})},changeShowMapOverview:e=>c({name:"mutateEditor:changeShowMapOverview",inputValue:e}),changeSheetTitle:(e,t)=>{c({name:"mutateEditor:changeSheetTitle",inputValue:e,payload:{title:t}})},deleteSheet:e=>{c({name:"mutateEditor:deleteSheet",inputValue:e})},testSheetPasteVisible:p,copySheet:(e,t)=>{a({name:"copySheet",payload:{index:e,title:t}})},duplicateSheet:async e=>{await o.ZP.fetch(s.Gy,{name:"action.duplicateSheet",channel:(0,s.gk)(window.editorId)})&&((0,d.E)().updateSheetRendering({sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,l._v)(100),c({name:"mutateEditor:duplicateSheet",inputValue:e}))},pasteSheet:async t=>{var i;await o.ZP.fetch(s.Gy,{name:"action.duplicateSheet",channel:(0,s.gk)(window.editorId)})&&((0,d.E)().updateSheetRendering({sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,l._v)(100),a({name:"pasteSheet",payload:{index:t,sheetId:null===(i=e.value[t])||void 0===i?void 0:i.id}}))},saveSheetAs:({sheetIndex:e})=>{f("saveSheetAs",e)}}}},26070:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var i=a(2954),n=a(12455),s=a(46016),l=a(86026),o=a(81631),r=a(87141);const d=(0,i.aZ)({setup(){const e=(0,s.$)(),t=(e,...t)=>(0,r.JE)().T(e,...t),a=(0,i.Fl)((()=>e.isOutlinerMode)),n=(0,i.Fl)((()=>e.mapshotMode));return{editorModeLabel:(0,i.Fl)((()=>a.value?t("Mind Map"):t("Outliner"))),isMapshotMode:n,handleEditorModeChange:()=>{const e=(0,r.JX)();a.value?e.handleCommand("workbench.mapMode"):e.handleCommand("workbench.outlineMode")}}}});var u=a(51900);const c=(0,u.Z)(d,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-button-tile typography-subhead-mini",staticStyle:{height:"var(--spacing-sheetbar-height)",padding:"0 8px"},attrs:{disabled:e.isMapshotMode},on:{click:e.handleEditorModeChange}},[e._v("\n  "+e._s(e.editorModeLabel)+"\n")])}),[],!1,null,"241224bd",null).exports,h=(0,i.aZ)({__name:"index",emits:["work-in-process"],setup(e,{emit:t}){const r=(0,i.RC)((()=>a.e(7272).then(a.bind(a,7272)))),d=(0,i.RC)((()=>Promise.all([a.e(6486),a.e(2118),a.e(4761),a.e(4559),a.e(8825),a.e(4325)]).then(a.bind(a,64325)))),u=(0,s.$)(),h=(0,i.Fl)((()=>u.isOutlinerMode)),v=(0,i.Fl)((()=>(0,n.A)().aggregatedContexts["editor.inMapShotMode"]));return{__sfc:!0,emit:t,EditorTopicCount:r,OutlinerTopicCount:d,workbenchStore:u,isOutlineMode:h,isInMapShotMode:v,handleWorkInProcessChange:e=>{t("work-in-process",e)},SheetBar:l.Z,ZoomControl:o.Z,EditorMode:c}}});a(23951);const v=(0,u.Z)(h,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-flex uk-flex-middle",staticStyle:{height:"28px"}},[t("div",{staticClass:"uk-flex uk-flex-middle uk-flex-between uk-flex-1",staticStyle:{height:"var(--spacing-sheetbar-height)"}},[t("div",{staticClass:"uk-width-expand"},[t(a.SheetBar,{on:{"work-in-process":a.handleWorkInProcessChange}})],1),e._v(" "),t("div",{staticClass:"uk-flex uk-flex-middle"},[a.isOutlineMode||a.isInMapShotMode?e._e():t(a.EditorTopicCount),e._v(" "),a.isOutlineMode&&!a.isInMapShotMode?t(a.OutlinerTopicCount):e._e(),e._v(" "),a.isInMapShotMode?e._e():t("div",{staticClass:"statusbar-divider-vertical"}),e._v(" "),t(a.ZoomControl),e._v(" "),t("div",{staticClass:"statusbar-divider-vertical"}),e._v(" "),t(a.EditorMode)],1)])])}),[],!1,null,"303bd27c",null).exports},86026:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var i=a(2954),n=a(53550),s=a(46016),l=a(12455),o=a(84374);var r=a(80356),d=a(87141),u=a(67657),c=a(81404);const h=(0,i.aZ)({__name:"sheet-bar",emits:["work-in-process"],setup(e,{emit:t}){const a=(0,i.iH)(),h=(0,i.iH)(),v=(0,i.iH)(),p=(0,i.iH)(),{sheets:f,activeSheetId:g,sheetIdTitleList:m,switchSheet:b,newSheet:S,copySheet:k,changeSheetTitle:x,saveSheetAs:w,testSheetPasteVisible:C,pasteSheet:_,duplicateSheet:y,deleteSheet:M}=(0,n.v)(),{isDragArea:D,sheetsForDragging:I,onDrop:E,onDragEnd:Z,onDragOver:T,onDragEnter:A,onDragLeave:L,onDragStart:F}=((e,t,a)=>{const n=(0,i.iH)(),s=(0,i.iH)(""),l=(0,i.iH)(!1),r="application/x-sheetbar-id",{executeEditorAction:d}=(0,o.nZ)();return{isDragArea:l,sheetsForDragging:n,onDragStart:(t,a)=>{const i=t.target;e.value.includes(i)?(t.dataTransfer.effectAllowed="all",t.dataTransfer.setData(r,a),s.value=a):t.preventDefault()},onDragEnter:a=>{const i=a.dataTransfer.types.includes(r);if(!s.value||!i)return;a.preventDefault();const l=e.value.slice().sort(((e,t)=>Number(e.dataset.index)-Number(t.dataset.index)));let o,d=0;for(;d<e.value.length;){let e=-1/0;if(l[d-1]){const t=l[d-1].getBoundingClientRect();e=(t.right+t.left)/2}let t=1/0;if(l[d]){const e=l[d].getBoundingClientRect();t=(e.right+e.left)/2}if(a.clientX>e&&a.clientX<t)break;d++}const u=t.value.filter((e=>e.id!==s.value||(o=e,!1)));u.splice(d,0,{id:s.value,title:o&&o.title}),n.value=u},onDragOver:e=>{s.value&&(e.preventDefault(),l.value=!0,e.dataTransfer.dropEffect="move")},onDrop:e=>{if(e.preventDefault(),l.value=!1,!t.value||!t.value.length)return;const a=e.dataTransfer.getData(r);if(s.value===a&&s.value){const e=n.value.findIndex((e=>e.id===s.value));d({name:"mutateEditor:moveSheetTo",inputValue:s.value,payload:{targetIndex:e}})}},onDragLeave:e=>{if(!s.value)return;const t=document.elementFromPoint(e.clientX,e.clientY);a.value.contains(t)||(l.value=!1)},onDragEnd:()=>{s.value=null}}})(p,m,a),{T:O}=(0,d.JE)(),{zenMode:R}=(0,s.$)(),P=(0,l.A)(),N={observeobser:null,inserted:e=>{N.observeobser=new ResizeObserver((()=>{j(e),Y()})),N.observeobser.observe(e)},unbind:e=>{N.observeobser.unobserve(e)}},z=(0,i.iH)(!1),B=(0,i.iH)(!1),H=(0,i.iH)(!1),V=(0,i.iH)(null),W=(0,i.Fl)((()=>R)),G=(0,i.Fl)((()=>null==P?void 0:P.aggregatedContexts["editor.inMapShotMode"])),$=(0,i.Fl)((()=>D.value&&I.value||f.value)),X=(e,a)=>{V.value=e;const n=f.value.findIndex((t=>t.id===e));if(-1===n)return void(V.value=null);const s=p.value[n].clientWidth;t("work-in-process",!0),(0,i.Y3)((function(){v.value[0].value=a,v.value[0].style.width=s+"px",v.value[0].focus(),v.value[0].setSelectionRange(0,a.length)}))},J=e=>{(0,r.C)().checkLocked("mutateEditor:deleteSheet")||M(e)},Y=()=>{(0,i.Y3)((()=>{h.value&&(B.value=0===h.value.scrollLeft,H.value=h.value.scrollLeft+h.value.offsetWidth>=h.value.scrollWidth)}))},j=e=>{if(!e)return!1;z.value=e.scrollWidth>e.offsetWidth};return(0,i.YP)((()=>g.value),(e=>{if(!p.value)return;const t=p.value.find((t=>t.getAttribute("data-sheet-id")===e));t&&t.scrollIntoView({behavior:"smooth",block:"center"})})),{__sfc:!0,emit:t,container:a,sheetBarTab:h,sheetTitleEditor:v,sheetBarTabItems:p,sheets:f,activeSheetId:g,sheetIdTitleList:m,switchSheet:b,newSheet:S,copySheet:k,changeSheetTitle:x,saveSheetAs:w,testSheetPasteVisible:C,pasteSheet:_,duplicateSheet:y,deleteSheet:M,isDragArea:D,sheetsForDragging:I,onDrop:E,onDragEnd:Z,onDragOver:T,onDragEnter:A,onDragLeave:L,onDragStart:F,$T:O,zenMode:R,editorSharedStore:P,vResized:N,isSheetGroupOverflow:z,slideLeftDisable:B,slideRightDisable:H,editingSheetTitleId:V,isZenMode:W,isInMapShotMode:G,currentSheets:$,handleSheetItemClick:e=>b(e),handleAddSheet:()=>S(),showTitleEditor:X,handleSheetDelete:J,openSheetItemContextMenu:(e,t)=>{const a=f.value.findIndex((t=>t.id===e)),i=new u.Menu;[{label:O("Rename"),click:()=>X(e,t)},{type:"separator"},{label:O("Copy"),click:()=>k(a,t)},{label:O("Paste"),visible:C(),click:()=>_(a)},{label:O("Duplicate"),click:()=>y(e)},{label:O("Delete"),enabled:f&&f.value.length>1,click:()=>J(e)},{type:"separator"},{label:O("New Sheet"),click:()=>S(e)},{type:"separator"},{label:O("Save Sheet As")+"...",click:()=>w({sheetIndex:a})}].forEach((e=>i.append(new u.MenuItem(e)))),i.popup({window:(0,u.getCurrentWindow)()})},saveAndHideTitleEditor:e=>{const a=f.value.find((t=>t.id===e)),i=a&&a.id;if(i){const e=v.value[0].value,t=a.title;e&&e!==t&&x(i,e)}V.value=null,t("work-in-process",!1)},slideSheet:e=>{if(!h.value||!p.value)return;let t=0;if("left"===e){const e=h.value.scrollLeft;for(let a of p.value){if(t+a.offsetWidth+1>e)return void(h.value.scrollLeft=t-1);t+=a.offsetWidth+1}}else if("right"===e){const e=h.value.scrollLeft+h.value.offsetWidth;for(let a of p.value)if(t+=a.offsetWidth+1,t>e)return void(h.value.scrollLeft=t-h.value.offsetWidth+1)}},isSheetBarAbleSlide:Y,checkSheetGroupOverflow:j,SheetSlideButton:c.Z}}});a(33040);const v=(0,a(51900).Z)(h,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return a.currentSheets.length>0?t("div",{ref:"container",staticClass:"uk-visible-toggle uk-flex uk-flex-row uk-flex-middle uk-height-1-1 uk-position-relative",style:{visibility:a.isInMapShotMode?"hidden":"visible"},on:{dragover:function(e){return a.onDragOver(e)},dragleave:function(e){return a.onDragLeave(e)},drop:function(e){return a.onDrop(e)},dragenter:function(e){return e.stopPropagation(),a.onDragEnter.apply(null,arguments)}}},[a.isInMapShotMode?t("div",{staticClass:"uk-height-1-1 uk-width-1-1 uk-position-absolute",staticStyle:{"z-index":"2"}}):e._e(),e._v(" "),t("div",{staticClass:"uk-workbench-sheet-bar uk-height-1-1 uk-overflow-hidden",class:[{"uk-invisible-hover":1===a.currentSheets.length&&null===a.editingSheetTitleId&&!a.isZenMode}]},[t("ul",{directives:[{name:"resized",rawName:"v-resized"}],ref:"sheetBarTab",staticClass:"uk-tab vk-tab-capsule uk-overflow-auto uk-scrollbar-hidden",staticStyle:{"flex-wrap":"nowrap"},attrs:{"uk-tab":""},on:{scroll:a.isSheetBarAbleSlide}},e._l(a.currentSheets,(function({id:i,title:n},s){return t("li",{key:i,ref:"sheetBarTabItems",refInFor:!0,class:{"uk-active":a.activeSheetId===i},attrs:{"data-index":s,draggable:null===a.editingSheetTitleId,"data-sheet-id":i},on:{dragstart:function(e){return a.onDragStart(e,i)},dragend:a.onDragEnd}},[t("a",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-visible-toggle sheetbar-item uk-flex uk-flex-middle",attrs:{draggable:"false"},on:{click:function(e){return a.handleSheetItemClick(i)},dblclick:function(e){return a.showTitleEditor(i,n)},contextmenu:function(e){return a.openSheetItemContextMenu(i,n??"")}}},[a.editingSheetTitleId!==i?t("div",{staticClass:"sheetbar-item-container uk-flex uk-flex-center uk-flex-middle"},[t("span",{staticClass:"uk-text-truncate typography-subhead-mini",staticStyle:{margin:"0 4px 0 20px"}},[e._v(e._s(n||""))]),e._v(" "),t("span",{staticClass:"uk-invisible-hover",staticStyle:{"margin-right":"4px"},attrs:{"uk-icon":"icon: chevron-downward; ratio: 0.6"},on:{click:function(e){return a.openSheetItemContextMenu(i,n||"")}}})]):t("div",{staticClass:"sheetbar-item-container uk-flex uk-flex-row uk-flex-middle"},[t("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],ref:"sheetTitleEditor",refInFor:!0,staticClass:"uk-input sheet-title-edit-input",staticStyle:{border:"none",width:"100%"},attrs:{type:"text"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.saveAndHideTitleEditor(i)},blur:function(e){return a.saveAndHideTitleEditor(i)}}})])])])})),0)]),e._v(" "),t("div",{staticClass:"statusbar-divider-vertical",class:{"uk-invisible-hover":a.currentSheets.length<=1}}),e._v(" "),t("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-height-1-1"},[t(a.SheetSlideButton,{directives:[{name:"show",rawName:"v-show",value:a.isSheetGroupOverflow,expression:"isSheetGroupOverflow"}],attrs:{"slide-left-disable":a.slideLeftDisable,"slide-right-disable":a.slideRightDisable,"slide-left-handler":()=>a.slideSheet("left"),"slide-right-handler":()=>a.slideSheet("right")}}),e._v(" "),t("div",{staticClass:"uk-padding-remove uk-margin-remove",class:[{"uk-invisible-hover":a.currentSheets.length<=1}]},[t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-button-tile uk-padding-remove",staticStyle:{height:"var(--spacing-sheetbar-height)",width:"var(--spacing-sheetbar-height)"},on:{click:a.handleAddSheet}},[t("span",{attrs:{"uk-icon":"icon: add; ratio: 0.8"}})])])],1)]):e._e()}),[],!1,null,"3fc3929a",null).exports},81404:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const i=(0,a(2954).aZ)({__name:"sheet-slide-button",props:{slideLeftDisable:{type:Boolean},slideRightDisable:{type:Boolean},slideRightHandler:null,slideLeftHandler:null},setup:e=>({__sfc:!0})});const n=(0,a(51900).Z)(i,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-height-1-1"},[t("div",{staticClass:"uk-padding-remove uk-margin-remove uk-height-1-1"},[t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-button-tile uk-padding-remove",staticStyle:{height:"var(--spacing-sheetbar-height)",width:"var(--spacing-sheetbar-height)"},attrs:{disabled:e.slideLeftDisable},on:{click:e.slideLeftHandler}},[t("span",{attrs:{"uk-icon":"icon: chevron-backward; ratio: 0.8"}})])]),e._v(" "),t("div",{staticClass:"uk-padding-remove uk-margin-remove uk-height-1-1"},[t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-button-tile uk-padding-remove",staticStyle:{height:"var(--spacing-sheetbar-height)",width:"var(--spacing-sheetbar-height)"},attrs:{disabled:e.slideRightDisable},on:{click:e.slideRightHandler}},[t("span",{attrs:{"uk-icon":"icon: chevron-forward; ratio: 0.8"}})])])])}),[],!1,null,null,null).exports},81631:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var i=a(2954),n=a(78198),s=a(86842),l=a(27049),o=a(46016),r=a(60746),d=a(67657),u=a(84374);const c=(0,i.aZ)({__name:"zoom-control",setup(e){const{isZoomGroupDisabled:t,handleZoomControlBtnClick:a,zoomControlLabel:c}=(()=>{const{T:e}=(0,s.C)(),{updateOutlinerSheetStatus:t,updateSheetStatus:a,getOutlinerZoomScaleForSheet:c}=(0,l.E)(),{executeEditorAction:h,activeSheetId:v,currentZoomScale:p}=(0,u.nZ)(),f=(0,i.Fl)((()=>(0,l.E)().sheetRendering||(0,o.$)().mapshotMode)),g=(0,i.Fl)((()=>"outliner"===(0,o.$)().editorMode)),m=(0,i.Fl)((()=>g.value?n.ZP.filter((e=>e>=80&&e<=300)):n.ZP)),b=(0,i.Fl)((()=>g.value?c(v.value):100*p.value)),S=(0,i.Fl)((()=>{let e=[...m.value,b.value];return e=Array.from(new Set(e)),e=e.sort(((e,t)=>Number(t)-Number(e))),e.map((e=>({text:(0,r.Ni)(e),value:e})))})),k=(0,i.Fl)((()=>(0,r.Ni)(b.value))),x=({value:e,isFitMap:i})=>{i?h({name:"mutateEditor:fitMap"}):isNaN(e)||(g.value?t({id:v.value,zoomScale:e}):(a({id:v.value,zoomScale:e}),h({name:"mutateEditor:zoomScale",inputValue:Number(e)/100})))};return{zoomValue:b,zoomOptions:S,zoomScaleLists:m,zoomControlLabel:k,isZoomGroupDisabled:f,handleZoomControlBtnClick:()=>{const t=new d.Menu;for(const e of S.value)t.append(new d.MenuItem({label:e.text,type:"checkbox",checked:b.value===e.value,click:async()=>{x({value:Number(e.value),isFitMap:!1})}}));g.value||(t.append(new d.MenuItem({type:"separator"})),t.append(new d.MenuItem({label:e("Fit Map"),type:"checkbox",click:()=>{x({isFitMap:!0})}}))),t.popup({window:(0,d.getCurrentWindow)()})}}})();return{__sfc:!0,isZoomGroupDisabled:t,handleZoomControlBtnClick:a,zoomControlLabel:c}}});const h=(0,a(51900).Z)(c,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"vk-button-tile keep-edit-session",staticStyle:{height:"var(--spacing-sheetbar-height)",padding:"0 4px",display:"flex"},attrs:{disabled:a.isZoomGroupDisabled},on:{click:a.handleZoomControlBtnClick}},[t("span",{staticClass:"typography-body-medium",attrs:{title:e.$T("Zoom in/out.")}},[e._v("\n    "+e._s(a.zoomControlLabel)+"\n  ")]),e._v(" "),t("span",{attrs:{"uk-icon":"icon: chevron-downward; ratio: 0.6"}})])}),[],!1,null,"ae6521b2",null).exports},23951:(e,t,a)=>{var i=a(85901);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(45346).Z)("013874c3",i,!0,{})},33040:(e,t,a)=>{var i=a(23834);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(45346).Z)("3415697e",i,!0,{})}}]);